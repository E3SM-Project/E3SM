
Glimmer COMPILE file
====================

This version of the code has been sucessfully tested under the following 
compilers: Compaq Visual Fortran on Windows, the Intel, NAGWare and 
Portland Group compilers on Linux and the SUN f95 v 8.1 compiler on Solaris.

Prerequisites:
=============
* The netCDF library
  get it from here: http://www.unidata.ucar.edu/packages/netcdf/
  you need to make sure that the f90 bindings are also installed

Compiling under Windows:
=======================

Compilation using Compaq Visual Fortran can be achieved in the usual way,
setting up a workspace and importing the appropriate files. Remember to import
the SLAP library files as well as the files in the top-level directory. 

Before compilation, the following must be done:

1) Enable preprocessor
2) Define preprocessor symbol CVF

This will automatically compile the example file (example_glimmer.f90) and
link appropriately. However, for the model to run, the input files need to be
copied from the data directory into the working directory.


Compiling under Unix/Linux:
===========================

The ice sheet model now uses the GNU auto tools. Compiling the sources from a 
tarball distribution follows the usual sequence of commands:
./configure
make
make install
or 
make install-strip
to install the model without debugging symbols. There are a number of useful 
configure options:
--prefix=path where   the model should get installed
--with-netcdf=path    where netCDF is installed
--with-blas=libs      use these libraries to provide BLAS support, 
                      e.g. -lacml -lg2c
--enable-profiling    to add profiling options
run ./configure --help for more help

If you install the model from CVS you will need some additional programs such 
as python 2.3. The configure script is generated by running ./bootstrap. 
Then proceed with the sequence outlined above.

You can also build GLIMMER in a different build directory. This is useful if 
you want to compile GLIMMER for different architectures using the same sources.
You only need to run configure in the build directory, i.e. something like
/path/to/glimmer/sources/configure
make
make install
This does not work for building the documentation.

Compiling Glimmer as part of a larger climate model
===================================================

When using Glimmer with a climate model, compile the SLAP and Glimmer
libraries as described above. Link to them using the following compiler
options:

-L[path] -lglimmer -lslap

where [path] is the location of the library files (the glimmer/lib
directory, if they haven't been moved elsewhere.)

An additional compiler option will also be required so that the compiler can
find the .mod files. In come compilers this is done with the include path
specification -I[path]. By default, the .mod files are copied to the
glimmer/mod directory.

Remember that if you want to move the library files (libslap.a and
libglimmer.a), the .mod files need to be moved as well (or the compiler told
where to find them)

Using the Sun Grid Engine
=========================
The tar-ball distribution comes with a shell script wrapper suitable for
submitting a model run to cluster managed by the Sun Grid Engine scheduler.
Depending on your setup you might need to modify the submission script:
src/python/qsub_glide.sh

Tests
======
There are a few very basic tests in the tests directory. The idea is that these
tests should be very short so that it does not take too long to run these.
You can run the tests by running configure with the the flag --enable-tests.
