SVN $Id: ChangeLog 60240 2014-05-14 20:42:00Z mlevy@ucar.edu $
SVN $URL: https://svn-ccsm-models.cgd.ucar.edu/pop2/trunk_tags/cesm_pop_2_1_20140514/ChangeLog $
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, klindsay
Tag Date:    14 May 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140514
Tag Summary: OMP loop in ecosys_mod missing some private variable declarations

Files Modified:
M       source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, klindsay
Tag Date:    7 May 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140507
Tag Summary: "if (b4b_flag)" was being used rather than "if (.not. b4b_flag)"
             in 3 places leading to the wrong global reduction being used

Files Modified:
M       mpi/global_reductions.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    1 May 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140501
Tag Summary: Add default values to ecosys and ecosys_parms namelist variables
             (for documentation). Note that this still needs variable
             descriptions.

Files Modified:
M       bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  klindsay, mlevy
Tag Date:    29 Apr 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140429
Tag Summary: Add support for RCP4.5 and RCP8.5 ocean transients and set
             namelist defaults for BRCP45BDRD, BRCP85BDRD, and BRCP85BPRP
             compsets

Files Modified:
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  njn01, mlevy
Tag Date:    20 Apr 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140420a
Tag Summary: Update restart.F90 to allow POP to right restart mid-day

Files Modified:
M       source/restart.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    20 Apr 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140420
Tag Summary: Cleaned up whitespace in pop2.buildnml.csh (proper indentation to
             make script easier to read)

Files Modified:
M       bld/pop2.buildnml.csh
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, thoar
Tag Date:    14 Mar 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140314
Tag Summary: There was some un-necessary code for handling rpointer files in
             multi-instance cases. This tag also cleans up how the variable
             inst_string is determined (single print statement instead of
             several if statements to prepend 0s)

Files Modified:
M       bld/pop2.buildnml.csh
===============================================================================
Tag Creator: mlevy
Developers:  gokhan, ytseng
Tag Date:    1 Mar 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140301
Tag Summary: Units attribute of potential vorticity was incorrect in history
             files

Files Modified:
M       source/advection.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    28 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140228
Tag Summary: Despite fix in 20140227a tag, P_iron remin is still not always
             computed correctly (there was a bug in my bug fix)

Files Modified:
M       source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    27 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140227e
Tag Summary: New ecosys module wasn't broadcasting everything after reading
             namelist (also wasn't writing everything to screen)

Files Modified:
M       source/ecosys_parms.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    27 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140227d
Tag Summary: call to tfreez should be threaded (tfreez takes single block as
             input)

Files Modified:
M       source/forcing.F90
===============================================================================
Tag Creator: mlevy
Developers:  abaker, klindsay
Tag Date:    27 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140227c
Tag Summary: Diagnostic output in overflows wasn't printing proper overflow
             index

Files Modified:
M       source/overflows.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    27 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140227b
Tag Summary: overflows had a text field that was outputting ******* instead of
             proper diagnostic values

Files Modified:
M       source/overflows.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    27 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140227a
Tag Summary: P_iron remin is not always computed correctly

Files Modified:
M       source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    27 Feb 2014
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20140227
Tag Summary: Ecosys diagnostics didn't initialize P_iron%sed_loss to zero and
             had incorrect units for pfeToSed variable.

Files Modified:
M       source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  santos
Tag Date:    20 Dec 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131220
Tag Summary: Another bugfix related to updated compilers

Files Modified:
M       source/cfc_mod.F90
M       source/cfc11_mod.F90
M       source/tavg.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    5 Dec 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131205
Tag Summary: Fix a bug in the creation of pop2.input_data_list -- there is one
             binary file in the inputdata repository that requires a .hdr file
             and now the hdr file is pulled from the repository (when needed)
             by the check_input_data_script

Files Modified:
M       bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    2 Dec 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131202
Tag Summary: Update default values for ecosys

Files Modified:
M       source/ecosys_parms.F90
M       bld/namelist_files/namelist_defaults_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  santos
Tag Date:    26 Nov 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131126
Tag Summary: Getting POP ready for the xlf2003 compiler

Files Modified:
M       source/hmix_del2.F90
M       source/hmix_del4.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    21 Nov 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131121a
Tag Summary: Bugfix in ecosys module (see bugzilla #1866): Fe input was
             over-writing the atmospheric Fe flux instead of being added.

Files Modified:
M       source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  njn01
Tag Date:    21 Nov 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131121
Tag Summary: Splitting the option to use reduced Arctic diffusivity out of the
             near-interial wave mixing (use the larctic_bckgrnd_vdc namelist
             variable, default is .false.)

Files Modified:
M       source/vmix_kpp.F90
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop2.xml
M       bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: tcraig
Developers:  tcraig
Tag Date:    01 Nov 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131101
Tag Summary: Fix rpointer permissions on 20131028 modification

Files Modified:
M       bld/pop2.buildnml.csh
===============================================================================
Tag Creator: mlevy
Developers:  tcraig
Tag Date:    28 Oct 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131028
Tag Summary: Bugfix for re-running multi-instance from start of run (rather
             than from restart file) -- pointer files were not always set
             correctly.

Files Modified:
M       bld/pop2.buildnml.csh
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    25 Oct 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131025
Tag Summary: Bugfixes in ecosys params. In bugz, see
             1802 -- global Si balance
             1803 -- scale length inconsistency

             Also fixed some inconsistencies between default values set in POP
             in ecosys_parms.F90 and the default values build-namelist puts in
             pop2_in (the values in source have been modified to match the
             namelist defaults)

Files Modified:
M       source/ecosys_mod.F90
M       source/ecosys_parms.F90
M       bld/namelist_files/namelist_defaults_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  mvertens
Tag Date:    3 Oct 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20131003
Tag Summary: Removal of mct2esmf calls and bug fixes for the BPRP and BDRD
             compsets.

Files Modified:
M       drivers/cpl/ocn_comp_esmf.F90
M       drivers/cpl/ocn_comp_mct.F90
===============================================================================
Tag Creator: mlevy
Developers:  mvertens
Tag Date:    25 Sept 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130925
Tag Summary: Merge comptype branch, which updates the driver to reduce code
             reuse between the ESMF and MCT versions of the driver.

Files Modified:
 M      .
M       bld/pop2.buildexe.csh
D       drivers/cpl_share
D       drivers/cpl_share/POP_CplIndices.F90
D       drivers/cpl_mct
D       drivers/cpl_mct/POP_FinalMod.F90
D       drivers/cpl_mct/POP_MCT_vars_mod.F90
D       drivers/cpl_mct/ocn_communicator.F90
D       drivers/cpl_mct/ocn_comp_mct.F90
D       drivers/cpl_mct/POP_InitMod.F90
D       drivers/cpl_esmf
D       drivers/cpl_esmf/POP_FinalMod.F90
D       drivers/cpl_esmf/ocn_comp_esmf.F90
D       drivers/cpl_esmf/POP_MCT_vars_mod.F90
D       drivers/cpl_esmf/ocn_communicator.F90
D       drivers/cpl_esmf/ocn_comp_mct.F90
D       drivers/cpl_esmf/POP_InitMod.F90
 M      drivers/cpl_none
A  +    drivers/cpl
A  +    drivers/cpl/POP_FinalMod.F90
A  +    drivers/cpl/ocn_comp_esmf.F90
A  +    drivers/cpl/ocn_import_export.F90
A  +    drivers/cpl/POP_CplIndices.F90
A  +    drivers/cpl/POP_MCT_vars_mod.F90
A  +    drivers/cpl/ocn_communicator.F90
A  +    drivers/cpl/ocn_comp_mct.F90
A  +    drivers/cpl/POP_InitMod.F90
===============================================================================
Tag Creator: tcraig
Developers:  tcraig
Tag Date:    05 Sept 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130905
Tag Summary: Merge cplupa branch, ifdef ESMF attributes, rename coupling
             runoff fields, modify intent of coupling interface.

Files Modified:
M       drivers/cpl_share/POP_CplIndices.F90
 M      drivers/cpl_mct
M       drivers/cpl_mct/ocn_comp_mct.F90
M       drivers/cpl_esmf/ocn_comp_esmf.F90
 M      drivers/cpl_none
M       drivers/cpl_none/POP_CouplingMod.F90
===============================================================================
Tag Creator: mlevy
Developers:  jedwards
Tag Date:    18 July 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130718b
Tag Summary: Change in how build-namelist expands environment variables

Files Modified:
M            49248   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    18 July 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130718a
Tag Summary: Change to build-namelist to handle $OCN_TRACER_MODULE as an array
             rather than one big string.

Files Modified:
M            49243   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    18 July 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130718
Tag Summary: Fix to allow changes to domain_size.F90 and POP_DomainSizeMod.F90
             in SourceMods/src.pop2

Files Modified:
M            49241   bld/pop2.buildexe.csh
===============================================================================
Tag Creator: mlevy
Developers:  santos
Tag Date:    9 July 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130709a
Tag Summary: Three small changes to allow POP to build with intel's "-check
             bounds" flag (checking for out of bounds memory access)

Files Modified:
M            48833   source/vmix_kpp.F90
M            48833   source/hmix_gm.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, klindsay
Tag Date:    9 July 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130709
Tag Summary: Update to cfc fix implemented on Jan 28, 2013... that fix did not
             handle branch runs correctly (based iinit_cfc_option on STARTDATE
             rather than REFDATE)

Files Modified:
M            48822   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    21 May 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130521
Tag Summary: Another partial_bottom_cell bugfix: diagnostic output was computed
             incorrectly with partial bottom cells turned on.

Files Modified:
M            47358   source/advection.F90
M            47358   source/horizontal_mix.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    17 May 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130517
Tag Summary: Bugfix: split loops led to bad values of hfac_[tu] with partial
             bottom cells turned on.

Files Modified:
M            47278   source/vertical_mix.F90
===============================================================================
Tag Creator: mlevy
Developers:  jedwards
Tag Date:    15 May 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130515
Tag Summary: Bugfix: test on edison was giving "variable used without being
             defined" error relating to dz_loc.

Files Modified:
M            47175   source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    01 May 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130501
Tag Summary: Updating a namelist variable default value.

Files Modified:
M            46612   source/ecosys_parms.F90
M            46612   bld/namelist_files/namelist_defaults_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, njn01, tcraig
Tag Date:    26 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130426
Tag Summary: A couple of small changes to avoid "invalid tavg id" error in
             vertical_mix.F90 and an error relating to passing a variable
             that hasn't been allocated in diagnostics.F90.

Files Modified:
M       source/diagnostics.F90
M       source/vertical_mix.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlong
Tag Date:    25 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130425b
Tag Summary: New CFC dataset (not bit-for-bit with previous dataset)

Files Modified:
M            46408   bld/namelist_files/namelist_defaults_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  klindsay
Tag Date:    25 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130425a
Tag Summary: The best description is probably just to say this is version 2.0
             of ecosys_mod. There is no backwards compatibility, for ecosys
             version 1.0, use CESM 1.1.1 or CESM 1.0.5.

Tests:       Ran CECO compsets with T62_g16, f09_g16_rx1, and T31_g37_rx1
             resolutions. Also ran C compsets on T62_g16 and T31_g37_rx1 to
             check that non-ecosys modes were still bit-for-bit with the trunk
             (cesm1_2_alpha07b).Built and ran using pgi compiler to check
             multiple compilers.

Files Modified:
M            46396   source/ecosys_mod.F90
M            46396   source/co2calc.F90
M            46396   source/ecosys_parms.F90
M            46396   source/tavg.F90
M            46396   bld/build-namelist
M            46396   bld/pop2.buildexe.csh
M            46396   bld/namelist_files/namelist_defaults_pop2.xml
M            46396   bld/namelist_files/namelist_definition_pop2.xml
M            46396   input_templates/ocn.ecosys.tavg.csh
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    25 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130425
Tag Summary: Bugfix from a poorly constructed write statement

Files Modified:
M            46394   source/tavg.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    16 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130416
Tag Summary: A little cleanup following the addition of final_output

Files Modified:
M            46058   source/output.F90
M            46058   source/tavg.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    12 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130412
Tag Summary: Three separate bug fixes
             1) io_netcdf.F90 fixes issue with CECO + pnetcdf
             2) pop2.buildnml.csh cleans up remnants of a change made
                in 20120919 tag but removed in 20120927 tag (left one
                block of code in by mistake)
             3) rest of files are a fix that checks to see if any tavg
                stream files are still open at the end of the run and,
                if so, closes them.

Files Modified:
M       source/io_netcdf.F90
M       source/output.F90
M       source/tavg.F90
M       bld/pop2.buildnml.csh
M       drivers/cpl_mct/POP_FinalMod.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    03 April 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130403
Tag Summary: Remove epbal scale factor from mct and esmf drivers

Files Modified:
M            45561   drivers/cpl_mct/ocn_comp_mct.F90
M            45561   drivers/cpl_esmf/ocn_comp_esmf.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    12 March 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130312a
Tag Summary: Fix in build-namelist to properly name diag output in multi-
             instance runs, addition of ecosys_parms namelist to namelist
             definitions.

Files Modified:
M            44699   bld/build-namelist
M            44699   bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  njn01
Tag Date:    12 March 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130312
Tag Summary: Bring in Nancy's fixes for near-inertial wave work.

Files Modified:
M            44679   source/initial.F90
M            44679   source/vmix_kpp.F90
===============================================================================
Tag Creator: mlevy
Developers:  abaker
Tag Date:    25 February 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130225
Tag Summary: Bring in Allison Baker's overflow code.

Files Modified:
A       serial/mpi2s_gshalo.F90
A       serial/ovf_utils.F90
M       source/overflows.F90
M       source/initial.F90
M       source/step_mod.F90
M       source/timers.F90
M       source/advection.F90
M       source/blocks.F90
M       source/restart.F90
M       source/output.F90
A       source/pop_quicksort.F90
M       source/barotropic.F90
A       source/overflow_type.F90
M       source/baroclinic.F90
A       mpi/mpi2s_gshalo.F90
A       mpi/ovf_utils.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    30 January 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130130
Tag Summary: Another bug-fix for Tony's new decomposition work

Files Modified:
M            43608   source/POP_DistributionMod.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    28 January 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130128a
Tag Summary: Typo in comment regarding cfc namelist options

Files Modified:
M            43549   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, klindsay
Tag Date:    28 January 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130128
Tag Summary: Keith Lindsay found a bug in the cfc namelist script dating back
             to at least CCSM 4.0. Basically, cfcs were being set to zero for
             hybrid and branch runs in transient cases for all start dates,
             while they should have non-zero values after 1930.

Testing:     Keith provided me with a working version of ocn.cfc.setup.csh for
             1.0.5, I ported the changes to build-namelist and ensured the
             namelists I generated in 1.1.1 matched his 1.0.5 namelists.

Files Modified:
M            43549   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    18 January 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130118
Tag Summary: The blockone decomposition Tony introduced was causing issues
             with 30 ocean tasks and the gx3v7 resolution. As a workaround
             I hard-coded decompositions for 30 procs in pop_decomp.xml

Notes:       The blockone code can handle 15 ocean tasks, but I found that
             adding a decomposition to pop_decomp.xml (blocks of 20x39 cells
             with 5x3 layout of blocks over the tasks) was faster. In the
             interest of not changing too much, I did not add this "better"
             decomposition... but it should be the starting point of a
             discussion. Similarly, a hard-coded 45 task decomposition
             (blocks of 20x13 with 5x13 layout of blocks over the tasks) ran
             roughly the same speed as a blockone 45 task decomposition but
             since blockone could handle 45 tasks i did not include my
             decomposition in pop_decomp.xml.

Files Modified:
M            43399   bld/pop_decomp.xml
===============================================================================
Tag Creator: mlevy
Developers:  bates, gokhan, ytseng
Tag Date:    15 January 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130115
Tag Summary: Yu-heng found a bug in how the diagnostic quantity RHO_VINT is
             calculated.
             
Testing:     Gokhan implemented a fix in cesm1_1_beta01 (using pop tag from
             May 2011), Susan tested the fix, and then I patched the latest
             trunk / ensured that it still builds.

Files Modified:
M            43323   source/baroclinic.F90
===============================================================================
Tag Creator: mlevy
Developers:  tcraig
Tag Date:    11 January 2013
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20130111
Tag Summary: Brought in Tony's blockone decomposition. If you do not use a
             decomposition supported in bld/pop_decomp.xml, build-namelist
             will compute a decomposition rather than erroring out.

Testing:     Showed that this is bit-for-bit out-of-the-box with a C compset
             and both the ne30_g16 and ne120_t12 resolutions (using NTASKS_OCN
             set by create_newcase). Also showed that non-default task counts
             that were previously unsupported do not change the answer more
             than other supported decompositions. For ne120_t12, that involved
             running with NTASK_OCN = 1024 (default), 960 (supported in
             pop_decomp.xml), as well as both 1025 and 1230 (both required
             intervention by blockone).

Files Modified:
M            43193   source/POP_DistributionMod.F90
M            43193   source/distribution.F90
M            43193   source/domain.F90
M            43193   bld/README.build-namelist
M            43193   bld/generate_pop_decomp.pl
M            43193   bld/namelist_files/namelist_defaults_pop2.xml
M            43193   bld/namelist_files/namelist_definition_pop2.xml
 M           43193   drivers/cpl_mct
 M           43193   drivers/cpl_none
 M           43193   .
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    14 November 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20121114
Tag Summary: Bug introduced in tavg.F90 that prevents building... arguments
             to date_and_time() were incorrect in tavg_add_attrib_file_ccsm
             routine

Testing:     Built a C compset to ensure code compiles and runs, made sure
             updated source was included in test.

Files Modified:
M            41938   source/tavg.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    13 November 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20121113
Tag Summary: Rather than call date_and_time() on every process, call it on
             master_task and broadcast it to rest (this is needed to avoid
             issues in parallel output since date_and_time() provides the
             timestamp used in netcdf attribute so it needs to be the same
             on all tasks)

Testing:     Built a C compset to ensure code compiles and runs

Files Modified:
M            41884   source/movie.F90
M            41884   source/history.F90
M            41884   source/tavg.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    23 October 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20121023
Tag Summary: Adding to error output when ice runoff is negative -- printing the
             min value to see if the negative runoff is near round-off level or
             if it is a significant negative value.

Testing:     Built a C compset to ensure code compiles, still need to trigger the
             error and make sure formatting is legible.

Files Modified:
M            41224   drivers/cpl_mct/ocn_comp_mct.F90

===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    19 October 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20121019
Tag Summary: Coupling every 30 minutes caused problems in how build-namelist set
             up time_manager_nml (ihour0 = 0.5 is bad when ihour is an integer).
             This update moves the logic for computing coupled_freq up to when
             we read in XML variables and then computes iyear0, imonth0, iday0,
             ihour0, iminute0, and isecond0 properly.

Files Modified:
M            41161   bld/build-namelist
M            41161   bld/namelist_files/namelist_defaults_pop2.xml

===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    18 October 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20121018
Tag Summary: build-namelist didn't know how to handle coupling every 30 minutes
             (by default, couple_freq_opt was always 'nhour' and couple_freq was
             1,2,3,4,6,8,12, or 24... setting OCN_NCPL=48 in env_run was not
             supported). Now build-namelist behaves similarly to the driver
             build-namelist in order to determine how frequently pop will need
             to communicate with the coupler.

Files Modified:
M            41138   bld/build-namelist
M            41138   bld/namelist_files/namelist_defaults_pop2.xml

===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    27 September 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120927
Tag Summary: Tag from Sept 19 caused problems with ER* tests. It's complicated,
             but the first problem was copying rpointer.ocn.init with the rest
             of the rpointer files when cloning a case. Then it turned out that
             the lack of an rpointer.ocn.init file should lead to reading the
             init_ts_file_fmt from rpointer.ocn.restart rather than defaulting
             to bin... and around this time Tony Craig pointed out that right
             now users are told that they need ALL rpointer files from a ref
             run, so it's confusing to say "except rpointer.ocn.init". Long
             story short, we decided that the best solution was to remove
             rpointer.ocn.init and just get init_ts_file_fmt from wherever
             the reference data is. Eventually we will prestage before running
             pop2.buildnml.csh and none of this will matter because we will
             have the correct rpointer.ocn.restart file in $RUNDIR. Until then,
             this seems like a better solution than the one implemented on the
             19th.

Testing:     Ran ERI_PT.B1850CN test that had been falling with the Sep 19 tag,
             it now passes. Also repeated the test from the 19th to ensure the
             bug fixed then did not creep back in.

Files Modified:
M            40575   bld/pop2.buildnml.csh
M            40575   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    26 September 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120926
Tag Summary: Main task - updating diags_on_lat_aux_grid to handle outputting
             tavg streams when OCN_PIO_ROOT is not master_task. Additionally,
             added a handful of POP_IOUnitsFlush calls to aid in debugging.

Testing:     Keith Lindsay pointed out that running a G1850ECO compset on
             bluefire with OCN_PIO_ROOT = -99 failed. So I ran the same compset
             with OCN_PIO_ROOT = 0, saved the history files, and then ensured
             that using OCN_PIO_ROOT = -99 returns bit-for-bit results.

Files Modified:
M            40429   source/diags_on_lat_aux_grid.F90
M            40410   source/io_pio.F90
M            40410   source/diag_bsf.F90
M            40410   source/tavg.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    19 September 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120919
Tag Summary: Bugfix - re-running a hybrid or branch run (not continuing the
             run, but starting over) used to have a problem determining the
             file format for the initial conditions, this tag fixes that.

Testing:     Ran a hybrid run for 5 days, re-ran it (used to error out but now
             works), set CONTINUE_RUN to TRUE, ran for 5 days, and then set
             CONTINUE_RUN back to FALSE and re-ran it one more time. Also built
             a regular C case (startup, not hybrid).

Files Modified:
M            40384   bld/pop2.buildnml.csh
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    29 August 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120829
Tag Summary: More updates to build-namelist -- 4 more variables (all are F90
             derived types) that exist in multiple namelists were moved updated
             in the namelist_definition and namelist_defaults file to ensure
             they can be edited in user_nl_pop2.

                 tracer_init_ext (iage_nml, cfc_nml, ecosys_nml)
                 gas_flux_fice (cfc_nml, ecosys_nml)
                 gas_flux_ws (cfc_nml, ecosys_nml)
                 gas_flux_ap (cfc_nml, ecosys_nml)

             This also lead to changes in how build-namelist handles variables
             in the "derived" group. Most changes were of the behind-the-scenes
             variety, but one big difference is that the add_default() routine
             can handle derived types on its own. Specifically,

                 add_default($nl, 'rich_mix&vmix_rich_nml');
                 $derived = $nl->get_value('rich_mix&vmix_rich_nml');
                 $nl->set_value('vmix_rich_nml', 'rich_mix', "$derived");

             has been replaced with the much simpler

                 add_default($nl, 'rich_mix&vmix_rich_nml');

             Additionally, I noticed a typo in the comments of user_nl_pop2.

Testing:     Built C, CECO, and B20TRBDRD testcases with new build-namelist,
             compared pop2_in to old version. Also used user_nl_pop2 to add
             changed variables (see above)

Files Modified:
M            39824   bld/user_nl_pop2
M            39824   bld/build-namelist
M            39824   bld/namelist_files/namelist_defaults_pop2.xml
M            39824   bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    28 August 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120828
Tag Summary: Updated how build-namelist reads user_nl_pop2. You can now
             specify a namelist with entries like

                 var_name&namelist_name_nml = value

             whether var_name appears in multiple namelists or not. I also
             updated the namelist definition file to remove definitions for
             variables that appear in multiple namelists -- the derived types
             should be the only entries. I still need to update the definitions
             for tracer module variables appearing in multiple namelists and
             edit scripts/doc/nldef2html_pop2 to produce correct documentation

Testing:     Built C testcase with new build-namelist, compared pop2_in to
             old version

Files Modified:
M            39779   bld/build-namelist
M            39779   bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  mvertens, mlevy
Tag Date:    24 August 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120824
Tag Summary: 1) the scripts/ directory has changed; the biggest effect to POP
                is moving some set up from Buildconf/configure to the
                pop2.buildnml.csh script. Also changes $OBJROOT to $EXEROOT in
                a few places. Note: to set up a new case, run "./setup" from
                $CASEROOT rather than "./configure -case"
             2) Nancy and Gokhan asked me to update error message associated
                with using linertial = .true.
Testing:     Built C compset using new scripts.

Files Modified:
M            39666   source/initial.F90
M            39666   bld/pop2.buildnml.csh
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    16 August 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120816
Tag Summary: Updated build-namelist to suppress "file status unknown" warnings
             in prestage when variables named *_file have non-file values. The
             change effects how the following four namelist values are treated:
               * init_iage_file = 'same_as_TS'
               * bottom_cell_file = 'unknown_bottom_cell'
               * tidal_energy_file = 'unknown_tidal_mixing'
               * niw_energy_file = 'unknown_niw_energy'
             I think those are the only four that could cause this kind of error
             but if more crop up it's a simple update to fix.
Testing:     Still successfully built, errors in prestage are gone.

Files Modified:
M            39490   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    18 July 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120718
Tag Summary: * Primary purpose: more updates to new build system (mostly adding
               documentation to namelist_definitions_pop2.xml, but also moving
               some values calculated directly in build-namelist to the defaults
               file).
             * Additional development: Increased max_avail_tavg_fields to 2000
               in tavg.F90 to remove -DCESMMOBY from build system; fixed a typo
               in a comment in passive_tracers.F90
Testing:     Compared namelist / output from a simple C-compset output, also
             checked default namelists built in CECO and B20TRBPRP compsets.

Files Modified:
M            38795   source/passive_tracers.F90
M            38795   source/tavg.F90
M            38795   bld/build-namelist
M            38795   bld/pop2.buildexe.csh
M            38795   bld/namelist_files/namelist_defaults_pop2.xml
M            38795   bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  njn01, bruceb, markus
Tag Date:    12 July 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120712
Tag Summary: * Primary purpose: added near-inertial wave (NIW)  mixing code. Modified
               scripts to support the NIW option.
             * Additional development: added definition to grid.F90 to define TLAT &
               TLONG in degrees (TLATD, TLOND), then replaced code in several modules
               to reference the new variables.
Testing:     Many special-purpose tests (njn01; see NJN test log for details)
            
Note:        Default setting is lniw_mixing = .false. for now

Files Modified:
M            38645   source/initial.F90
M            38645   source/diags_on_lat_aux_grid.F90
M            38645   source/grid.F90
M            38645   source/vmix_kpp.F90
A                0   source/niw_mixing.F90
M            38645   source/vertical_mix.F90
M            38645   source/cfc_mod.F90
M            38645   source/ms_balance.F90
M            38645   source/tavg.F90
M            38645   source/baroclinic.F90
M            38645   bld/build-namelist
M            38645   bld/namelist_files/namelist_defaults_pop2.xml
M            38645   bld/namelist_files/namelist_definition_pop2.xml
A                0   input_templates/gx1v6_niw_tavg_contents
M            38645   drivers/cpl_mct/ocn_comp_mct.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    29 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120629
Tag Summary: Bug fix courtesy of Mat Maltrud (call to accumulate_tavg_field
             needs tavg_TFW_S, not tavg_TFW_T). Affects freshwater boundary.

Files Modified:
M            38312   source/forcing.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    25 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120625
Tag Summary: Updated PIO calls at request of Jim Edwards

Files Modified:
M            38119   source/io_pio.F90
M            38119   source/moby_mod.F90
M            38119   source/io_netcdf.F90
M            38119   source/ecosys_mod.F90
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    14 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120614
Tag Summary: Started the process of including documentation in the namelist
             definitions file, which also lead to changing a few examples in
             the README file. There will be at least one more tag with updates
             to the definitions file, but I want to make sure the first batch
             makes it into cesm1_1_beta16 (rest will probably be in beta17).

Files Modified:
M            38013   bld/namelist_files/namelist_definition_pop2.xml
M            37975   bld/README.build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    12 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120612
Tag Summary: Fix a bug in pop2.buildnml.csh that broke $CASE.build and a bug
             in build-namelist that broke tavg streams for tracer modules.
             Also changed default values for renormalization vectors to actual
             vectors (except for shf_data_renorm, where default value doesn't
             match the documentation), and adding documentation to all forcing
             namelists.

Files Modified:
M            37975   bld/namelist_files/namelist_defaults_pop2.xml
M            37975   bld/namelist_files/namelist_definition_pop2.xml
M            37996   bld/pop2.buildnml.csh
M            37996   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    11 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120611
Tag Summary: Allow build-namelist and namelist_defaults_pop2.xml to be modified
             in SourceMods/src.pop2/. Required adding optional cfg_dir flag to
             build-namelist and passing it from pop2.buildnml.csh if a copy
             of build-namelist is found in the SourceMods/ directory.

Files Modified:
M            37975   bld/pop2.buildnml.csh
M            37975   bld/build-namelist
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    10 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120610
Tag Summary: Big change -- namelist variables that appear in multiple namelists
             are now set use var_name&var_nml instead of var_name%var_nml in
             user_nl_pop. Also added a check to ensure that these variables are
             entered correctly in user_nl_pop (before var_name = val would not
             error out, but also won't change anything in pop2_in) and made the
             "-preview" flag in build-namelist functional -- it will print out
             "var_name = value in &var_nml" for every entry in user_nl_pop2.
             Lastly, updated the documentation in both README.build-namelist
             and the comments of user_nl_pop2, and started adding documentation
             to the namelist_definitions file (for Brian Eaton's XML -> HTML
             converter.)

Files Modified:
M            37926   bld/README.build-namelist
M            37926   bld/user_nl_pop2
M            37926   bld/build-namelist
M            37926   bld/namelist_files/namelist_defaults_pop2.xml
M            37926   bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, mvertens
Tag Date:    08 June 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120608
Tag Summary: Lots of improvements to the build-namelist setup. Brian Eaton
             updated the perl libraries, so build-namelist has better support
             for arrays (including arrays of derived types) in the definitions
             file. I also made sure every variable in &ecosys_nml appears in
             the definitions file (including every component of any variables
             that are of derived type). Additionally, I cleaned up the way
             some variables in the cfc namelist are added (they now use the
             defaults file instead of having logic in build-namelist). Lastly,
             I added a hook to be able to pass build-namelist a "-preview" flag,
             which will soon enable users to see exactly how variables in
             user_nl_pop2 are being handled by the script when they run
             preview_namelists (without increasing output from $CASE.build).

Testing:     Compared namelists build for a variety of compsets that use pop2

Files Modified:
M            37920   bld/pop2.buildnml.csh
M            37920   bld/build-namelist
M            37920   bld/namelist_files/namelist_defaults_pop2.xml
M            37920   bld/namelist_files/namelist_definition_pop2.xml
===============================================================================
Tag Creator: mlevy
Developers:  mlevy, mvertens, njn01
Tag Date:    30 May 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120530
Tag Summary: Merge bldnml branch onto trunk. This is the culmination of the
             effort to get every CESM component using the build-namelist script.
             Nancy helped ensure that the moby support she was adding to the
             trunk was not lost in this update.

Testing:     Documented in branch_tags/bldnml_tags/, but basically ensured that
             namelists generated with this system were identical to old ones and
             that output remained bit-for-bit.

M            37544   source/POP_SolversMod.F90
M            37544   source/moby_mod.F90
A  +             -   bld/pop2.buildnml.csh
D            37544   bld/moby.cpl7.template
M            37544   bld/pop_decomp.xml
A  +             -   bld/README.build-namelist
A  +             -   bld/user_nl_pop2
M            37544   bld/generate_pop_decomp.pl
A  +             -   bld/build-namelist
A  +             -   bld/pop2.buildexe.csh
M            37544   bld/pop2.cpl7.template
A  +             -   bld/namelist_files
A  +             -   bld/namelist_files/namelist_defaults_pop2.xml
A  +             -   bld/namelist_files/namelist_definition_pop2.xml
M            37544   input_templates/test_domain_size.F90
D            37544   input_templates/ocn.iage.setup.csh
M            37544   input_templates/tx0.1v2_domain_size.F90
M            37544   input_templates/tx0.1v2_POP_DomainSizeMod.F90
D            37544   input_templates/pop2_tavg_nml.csh
D            37544   input_templates/gx3v5_inputdata
D            37544   input_templates/gx3v7_inputdata
D            37544   input_templates/ocn.ecosys.setup.csh
D            37544   input_templates/pop2_in_build.csh
M            37544   input_templates/gx1v6_POP_DomainSizeMod.F90
M            37544   input_templates/tx1v1_POP_DomainSizeMod.F90
D            37544   input_templates/tx0.1v2_inputdata
D            37544   input_templates/ocn.moby.setup.csh
A  +             -   input_templates/ocn.iage.tavg.csh
A  +             -   input_templates/ocn.base.tavg.csh
D            37544   input_templates/gx1v6_inputdata
D            37544   input_templates/ocn.cfc.setup.csh
A  +             -   input_templates/ocn.cfc.tavg.csh
D            37544   input_templates/ocn.cfc11.setup.csh
M            37544   input_templates/gx1v6_domain_size.F90
M            37544   input_templates/gx3v5_domain_size.F90
D            37544   input_templates/tx1v1_inputdata
M            37544   input_templates/gx3v7_domain_size.F90
A  +             -   input_templates/ocn.ecosys.tavg.csh
A  +             -   input_templates/ocn.moby.tavg.csh
M            37544   input_templates/tx1v1_domain_size.F90
M            37544   input_templates/gx3v5_POP_DomainSizeMod.F90
M            37544   input_templates/gx3v7_POP_DomainSizeMod.F90
 M           37544   drivers/cpl_mct
 M           37544   drivers/cpl_none

===============================================================================
Tag Creator: njn01
Developers:  njn01
Tag Date:    27 March 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120327
Tag Summary: * change name in ocn.moby.setup.csh script (MOBY_CO2_FLUX --> FG_CO2)
             * configure streams in manner equivalent to what is done in ecosys_mod,
                 where possible
             * only write tavg qflux stream info from master_task
               
Testing:     * Ran customized tests from the cesm1_1_beta09.20120327-114702 sandbox

Files Modified:
M            35814   source/tavg.F90
M            35814   input_templates/ocn.moby.setup.csh

===============================================================================
Tag Creator: njn01
Developers:  njn01
Tag Date:    20 March 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120320
Tag Summary: * Bring the last of the moby infrastructure onto the pop2 trunk. Active moby developments
               are NOT on the pop2 trunk.

Testing:     * In a cesm1_1_beta09 base-model sandbox, modified only the pop2.cpl7.template script and
               ran the bluefire.pop2.auxtest test suite.
             * Separately, in the cesm1_1_beta09+++ sandbox, tested C, CDARWIN, C-then-activate-moby,
               and CDARWIN-the-deactivate-moby tests. See moby ChangeLog for info.

Files Modified:
A                0   bld/moby_activate.csh
A                0   bld/moby.cpl7.template
A                0   bld/moby_deactivate.csh
M            35426   bld/pop2.cpl7.template
A                0   input_templates/ocn.moby.setup.csh
===============================================================================
Tag Creator: njn01
Developers:  njn01
Tag Date:    12 March 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120312
Tag Summary: * correction to tavg.F90 (the cesm_pop_2_1_20120125 tavg bugfix
                    was overwritten in the cesm_pop_2_1_20120308 tag)
             * bring MOBY branch bld/*decomp* and drivers/cpl_mct/ocn_comp_mct.F90 files onto pop2 trunk

Testing:     * In a cesm1_1_beta09 base-model sandbox, created & ran C, T62_gx1v6 cases using
               cesm_pop_2_1_20120125 and this tag. Compiled and ran 6-day smoke tests and
               differenced the ocean restart and history files: b4b.
             * Ditto for CECO, except run for one month, then difference restart & history files: monthly
                  restart, base-model history, ecosys nday history files are all b4b.

Files Modified:
M            35393   source/tavg.F90   <--- re-introduce bugfix from cesm_pop_2_1_20120125
M            35393   bld/pop_decomp.xml                 <-- add MOBY hooks
M            35393   bld/generate_pop_decomp.pl         <-- add MOBY hooks
M            35393   drivers/cpl_mct/ocn_comp_mct.F90   <-- added save statement and zeroed out work array

===============================================================================
Tag Creator: njn01
Developers:  njn01
Tag Date:    8 March 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120308
Tag Summary: Add MOBY "hooks" to the pop2 base model
             This tag brings in modified pop2/source files that contain MOBY
             modifications, plus a "stub" version of moby_mod.F90. 

             This is the first of two steps towards bringing support for MOBY
             onto the pop2 trunk (without bringing the actual MOBY darwin code in).
             The second step will be to add a revised version of pop2.cpl7.template,
             moby.cpl7.template, and ocn.moby.setup.csh scripts that are compatible
             with the new namelist-build scripts, which will be done by Mariana
             Vertenstein.

Testing:     In a cesm1_1_beta09 sandbox, created & ran C, T62_gx1v6 case; compared
             with cesm1_1_beta09 oob.  New code compiles & runs; ocean restart
             files are b4b.

Files Modified:
M            35316   source/passive_tracer_tools.F90
M            35316   source/step_mod.F90
M            35316   source/forcing.F90
A                0   source/moby_mod.F90
M            35316   source/passive_tracers.F90
M            35316   source/exit_mod.F90
M            35316   source/tavg.F90
M            35316   source/baroclinic.F90
M            35316   source/domain.F90
A                0   source/moby_parms.F90
M            35316   drivers/cpl_mct/POP_FinalMod.F90

===============================================================================
Tag Creator: njn01
Developers:  njn01
Tag Date:    25 January 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120125
Tag Summary: Bugfix for N_HEAT, N_SALT tavg computation
             This is a bugfix for a minor error in the tavg.F90 module
             in the determination of the averaging method for N_HEAT and
             N_SALT.  In the out-of-the-box configuration, this bug was
             confirmed to have zero effect on the solutions. In modified
             configurations (eliminated some fields from tavg_contents),
             the bug caused the model to exit abnormally.

Testing:     With and without the bugfix, bluefire, cesm1_1_beta08. Diff'd
             N_HEAT, N_SALT daily averages (single precision) -- zero diffs.

Files Modified:
M            34058   source/tavg.F90
===============================================================================
Tag Creator: tcraig
Developers:  tcraig,pw
Tag Date:    23 January 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120123
Tag Summary: update esmf calls to esmf 520r standard.
             add support for multi-instance runs with esmf coupling interfaces.
             fix timer issue when writing output during run (pw).

Testing: 
             tested in a beta09a sandbox on bluefire (prealpha and prebeta) and 
             lynx (prealpha)

Files Modified:
M       source/timers.F90
M       drivers/cpl_mct/ocn_comp_mct.F90
M       drivers/cpl_esmf/ocn_comp_esmf.F90
M       drivers/cpl_esmf/ocn_comp_mct.F90
===============================================================================
Tag Creator: njn01
Developers:  njn01
Tag Date:    12 January 2012
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20120112
Tag Summary: Corrected a bug in the pop2.cpl7.template that was introduced
             with multiple instantiation support.  This bug caused cloned
             cases to incorrectly point to the original case directory when
             creating pop2_in during the execution of pop2.buildnml.csh,
             rather than to its own case directory.
           
svn diff:
 if (\$NINST_OCN == 1) then    
    set ocn_inst_string = ''
-   setenv POP2_IN       $POP2_DOCDIR/document_pop2_in
+   setenv POP2_IN      \$POP2_DOCDIR/document_pop2_in
    setenv output_r      ./\$CASE.pop.r
    setenv output_h      ./\$CASE.pop.h
    setenv output_d      \$rundir/\$CASE.pop.d
@@ -483,7 +483,7 @@
    if (\$ocn_inst_counter <=  99) set ocn_inst_string = 0\${ocn_inst_string}
    if (\$ocn_inst_counter <=   9) set ocn_inst_string = 0\${ocn_inst_string}
    set ocn_inst_string = _\${ocn_inst_string}
-   setenv POP2_IN       $POP2_DOCDIR/document_pop2_in_\${ocn_inst_counter}
+   setenv POP2_IN      \$POP2_DOCDIR/document_pop2_in_\${ocn_inst_counter}
    setenv output_r      ./\$CASE.pop\${ocn_inst_string}.r
    setenv output_h      ./\$CASE.pop\${ocn_inst_string}.h
    setenv output_d      \$rundir/\$CASE.pop\${ocn_inst_string}.d

Testing: 
          None at this point. Will hand off testing to someone else?
Files Modified:
M            32802   bld/pop2.cpl7.template
===============================================================================
Tag Creator: tcraig
Developers:  1) tcraig
Tag Date:    10 December 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111210
Tag Summary: Modified pop2.cpl7.template to restart file format
             setting associated with the rpointer files for
             multi-instance mode.
Testing: 
          Test (tcraig):
             tested with alpha07c (w/ pop 20111206) + mod, could
               not test with 20111209 due to dependencies on other
               model changes NOT in alpha07c.
             bluefire: ERS_N2.f19_g16.B20TRC5CN
             bluefire: bluefire.prealpha
          Results:
             fixes ERS_N2 test cases, all results bfb for other tests.
             
Files Modified:
M       bld/pop2.cpl7.template

===============================================================================
Tag Creator: mvertens
Developers:  1) mvertens
Tag Date:    09 December 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111209
Tag Summary: Modified files to change the field names to be consistent with
             drvseq4_0_11

Foxx_snow  -> Faxa_snow
Foxx_rain  -> Faxa_rain
Foxx_lwdn  -> Faxa_lwdn 
Foxx_melth -> Fioi_melth 
Foxx_meltw -> Fioi_meltw 
Foxx_salt  -> Fioi_salt

Testing: 
Ran all bluefire and lynx prebeta tests and showed that the history files
were identical with and without the upcoming beta08 changes. The only exception
was debug tests on bluefire that were roundoff level different in pop. The same
debug tests when run without debugging were bfb the same.

Files Modified:
M       drivers/cpl_share/POP_CplIndices.F90
M       drivers/cpl_mct/ocn_comp_mct.F90
M       drivers/cpl_esmf/ocn_comp_esmf.F90


===============================================================================
Tag Creator: tcraig
Developers:  1) tcraig
Tag Date:    06 December 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111206
Tag Summary: Modified pop2.cpl7.template to address missing rpointer
             file for multi-instance cases when starting from a 
             restart set from an earlier non-multi-instance case.
             this just requires duplicating the rpointer files to
             the appropriate multi-instance names.
Testing: 
          Test (tcraig):
             bluefire: cesm prealpha and prebeta suites
             lynx_pgi: cesm prealpha suite
             bluefire: various NCK and ERS_N2 test cases
          Results:
             fixes problesm in NCK and ERS_N2 test cases, all results
             bfb for other tests.
             
Files Modified:
M       bld/pop2.cpl7.template

===============================================================================
Tag Creator: njn01
Developers:  1) njn01,klindsay
Tag Date:    01 December 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111201
Tag Summary: Replace dimensioned arrays with assumed-shape arrays in ecosys_mod.F90,
             in order to work around a subtle compiler issue (detected by an intel compiler)
             which occurs when the ecosys_mod and any other passive-tracer module with
             more than two (or three, in our default setup) tracers is compiled and
             'ecosys' is not active.
Testing: 
          Test (njn01):
             T62_gx3v7, bluefire, 2-month ER, manual setup with binary restart file compare
                 at end of Feb
             case1 = C, oob
             case2 = C, with new ecosys_mod.F90
             case3 = CECO, oob
             case4 = CECO, with new ecosys_mod.F90
          Results:
             case1 b4b with case2; case3 b4b with case4
          Test (jedwards): Intel compiler
          Results: no complaints
             
Files Modified:
M            31647   source/ecosys_mod.F90

===============================================================================
Tag Creator: njn01
Developers:  1) njn01 2) klindsay
Tag Date:    09 November 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111109
Tag Summary: 1) Change restart file fmt from 'bin' to 'nc' because list-directed
                  i/o is not b4b on some platforms
             2) Modify global sum routines so that automated 1x2 threading test is b4b, and
                instrument the POP_ReductionsMod module s.t. it responds to the "b4b"
                option in the same way as the global_sum routines in global_reductions.
                This second part allows for (non-automated) comparisons of certain
                threading vs non-threading test cases, such as 1x4, 4x1, 2x2; it is not
                totally general.
_________________________________________________________________________________________

From Keith Lindsay:
all mods are b4b if NTHRDS_OCN=1

global_reductions.F90:
    ensure (1 task, 2 threads) is b4b with (2 tasks, 1 thread),
    if both built with BUILD_THREADED=TRUE

POP_ReductionsMod.F90, initial.F90:
    ensure (m1 tasks, n1 threads) is b4b with (m2 tasks, n2 threads),
    if m1*n1 = m2*n2, i.e. same number of blocks, BUILD_THREADED=TRUE,
    and b4b_flag=.true. in context_nml
    This has an unquantified performance hit for large block counts.
_________________________________________________________________________________________
            
Testing: 1) Diane Feddema (2011-11-08): 
            when restart format is 'nc' tests on lynx are b4b; when it is 'bin', they are not.
         2) Keith Lindsay (2011-11-08):
bluefire, CECO, T62_gx3v7:
25 day runs, comparing binary ocean restart files at end of run

    (2 tasks, 1 thread) prev = (2 tasks, 1 thread) new
                             = (1 task, 2 threads) new

    (4 tasks, 1 thread) prev = (4 tasks, 1 thread) new

with b4b_flag set
    (4 tasks, 1 thread) new  = (2 tasks, 2 threads) new
                             = (1 task, 4 threads) new

bluefire, B1850BPRP, T31_gx3v7:
5 day runs, comparing binary ocean restart files at end of run

    (2 tasks, 1 thread) new = (1 task, 2 threads) new
_________________________________________________________________________________________
Files Modified:
1) pop2_in_build.csh
2) global_reductions.F90, POP_ReductionsMod.F90, initial.F90
M            31647   source/initial.F90
M            31647   mpi/POP_ReductionsMod.F90
M            31647   mpi/global_reductions.F90
M            31647   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01
Tag Date:    03 November 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111103
Tag Summary: Bug fix: TPOWER history-file units were incorrect.
             were: erg/s  should be: erg/s/cm^3
Testing: none

Files Modified:
M            31647   source/vmix_kpp.F90

===============================================================================
Tag Creator: jedwards
Tag Date:    01 November 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20111101
Tag Summary: Bug fix for in overflows for gfortran, additional decomp for tx0.1
Testing: jedwards



Files Modified:
        M            source/overflows.F90
        M            bld/pop_decomp.xml
        M            mpi/gather_scatter.F90 (workaround for cray/gemini performance issue)

PASS  ERS.T62_g16.CIAF.bluefire 
PASS  ERS.T62_g16.CIAF.bluefire.compare_hist.cesm1_1_alpha05a 
PASS  ERS.T62_g16.CIAF.bluefire.compare.cesm1_1_alpha05a 
PASS  ERT_PT.T62_g16.GIAF.bluefire 
PASS  ERT_PT.T62_g16.GIAF.bluefire.compare_hist.cesm1_1_alpha05a 
PASS  ERT_PT.T62_g16.GIAF.bluefire.compare.cesm1_1_alpha05a 


===============================================================================
Tag Creator: mvertens
Tag Date:    03 August 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110803
Tag Summary: added multiple instance capability
Testing: mvertens
             cesm1_1_beta01 - with modified pop and cice4_0_20110803

PASS  ERS.T62_g16.CIAF.bluefire 
PASS  ERS.T62_g16.CIAF.bluefire.compare_hist.cesm1_1_alpha01a 
PASS  ERS.T62_g16.CIAF.bluefire.compare.cesm1_1_alpha01a 
PASS  ERS.T62_g37.G.bluefire 
PASS  ERS.T62_g37.G.bluefire.compare_hist.cesm1_1_alpha01a 
PASS  ERS.T62_g37.G.bluefire.compare.cesm1_1_alpha01a 
PASS  ERS.T62_s11.G.bluefire 
PASS  ERS.T62_s11.G.bluefire.compare_hist.cesm1_1_alpha01a 
PASS  ERS.T62_s11.G.bluefire.compare.cesm1_1_alpha01a 
PASS  ERT_PT.T62_g16.GIAF.bluefire 
PASS  ERT_PT.T62_g16.GIAF.bluefire.compare_hist.cesm1_1_alpha01a 
PASS  ERT_PT.T62_g16.GIAF.bluefire.compare.cesm1_1_alpha01a 
PASS  PET_PT.T62_g16.G.bluefire 
PASS  PET_PT.T62_g16.G.bluefire.compare.cesm1_1_alpha01a 
PASS  SMS_D.T62_s11.G.bluefire 
PASS  SMS_D.T62_s11.G.bluefire.compare_hist.cesm1_1_alpha01a 
PASS  SMS_D.T62_s11.G.bluefire.compare.cesm1_1_alpha01a 
PASS  CME.T62_g37.G.bluefire 
PASS  CME.T31_g37.B1850CN.bluefire 

Files Modified:
M            29392   source/io_pio.F90
M            29392   source/POP_ConfigMod.F90
M            29392   source/io_types.F90
M            29392   source/io_netcdf.F90
M            29392   source/ecosys_mod.F90
M            29392   source/POP_IOUnitsMod.F90
M            29437   bld/pop2.cpl7.template
M            29392   ChangeLog
M            29437   input_templates/pop2_in_build.csh
M            29392   drivers/cpl_mct/ocn_comp_mct.F90
M            29392   drivers/cpl_esmf/ocn_comp_esmf.F90
M            29392   drivers/cpl_esmf/ocn_comp_mct.F90

===============================================================================
Tag Creator: njn01
Tag Date:    27 May 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110527
Tag Summary: fix io_netcdf.F90 module bug, so that it allows netCDF restart-file backwards
             compatability (support both 'Conventions' and 'conventions')
Testing: njn01
              cesm1_0_beta20, oob vs bugfix, C, T62_gx3v7, netCDF restart files.
              Restart cesm1_0_beta20 case with cesm1_0_beta14-generated netCDF restart
              file. Bugfix version recognizes 'conventions' attribute; oob does not.
Files Modified:
M            27996   source/io_netcdf.F90

       case('conventions','Conventions','CONVENTIONS')
 
          data_file%conventions = char_blank
-         iostat = pio_inq_att(data_file%File, PIO_GLOBAL,  'Conventions', &
+         iostat = pio_inq_att(data_file%File, PIO_GLOBAL,  trim(att_name), &
                                 xtype, nsize)
          if (iostat == pio_noerr) then
             if (nsize <= len(data_file%conventions)) then
-               iostat = pio_get_att(data_file%File, PIO_GLOBAL, 'Conventions', &
+               iostat = pio_get_att(data_file%File, PIO_GLOBAL, trim(att_name), &
                                       data_file%conventions(1:nsize))

===============================================================================
Tag Creator: njn01
Tag Date:    10 May 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110510
Tag Summary: fix small memory leak: add deallocate(mass_tran, heat_tran, salt_tran) to
             subroutine diag_transport in module diagnostics.F90
Testing: njn01
              cesm1_0_beta19, oob vs bugfix, C, T62_gx3v7, 1 month with INFO_DBUG = 2
              (diagnostics every step)
              Output log files and POP2 restart files are b4b at end of one month
Files Modified:
M            27996   source/diagnostics.F90
===============================================================================
Tag Creator: njn01
Tag Date:    20 April 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110420
Tag Summary: update esm code
Testing: Tony Craig
Merge command:
     svn merge $SVN/pop2/trunk_tags/cesm_pop_2_1_20110128
               $SVN/pop2/branch_tags/cpl7esmf_tags/cpl7esmf_cesm1_beta16_02
Files Modified:
 M           26624   drivers/cpl_mct
M            26624   drivers/cpl_esmf/ocn_comp_esmf.F90
M            26624   drivers/cpl_esmf/ocn_comp_mct.F90
 M           26624   drivers/cpl_none
===============================================================================
Tag Creator: njn01
Tag Date:    7 April 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110407
Tag Summary: Bugfix for CF-compliance
             There is no bug report, but email from Jim Edwards states:
             The attribute should be "Conventions"?  with both cap "C" at the beginning and "s" at the end. 

Testing:  njn01. T62_gx3v7, C with new io_netcdf.F90 on bluefire.
          3-day run, then 3-day restart with monthly history files, followed by 3-day restart with daily history files
          ncdump'd resulting pop*.nc files and confirmed "Conventions" replaces "conventions"
Files Modified:
M            27495   source/io_netcdf.F90
===============================================================================
Tag Creator: njn01
Tag Date:    25 March 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110325
Tag Summary: Bugfix for Bug #1287 - missing metadata for meridional transport tavg variables
             Modify code so that the cell_methods attribute is added to MOC, N_HEAT,
             and N_SALT in the tavg history files.
Testing:  njn01. Set up three sets of side-by-side 1-month test runs  (T62_gx3v7, C)
          on bluefire. Tested the following settings:
             o OCN_TAVG_TRACER_BUDGET=FALSE, OCN_TAVG_HIFREQ=FALSE 
             o OCN_TAVG_TRACER_BUDGET=TRUE , OCN_TAVG_HIFREQ=TRUE 
             o OCN_TAVG_TRACER_BUDGET=FALSE, OCN_TAVG_HIFREQ=TRUE
          by differencing monthly and nday streams (ncl diff_files.ncl) and 
          by differencing these files' cdl files.
Files Modified:
M            26624   source/io_netcdf.F90
M            27383   source/tavg.F90
M            26624   source/io_ccsm.F90
===============================================================================
Tag Creator: njn01
Tag Date:    23 March 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110323
Tag Summary: Bring in Pat Worley's space_curve modifications
             NOTE: njn01 changed Pat's original filename (POP_spacecurve_mod)
             and the corresponding names inside the POP_SpaceCurveMod module
Testing:  * correctness: Pat Worley
          * 2-day T62_t12 smoke test (njn01)

Files Modified:
D            26624   source/spacecurve_mod.F90
M            26624   source/POP_DistributionMod.F90
A                0   source/POP_SpaceCurveMod.F90
M            26624   source/distribution.F90
===============================================================================
Tag Creator: njn01
Tag Date:    22 March 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110322
Tag Summary: 
             * Add comments next to indices in POP_CplIndices.F90
             * Comment out OMP directives in tavg.F90 (improper exit within
                a threaded region)  
             * Add high-resolution grid detection to pop2.cpl7.template script,
               to avoid relying on cesm1 script settings (which have been known
               to set HIRES incorrectly)
Testing: njn01:
           * T62_tx0.1v2, HIRES = false, with new pop2.cpl7.template: compiles with -D_HIRES; runs
           * T62_gx3v7, with new pop2.cpl7.template: compiles withOUT -D_HIRES; runs
           * should be b4b, but not tested against oob
           

Files Modified:
===============================================================================
Tag Creator: njn01
Tag Date:    28 January 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110128
Tag Summary: tavg module improvements 
             * Move all accumulation testing into subroutine accumulate_tavg_field
             * Create new subroutine, accumulate_tavg_now
             * Remove references to tavg_requested from all other modules;
               replace with accumulate_tavg_now in special instances where
               the test would potentially eliminate expensive computations
             * Make tavg_requested private, so that new developments cannot
               access it from outside modules
               
Testing: njn01 cesm1_0_beta14 context, side-by-side baseline vs test case,
               then difference all tavg *.nc files
               (Test record available from NCAR POP2 website)
             o CECO,T62_gx1v6, bluefire
             o C,   T62_gx3v7, bluefire
             o C,   T62_gx3v7, bluefire, HIFREQ
             o B,   f19_g16,   bluefire

Files Modified:
M            25900   source/sw_absorption.F90
M            25900   source/surface_hgt.F90
M            25900   source/diagnostics.F90
M            25900   source/step_mod.F90
M            25900   source/hmix_del2.F90
M            25900   source/hmix_del4.F90
M            25900   source/forcing.F90
M            25900   source/vmix_kpp.F90
M            25900   source/budget_diagnostics.F90
M            25900   source/iage_mod.F90
M            25900   source/advection.F90
M            25900   source/vertical_mix.F90
M            25900   source/mix_submeso.F90
M            25900   source/cfc_mod.F90
M            25900   source/cfc11_mod.F90
M            25900   source/passive_tracers.F90
M            25900   source/forcing_coupled.F90
M            26514   source/ecosys_mod.F90
M            25900   source/horizontal_mix.F90
M            25900   source/hmix_gm.F90
M            26374   source/tavg.F90
M            25900   source/barotropic.F90
M            25901   source/baroclinic.F90
===============================================================================
Tag Creator: njn01
Tag Date:    25 January 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110125
Tag Summary: Ecosystem-model changes by Keith Lindsay
             * Correct units metadata for IRON_FLUX tavg variable
             * Make pH solver more robust to large tracer changes in a single timestep, 
               by iteratively doubling the width of the pH search interval when necessary.
               The code will abort if 3 doublings is not sufficient.
=====
NOTE:        Solutions are bit-for-bit with the previous tag (except when the pH search
=====        interval is increased), but the carbonate *diagnostics* fields (CO3, HCO3, H2CO3)
             are slightly different because the phlo_3d_init value is different from the 
             previous tag)

Testing: klindsay 
             * CECO gx3v7 bluefire 2-month exact-restart
             * b4b with 2-month CECO gx3v7 bluefire control case

Files Modified:
M            25900   source/ecosys_mod.F90
M            25900   source/co2calc.F90

===============================================================================
Tag Creator: njn01
Tag Date:    18 January 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110118
Tag Summary: Import new cpl7 mods supplied by mvertens
             (but modify file and module names so that they
              conform to the "pop3" convention)
              
Testing: mvertens

Files Modified:
M            26358   drivers/cpl_mct/ocn_comp_mct.F90
M            26358   drivers/cpl_esmf/ocn_comp_esmf.F90
A                0   drivers/cpl_share/POP_CplIndices.F90
A                0   drivers/cpl_share
M            25900   bld/pop2.cpl7.template

===============================================================================
Tag Creator: njn01
Tag Date:    11 January 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110111a
Tag Summary: Fix MOC, N_HEAT, N_SALT time-dimension problem
             NOTE: The wrong files were checked into the pop2 trunk
             on 2010-12-29. This tag checks in the CORRECT files.
              
Testing:
  * cesm1_0_beta12 and cesm1_0_beta13 with source mods.
    Reviewed monthly timeseries of daily tavg MOC, N_HEAT, and N_SALT.

Files Modified:
M            26181   source/io_netcdf.F90
M            26181   source/tavg.F90
M            26181   source/io_ccsm.F90

===============================================================================
Tag Creator: njn01
Tag Date:    11 January 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110111
Tag Summary: * Apply bugix for time_to_do (nsecond and nhour options)
             * Update time_management unit testing to make it consistent with present tag
               and to make it easier to use.
              
Testing:
  * fairly extensive unit testing plus gx3v7 smoke tests

Files Modified:
M            25900   source/time_management.F90
M            26345   drivers/cpl_esmf/ocn_comp_esmf.F90
M            25900   drivers/cpl_mct/ocn_comp_mct.F90
A                0   test/unit/time_management/source
A                0   test/unit/time_management/source/POP.F90
A                0   test/unit/time_management/source/POP_DomainSizeMod.F90
A                0   test/unit/time_management/source/README
A                0   test/unit/time_management/source/domain_size.F90
M            25900   test/unit/time_management/pop2_in
D            25900   test/unit/time_management/POP.F90
D            25900   test/unit/time_management/POP_DomainSizeMod.F90
D            25900   test/unit/time_management/domain_size.F90
M            25900   test/unit/time_management/timeTest
M            26345   ChangeLog
===============================================================================
Tag Creator: njn01
Tag Date:    10 January 2011
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20110110
Tag Summary: Apply esmf changes to support metadata capability
             source: pop2/branch_tags/cesm1_0_esmf01_tags/esmf01_02_cesm_pop_2_1_20100813
             author: T. Craig
              
Testing:
  * external testing (T. Craig and pre-tag testing)

Files Modified:
M            25900   drivers/cpl_esmf/ocn_comp_esmf.F90
M            25900   drivers/cpl_esmf/ocn_comp_mct.F90

===============================================================================
Tag Creator: njn01
Tag Date:    29 December 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101229
Tag Summary: Fix MOC, N_HEAT, N_SALT time-dimension problem
             NOTE: WRONG FILES!  See cesm_pop_2_1_20110111a for correct version of
             the MOC and *_HEAT bugfix.
              
Testing:
  * cesm1_0_beta12 with source mods. Tested C, gx3v7 and gx1v6, bluefire.
    Reviewed monthly timeseries of daily tavg MOC, N_HEAT, and N_SALT.

Files Modified:
M            25900   source/io_netcdf.F90
M            25900   source/tavg.F90
M            25900   source/io_ccsm.F90

===============================================================================
Tag Creator: njn01
Tag Date:    17 December 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101217
Tag Summary: * add "use shr_sys_mod" to state_mod.F90
              
Tag Testing:
  * cesm1_0_beta13 pre-tag testing

Files Modified:
M            25901   source/state_mod.F90

===============================================================================
Tag Creator: njn01
Tag Date:    02 December 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101201
Tag Summary: * Add tavg SALT_MIN, SALT_MAX code support and SALT_MIN, SALT_MAX, 
               TEMP_MIN, TEMP_MAX tavg_contents support.
             * Correction: single--> double precision overflows state constants.
               Move special-purpose overflows state subroutine to state_mod and rename.
               Add a fatal-error check to POP_check to trap inconsistencies between
               overflows and base-model state module settings.
              
Tag Testing (njn01):
  * cesm1_0_beta11 test case: C, T62_gx3v7, one-month run with SALT_MIN, SALT_MAX,
    TEMP_MIN, TEMP_MAX active. Test: ncdump inspection.
  * cesm1_0_beta10 test case: C, T62_gx1v6
      o five-day smoke test 
      o one-month side-by-side comparison with single-precision-constants version; approved by bruceb.
      o inconsistency-trapping test (state_range_opt  = 'ignore'): Error was trapped.
   
Code Review: njn01 and bruceb 2010-12-01 (overflows)

Files Modified:
M            25641   source/overflows.F90
M            25641   source/initial.F90
M            25642   source/baroclinic.F90
M            25641   source/state_mod.F90
M            25641   input_templates/gx3v7_tavg_contents
M            25641   input_templates/gx1v6_tavg_contents

===============================================================================
Tag Creator: njn01
Tag Date:    18 November 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101118
Tag Summary: * fix MY_PATH bug: must not be resolved in order for clone to work
             * fixed the initialization of the region-mask filename
              
Tag Testing (njn01):
  * cesm1_0_beta10 test case with Tools/Templates/pop2.cpl7.csh
    Created two cases: one oob and one with new pop2.cpl7.csh, then
    cloned each. Inspected the cloned cases' Buildnml/pop2.buildnml.csh
    scripts and confirmed that the oob cloned case is incorrect and the new
    cloned case is correct.
  * same test cases, with newer pop2.cpl7.csh that corrects the 'unknown_region_mask'
    mismatch between code and scripts. Confirmed that the pop2.cpl7.csh now generates
    the proper string when region mask is not defined.

Files Modified:
M            25641   bld/pop2.cpl7.template
===============================================================================
Tag Creator: njn01
Tag Date:    17 November 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101117
Tag Summary: * major pio rewrite, synched with new pio, drv, scripts, and component-model tags for
               cesm1_0_beta11
             * add UVEL1, VVEL1 tavg output field support
             * bugfix: fix corrupted gx3*_history_contents files
              
Tag Testing (njn01):
  * cesm1_0_beta10 vs cesm1_0_beta10+ (updated drv,scripts,data model,pio, and pop2 tags)
        C gx3v7, C gx1v6, CECO gx1v6  1-month runs, oob
        C gx3v7 4 1-month runs with netCDF restart files, followed by one month with binary restart file
        C gx3v7 1-month run with pnetcdf
        CECO gx1v6 with pnetcdf -- fails. Reported error.
  * cesm1_0_beta09 (?)
        C, gx1v6 UVEL1, VVEL1 test run -- compare against surface *VEL values
        test run with gx3v7_history_contents and history files activated

Files Modified:
M            25283   source/io_pio.F90
M            25283   source/io_types.F90
M            25283   source/io_netcdf.F90
M            25283   source/ecosys_mod.F90
M            25283   source/baroclinic.F90
M            25283   input_templates/pop2_in_build.csh
M            25283   input_templates/gx3v7_history_contents
M            25283   input_templates/gx3v5_history_contents


===============================================================================
Tag Creator: njn01
Tag Date:    25 October 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101025
Tag Summary: * Modify pop2.cpl7.template script so that it does not automatically
               generate tavg and ovf rpointer files for branch or hybrid cases
Tag Testing:
  * njn01: cesm1_0_beta09, T62_gx3v7,C, old vs new
        startup: b4b @ eom #2 (1-month+1-month)  (buildnml.csh scripts are identical for startup)
        hybrid:  b4b @ eom #2 (1-month+1-month)
        branch:  b4b @ eom #2 (1-month+1-month)

Files Modified:
M           25033   bld/pop2.cpl7.template
===============================================================================
Tag Creator: njn01
Tag Date:    6 October 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20101006
Tag Summary: * Modify code that creates tavg netCDF files: add _FillValue, make coordinate 
               variables double when the TAVG_R8 option is active, make MOC and N_* attributes
               match their type, add _FillValue and missing_value to all time-independent variables.
             * Modify pop_hist_postprocess.csh so as to avoid user conflicts
             * Remove gx1v5* and gx3v6* support
             * Add comments to ocn_comp_*.F90 to document the units of the i/o variables
Tag Testing:
  * njn01: None; no changes to active code in this tag.
Files Modified:
M           25033   source/movie.F90
M           25033   source/io_types.F90
M           25033   source/io_netcdf.F90
M           25033   source/io_binary.F90
M           25033   source/history.F90
M           25033   source/tavg.F90
M           25033   source/io_ccsm.F90
M           25033   tools/postrun_proc/pop_hist_postprocess.csh
M           25033   ChangeLog
D           25033   input_templates/gx1v5_transport_contents
D           25033   input_templates/gx1v5b_transport_contents
D           25033   input_templates/gx3v6_history_contents
D           25033   input_templates/gx3v6_region_ids
D           25033   input_templates/gx1v5_vert_grid
D           25033   input_templates/gx1v5_inputdata
D           25033   input_templates/gx1v5_depth_accel
D           25033   input_templates/gx1v5_movie_contents
D           25033   input_templates/gx3v6_depth_accel
D           25033   input_templates/gx1v5b_movie_contents
D           25033   input_templates/gx1v5b_domain_size.F90
D           25033   input_templates/gx3v6_transport_contents
D           25033   input_templates/gx1v5_history_contents
D           25033   input_templates/gx1v5b_POP_DomainSizeMod.F90
D           25033   input_templates/gx1v5b_history_contents
D           25033   input_templates/gx1v5b_tavg_contents
D           25033   input_templates/gx3v6_tavg_contents
D           25033   input_templates/gx3v6_movie_contents
D           25033   input_templates/gx1v5_overflow
D           25033   input_templates/gx1v5b_overflow
D           25033   input_templates/gx1v5b_vert_grid
D           25033   input_templates/gx3v6_vert_grid
D           25033   input_templates/gx1v5b_inputdata
D           25033   input_templates/gx3v6_inputdata
D           25033   input_templates/gx1v5b_depth_accel
D           25033   input_templates/gx1v5_domain_size.F90
D           25033   input_templates/gx3v6_domain_size.F90
D           25033   input_templates/gx1v5_POP_DomainSizeMod.F90
D           25033   input_templates/gx1v5_tavg_contents
D           25033   input_templates/gx1v5_region_ids
D           25033   input_templates/gx1v5b_region_ids
M           25033   drivers/cpl_mct/ocn_comp_mct.F90
M           25033   drivers/cpl_esmf/ocn_comp_esmf.F90
Status against revision:  25033
===============================================================================
Tag Creator: njn01
Tag Date:    16 August 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20100816
Tag Summary: * Add new directory, tools, to hold new post-run processing scripts
             * Populate tools subdirectory with KL's script and README files
             * Remove old, outdated documentation from doc/ subdirectory
             * Correct the cesm_pop_2_1_20100813 tag name in ChangeLog
Tag Testing:
  * njn01: None; no changes to active code in this tag.
Files Modified:
A               0   tools/postrun_proc
A               0   tools/postrun_proc/pop_hist_postprocess.csh
A               0   tools/postrun_proc/README
A               0   tools/README
A               0   tools
D           24266   doc/IOdesign.tex
D           24266   doc/GNUmakefile
D           24266   doc/userguide
D           24266   doc/userguide/POPusers_chap5.tex
D           24266   doc/userguide/POPusers_chap6.tex
D           24266   doc/userguide/UsersGuide.ps
D           24266   doc/userguide/POPusers_chap7.tex
D           24266   doc/userguide/html.sty
D           24266   doc/userguide/POPusers_main.tex
D           24266   doc/userguide/UsersGuide.pdf
D           24266   doc/userguide/POPusers.bib
D           24266   doc/userguide/POPusers_chap1.tex
D           24266   doc/userguide/POPusers_chap2.tex
D           24266   doc/userguide/POPusers_chap3.tex
D           24266   doc/userguide/POPusers_chap4.tex
D           24266   doc/io.eps
M           24379   ChangeLog

===============================================================================
Tag Creator: njn01
Tag Date:    13 August 2010
Tag Name:    pop2/trunk_tags/cesm_pop_2_1_20100813
Tag Summary: * bugfix: correct the units for latent_heat_vapor in tavg history files
             * rename latent_heat_vapor as latent_heat-vapor_mks
Tag Testing:
  * njn01: C,gx1v6, new vs old code: 
                 o ocn restart files are b4b at end of day 5
                 o ncdump -v latent_heat_vapor from each case; differences only in units
Files Modified:
M           24266   source/initial.F90
M           24266   source/POP_ConstantsMod.F90
M           24266   source/forcing_shf.F90
M           24266   source/forcing_sfwf.F90
M           24266   source/forcing_coupled.F90
M           24266   source/tavg.F90
M           24266   source/constants.F90

===============================================================================
Tag Creator: njn01
Tag Date:    4 August 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100804
Tag Summary: * pop allow_leapyear flag is now triggered by the cesm 
               env_run variable CALENDAR. When GREGORIAN, allow_leapyear = .true.
             * bugfix: tavg_DON_prod definition -- "... [units] should be mmol/m^3/s"
             * change: "There is a single call to timer_print in ecosys_mod.F90 that
               is called every timestep. I'd like this call removed."

Tag Testing:
            
  * njn01 tested CALENDAR = {NO_LEAP,GREGORIAN} with new pop2_in_build.csh
  * Keith Lindsay confirmed the corrections/changes to the ecosys_mod.F90 module

Files Modified:
M           24266   source/ecosys_mod.F90
M           24266   ChangeLog
M           24266   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01
Tag Date:    14 June 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100614a
Tag Summary: * bugfix: add an implementation to deal with land-grid elimination to the pop esmf interfaces. (tcraig)
             * bugfix: correction to timestamps on forcing/ndep_ocn_1850-2005 datasets. This necessitates a new
               version of ocn.ecosys.setup.csh, which points to the new ndep_ocn datasets.
Tag Testing:
            
  * Tony Craig confirms the following tests pass with the drivers/cpl_esmf corrections:
      o  ERS_E.T62_t12.C.jaguar
      o  ERS_E.T62_t12.G.jaguar
      o  ERS_E.f05_t12.B.jaguar
  * Keith Lindsay confirmed the corrections to the forcing datasets and the ocn.ecosys.setup.csh script

Files Modified:
M           23532   input_templates/ocn.ecosys.setup.csh
M           23532   drivers/cpl_esmf/ocn_comp_esmf.F90
M           23532   drivers/cpl_esmf/ocn_comp_mct.F90

===============================================================================
Tag Creator: njn01
Tag Date:    14 June 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100614
Tag Summary: Change io_pio_num_iotasks = -1 for high-resolution cases
Tag Testing: No local testing; value was requested by Rob Jacob for support
             on intrepid. Note that this setting is triggered by resolution,
             not machine.
Files Modified:

M           23532   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01
Tag Date:    3 June 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100603
Tag Summary: * Fix threading bug in ecosys_mod.F90
             * Update version information printed to log file
Tag Testing: Limited, special-purpose testing in cesm1_0_beta01+ context.
             Confirmed NaNs are eliminated by the correction. Verified that
             two-threads case is identical to one-thread case in a clone to
             KL's "foobar2" case and 4-threads vs one-thread in a gx3v7 CECO test.
Files Modified:
M           23431   source/initial.F90
M           23431   source/ecosys_mod.F90

===============================================================================
Tag Creator: njn01
Tag Date:    28 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100528b
Tag Summary: Correct a problem with zt_150m variables, pio/netcdf, and threading;
             correct a problem with the corrected code and TAVG_R8.
             This tag tests only the TAVG_R8 correction; threading tests will 
             continue next week.
Tag Testing: cesm1_0_beta01 oob and with SourceMods
               * oob vs new, single precision
               * oob vs new, double precision
Files Modified:
M           23431   source/io_pio.F90
M           23431   source/io_netcdf.F90

===============================================================================
Tag Creator: klindsay
Tag Date:    28 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100528a
Tag Testing: * bluefire, CECO compset, T62_gx3v7, exact restart & DEBUG
             * bluefire, B20TRCN+ecosys, f09_g16, with OCN_CO2_TYPE=diagnostic,
               to verify correct field being used in CO2 flux computations

Tag Summary: * port ccsm_pop_2_1_20100519a mods to cpl_esmf
             * receive co2diag from drv, in addition to co2prog
             * enable atm_co2_opt to be either 'drv_prog' or 'drv_diag',
               replacing 'model'
             * rename gas_flux_forcing_opt='model' to 'drv'
             * use new env_conf variable OCN_CO2_FLUX_OCMIP_BUG_FIX to
               set the new flag locmip_k1_k2_bug_fix

Files Modified:

M      source/ecosys_mod.F90
M      source/co2calc.F90
M      source/forcing_fields.F90
M      input_templates/ocn.ecosys.setup.csh
M      drivers/cpl_mct/ocn_comp_mct.F90
M      drivers/cpl_esmf/ocn_comp_esmf.F90
A      drivers/cpl_esmf/POP_MCT_vars_mod.F90
M      drivers/cpl_esmf/ocn_comp_mct.F90

===============================================================================
Tag Creator: njn01 
Tag Date:    28 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100528
Tag Summary: bugfix: completely "streamify" tavg_method_qflux
             This bugfix allows any pop2 model variable, such as FvICE_DIC and
             FvICE_ALK, to use tavg_method_qflux in a
             stream different from the one containing QFLUX.
Tag Testing: * ccsm4_0_beta55+ = ccsm4_0_beta55 with ccsm_pop_2_1_20100521
     Compare files:
       * binary restart files at eod six   (b4b)
       * ncl diff script on
           o pop.h.ecosys.nday1.0001-01-02.nc files: only FvICE_ fields are different
       * ncl diff script on other pop.h.*.nc files:
           o pop.h.0001-01-05.nc are the same
           o pop.h.nday1.0001-01-02.nc are the same
     Compare FvICE_DIC and FvICE_ALK files (new vs old):
       * visual inspection: patterns are the same, magnitudes are different
     Compare ocn.log files:
       * global sums are identical (streams bug was fixed in previous
         version of tavg_global_sum_2D)

     Run one month, oob & test version. Create monthly mean (ncra) of daily
     FvICE_DIC fields and compare with oob case.  Visually inspect monthly
     FvICE_DIC fields and ncdiffs.  Same magnitude, max rel diff ~10% in
     regions of max FvICE_DIC magnitude.  Note setup error: "oob" case
     used modified tavg_nml settings and created stream #1 averages every
     four days, so the "oob monthly" field was actually an average of the
     four-day averages through the end of 0001-01-29.

Files Modified:
M           23276   source/tavg.F90
===============================================================================
Tag Creator: njn01 
Tag Date:    21 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100521
Tag Summary: Increase default C-compset tx0.1v2 DT_COUNT setting  (decrease timestep)
             to prevent cfl blowup
Tag Testing: * ccsm4_0_beta54 post-tag testing by Chris Fischer on jaguar:
               "ERS.T62_t12.C passes on jaguar with dt_count=500"

Files Modified:
M           23222   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: klindsay 
Tag Date:    19 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100519a
Tag Testing:  
             * CECO compset, T62_gx1v6, exact restart & DEBUG
             * CECO compset, T62_gx3v7, exact restart & DEBUG
             * verify ndep fluxes match dataset when OCN_TRANSIENT == 1850-2000

Tag Summary: * numerous additional ecosys tavg variables
             * implement time-varying ndep in ecosys, using shr_strdata
             * answer changing optimizations in co2calc.F90
             * new DIC/ALK IC for ecosys that have more realistic filling
               in Arctic, Gulf of Mexico, and marginal seas
             * fix uninitialized tavg halo in mix_submeso.F90
               doesn't change answers

Files Modified:

M      source/mix_submeso.F90
M      source/passive_tracers.F90
M      source/ecosys_mod.F90
M      source/co2calc.F90
M      source/baroclinic.F90
M      input_templates/ocn.ecosys.setup.csh
A      drivers/cpl_mct/POP_MCT_vars_mod.F90
M      drivers/cpl_mct/ocn_comp_mct.F90

===============================================================================
Tag Creator: njn01 
Tag Date:    19 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100519
Tag Testing:  
             * C compset, T62_tx1v1, oob vs oob+hmix_del4.F90, 2-month timing and correctness:
               results: identical pop2 binary restart files at end of two months
                        ~2x speedup in HMIX_MOMENTUM_DEL4; ~1% overall model speedup

             * C compset, t62_gx1v6, oob vs oob+hmix_del4.F90, 1-month+1-month correctness:
               results: identical pop2 binary restart files at end of two months
                        (note: these cases do NOT use del4 option, so no change is expected)

Tag Summary: * hmix_del4.F90 performance improvements (worley)
             * default tx0.1v2 io_pio_numtasks setting increased (mvertens)

Files Modified:
 
M      source/hmix_del4.F90
M      input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01 
Developers : njn01 and gokhan
Tag Date:    12 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100512
Tag Testing: Gokhan C compset, T62_gx3v7 production runs

Tag Summary: * Add 60 ocn pe decomposition support for gx3v7 resolution

M           22880   bld/pop_decomp.xml
              
===============================================================================
Tag Creator: njn01 
Developers : njn01 and klindsay
Tag Date:    10 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100510
Tag Testing: ccsm4_0_beta52+, special-purpose testing:
             C,G,B compsets (checked ice_ref_salinity values); HIFREQ (oob vs .)
             ncdump diffs, and the following pre-tag automated tests:
             PASS  ERB.T62_g16.C.bluefire 
             PASS  ERI.T31_g37.BCN.bluefire 
             PASS  ERP.T62_g37.C.bluefire 
             PASS  ERS.f19_g16.B.bluefire 
             PASS  ERT.T62_g16.C.bluefire 
             PASS  ERT.T62_g16.CECO.bluefire 
             PASS  ERI.f09_g16.B1850CN.bluefire

Tag Summary: * Add ZERO_SEA_ICE_REF_SAL Cpp variable to control sea_ice_ref_salinity
               in C compsets oob (should be zero for C compsets; 4 for G,B compsets)
             * Add automatic scale_factor and salinity-units support in define_tavg_field
              
M           22834   source/POP_ConstantsMod.F90
M           22834   source/vmix_kpp.F90
M           22834   source/advection.F90
M           22834   source/vertical_mix.F90
M           22834   source/POP_KindsMod.F90
M           22834   source/passive_tracers.F90
M           22835   source/horizontal_mix.F90
M           22834   source/prognostic.F90
M           22834   source/tavg.F90
M           22834   source/constants.F90
M           22834   bld/pop2.cpl7.template
              
===============================================================================
Tag Creator: njn01 
Tag Date:    7 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100507a
Tag Testing: ccsm4_0_beta52, with SourceMods. RMS difference timeseries gx3v7, HDIFT.      
             PASS  ERB.T62_g16.C.bluefire 
             PASS  ERI.T31_g37.BCN.bluefire 
             PASS  ERP.T62_g37.C.bluefire 
             PASS  ERS.f19_g16.B.bluefire 
             PASS  ERT.T62_g16.C.bluefire 
             PASS  ERT.T62_g16.CECO.bluefire 
             PASS  ERI.f09_g16.B1850CN.bluefire 


Tag Summary: * Merge submeso reorganization mods onto pop2 trunk. Not b4b, but smaller
               differences that those caused by change in ocn pe layout (gx3v7)
              
A               0   source/hmix_gm_submeso_share.F90
M           22833   source/mix_submeso.F90
M           22833   source/horizontal_mix.F90
M           22833   source/hmix_gm.F90
===============================================================================
Tag Creator: njn01 
Tag Date:    7 May 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100507
Tag Testing: ccsm4_0_beta52+, (OCN_TAVG_HIFREQ,OCN_TAVG_TRACER_BUDGET) = (TT,TF,FT,FF)
             ccsm4_0_beta52+, no extra tracers, 'file' option

Tag Summary: * minor bugfix: no extra tracers, 'file' sw_absorption option should not abort (Maltrud)
             * restore logicals in pop2_in_build.csh to control budget_diagnostics computations
              
M           22779   source/sw_absorption.F90
M           22779   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01 
Tag Date:    30 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100430
Tag Testing: none. 

Tag Summary: * back out ccsm_pop_2_1_20100429 changes
               This tag is identical to ccsm_pop_2_1_20100427
              
M           22659   source/timers.F90
===============================================================================
Tag Creator: njn01 
Tag Date:    29 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100429
Tag Testing: ccsm4_0_beta51, oob vs oob + new timers.F90

Tag Summary: * fixes the missing OCN timing summary information problem
              
M           22658   source/timers.F90
===============================================================================
Tag Creator: klindsay 
Tag Date:    27 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100427
Tag Testing: 

Tag Summary: * move timer_start call so that it follows the last return statement in 
               subroutine tavg_bsf_diags in module tavg.F90
             
===============================================================================
Tag Creator: njn01 
Tag Date:    23 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100423
Tag Testing: tx1v1 oob vs new, with and without 'never' option 
PASS  SMS_D.f19_g16.BCN.bluefire 
PASS  SMS_D.T31_g37.BCN.bluefire 
PASS  ERI.f19_g16.BCN.bluefire 
PASS  ERI.T31_g37.BCN.bluefire 
PASS  ERS.f19_g16.B.bluefire 
PASS  PET_PT.T62_g16.C.bluefire 
PASS  PET_PT.f19_g16.B1850CN.bluefire 
PASS  ERB.T62_g16.C.bluefire 
PASS  ERT.T62_g16.C.bluefire 
PASS  ERP.T62_g37.C.bluefire 
PASS  SMS_D.T62_g16.C.bluefire 
PASS  SMS.T62_g16.CECO.bluefire

Tag Summary: * correction to tripole-grid tavg streams 'never' problems
               (general correction will be provided in a future tag)
             * improve tavg 'never' log-file reporting
             * shorten variable name ltavg_ignore_excess_contents_streams
                 in pop2_tavg_nml.csh and tavg.F90 (too long for "frost")
             * remove conditionals in pop2_in_build.csh budget_diagnostics

M           22470   source/budget_diagnostics.F90
M           22470   source/tavg.F90
M           22469   input_templates/pop2_tavg_nml.csh
M           22469   input_templates/pop2_in_build.csh
===============================================================================
Tag Creator: njn01 
Tag Date:    21 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100421
Tag Testing:  
Tag Summary: * correction to pop2.cpl7.template bug        

M           22469   bld/pop2.cpl7.template


-      endif ! tavg_contents
+      endif # tavg_contents
                   
===============================================================================
Tag Creator: njn01 
Tag Date:    19 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100419a
Tag Testing:  1-month + 1-month cfc functionality test
Tag Summary: * correction to qflux streams bug (now QFLUX can appear in any stream)

M           22460   source/budget_diagnostics.F90
M           22460   source/tavg.F90
                   
===============================================================================
Tag Creator: njn01 
Tag Date:    19 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100419
Tag Testing:  inspection of pop2.buildnml.csh script; inspection of high-freq output files;
              1-month + 1-month ecosys + cfc case (functionality test)

Tag Summary: additional MOAR support
              * correction to netCDF units attribute for HDIFS, UES, VNS, WTS (gram/kilogram)
              * ocn.cfc.setup.csh modifications to support OCN_TAVG_TRACER_BUDGET
              * revised gx1v6 high-frequency tavg_contents file (additional surface fluxes included)
              * pop2_in_build.csh -- deactivate budget diagnostics if high-freq output is active
                   
M           22311   source/advection.F90
M           22408   source/horizontal_mix.F90
M           22311   input_templates/ocn.cfc.setup.csh
M           22408   input_templates/gx1v6_tavg_contents_high_freq
M           22315   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01 
Tag Date:    15 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100415
Tag Testing:  *  customized testing: OCN_TAVG_TRACER_BUDGET and OCN_TAVG_HIFREQ TRUE & FALSE
              *  comparison oob vs ccsm4_0_beta48 (2-month, er test comparing restart and tavg history files)
                     o pop.h.0001-02.nc files are identical
                     o pop.h.nday1.0001-02-01.nc are identical
                     o pop.r.0001-03-01-00000 restart files (end of February) are identical

            
Tag Summary: MOAR support
              * pop2.cpl7.template responds to new CCSM4 run-time environment variables
                 OCN_TAVG_TRACER_BUDGET and OCN_TAVG_HIFREQ
              * new input_templates file containing tavg tracer budget terms
              * new gx1v6 high-frequency tavg_contents file
              * klindsay's code mods to support new tavg_contents fields and budget diagnostics
              * ocn.iage.setup.csh modifications to support OCN_TAVG_TRACER_BUDGET
              * tavg.F90 bugfix -- nonstandard fields stream-support bug
              * tavg.F90 cleanup -- move define_tavg_field from moc and transport diagnostics
                 computation routines to initialization routines
                   
M           22316   source/sw_absorption.F90
M           22316   source/initial.F90
M           22316   source/hmix_del2.F90
M           22316   source/hmix_del4.F90
M           22316   source/vmix_kpp.F90
M           22316   source/iage_mod.F90
M           22316   source/vertical_mix.F90
M           22316   source/passive_tracers.F90
M           22316   source/horizontal_mix.F90
M           22316   source/hmix_gm.F90
M           22316   source/tavg.F90
M           22316   source/baroclinic.F90
M           22316   bld/pop2.cpl7.template
M           22316   input_templates/ocn.iage.setup.csh
A               0   input_templates/gx1v6_tavg_contents_high_freq
A               0   input_templates/tavg_contents_tracer_budget_terms


===============================================================================
Tag Creator: njn01 
Tag Date:    8 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100408a
Tag Testing: built tx0.1v2 B and C cases and confirmed correct dt_count settins
             by inspection.
Tag Summary: for tx0.1v2, set dt_count = 400 for C and G compsets; dt_count = 300 for all others

M           22314   input_templates/pop2_in_build.csh

===============================================================================
Tag Creator: njn01 
Tag Date:    8 April 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100408
Tag Testing: none
Tag Summary: * Change \$BLDROOT/Makefile to \$CASETOOLS/Makefile 
                (feature change request via bugz #1142)
             * Bugfix: (reported by MV; correction supplied by Phil Jones)
                 allocate(workTmp(POP_numBlocks), procTmp(POP_numBlocks), stat=istat)
               changed to
                 allocate(workTmp(numProcs), procTmp(numProcs), stat=istat)
                                  ^^^^^^^^           ^^^^^^^^
             * Change clinic_distribution_type = balanced --> clinic_distribution_type = cartesian
               Recommended by Phil Jones to avoid the rake algorithm incompatability with "the
               Gokhan fix":
               " ...the rake has been effectively disabled.  Both
               John's added code in the DistributeCreate routine that
               sets all work/block to maxWork and Gokhan's added code in
               domain.F90 that does similar things with nocn (for coarse
               resolution), means that there are no land blocks and all
               blocks have the same amount of work.   So the rake algorithm
               is likely doing nothing, or worse (shifting blocks for no
               gain). You'd be better off sticking with Cartesian.

               If you'd like to remove both Gokhan's and John's kludges
               and make the rake work again, I'm happy to help.  But right
               now, the algorithm is doing nothing for you and may be
               doing you harm."

M           22311   bld/pop2.cpl7.template
M           22311   input_templates/pop2_in_build.csh
M           22311   source/POP_DistributionMod.F90

===============================================================================
Tag Creator: njn01 
Tag Date:    26 March 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100326
Tag Testing: create_test_suite

  PASS  PET_PT.T31_g37.B.bluefire 
  PASS  ERS_PT.T31_g37.B.bluefire 
  PASS  ERI.T62_g16.C.bluefire 
  PASS  ERT.T62_g16.C.bluefire 
  PASS  PFS.T62_g16.C.bluefire 
  PASS  ERT.f19_g16.B1850CN.bluefire 
  PASS  ERH.f19_g16.B1850CN.bluefire 
  PASS  ERI_E.T31_g37.BCN.bluefire 

Tag Summary: * Add support for the new tx0.1v2 shf and sfwf forcing datasets. The
               addition of these datasets supports the C compset, T62_tx0.1v2 case.
             * Rework the io_netcdf.F90 pio call that writes out character data for the
               "moc_components", "transport_components", and "transport_regions" variables.
               The first implementation generated a compiler error on an old pgi compiler
               and a failure in a ERI_E.bluefire test.
             
M           21830   source/io_netcdf.F90
M           21830   input_templates/tx0.1v2_inputdata

===============================================================================
Tag Creator: njn01 
Tag Date:    19 March 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100319
Tag Testing: 
  PASS  PET_PT.T31_g37.B.bluefire 
  PASS  ERS_PT.T31_g37.B.bluefire 
  PASS  ERI.T62_g16.C.bluefire 
  PASS  ERT.T62_g16.C.bluefire 
  PASS  PFS.T62_g16.C.bluefire 
  PASS  ERT.f19_g16.B1850CN.bluefire 
  PASS  ERH.f19_g16.B1850CN.bluefire 

             
Tag Summary: * Correction:  remove "call pio_seterrorhandling(File,PIO_RETURN_ERROR)" from
               subroutine io_pio_init in module io_pio.F90 (MV)
             * Increase format string length in movie.F90 so that entire string is printed 
               in log file
             * Correction: write out character-string data to tavg history file fields
                "moc_components", "transport_components", and "transport_regions". These
                character strings are blank in all pop.h* files created by tags ccsm4_0_beta35
                when pio was introduced in pop2, to ccsm4_0_beta46, the last tag before this
                correction will be made.
              * Incorporate new tx0.1v2 decompositions that are supported in the "hr" tag
              * Add a dummy line in input_templates/tx0.1v2_inputdata for the tx0.1v2
                 *.hdr file. With this dummy line in place, the input data checking tool
                 will detect if the *.hdr file is unavailable and will issue a fatal error.
                 This will protect users from trying to run a tx0.1v2 case without the *.hdr
                 file; without the *.hdr file, the model will note that the file is missing,
                 make (iincorrect) assumptions about the ordering of data on the restart file,
                 begin executing, and then die mysteriously.

M           21684   source/io_pio.F90
M           21684   source/movie.F90
M           21684   source/io_netcdf.F90
M           21684   bld/pop_decomp.xml
M           21684   ChangeLog
M           21684   input_templates/tx0.1v2_inputdata

===============================================================================
Tag Creator: klindsay 
Tag Date:    11 March 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100311
Tag Testing: unknown
Tag Summary: 1) hmix_gm.F90: in this version, we are now using Pat Worley's OpenMP-friendly
                 do-loop reorganization; previously, we had large if-def blocks surrounding
                 the old, non-OpenMP friendly loops and Pat's version.
             2) drivers/cpl_none/POP_CouplingMod.F90: remove OpenMP commands
===============================================================================
Tag Creator: njn01 
Tag Date:    5 March 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100305
Tag Testing: PET_PT.T31_g37.B.bluefire: PASS + inspection of global integral tavg quantities in ocn.log. files
             ERS_PT.T31_g37.B.bluefire: PASS
Tag Summary: 1) Correction: overflows.F90 was not included in previous tag; it should have been
             2) Comment out OMP directives in tavg.F90 global sum computations; these are broken

M           21475   source/overflows.F90
M           21475   source/tavg.F90

===============================================================================
===============================================================================
Tag Creator: njn01 
Tag Date:    1 March 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100301
Tag Testing: See testing log
Tag Summary: 1) Merge openmp2pop04_ccsm_pop_2_1_20100125 onto pop2 trunk
             2) Implement work-around to change in timing sequence of inputdata checking
                (a change in ccsm4 scripts caused pop2 scripts to break)
             3) Redirect POP_stdout to stdout (using CCSMCOUPLED if blocks in initial.F90)

M           21322   source/sw_absorption.F90           import openmp2pop04_ccsm_pop_2_1_20100125 as-is
M           21322   source/hmix_aniso.F90                   ditto
M           21322   source/diagnostics.F90                  ditto
M           21322   source/movie.F90                        ditto
M           21322   source/timers.F90                       ditto, EXCEPT add CCSMCOUPLED blocks 
M           21322   source/cfc_mod.F90                      ditto
M           21322   source/io_netcdf.F90                    ditto
M           21322   source/cfc11_mod.F90                    ditto, EXCEPT changed !pw to !untested
M           21322   source/passive_tracers.F90              ditto
M           21322   source/forcing_coupled.F90              ditto
M           21322   source/co2calc.F90                      ditto
M           21322   source/ms_balance.F90                   ditto
M           21322   source/hmix_gm.F90                      ditto (This creates HUGE replicated blocks) 
M           21322   source/baroclinic.F90                   ditto
M           21322   source/state_mod.F90                    ditto
M           21322   mpi/gather_scatter.F90                  ditto
M           21322   mpi/POP_HaloMod.F90                     ditto
M           21322   drivers/cpl_mct/ocn_comp_mct.F90        ditto
M           21322   drivers/cpl_esmf/ocn_comp_esmf.F90      ditto

M           21322   source/tavg.F90                    openmp2pop04_ccsm_pop_2_1_20100125 mods imported 
                                                           into trunk version    
M           21322   source/ecosys_mod.F90                   ditto 
M           21322   ChangeLog
M           21322   input_templates/ocn.ecosys.setup.csh compensate for possibility of missing inputdata
M           21322   input_templates/ocn.cfc.setup.csh       ditto
M           21322   input_templates/ocn.cfc11.setup.csh     ditto

From previous, untagged commit:
                     source/POP_IOUnitsMod.F90  (redirect POP_stdout if CCSMCOUPLED)
            

===============================================================================
Tag Creator: njn01 
Tag Date:    17 February 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100217
Tag Testing: See testing log
Tag Summary: pop2.cpl7.template changes to allow the creation of a correct
               pop2.buildnml.csh script on jaguar (shell-command differences) 

M           21095   bld/pop2.cpl7.template
M           21095   ChangeLog

===============================================================================
Tag Creator: njn01 
Tag Date:    12 February 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100212
Tag Testing: 1-month+1-month DEBUG exact restart for new gx3 decomp
             1-month+1-month exact restart test for overflows
             1-month+1-month exact restart test for  POP_DistributionMod.F90
             2-month b4b test for exit_POP cleanup 
             See /fis/cgd/cseg/people/njn01/test/usability/ cases             
Tag Summary: Misc: 
               o  64-pe gx3 decomp   
               o  deallocate only associated arrays in POP_DistributionMod.F90 
                    (contributed by Pat Worley)
               o  lccsm_control_compatible = .false. for gx1v6 (break backwards
                     compatability)
               o  move overflows write from write_restart to output_driver 
               o  begin exit_POP cleanup: initial.F90, time_management.F90,
                   budget_diagnostics.F90, restart.F90

M           20936   source/initial.F90
M           20936   source/time_management.F90
M           20936   source/budget_diagnostics.F90
M           20936   source/POP_DistributionMod.F90
M           20936   source/restart.F90
M           20936   source/output.F90
M           20936   input_templates/pop2_in_build.csh
M           20936   bld/pop_decomp.xml

===============================================================================
Tag Creator: njn01 
Tag Date:    10 February 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100210
Tag Testing: customized testing/inspection
Tag Summary: Miscellaneous changes to tavg streams support:
            o fix seg-fault problem identified by JD when user-specified
              stream number does not match number of streams in tavg_contents
            o add "stealth" tavg option to allow such mis-matches
               and modify pop2_tavg_nml.csh to support this option (stealthily)
M           20886   source/tavg.F90
M           20887   input_templates/pop2_tavg_nml.csh

===============================================================================
Tag Creator: njn01 
Tag Date:    8 February 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100208
Tag Testing: side-by-side ccsm4_0_beta42 comparison + bluefire.pop2.aux tests
Tag Summary: Misc. changes + ecosys_mod.F90 correction: 
            o  reorganize pop2 template, setup, and build scripts to support
                 build-time passive-tracer changes; this includes the addition
                 of a new support-level script, pop2_tavg_nml.csh
            o  high-frequency printed diagnostics when INFO_DBUG >= 2
            o Correct O2_ZMIN and O2_ZMIN_DEPTH tavg fields. Except for these fields, 
results are b4b identical to results with previous tag.

M           20712   bld/pop2.cpl7.template
M           20627   input_templates/ocn.cfc.setup.csh
M           20627   input_templates/ocn.ecosys.setup.csh
A               0   input_templates/pop2_tavg_nml.csh
M           20627   input_templates/ocn.iage.setup.csh
M           20712   input_templates/pop2_in_build.csh

Testsuite results: (using ccsm4_0_beta42 + this tag)
PASS  ERS.T62_g16.C.bluefire 
PASS  ERT.T62_g16.C.bluefire 
PASS  PFS.T62_g16.C.bluefire 
PASS  ERT.f19_g16.B1850CN.bluefire 
PASS  ERH.f19_g16.B1850CN.bluefire 


===============================================================================
Tag Creator: njn01 
Tag Date:    25  January 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100125
Tag Testing: 
Tag Summary: Misc. changes: 
               bugfix POP_DistributionCreateRake (maxWork definition)
               make NPROCS_CLINIC a variable in buildnml script; do not resolve it
               make 64-bit offset the default for all pop2 netCDF output files
               remove all references to OCN_64BIT from scripts
               prevent pop2 build-script message from appearing in CCSM build messages

M           20627   source/POP_DistributionMod.F90
M           20627   bld/pop2.cpl7.template
M           20627   input_templates/pop2_in_build.csh


===============================================================================
Tag Creator: njn01 
Tag Date:    8  January 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100108
Tag Testing: see walkthrough log on ccsm pop2 documentation page
Tag Summary: Add new code that supports gx3v7 overflows and corrects
             the T,S limits in the overflows module. 
             Add logical control flag that forces all gx1v6 cases to be 
             backwards compatible with previous tags (bypasses corrections/
             improvements that are allowed in the gx3v7 resolution). 
             Replace references to gx3v7 initial, topography, and tidal-mixing 
             files in the gx3v7_inputdata file.
             Turn ON gx3v7 overflows

M           20109   source/overflows.F90
M           20109   source/initial.F90
M           20109   source/vmix_kpp.F90
M           20109   input_templates/gx3v7_inputdata
A               0   input_templates/gx3v7_overflow
M      *    20168   input_templates/pop2_in_build.csh
M           20168   ChangeLog

===============================================================================
Tag Creator: njn01 
Tag Date:    7  January 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100107
Tag Testing: B20TRCN smoke test
Tag Summary: Fix problem with ocn.cfc.setup.csh: add "set module = cfc' to
             the beginning of this script, so that the pop2 build scripts
             will work properly when cfc's are requested

             vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
             This pop2 tag is used in ccsm4_0_beta39 and ccsm4_0_rel01 branch
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
===============================================================================
Tag Creator: njn01 
Tag Date:    6  January 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100106a
Tag Testing: REMOVE references to lccsm_control_compatible -- these will be added
             in a later tag
             turn gx3v7 overflows OFF -- will be turned on in a later tag
===============================================================================
Tag Creator: njn01 
Tag Date:    6  January 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100106
Tag Testing: bluefire.pop2.auxtest
Tag Summary: Change pop2_in_build.csh so that it does NOT resolve output-file
             strings at the configure stage; make these runtime settings instead,
             which allows the create_clone script to function properly.
===============================================================================
Tag Creator: njn01 
Tag Date:    4  January 2010
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20100104
Tag Testing: bluefire.pop2.auxtest + case-customized tests
Tag Summary: 1) bugfixes for tavg restarts/timeseries  (restarting an 
                 open timeseries, in the middle of accumulating an average)
             2) bugfix for tavg zt_150m_dim restart
             3) modern ecosystem model (klindsay)
             4) ocn.*.setup.csh script support for new options: tavg_nml and tavg_contents with streams
             4) minor bugfix for pop2_in_build.csh, now that it is invoked from
                within the pop2.cpl7.template script (make luse_nf_64bit_offset
                dependent on the *runtime* setting of ${OCN_CDF64}
M           20109   source/passive_tracers.F90
M           20109   source/ecosys_mod.F90
M           20109   source/ecosys_parms.F90
M           20109   source/prognostic.F90
M           20109   source/tavg.F90
M           20109   bld/pop2.cpl7.template
M           20109   ChangeLog
M           20109   input_templates/ocn.iage.setup.csh
M           20109   input_templates/ocn.ecosys.setup.csh
M           20109   input_templates/pop2_in_build.csh
M           20109   input_templates/ocn.cfc.setup.csh
M           20109   input_templates/ocn.cfc11.setup.csh
===============================================================================
Tag Creator: njn01 
Tag Date:    18  December 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091218
Tag Testing: extensive testing -- see testing log on ccsm pop2 documentation page
Tag Summary: Redevelop the pop2.cpl7.template script so that it generates a cleaner,
             simpler pop2.buildnml.csh script. The new pop2.buildnml.csh script contains
             a mostly-resolved pop2_in "here document"
             Also, remove obsolete files from input_templates
 
M           19927   bld/pop2.cpl7.template                        --
M           19927   input_templates/gx1v5_inputdata         -- change *_data to *_filename
M           19927   input_templates/gx1v5b_inputdata        --   ditto
M           19927   input_templates/gx1v6_inputdata         --   ditto
M           19927   input_templates/gx3v5_inputdata         --   ditto
M           19927   input_templates/gx3v6_inputdata         --   ditto
M           19927   input_templates/gx3v7_inputdata         --   ditto
M           19927   input_templates/tx1v1_inputdata         --   ditto
M           19927   input_templates/tx0.1v2_inputdata       --   ditto
M           19927   input_templates/ocn.iage.setup.csh      -- comment lines
M           19927   input_templates/ocn.ecosys.setup.csh    -- comment lines
M           19927   input_templates/ocn.cfc.setup.csh       -- comment lines
M           19927   input_templates/pop2_in_build.csh       -- modify to work with pop2.cpl7.template
D           19927   input_templates/input_templates.files   -- obsolete
D           19927   input_templates/inputdata.files         -- obsolete
D           19927   input_templates/ocn.prestage.csh        -- obsolete

===============================================================================
Tag Creator: njn01 (pio developer: Mariana Vertenstein)
Tag Date:    19  November 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091119
Tag Testing:  extensive testing -- see testing log on ccsm pop2 documentation page
            
Tag Summary:  1) Replace pure netCDF implementation in io_netcdf.F90 with pio version.
                 This implementation was developed by Mariana Vertenstein. The
                 code in this tag is based upon the piopop11_ccsm_pop_2_1_20091030/
                 pop2 branch code, but includes a correction to io_netcdf.F90 that
                 is not inthe piopop11 tag.
                 NOTE: the piopop11 tag does not contain the shared-constants version
                       of overflows.F90, so tests done with the piopop11 tag do not
                       directly compare with the code in this tag.
              2) bugfix pop2.cpl7.template wrt runtype and ecosystem interaction
 
M           19471   input_templates/pop2_in_build.csh
M           19471   source/initial.F90
A               0   source/io_pio.F90
M           19471   source/io_types.F90
M           19471   source/io_netcdf.F90
M           19471   source/io_binary.F90
M           19471   source/barotropic.F90
M           19471   bld/pop2.cpl7.template

===============================================================================
Tag Creator: njn01
Tag Date:    17  November 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091117
Tag Testing:  inspection
            
Tag Summary:  Update the pcfc1112 file in ocn.cfc.setup.csh script 
              (pcfc1112_atm_20091117.nc) Values were extended from year 2003.5 to year 2008.5
 
===============================================================================
Tag Creator: njn01
Tag Date:    9  November 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091109
Tag Testing:  see testing log on ccsm pop2 documentation page
            
Tag Summary:  Replace user-defined constants with ccsm shared constants
              in the overflows.F90 module
 
M           19130   source/overflows.F90
===============================================================================
Tag Creator: njn01
Tag Date:    1  November 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091101
Tag Testing:  
            
Tag Summary:  Change H2 --> SSH2 in those tavg_contents files that had not
              been updated to reflect the name change introduced in the
              ccsm_pop_2_1_20090911 tag
 
M           18834   input_templates/test_sample_tavg_contents
M           18834   input_templates/tx1v1_tavg_contents
M           18834   input_templates/tx0.1v2_tavg_contents

===============================================================================
Tag Creator: njn01
Tag Date:    30  October 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091030
Tag Testing:  
            
Tag Summary:  1) move *.f90 files to $EXEDIR/ocn/source/f90, should they exist
              2) redirect pop2 buildnml messages to $CASE/Buildconf/pop2doc

M           18835   bld/pop2.cpl7.template
M           18835   input_templates/ocn.cfc.setup.csh
M           18835   input_templates/ocn.ecosys.setup.csh
M           18835   input_templates/ocn.cfc11.setup.csh
M           18835   input_templates/ocn.iage.setup.csh

===============================================================================
Tag Creator: njn01
Tag Date:    12  October 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091012
Tag Testing:  
            
Tag Summary:  Eliminate LANL/CCSM branch definition conflict and fix minor
 problem with tripole grid settings in pop2_in_build.csh

M           18792   source/overflows.F90
M           18792   source/initial.F90
M           18792   source/iage_mod.F90
M           18792   source/cfc_mod.F90
M           18792   source/cfc11_mod.F90
M           18792   source/ecosys_mod.F90
M           18792   source/restart.F90
M           18792   bld/pop2.cpl7.template
M           18792   input_templates/ocn.iage.setup.csh
M           18792   input_templates/ocn.ecosys.setup.csh
M           18792   input_templates/pop2_in_build.csh
M           18792   input_templates/test_pop2_in_build.csh
M           18792   input_templates/ocn.cfc.setup.csh
M           18792   input_templates/ocn.cfc11.setup.csh
            
===============================================================================
Tag Creator: njn01
Tag Date:    2  October 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091002
Tag Testing:  
            
Tag Summary:  Fix diagnostics problem (to be filled in later)
            
M           18710   source/tavg.F90


===============================================================================
Tag Creator: njn01
Tag Date:    1  October 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091001a
Tag Testing:  Visual inspection of gx1v6 tavg fields (*.pop.h.* files)
            
Tag Summary: Small corrections for the new fields generated by tavg.F90 in 
             the ccsm_pop_2_1_20091001 tag.

M           18703   source/vmix_kpp.F90
M           18703   source/vertical_mix.F90
M           18703   source/tavg.F90
===============================================================================
Tag Creator: njn01
Tag Date:    1  October 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20091001
Tag Testing:  Debug smoke tests gx1v6 and gx3v7. Code walkthrough with Gokhan.
              Two-month gx1v6 test and review of new output fields by Gokhan.
            
Tag Summary: Add support for remaining CMIP5 output fields. Add z_w_bot
             dimension, and modify diagnostics computations so that
             vertical dimensions are consistent between code and the tavg file
             and internally consistent within the tavg file.

M           18702   source/overflows.F90
M           18702   source/vmix_kpp.F90
M           18702   source/vertical_mix.F90
M           18702   source/ecosys_mod.F90
M           18702   source/tavg.F90
M           18702   input_templates/pop2_in_build.csh
M           18702   input_templates/gx1v6_tavg_contents
M           18702   input_templates/gx1v5_tavg_contents
M           18702   input_templates/gx3v5_tavg_contents
M           18702   input_templates/gx3v7_tavg_contents
===============================================================================
Tag Creator: njn01
Tag Date:    30  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090930
Tag Testing: 5-day + 5-day smoke test; 10-day + 25-day smoke test 
             (test regular and restart history files)
Tag Summary: Fix bug introduced in ccsm_pop_2_1_20090929 tag that affected
             the creation of tavg restart files (*.rh.* files)

M           18687   source/tavg.F90
===============================================================================
Tag Creator: njn01
Tag Date:    29  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090929
Tag Testing: two-month C gx1v6 side-by-side comparison with ccsm4_0_beta23 tag
Tag Summary: Restore the "bounds" attribute to time coordinate 

M           18616   source/tavg.F90
===============================================================================
Tag Creator: njn01
Tag Date:    28  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090928
Tag Testing: see pop2 documentation page for testing lists. Will also be tested
             in ccsm4 pre-tag testing.
Tag Summary:

   This tag writes time-dependent time_bound information to tavg timeseries output files.

M           18520   source/io_netcdf.F90
M           18520   source/tavg.F90

===============================================================================
Tag Creator: njn01
Tag Date:    25  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090925
Tag Testing: see pop2 documentation page for testing lists. Will also be tested
             in ccsm4 pre-tag testing.
Tag Summary:

   This tag contains major changes to the tavg.F90 and supporting modules. The
   new code allows for the creation of tavg timeseries files "on-the-fly",
   and by default, the code is set up to create timeseries files of the daily
   tavg history fields.

   Further testing of this tag may result in changes/corrections. 

 
M           18462   source/io_types.F90
M           18462   source/io.F90
M           18462   source/io_netcdf.F90
M           18462   source/tavg.F90
M           18462   ChangeLog
M           18462   input_templates/pop2_in_build.csh
M           18462   input_templates/gx1v6_tavg_contents
M           18462   input_templates/gx3v5_tavg_contents
M           18462   input_templates/gx3v7_tavg_contents

===============================================================================
Tag Creator: njn01
Tag Date:    24  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090924
Tag Testing: ccsm4_0_beta27 post-tag testing
Tag Summary:
 
  Correct a problem in diagnostics.F90 when tavg HMXL_2 is NOT requested
  (nonstandard usage).
===============================================================================
Tag Creator: njn01
Tag Date:    23  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090923
Tag Testing: ccsm4_0_beta27 post-tag testing
Tag Summary:
 
  This is a bugfix tag which adds gx3v7 support to the input_templates/pop2_in_build.csh
  script.
M           18448   input_templates/pop2_in_build.csh
  
===============================================================================
Tag Creator: njn01
Tag Date:    22  September 2009
Tag Name:    pop2/trunk_tags/ccsm_pop_2_1_20090922
Tag Testing: ccsm4_0_beta27 post-tag testing
Tag Summary:
 
  This is a bugfix tag which adds gx3v7 support to the bld/pop_decomp.xml script and
  fixes a tx0.1/tx1 definition omission in tavg_nml input in the pop2_in_build.csh script.
  
M           18411   bld/pop_decomp.xml
M           18411   input_templates/pop2_in_build.csh

===============================================================================
Originator: njn01
Date:  11  September 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090911
Summary of Changes:   
 
   *This is a significant revision to improve the support of multiple tavg output "streams".
    Extensive testing at the gx3v5 resolution was conducted (see test log) . This version 
    now contains support for writing time-invariant fields, such as background diffusivities,
    the the new frequency option, "once."

   * Correction of the (re-introduced) overflows.F90 threading bug
  
   * Addition of gx3v7 support
                      
M           17956   source/overflows.F90
M           17957   source/initial.F90
M           17956   source/surface_hgt.F90
M           17956   source/time_management.F90
M           17956   source/diags_on_lat_aux_grid.F90
M           17956   source/diagnostics.F90
M           17956   source/forcing.F90
M           17956   source/vmix_kpp.F90
M           17957   source/budget_diagnostics.F90
M           17957   source/advection.F90
M           17956   source/vertical_mix.F90
M           17957   source/tavg.F90
M           17957   source/baroclinic.F90
M           17957   input_templates/gx3v5_tavg_contents
A               0   input_templates/gx3v7_POP_DomainSizeMod.F90
A               0   input_templates/gx3v7_tavg_contents
A               0   input_templates/gx3v7_history_contents
A               0   input_templates/gx3v7_region_ids
A               0   input_templates/gx3v7_vert_grid
A               0   input_templates/gx3v7_inputdata
A               0   input_templates/gx3v7_domain_size.F90
A               0   input_templates/gx3v7_transport_contents
M           17957   input_templates/gx1v6_tavg_contents
A               0   input_templates/gx3v7_movie_contents
A               0   input_templates/gx3v7_depth_accel
M           17957   input_templates/pop2_in_build.csh
M           17956   bld/pop2.cpl7.template
M           17957   ChangeLog

===============================================================================
Originator: njn01
Date:  24  August 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090824
Summary of Changes:   This is a *preliminary* tag which contains a *MAJOR* 
                      revision to support multiple tavg output "streams".
                      Extensive testing and substantial modifications will
                      continue over the next several weeks; users should
                      consider this an "alpha" version of the tavg streams code.

svn status -u
M           17758   source/initial.F90
M           17758   source/step_mod.F90
M           17758   source/budget_diagnostics.F90
M           17758   source/advection.F90
M           17758   source/mix_submeso.F90
M           17758   source/passive_tracers.F90
M           17759   source/forcing_coupled.F90
M           17758   source/hmix_gm.F90
M           17759   source/tavg.F90
M           17758   source/baroclinic.F90
M           17758   input_templates/ocn.iage.setup.csh
M           17758   input_templates/tx0.1v2_tavg_contents
M           17758   input_templates/ocn.ecosys.setup.csh
M           17758   input_templates/pop2_in_build.csh
M           17758   input_templates/gx1v6_tavg_contents
M           17758   input_templates/gx1v5b_tavg_contents
M           17758   input_templates/gx3v6_tavg_contents
M           17758   input_templates/tx1v1_tavg_contents
M           17758   input_templates/ocn.cfc.setup.csh
M           17758   input_templates/gx1v5_tavg_contents
M           17758   input_templates/gx3v5_tavg_contents
M           17758   input_templates/test_sample_tavg_contents
M           17758   drivers/cpl_mct/POP_InitMod.F90


===============================================================================
Originator: njn01
Date:  12  August 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090812
Summary of Changes:  
     * Major time-flag revision:
          Create the routine "access_time_flag" to allow
            other routines to access a time_flag defined in another module.
          Refactor routines to create smaller, single-purpose subroutines
            that can be combined in various ways to support robust time_flag
            creation and use.
          Allow only one module to initialize a time flag. 
          Add error checking to prevent using a noninitialized time_flag. 
     * add definition of undefined_nf_r8 to constants.F90
     * add optional output unit specifier to exit_POP
     * add support for overriding cpl_ts%old_value based upon restart information
     * remove code for overriding cpl_ts%old_value from read_restart 
         (now, override cpl_ts%old_value after it has been initialized)
     * change get_time_flag_id to access_time_flag in ice.F90, restart.F90,
     * remove shr_sys_flush references; use POP_IOUnitsFlush instead
     * replace missing_value with missing_value_d (double-precision value) in
         tavg attributes, for double-precision attributes.

svn status -u
M           17758   source/time_management.F90
M           17758   source/ice.F90
M           17758   source/forcing_coupled.F90
M           17758   source/exit_mod.F90
M           17758   source/restart.F90
M           17758   source/tavg.F90
M           17758   source/constants.F90

Summary of Testing:  (in ccsm4_0_beta21 context)
  PASS  ERS.T62_g16.C.bluefire 
  PASS  ERS.f19_g16.BTR1.bluefire 
  PASS  ERH.f19_g16.BTR1.bluefire 
  PASS  ERB.f19_g16.BTR1.bluefire
===============================================================================
Originator: njn01
Date:  28  July 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090728
Summary of Changes:  
     * Corrections:
         o pop2.cpl7.template -- changes for jaguar branch and hybrid cases
M           17322   bld/pop2.cpl7.template
M           17322   ChangeLog

===============================================================================
Originator: njn01
Date:  27  July 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090727
Summary of Changes:  
     * Corrections:
         o pop2.cpl7.template -- changes for jaguar    

M           17212   bld/pop2.cpl7.template
M           17212   ChangeLog
===============================================================================
Originator: njn01
Date:  20  July 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090720
Summary of Changes:  
     * Corrections:
         o update the tx1v1 chlorophyll dataset; the old one was mistakenly written 
            in little-endian format
         o add tripole-grid correction to DYU in grid.F90 (Gokhan/Keith)
         o interchange the order of allocate and INQUIRE statements in read_bottom_cell, 
             so that the record length for the partial bottom cell file is correctly determined
             (affected tx0.1v2 oob only)
         o modify pop2_in_build.csh to support restarts from netCDF restart files
     * Minor corrections (b4b solutions):
         o correct a minor bug in tavg.F90 module: write out ULON_DEG, TLON_DEG, ULAT_DEG,
            and TLAT_DEG in double precision
         o correct a minor bug in restart.F90 module: always set the variable "restart_type",
            every call, because tavg.F90 code depends on the value of restart_type.
     * Misc changes:
         o rename pop2/drivers/nocouple  pop2/drivers/cpl_none for improved name parallelism
            and modify build/* nocouple references to point to cpl_none
         o add "call POP_IOUnitsFlush(stdout) " to locations where POP_IOUnitsFlush(POP_stdout) 
            calls exist; this restores the flushes in ccsm coupled context during the
            transition from old to new pop2 infrastructure
         o eliminate some "call shr_sys_flush (stdout)" references and replace with
               call POP_IOUnitsFlush(POP_stdout) ; call POP_IOUnitsFlush(stdout)
            This touches a lot of files.

M           16648   build/preprocess.mk
M           16648   source/io_tools.F90
M           16648   source/sw_absorption.F90
M           16648   source/initial.F90
M           16648   source/time_management.F90
M           16648   source/ice.F90
M           16648   source/diags_on_lat_aux_grid.F90
M           16648   source/diagnostics.F90
M           16648   source/grid.F90
M           16648   source/budget_diagnostics.F90
M           16648   source/iage_mod.F90
M           16648   source/io_netcdf.F90
M           16648   source/mix_submeso.F90
M           16648   source/cfc11_mod.F90
M           16648   source/diag_bsf.F90
M           16648   source/forcing_coupled.F90
M           16648   source/ms_balance.F90
M           16648   source/restart.F90
M           16648   source/tavg.F90
M           16648   bld/pop2.cpl7.template
M           16648   ChangeLog
M           16648   input_templates/pop2_in_build.csh
M           16648   input_templates/tx1v1_inputdata
M           16648   drivers/cpl_mct/ocn_comp_mct.F90
D           16648   drivers/nocoupler
D           16648   drivers/nocoupler/POP_FinalMod.F90
D           16648   drivers/nocoupler/POP.F90
D           16648   drivers/nocoupler/POP_CouplingMod.F90
D           16648   drivers/nocoupler/POP_InitMod.F90
A  +            -   drivers/cpl_none

===============================================================================
Originator: njn01
Date:  12 June 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090612
Summary of Changes:  time-flag changes; add time_management unit tester
     * time-flag changes:
         o add support for an offset/reference date in time_to_do
         o reorganize/rename/restructure time-flag definitions, routines, and interfaces
         o add documentation
         o modify time-flag interfaces in modules using time flags (including stand-alone
            version, but no testing of these changes)
         o add offset-date support to tavg_nml in pop2_in_build.csh
     * add new time_management.F90 unit tester
     * define record length in read_bottom_cell via an INQUIRE statement (bug #968)
     * remove ^M characters from serial/communicate.F90
     * restore printed completion messages to ocn.log.* output (use stdout, not POP_stdout)
        and print only from master-task (eliminates messages from each task in ccsm.log.*)
     * modify pop2.cpl7.template so that $INPUT is not resolved in the pop2.build* scripts 
        that the template script creates
      
Testing:   See test log linked to ocn doc page
Reviewers: klindsay, gokhan, yeager
A               0   build/ibm.gnu
M           16539   serial/communicate.F90
A               0   test/unit/time_management
A               0   test/unit/time_management/pop2_in
A               0   test/unit/time_management/POP.F90
A               0   test/unit/time_management/POP_DomainSizeMod.F90
A               0   test/unit/time_management/timeTest
A               0   test/unit/time_management/domain_size.F90
M           16539   source/io_tools.F90
M           16539   source/initial.F90
M           16539   source/time_management.F90
M           16539   source/ice.F90
M           16539   source/diagnostics.F90
M           16539   source/step_mod.F90
M           16539   source/movie.F90
M           16539   source/grid.F90
M           16539   source/budget_diagnostics.F90
M           16539   source/forcing_coupled.F90
M           16539   source/ecosys_mod.F90
M           16539   source/restart.F90
M           16539   source/history.F90
M           16539   source/tavg.F90
M           16539   source/POP_ErrorMod.F90
M           16539   source/state_mod.F90
M           16539   bld/pop2.cpl7.template
M           16539   ChangeLog
M           16539   input_templates/pop2_in_build.csh
M           16539   drivers/nocoupler/POP.F90
M           16539   drivers/nocoupler/POP_CouplingMod.F90
M           16539   drivers/nocoupler/POP_InitMod.F90
M           16539   drivers/ccsm_cpl7/POP_FinalMod.F90
M           16539   drivers/ccsm_cpl7/ocn_comp_mct.F90
M           16539   drivers/ccsm_cpl7/POP_InitMod.F90
Status against revision:  16638

===============================================================================
Originator: njn01 (new ccsm4 requirement)
Date:  9 June 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090609
Summary of Changes:  
     * Remove all references to SEQ_MCT
      
Testing:  C compset smoke test in ccsm4_0_beta17 context
Reviewer: none
M           16535   source/io_types.F90
M           16535   mpi/POP_CommMod.F90
M           16535   ChangeLog

===============================================================================
Originator: njn01
Date:  22 May 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090522
Summary of Changes:  
     * Change pop2_in_build.csh settings, according to directions from
       Gokhan (see ocean doc pages)
     * Add useful write statement to io_netCDF.F90, to help in debugging
      
Testing:  none
Reviewer: none
M           16215   source/io_netcdf.F90
M           16215   ChangeLog
M           16215   input_templates/pop2_in_build.csh
Status against revision:  16215

===============================================================================
Originator: njn0
Date:  13 May 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090513
Summary of Changes:  
     * Modify ocn.*.setup.csh scripts so that they only echo *default*
       input files into pop2.input_data_list file. This will allow users
       to select nonstandard files from their $case directory without
       causing the check_input_data script to stop with an error message.
      
Testing:  See test log
Reviewer: klindsay (walkthrough)
M           15792   input_templates/ocn.cfc.setup.csh
M           15792   input_templates/ocn.ecosys.setup.csh
M           15792   input_templates/ocn.cfc11.setup.csh
M           15952   ChangeLog
Status against revision:  16008

===============================================================================
Originator: njn01
Date:  11 May 2009
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090511
Summary of Changes:  
     * bugfix: tavg.F90 cell_methods correction (correctly identify minimum and maximum quantities
        in netCDF tavg history output files)
     * bugfix: correct gx3v5 pop2_in_build.csh so that this case runs without error-detection shutdown
     * add  ltidal_mixing/lhoriz_varying_bckgrnd dependencies to pop2_in_build.csh (to catch problems
        at buildnml time, rather than at execution time)
     * add iter-option consistency checking to pop2_in_build.csh  
        (to protect users from selecting internally inconsistent options)
      
Testing:  See test logs
Reviewer: Gokhan (pop2_in_build.csh), klindsay (tavg/cell methods)
M           15792   source/tavg.F90
M           15793   input_templates/pop2_in_build.csh
M           15915   ChangeLog
Status against revision:  15951

===============================================================================
Originator: klindsay
Date: 1 May 2009  (testing completed, and tag created, on 20090506)
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090506
Summary of Changes:  
     * Initialize arrays in cfc_mod.F90, which allows the ocean model compiled
       in DEBUG mode (NaN initialization and signal trapping) to properly execute.
      
Testing: preliminary testing: klindsay, mai Further testing: njn01
         All of the following tests pass.  In addition, the binary ocean restart files
         from ERT1850.f19_g16.B20TRTR1.bluefire and ERT1850.f19_g16.B20TRTR1.bluefire.with_cfc
         at the end of two months are identical

         DEBUG tests:
          * SMS_D.f19_g16.B20TRTR1.bluefire with Keith's cfc_mod.F90 in SourceMods/src.pop2
          * SMS_D.T62_g35.C.bluefire with Keith's cfc_mod.F90 *and* ltidal_mixing = .false.
            (so that the case will run)

         Exact-restart tests:
          * ERT1850.f19_g16.B20TRTR1.bluefire out-of-box (2-month exact restart test)
          * ERT1850.f19_g16.B20TRTR1.bluefire with Keith's cfc_mod.F90 in SourceMods/src.pop2
Reviewer: none
M           15792   source/cfc_mod.F90
M           15793   ChangeLog
Status against revision:  15914
===============================================================================
Originator: gokhan
Date: 27 April 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090427
Summary of Changes:  
     * Change default setting for gx3*,tx* grids:
       for vmix_kpp (these changes should have been made in August 2008)
Testing: 
       ccsm4_0_beta14 tag. set up oob and new B gx1v6, C gx3v5, C tx1v1 cases:
     * new and old B gx1v6: pop2_in files are identical (except for filenames)
     * new and old C gx3v5: pop2_in files are identical (except for filenames)
     * new C gx3v5 with lhoriz_varying_bckgrnd = .true. (model stops building, with error msg)
     * new C tx1v1 with lhoriz_varying_bckgrnd = .true. (model stops building, with error msg)
Reviewer: none
M           15775   input_templates/pop2_in_build.csh
M           15775   ChangeLog
Status against revision:  15792
===============================================================================
Originator: yeager, gokhan
Date: 24 April 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090424
Summary of Changes:  
     * Change default setting for gx3v* grids:
         set sfwf_weak_restore = 0.0115 
Testing: none
Reviewer: yeager, gokhan
M           15492   input_templates/pop2_in_build.csh
M           15509   ChangeLog
===============================================================================
Originator: njn01
Date: 6 April 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090406
Summary of Changes:  
     * 1850-2000_control --> 1850-2000 in ocn.cfc.setup.csh
       (this is now consistent with the upcoming compset definition)
Testing: none
Reviewer: gokhan, mvertens
===============================================================================
Originator: njn01
Date: 3 April 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090403
Summary of Changes:  
     * Add tx1v1 support to pop_decomp.xml
     * Redefine tx1v1_tavg_contents so that it is identical to the tx0.1v2 version
     * Modify pop2_in_build.csh tx1v1 settings (more closely related to tx0.1v2 settings)
     * Rework ocn.cfc.setup.csh so that it correctly responds to new CCSM env variable and
       time (CCSM_IPCC --> OCN_TRANSIENT and 1870-->1850)
     * Correct typo in tx0.1v2_inputdata topography_data dataset name
Testing: 5-day tx1v1 smoke test on bluefire, using tcraig's "sandbox"
Reviewer: none
M      bld/pop_decomp.xml
M      input_templates/pop2_in_build.csh
M      input_templates/tx1v1_tavg_contents
M      input_templates/tx0.1v2_inputdata
M      input_templates/ocn.cfc.setup.csh


===============================================================================
Originator: njn01
Date: 27 March 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090327
Summary of Changes:  
     * Change default tavg frequency back to nmonth
Testing: none
Reviewer: none

===============================================================================
Originator: njn01
Date: 24 March 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090324
Summary of Changes:  
     * Default hmix_gm kappa_isop_choice,kappa_thic_choice = 'bfre'
       (Gokhan 23 March 2009 email)
     * Correction of overflows logic bug
       (Bruce 24 March 2009: /home/bruceb/ccsm/ocn/overflow/pop2_conversion/info_nancy/24mar09)
Testing: 
     Gokhan, Bruce
     http://www.cgd.ucar.edu/~njn01/ccsm_pop/log_by_date_2.1.html

Reviewer: none


===============================================================================
Originator: njn01
Date: 13 March 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090313b
Summary of Changes:  
     * Allow all processors to print error message from exit_mod.F90
     * Add error-detection logic to pop2_in_build.csh to prevent
       setting ltavg_nino_diags when tavg averages are not created 
       frequently enough
Testing: 
     * Confirmed that all tasks write exit_POP error message when
       "if (my_task == master_task)" test is if-def'd out
     * Set up case with annual tavg and ltavg_nino_diags .true. and confirmed
       pop2_in_build.csh traps the error. 

Reviewer: njn01

M           14951   source/exit_mod.F90
M           14951   input_templates/pop2_in_build.csh
M           14952   ChangeLog


===============================================================================
Originator: njn01
Date: 13 March 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090313
Summary of Changes:  
     * overflows: generalize restart procedure to support ocean tracers
     * ocn_comp_mct: change the two instances of "rattr" to "rAttr" to 
        match all other instances of rAttr

Testing: 
         See walkthrough summary/test log for details and testing
         http://www.cgd.ucar.edu/~njn01/ccsm_pop/log_by_date_2.1.html
Reviewer: njn01, gokhan, bruceb

M           14951   source/overflows.F90
M           14951   source/initial.F90
M           14951   source/restart.F90
M           14951   ChangeLog
M           14951   input_templates/gx1v5b_overflow
M           14951   input_templates/gx1v6_overflow
M           14951   drivers/ccsm_cpl7/ocn_comp_mct.F90


===============================================================================

Originator: njn01
Date: 4 March 2009 
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090304
Summary of Changes:  
     * Import Jon Wolfe's OpenMP corrections
     * correct overflows.F90 (eliminate "block" dimension in WORK3,WORK4)
       Note: did not import hmix_aniso.F90 code changes
Testing: ccsm4_0_beta10, oob vs oob + new code, 2-month exact restart 
         See walkthrough summary/test log for details and testing
Reviewer: njn01

M           14585   source/overflows.F90
M           14585   source/hmix_aniso.F90
M           14585   source/diagnostics.F90
M           14585   source/step_mod.F90
M           14585   source/POP_SolversMod.F90
M           14585   source/grid.F90
M           14585   source/forcing_shf.F90
M           14585   source/cfc11_mod.F90
M           14585   source/diag_bsf.F90
M           14585   source/ecosys_mod.F90
M           14585   source/ms_balance.F90
M           14585   source/tavg.F90
M           14585   source/barotropic.F90
M           14585   source/baroclinic.F90
M           14587   ChangeLog
M           14585   drivers/ccsm_cpl7/ocn_comp_mct.F90

===============================================================================

Originator: njn01
Date:  27 February 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090227
Summary of Changes:  
     * Update pop2_in_build.csh to reflect most recent hmix_gm eg namelist parameters
Testing:  Gokhan, Markus
Reviewer: None

From Markus:
Hi Nancy,

here is our best estimate for the constants:

   const_eg               = 0.8
   gamma_eg               = 300.0
   kappa_min_eg           = 0.35e7
   kappa_max_eg           = 2.5e7

                      Cheers,
                       Markus

M           14585   ChangeLog
M           14585   input_templates/pop2_in_build.csh

===============================================================================
Originator: njn01
Date:  26 February 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090226
Summary of Changes:  
     * Update movie.F90 to support high-resolution work
Testing:  See walkthrough summary/test log for details and testing
Reviewer: Gokhan

M           14563   source/surface_hgt.F90
M           14563   source/diagnostics.F90
M           14563   source/step_mod.F90
M           14563   source/movie.F90
M           14563   source/forcing.F90
M           14563   source/baroclinic.F90
M           14563   ChangeLog
M           14563   input_templates/gx1v6_movie_contents
M           14563   input_templates/tx1v1_movie_contents
M           14563   input_templates/gx1v5_movie_contents
M           14563   input_templates/gx1v5b_movie_contents
M           14563   input_templates/gx3v6_movie_contents
M           14563   input_templates/tx0.1v2_movie_contents
M           14563   input_templates/gx3v5_movie_contents
Status against revision:  14563

===============================================================================
Originator: njn01
Date:  24 February 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090224
Summary of Changes:  
     * Change const_eg = 1.0 ---> const_eg  = 0.8
Testing:  Markus C compset control run
Reviewer: Gokhan

be1105en/fis/cgd/cseg/people/njn01/tags/pop2% svn status -u
M           14542   ChangeLog
M           14542   input_templates/pop2_in_build.csh

===============================================================================
Originator: njn01
Date:  23 February 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090223b
Summary of Changes:  
     * Change path for output files from full pathname to relative filename
     * Fix timer_total
     * Eliminate references to ccsm3 timers (SEND,RECV,RECV to SEND, and SEND to RECV)
Testing:
     * /fis01/cgd/cseg/people/njn01/test/rpointer 
          gx1v5 C two-month restart
          gx1v5 C 8-day restart
     * /fis01/cgd/cseg/people/njn01/test/timers
          gx1v5 C one-month runs with and without timers changes

M           14535   source/forcing_coupled.F90
M           14536   input_templates/pop2_in_build.csh
M           14535   ChangeLog
M           14535   drivers/ccsm_cpl7/ocn_comp_mct.F90
Status against revision:  14537


===============================================================================
Originator: njn01
Date:  23 February 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090223
Summary of Changes:  
     * new hmix_gm.F90 option: Eden and Greatbatch
     * small correction to hmix_gm.F90 (TAPER2; Gokhan; identified several years ago)
     * pop2_in_build.csh modified to support Eden and Greatbatch option (on by default)
Testing:
   (1) out-of-box, 1-month, gx1v5 C
   (2) same as (1), except use new hmix_gm.F90 and pop2_in_build.csh with eg option
       off ***and*** TAPER2 correction turned off.  Should be b4b with (1)
   (3) same as (2), except TAPER2 correction turned on and new hmix_gm_eg test.
       This will NOT be b4b. Compare timing only.
   (4) same as (3), except enable edgr option
   (5) same as (4), except *disable* edgr option  (should be b4b with (3), but
       this test uses the new pop2_in_build.csh and hmix_gm.F90 code that will be
       checked in)


===============================================================================
Originator: njn01
Date:  
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090218
Summary of Changes:  
     * Add gx1v6 support
     * Add support for startup/spunup *.hdr file
     * Write tavg error message on all procs
     * Add extra info to io_netcdf.F90 error message
           ("string too short") to help eliminate confusion
     * Modify tx0.1v2_inputdata to reflect approved inputdata dataset names

Process:
    Get gx1v6 datasets from Steve Yeager. Modify pop2_in_build.csh
    to recognize gx1v6. Check gx1v6 datasets into inputdata and $SVN data
    repo.  Create gx1v6_input_data, pointing to new gx1v6 datasets.
    Modify pop_decomp.xml to recognize gx1v6. 

Testing (njn01):
     Modify ccsm4_0_beta09 (cice, clm, dice, dlnd, datm, scripts, pop2).
     Set up B compset. Compare $comp_in for comp = (drv,ice,lnd,atm,pop)
     with Steve Yeager's b40.008o case. Diff'd ocean and ice datasets
     with Steve Yeager's b40.008o case.
 
     Set up C compset. Will need new gx1v6 datasets before testing
     can be completed.  

     This tag will be updated, if necessary, after full gx1v6 test suite
     is completed.

M           12820   source/io_netcdf.F90
M           13884   source/hmix_gm.F90
M           12674   source/tavg.F90
M           14024   bld/pop2.cpl7.template
M           13884   bld/pop_decomp.xml
M           12674   bld/generate_pop_decomp.pl
A               0   input_templates/gx1v6_region_ids
M           12674   input_templates/tx0.1v2_inputdata
A               0   input_templates/gx1v6_transport_contents
A               0   input_templates/gx1v6_movie_contents
A               0   input_templates/gx1v6_domain_size.F90
A               0   input_templates/gx1v6_POP_DomainSizeMod.F90
A               0   input_templates/gx1v6_history_contents
A               0   input_templates/gx1v6_tavg_contents
A               0   input_templates/gx1v6_overflow
A               0   input_templates/gx1v6_vert_grid
A               0   input_templates/gx1v6_inputdata
A               0   input_templates/gx1v6_depth_accel
M           13884   input_templates/pop2_in_build.csh
M           14024   ChangeLog
Status against revision:  14443

===============================================================================
Originator: njn01
Date:  Wed Jan 21 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090121
Summary of Changes:  Correct bug #890 (branch start bug)

Testing:  
     njn01: Set up control run and branch case using ccsm4_0_beta08 tag.
            Modify $case/Tools/Template/pop2.cpl7.template to correct the bug.
            Build branch case (using new pop2.cpl7.template) and run. Confirm
            that rpointer files are generated correctly and that the branch
            case runs for five days.

M           13801   bld/pop2.cpl7.template
M           13884   ChangeLog
Status against revision:  14023


===============================================================================
Originator: njn01
Date:  Fri Jan 9 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090109
Summary of Changes:  
   1) New overflows.F90 module and gx1v5b_overflow input file from
      Bruce B and Gokhan. The overflows.F90 module has been used
      extensively in recent runs; njn01 modified it to be consistent
      with the changes made in ccsm_pop_2_1_20090107a
   2) tx0.1v2_tavg_contents file from a38hr02_hrpop43 (JD mods)
   3) pop2_in_build.csh vmix_kpp_nml tx0.1v2 update
   4) Comment out call MPI_BARRIER in POP_CommMod.F90 (JD mod)
   5) Only check COMPUTE_TLT in hmix_gm.F90 if not _HIRES
   6) Add new tx0.1v2 blocks to pop_decomp.xml file (from a38hr02_hrpop43 tag)

Testing:  
   1) Bruce B confirmed on 9 Jan 2009 that the resulting overflows *.do* files are ok
   2) Compile and run a one-month gx1v5 C case.
   3) No testing of tx0.1v2 mods, beyond inspection

M           13817   source/overflows.F90
M           13010   source/hmix_gm.F90
M           12820   bld/pop_decomp.xml
M           12674   mpi/POP_CommMod.F90
M           13010   input_templates/gx1v5b_overflow
M           12674   input_templates/tx0.1v2_tavg_contents
M           13817   input_templates/pop2_in_build.csh
M           13819   ChangeLog

===============================================================================
Originator: klindsay
Date:  Wed Jan 7 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090107b
Summary of Changes:  
Add time-filtering of surface Chl to initialization so that it is
consistent with the time-filtering in the main time loop. Move set_chl
call in subroutine set_surface_forcing of forcing.F90 to eliminate
time-lag in prognostic Chl.

Testing:  
The mods ensure exact restart for compset CECO at resolutions T62_g35 &
T62_g15. They do not change results (bit-for-bit) for compset B at
resolution f19_g15 or for compset C at resolutions T62_g35 & T62_g15.
The bit-for-bit verification is for a 5 day startup run with
CONTINUE_RUN==FALSE as well as a 5 day continuation.

M           12674   source/sw_absorption.F90
M           12674   source/forcing.F90
M           12674   source/passive_tracers.F90
M           12892   source/ecosys_mod.F90
M           13817   ChangeLog

===============================================================================
Originator: njn01
Date:  Wed Jan 7 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090107a
Summary of Changes:  Remove system calls from diagnostics.F90 and overflows.F90
Testing:  C compset, gx1v5 and gx3v5. Confirm output diagnostics
   files are named with beginning model date, by inspection
   Gokhan and Bruce confirmed diagnostics files are ok. 

M           13010   source/overflows.F90
M           12674   source/initial.F90
M           12674   source/diagnostics.F90
M           13010   input_templates/pop2_in_build.csh
M           13801   ChangeLog

===============================================================================
Originator: njn01
Date:  Wed Jan 7 2009
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20090107
Summary of Changes:  new pop2.cpl7.template file that is consistent
 with ccsm script changes in the ccsm4_0_beta07 tag. Provided by tcraig.
Testing:  Testing by tcraig.

M           13010   bld/pop2.cpl7.template
M           13010   ChangeLog

===============================================================================
Originator: njn01
Date:  Fri Nov 21 2008
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20081121
Testing:  2-month gx1v5b exact restart tests, C and B compsets
----------------------------------------------------------------
Summary of Changes:  
   * Correct bugs in overflows product water code
   * Add support for gx1v5b resolution
   * Delete support for gx1v5a resolution
   * Correct bug in hmix_gm.F90 consistency checks
   * Widen support for external environments in pop2.cpl7.template (TC mod)
----------------------------------------------------------------
M           12674   source/overflows.F90
M           12674   source/hmix_gm.F90
M           12674   source/barotropic.F90
M           12674   bld/pop2.cpl7.template
D           12674   input_templates/gx1v5a_transport_contents
A               0   input_templates/gx1v5b_vert_grid
A               0   input_templates/gx1v5b_inputdata
D           12674   input_templates/gx1v5a_movie_contents
D           12674   input_templates/gx1v5a_domain_size.F90
A               0   input_templates/gx1v5b_domain_size.F90
D           12674   input_templates/gx1v5a_POP_DomainSizeMod.F90
D           12674   input_templates/gx1v5a_history_contents
D           12674   input_templates/gx1v5a_tavg_contents
D           12674   input_templates/gx1v5a_overflow
A               0   input_templates/gx1v5b_history_contents
A               0   input_templates/gx1v5b_region_ids
D           12674   input_templates/gx1v5a_vert_grid
D           12674   input_templates/gx1v5a_inputdata
D           12674   input_templates/gx1v5a_depth_accel
A               0   input_templates/gx1v5b_depth_accel
A               0   input_templates/gx1v5b_overflow
A               0   input_templates/gx1v5b_transport_contents
A               0   input_templates/gx1v5b_POP_DomainSizeMod.F90
A               0   input_templates/gx1v5b_tavg_contents
D           12674   input_templates/gx1v5a_region_ids
A               0   input_templates/gx1v5b_movie_contents
M           12820   input_templates/pop2_in_build.csh
M           12892   ChangeLog

===============================================================================
Originator: njn01
Date: 
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20081117
Testing:  see testing log on web page
Summary of Changes:  OpenMP corrections; fixes bug 852
M           12674   source/diags_on_lat_aux_grid.F90  (OMP corrections)
M           12674   source/POP_SolversMod.F90         (OMP corrections)
M           12674   source/budget_diagnostics.F90     (OMP corrections)
M           12674   source/cfc11_mod.F90              (OMP corrections)
M           12674   source/ecosys_mod.F90             (OMP corrections)
M           12820   ChangeLog


===============================================================================
Originator: njn01
Date: Mon Nov 10 12::10 MST 2008
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20081110
Testing:  
History: 
Summary of Changes: 
    * bugfix for TAVG_R8 3D tavg netCDF output
    * bugfix for history.F90: add target attribute
    * add support for gx3v6 to pop_decomp.xml
    * added executable property to pop2_in_build.csh
      using the command "svn propset svn:executable ON pop2_in_build.csh"
      in in the pop2/input_templates directory:
            Property changes on: input_templates/pop2_in_build.csh
            ___________________________________________________________________
            Added: svn:executable
               + *

===============================================================================
Originator: njn01
Date: Fri 31 Oct 2008
Model: pop2
Tag: pop2/trunk_tags/ccsm_pop_2_1_20081031
Testing:  
History: 
Summary of Changes: This tag is based upon /pop2/branch_tags/hrpop_tags/hrpop61_ccsm_pop_2_1_20080125
  Differences from hrpop61 include:
       * removal of cpl6 support.
       * the use of shr_sys_abort where needed (as a CCSMCOUPLED option that will remain in place 
         until Phil's new error trapping is fully functional)
       * error-trapping for SHF_QSW < epsilon in the high-res version
       * corrections to high-res settings in pop2_in_build.csh
       * parallel i/o development routines have not yet been ported to the pop2 trunk



===============================================================================
