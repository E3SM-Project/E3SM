string(APPEND CONFIG_ARGS " --host=cray")
set(USE_CUDA "TRUE")
string(APPEND CPPDEFS " -DGPU")
if (COMP_NAME STREQUAL gptl)
  string(APPEND CPPDEFS " -DHAVE_NANOTIME -DBIT64 -DHAVE_SLASHPROC -DHAVE_GETTIMEOFDAY")
endif()
string(APPEND CPPDEFS " -DTHRUST_IGNORE_CUB_VERSION_CHECK")
string(APPEND CMAKE_CUDA_FLAGS " -ccbin CC -O2 -arch sm_80 --use_fast_math")
string(APPEND KOKKOS_OPTIONS " -DKokkos_ARCH_AMPERE80=On -DKokkos_ENABLE_CUDA=On -DKokkos_ENABLE_CUDA_LAMBDA=On -DKokkos_ENABLE_SERIAL=ON -DKokkos_ENABLE_OPENMP=Off")
set(CMAKE_CUDA_ARCHITECTURES "80")
string(APPEND CMAKE_C_FLAGS_RELEASE " -O2")
string(APPEND CMAKE_Fortran_FLAGS_RELEASE " -O2")
set(MPICC "cc")
set(MPICXX "CC")
set(MPIFC "ftn")
set(SCC "cc")
set(SCXX "CC")
set(SFC "ftn")

string(APPEND FFLAGS              " -IPLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/include")
string(APPEND FFLAGS              " -IPLACEHOLDER_PETSC_DIR/include -IPLACEHOLDER_PETSC_DIR/PLACEHOLDER_PETSC_ARCH/include" )
string(APPEND CMAKE_Fortran_FLAGS " -IPLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/include")
string(APPEND CMAKE_Fortran_FLAGS " -IPLACEHOLDER_PETSC_DIR/include -IPLACEHOLDER_PETSC_DIR/PLACEHOLDER_PETSC_ARCH/include" )
string(APPEND CPPFLAGS            " -IPLACEHOLDER_PETSC_DIR/include -IPLACEHOLDER_PETSC_DIR/PLACEHOLDER_PETSC_ARCH/include" )

string(APPEND SLIBS " PLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/lib64/libcmocka.a")
string(APPEND SLIBS " PLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/lib/librdycore_f90.a")
string(APPEND SLIBS " PLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/lib/librdycore.a")
string(APPEND SLIBS " -Wl,-rpath,/global/cfs/projectdirs/m4267/petsc/petsc_main//pm-gpu-opt-32bit-gcc-11-2-0-fc2888174f5/lib -L/global/cfs/projectdirs/m4267/petsc/petsc_main//pm-gpu-opt-32bit-gcc-11-2-0-fc2888174f5/lib -Wl,-rpath,/global/cfs/projectdirs/m4267/petsc/petsc_main/pm-gpu-opt-32bit-gcc-11-2-0-fc2888174f5/lib -L/global/cfs/projectdirs/m4267/petsc/petsc_main/pm-gpu-opt-32bit-gcc-11-2-0-fc2888174f5/lib -Wl,-rpath,/opt/cray/pe/netcdf-hdf5parallel/4.9.0.3/gnu/9.1/lib -L/opt/cray/pe/netcdf-hdf5parallel/4.9.0.3/gnu/9.1/lib -Wl,-rpath,/opt/cray/pe/parallel-netcdf/1.12.3.3/gnu/9.1/lib -L/opt/cray/pe/parallel-netcdf/1.12.3.3/gnu/9.1/lib -Wl,-rpath,/opt/cray/pe/hdf5-parallel/1.12.2.3/gnu/9.1/lib -L/opt/cray/pe/hdf5-parallel/1.12.2.3/gnu/9.1/lib -Wl,-rpath,/opt/nvidia/hpc_sdk/Linux_x86_64/22.7/cuda/11.7/lib64 -L/opt/nvidia/hpc_sdk/Linux_x86_64/22.7/cuda/11.7/lib64 -L/opt/nvidia/hpc_sdk/Linux_x86_64/22.7/cuda/11.7/lib64/stubs -lpetsc -lscalapack -lkokkoskernels -lkokkoscontainers -lkokkoscore -lkokkossimd -lparmetis -lmetis -lexoIIv2for32 -lexodus -lmuparser -lnetcdf -lpnetcdf -lhdf5_hl -lhdf5 -ltriangle -lz -lceed -lcudart -lnvToolsExt -lcufft -lcublas -lcusparse -lcusolver -lcurand -lcuda -lX11 -lstdc++ -lquadmath")
string(APPEND SLIBS " PLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/external/libcyaml.a")
string(APPEND SLIBS " PLACEHOLDER_E3SM_DIR/externals/rdycore/build-PLACEHOLDER_PETSC_ARCH/lib/libyaml.a")

