<?xml version="1.0"?>
<config_pes>
  <grid name="any">
    <mach name="chrysalis">
      <pes compset="any" pesize="any">
        <comment>tests+chrysalis: default, 4 nodes x 32 mpi x 2 omp @ root 0</comment>
        <MAX_MPITASKS_PER_NODE>32</MAX_MPITASKS_PER_NODE>
        <MAX_TASKS_PER_NODE>64</MAX_TASKS_PER_NODE>
        <ntasks>
          <ntasks_atm>-4</ntasks_atm>
          <ntasks_lnd>-4</ntasks_lnd>
          <ntasks_rof>-4</ntasks_rof>
          <ntasks_ice>-4</ntasks_ice>
          <ntasks_ocn>-4</ntasks_ocn>
          <ntasks_glc>-4</ntasks_glc>
          <ntasks_wav>-4</ntasks_wav>
          <ntasks_cpl>-4</ntasks_cpl>
        </ntasks>
        <nthrds>
          <nthrds_atm>2</nthrds_atm>
          <nthrds_lnd>2</nthrds_lnd>
          <nthrds_rof>2</nthrds_rof>
          <nthrds_ice>2</nthrds_ice>
          <nthrds_ocn>2</nthrds_ocn>
          <nthrds_glc>2</nthrds_glc>
          <nthrds_wav>2</nthrds_wav>
          <nthrds_cpl>2</nthrds_cpl>
        </nthrds>
      </pes>
    </mach>
  </grid>
  <grid name="a%ne4np4.*">
    <mach name="chrysalis">
      <pes compset="any" pesize="any">
        <comment>tests+chrysalis: any compset on ne4 grid, 3x32x2 NODESxMPIxOMP</comment>
        <MAX_MPITASKS_PER_NODE>32</MAX_MPITASKS_PER_NODE>
        <MAX_TASKS_PER_NODE>64</MAX_TASKS_PER_NODE>
        <ntasks>
          <ntasks_atm>96</ntasks_atm>
          <ntasks_ice>96</ntasks_ice>
          <ntasks_cpl>96</ntasks_cpl>
          <ntasks_lnd>96</ntasks_lnd>
          <ntasks_rof>96</ntasks_rof>
          <ntasks_ocn>96</ntasks_ocn>
          <ntasks_glc>96</ntasks_glc>
          <ntasks_wav>96</ntasks_wav>
        </ntasks>
        <nthrds>
          <nthrds_atm>2</nthrds_atm>
          <nthrds_ice>2</nthrds_ice>
          <nthrds_cpl>2</nthrds_cpl>
          <nthrds_lnd>2</nthrds_lnd>
          <nthrds_rof>2</nthrds_rof>
          <nthrds_ocn>2</nthrds_ocn>
          <nthrds_glc>2</nthrds_glc>
          <nthrds_wav>2</nthrds_wav>
        </nthrds>
      </pes>
      <pes compset="any" pesize="S">
        <comment>tests+chrysalis: any compset on ne4 grid, 1x32x2 NODESxMPIxOMP</comment>
        <MAX_MPITASKS_PER_NODE>32</MAX_MPITASKS_PER_NODE>
        <MAX_TASKS_PER_NODE>64</MAX_TASKS_PER_NODE>
        <ntasks>
          <ntasks_atm>32</ntasks_atm>
          <ntasks_ice>32</ntasks_ice>
          <ntasks_cpl>32</ntasks_cpl>
          <ntasks_lnd>32</ntasks_lnd>
          <ntasks_rof>32</ntasks_rof>
          <ntasks_ocn>32</ntasks_ocn>
          <ntasks_glc>32</ntasks_glc>
          <ntasks_wav>32</ntasks_wav>
        </ntasks>
        <nthrds>
          <nthrds_atm>2</nthrds_atm>
          <nthrds_ice>2</nthrds_ice>
          <nthrds_cpl>2</nthrds_cpl>
          <nthrds_lnd>2</nthrds_lnd>
          <nthrds_rof>2</nthrds_rof>
          <nthrds_ocn>2</nthrds_ocn>
          <nthrds_glc>2</nthrds_glc>
          <nthrds_wav>2</nthrds_wav>
        </nthrds>
      </pes>
    </mach>
  </grid>
  <!-- allactive -->
  <grid name="a%ne30np4.pg.+_oi%IcoswISC30E3r5">
    <mach name="chrysalis">
      <pes compset=".*EAM.+ELM.+MPASSI.+MPASO.+MOSART.+SGLC.+_SESP$" pesize="any">
        <comment>tests+chrysalis: -compset WCYCL* -res ne30pg*IcoswISC30E3r5 on 6 nodes pure-MPI </comment>
        <ntasks>
          <ntasks_atm>320</ntasks_atm>
          <ntasks_lnd>320</ntasks_lnd>
          <ntasks_rof>320</ntasks_rof>
          <ntasks_ice>320</ntasks_ice>
          <ntasks_ocn>64</ntasks_ocn>
          <ntasks_cpl>320</ntasks_cpl>
        </ntasks>
        <rootpe>
          <rootpe_ocn>320</rootpe_ocn>
        </rootpe>
      </pes>
      <pes compset=".*EAM.+ELM.+MPASSI.+MPASO.+SGLC_SWAV_SIAC_SESP_BGC.*" pesize="any">
        <comment>tests+chrysalis: --compset BGC* --res ne30pg2_r05_IcoswISC30E3r5 on 9 nodes pure-MPI </comment>
        <ntasks>
          <ntasks_atm>448</ntasks_atm>
          <ntasks_lnd>448</ntasks_lnd>
          <ntasks_rof>448</ntasks_rof>
          <ntasks_ice>448</ntasks_ice>
          <ntasks_ocn>128</ntasks_ocn>
          <ntasks_cpl>448</ntasks_cpl>
        </ntasks>
        <rootpe>
          <rootpe_ocn>448</rootpe_ocn>
        </rootpe>
      </pes>
    </mach>
  </grid>
  <grid name="oi%IcoswISC30.*">
  </grid>
  <grid name="a%ne0np4_northamericax4v1.pg2_l%.+_oi%WC14to60E2r3">
    <mach name="chrysalis">
      <pes compset=".*EAM.+ELM.+MPASSI.+MPASO.+MOSART.+" pesize="any">
        <comment>tests+chrysalis: --compset WCYCL --res northamericax4v1pg2_WC14to60E2r3 on 4 nodes pure-MPI, ~0.55 sypd </comment>
        <ntasks>
          <ntasks_atm>192</ntasks_atm>
          <ntasks_lnd>192</ntasks_lnd>
          <ntasks_rof>192</ntasks_rof>
          <ntasks_ice>192</ntasks_ice>
          <ntasks_ocn>64</ntasks_ocn>
          <ntasks_cpl>192</ntasks_cpl>
        </ntasks>
        <rootpe>
          <rootpe_ocn>192</rootpe_ocn>
        </rootpe>
      </pes>
    </mach>
  </grid>
  <!-- EAM -->
  <grid name="a%ne0np4.*">
  </grid>
  <grid name="a%ne30np4.pg2_l%.+_oi%oEC60to30v3">
  </grid>
  <!-- ELM -->
  <grid name="l%360x720cru|a%r05_l%r05_oi%null_r%r05_g%null_w%null_z%null_m%oEC60to30v3">
  </grid>
  <!-- MPASO -->
    <grid name="oi%oQU240.*">
      <mach name="chrysalis">
        <pes compset="any" pesize="S">
          <comment>tests+chrysalis: any compset on oQU240 grid, 1x32x2 NODESxMPIxOMP</comment>
          <MAX_MPITASKS_PER_NODE>32</MAX_MPITASKS_PER_NODE>
          <MAX_TASKS_PER_NODE>64</MAX_TASKS_PER_NODE>
          <ntasks>
            <ntasks_atm>32</ntasks_atm>
            <ntasks_ice>32</ntasks_ice>
            <ntasks_cpl>32</ntasks_cpl>
            <ntasks_lnd>32</ntasks_lnd>
            <ntasks_rof>32</ntasks_rof>
            <ntasks_ocn>32</ntasks_ocn>
            <ntasks_glc>32</ntasks_glc>
            <ntasks_wav>32</ntasks_wav>
          </ntasks>
          <nthrds>
            <nthrds_atm>2</nthrds_atm>
            <nthrds_ice>2</nthrds_ice>
            <nthrds_cpl>2</nthrds_cpl>
            <nthrds_lnd>2</nthrds_lnd>
            <nthrds_rof>2</nthrds_rof>
            <nthrds_ocn>2</nthrds_ocn>
            <nthrds_glc>2</nthrds_glc>
            <nthrds_wav>2</nthrds_wav>
          </nthrds>
        </pes>
      </mach>
    </grid>
  <grid name="a%ne30np4.pg2_l%r05_oi%IcoswISC30E3r5_r%r05_g%mpas.gis4to40km_w%null_z%null_m%IcoswISC30E3r5">
    <mach name="chrysalis">
      <pes compset="1850_EAM%CMIP6_ELM%SPBC_MPASSI_MPASO_MOSART_MALI_SWAV" pesize="any">
        <comment>chrysalis: BG-case testing config. using 4-to-40km (low-res) GIS init. cond.</comment>
        <MAX_MPITASKS_PER_NODE>64</MAX_MPITASKS_PER_NODE>
        <MAX_TASKS_PER_NODE>64</MAX_TASKS_PER_NODE>
        <ntasks>
          <ntasks_atm>512</ntasks_atm>
          <ntasks_lnd>512</ntasks_lnd>
          <ntasks_rof>512</ntasks_rof>
          <ntasks_ice>512</ntasks_ice>
          <ntasks_ocn>512</ntasks_ocn>
          <ntasks_glc>512</ntasks_glc>
          <ntasks_wav>512</ntasks_wav>
          <ntasks_cpl>512</ntasks_cpl>
        </ntasks>
        <nthrds>
          <nthrds_atm>1</nthrds_atm>
          <nthrds_lnd>1</nthrds_lnd>
          <nthrds_rof>1</nthrds_rof>
          <nthrds_ice>1</nthrds_ice>
          <nthrds_ocn>1</nthrds_ocn>
          <nthrds_glc>1</nthrds_glc>
          <nthrds_wav>1</nthrds_wav>
          <nthrds_cpl>1</nthrds_cpl>
        </nthrds>
        <rootpe>
          <rootpe_atm>0</rootpe_atm>
          <rootpe_lnd>0</rootpe_lnd>
          <rootpe_rof>0</rootpe_rof>
          <rootpe_ice>0</rootpe_ice>
          <rootpe_ocn>0</rootpe_ocn>
          <rootpe_glc>0</rootpe_glc>
          <rootpe_cpl>0</rootpe_cpl>
        </rootpe>
      </pes>
    </mach>
    <mach name="pm-cpu|muller-cpu|alvarez-cpu">
      <pes compset="1850_EAM%CMIP6_ELM%SPBC_MPASSI_MPASO_MOSART_MALI_SWAV" pesize="any">
        <comment>pm-cpu: BG-case testing config. using 4-to-40km (low-res) GIS init. cond.</comment>
        <MAX_MPITASKS_PER_NODE>128</MAX_MPITASKS_PER_NODE>
        <MAX_TASKS_PER_NODE>128</MAX_TASKS_PER_NODE>
        <ntasks>
          <ntasks_atm>512</ntasks_atm>
          <ntasks_lnd>512</ntasks_lnd>
          <ntasks_rof>512</ntasks_rof>
          <ntasks_ice>512</ntasks_ice>
          <ntasks_ocn>512</ntasks_ocn>
          <ntasks_glc>512</ntasks_glc>
          <ntasks_wav>512</ntasks_wav>
          <ntasks_cpl>512</ntasks_cpl>
        </ntasks>
        <nthrds>
          <nthrds_atm>1</nthrds_atm>
          <nthrds_lnd>1</nthrds_lnd>
          <nthrds_rof>1</nthrds_rof>
          <nthrds_ice>1</nthrds_ice>
          <nthrds_ocn>1</nthrds_ocn>
          <nthrds_glc>1</nthrds_glc>
          <nthrds_wav>1</nthrds_wav>
          <nthrds_cpl>1</nthrds_cpl>
        </nthrds>
        <rootpe>
          <rootpe_atm>0</rootpe_atm>
          <rootpe_lnd>0</rootpe_lnd>
          <rootpe_rof>0</rootpe_rof>
          <rootpe_ice>0</rootpe_ice>
          <rootpe_ocn>0</rootpe_ocn>
          <rootpe_glc>0</rootpe_glc>
          <rootpe_cpl>0</rootpe_cpl>
        </rootpe>
      </pes>
    </mach>
  </grid>
</config_pes>
