===============================================================
Tag name:  clm4_5_1_r085
Originator(s):  sacks (Bill Sacks)
Date: Fri Sep 19 10:22:30 MDT 2014
One-line Summary: replace conditionals with polymorphism for soil water retention curve

Purpose of changes:

The main motivation for this tag was the need to introduce a
soil_suction_inverse routine, which will be used for irrigation. It is important
that soil_suction_inverse remains consistent with soil_suction for every soil
water retention curve method. In talking with Ben Andre and Erik, we felt the
best way to ensure this consistency was to have a separate, small module for
each soil retention curve method. We felt the best way to implement this was via
polymorphism. Polymorphism is arguably overkill in this simple case, but we
thought it would be good to convert it to polymorphism partly as an example that
we and others can follow in more complex cases where it will provide greater
benefit.

To add a new soil retention curve method:

   (1) Create a module similar to
   SoilWaterRetentionCurveClappHornberg1978Mod.F90
   
   (2) Modify the select case statement in SoilWaterRetentionCurveFactoryMod.F90
   so that it is able to create an instance of your new type

Note that this refactor also combines the soil_suction and soil_hk
parameterization options into a single option. Dave Lawrence and Rosie Fisher
felt that was preferable, and Jinyun Tang was okay with this.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: andre, muszala, Jinyun Tang

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated:

========= Replaced with the 3 new files noted below
D       models/lnd/clm/src/biogeophys/SoiWatRetCurveParMod.F90

List all files added and what they do:

========= Replacement for SoiWatRetCurveParMod, implemented using
          polymorphism. Note that I have also added a soil_suction_inverse
          routine, which is not yet used or tested. I'll be using (and testing)
          this in an upcoming tag, where I refactor the irrigation code to use this.
A       models/lnd/clm/src/biogeophys/SoilWaterRetentionCurveMod.F90
A       models/lnd/clm/src/biogeophys/SoilWaterRetentionCurveFactoryMod.F90
A       models/lnd/clm/src/biogeophys/SoilWaterRetentionCurveClappHornberg1978Mod.F90

List all existing files that have been modified, and describe the changes:

========= Minor changes to accommodate the refactored code
M       models/lnd/clm/src/main/clm_initializeMod.F90
M       models/lnd/clm/src/main/init_hydrology.F90
M       models/lnd/clm/src/main/clm_driver.F90
M       models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/biogeophys/SoilWaterMovementMod.F90
M       models/lnd/clm/src/biogeophys/SoilMoistStressMod.F90
M       models/lnd/clm/src/biogeophys/HydrologyNoDrainageMod.F90


CLM testing:

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    yellowstone_gnu: NOT RUN
    goldbach_nag: ok
    goldbach_intel: ok

CLM tag used for the baseline comparisons: clm4_5_1_r084

Changes answers relative to baseline: NO - bfb

===============================================================
===============================================================
Tag name:  clm4_5_1_r084
Originator(s):  sacks (Bill Sacks)
Date: Thu Sep 18 14:39:44 MDT 2014
One-line Summary: make glc_dyn_runoff_routing spatially-varying, based on input from glc

Purpose of changes:

Dave Lawrence, Bill Lipscomb and Jeremy Fyke have pointed out that
glc_dyn_runoff_routing needs to be spatially-varying: Even when we're coupling
to CISM, we should continue to use the old scheme in regions that don't have an
active icesheet model underneath (which currently includes Antarctica and all of
the world's smaller glaciers - i.e., everything except Greenland). Furthermore,
we have introduced a new ability into CISM to run in diagnostic mode, without
sending calving/runoff fluxes to the coupler. In this case, too, CLM should
revert to using the old scheme (glc_dyn_runoff_routing = .false.).

To accomplish both of these things, I have introduced a new coupling field,
through which GLC tells CLM which areas have an icesheet that is "active" in the
sense of sending fluxes to the coupler. In this CLM tag, CLM sets a
spatially-varying version of glc_dyn_runoff_routing based on this new coupler
field - replacing the old, namelist-settable version of this flag.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist:

  - removed glc_dyn_runoff_routing

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

  drv: drvseq5_0_15 -> drvseq5_0_17
    - fix for some multi-instance runs
    - add icemask_coupled_fluxes field

  cism: cism1_140602 -> cism1_140914
    - Add zero_gcm_fluxes option; send icemask_coupled_fluxes field to coupler

  scripts: scripts4_140916b -> scripts4_140916c
    - Rename CLM_UPDATE_GLC_AREAS to GLC_TWO_WAY_COUPLING

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Rename CLM_UPDATE_GLC_AREAS xml variable to GLC_TWO_WAY_COUPLING.
          Remove glc_dyn_runoff_routing namelist variable (this is now a
          spatially-varying field, tied more tightly to CISM).
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/CLMBuildNamelist.pm
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/user_nl_clm
M       models/lnd/clm/bld/env_run.xml

========= Receive icemask_coupled_fluxes from CISM
M       models/lnd/clm/src/cpl/lnd_import_export.F90
M       models/lnd/clm/src/cpl/clm_cpl_indices.F90

========= Set spatially-varying glc_dyn_runoff_routing field based on
          icemask_coupled_fluxes, and use this in place of the old scalar
          glc_dyn_runoff_routing flag
M       models/lnd/clm/src/main/glc2lndMod.F90
M       models/lnd/clm/src/main/clm_driver.F90
M       models/lnd/clm/src/main/clm_varctl.F90
M       models/lnd/clm/src/main/controlMod.F90
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/biogeophys/HydrologyDrainageMod.F90
M       models/lnd/clm/src/dyn_subgrid/dynSubgridDriverMod.F90

========= Add write statement to workaround a pgi compiler problem
M       models/lnd/clm/src/main/restFileMod.F90

CLM testing:

  build-namelist tests:

    yellowstone: ok (baseline comparisons fail for clm45 & clm50, as expected)

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    yellowstone_gnu: NOT RUN
    goldbach_nag: ok
    goldbach_intel: ok

    Note: Most testing was run on glc_runoff_routing_n06_clm4_5_1_r083. After
    that tag, I added the following write statement in restFileMod, as a
    workaround for a PGI compiler bug:

       write(iulog,*) 'about to call aerosol_vars%restart: ', ubound(waterstate_vars%h2osoi_ice_col)    

    After that addition, I just reran a subset of tests: 6 yellowstone-intel
    tests, 10 yellowstone-pgi tests (including the 2 that had failed due to the
    compiler bug), and 5 goldbach-nag tests. 

NOTE: Unit test build is currently failing due to a change in r082. Stefan is
working on a fix.

CLM tag used for the baseline comparisons: clm4_5_1_r083

Changes answers relative to baseline: YES

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 with CISM (i.e., IG)
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

    (1) Large changes in runoff from glaciers in IG compsets, due to setting
    glc_dyn_runoff_routing to .false. outside of Greenland.

    (2) Roundoff-level changes in icemask for some resolutions and compilers,
    due to changes in the cism external.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? For icemask changes: examined cprnc RMS errors. For other
   changes, diffs are greater than roundoff.

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_1_r083
Originator(s):  muszala (Stefan Muszala)
Date: Wed Sep 17 09:21:31 MDT 2014
One-line Summary: only update scripts and run new baselines.  this due to an error in yellowstone pgi test naming (clm_aux45 changed to aux_clm45)

Purpose of changes: Update scripts due to an error in a previous scripts tag in which I named pgi tests as clm_aux45 instead
of aux_clm45.  These were for tests moved from goldbach to yellowstone.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts4_140910 -> scripts4_140916b

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: N/A

- update test list failures
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

CLM testing:

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    WJS: note: Stef told me that he actually ran all the yellowstone tests, and
    all were okay

    yellowstone_intel - 40 OK 
    yellowstone_pgi

    goldbach_nag      - 40 OK, 45 OK 
    goldbach_intel    - 40 OK, 45 OK

Note 1:  Due to the fact that in older baselines component_gen_comp was failing due to a scripts error (now fixed)
some older baselines don't have the clm history files.  As one example:

   BFAIL ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput.compare_hist.clm4_5_1_r082 
   - rerun.  compare against clm4_5_1_r081, then it passes.
   PASS  ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput 
   PASS  ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput.memleak
   PASS  ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput.compare_hist.clm4_5_1_r082_oldPgi 
   PASS  ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput.memcomp.clm4_5_1_r082_oldPgi 
   PASS  ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput.tputcomp.clm4_5_1_r082_oldPgi 
   PASS ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput.C.140917-082253.nlcomp

   For these tests, I made sure that clm2 history files were in the clm4_5_1_r083 baseline dirs.  They
   should pass going forward.

   ERI_D.f10_f10.ICRUCLM50BGC.goldbach_intel.clm-reduceOutput
   PEM.f10_f10.ICLM45BGCCROP.goldbach_intel.clm-crop
   SSP.f19_g16.I1850CLM45BGC.yellowstone_pgi.clm-default

Note 2: For these N2 tests, there was a scripts problem with st_archiver in the previous tag.  These should pass next time.
   BFAIL ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.compare_hist.clm4_5_1_r082 
   BFAIL ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.compare_hist.clm4_5_1_r082 
   BFAIL ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.clm2.h0.compare_hist.clm4_5_1_r082 
   BFAIL ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.clm2.h1.compare_hist.clm4_5_1_r082

CLM tag used for the baseline comparisons: clm4_5_1_r082

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_1_r082
Originator(s):  muszala (Stefan Muszala)
Date: Thu Sep 11 14:07:58 MDT 2014
One-line Summary: Merge in a number of ED changes to address science bugs and infrastructure (particularly restarts)

Purpose of changes: Merge in ED changes.  Most of these have to do with science changes from rfisher.  There
is also a refactor and added functionality for ED restarts.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): Bug 2041, 2042
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, rfisher

List any svn externals directories updated (csm_share, mct, etc.): 
    scripts4_140814a -> scripts4_140910

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
-- add failing N2 tests (due to scripts, see below).

M       models/lnd/clm/bld/build-namelist
-- documentation at top of file should reference CLMBuildNamelist.pm

M       models/lnd/clm/src/main/clm_driver.F90
-- add call to SurfaceAlbedo for use_ed logical branch, add EDBioVars as 
-- argument to temperature_vars%UpdateAccVars and add canopystate_vars as 
-- argument to BalanceCheck (for ED)
M       models/lnd/clm/src/main/decompMod.F90
-- added openMP output...remove mods after getting ED working with openMP

M       models/lnd/clm/src/ED/biogeochem/EDCanopyStructureMod.F90
-- change handling of CWD_AG and CWD_BG
M       models/lnd/clm/src/ED/biogeochem/EDGrowthFunctionsMod.F90
-- added tree_sai function
M       models/lnd/clm/src/ED/biogeochem/EDCohortDynamicsMod.F90
-- signifcant reworking of entire module 
M       models/lnd/clm/src/ED/biogeochem/EDPhysiologyMod.F90
-- minor code clean up 
M       models/lnd/clm/src/ED/biogeochem/EDPatchDynamicsMod.F90
-- change an error check to: if (( areatot - area ) > 0._r8 ) then 

M       models/lnd/clm/src/ED/main/EDBioType.F90
-- add infrastrucutre (define, allocate, etc...) 
M       models/lnd/clm/src/ED/main/EDMainMod.F90
-- major update for updating canopy biomass pools 
M       models/lnd/clm/src/ED/main/EDCLMLinkMod.F90
-- modify calls for history file output and error checking
M       models/lnd/clm/src/ED/main/EDRestVectorMod.F90
-- add resp_clm as restart variable and use SHR_ASSERT instead of call assert.  major refactor
-- of createPatchCohortStructure to handle arbitrary number of cohorts and patches
M       models/lnd/clm/src/ED/main/EDInitMod.F90
-- add logical to deal with different values of assignemnt dc%laimemory
M       models/lnd/clm/src/ED/main/EDTypesMod.F90
-- add cohort_type and change paramters: numCohortsPerPatch, cohorts_per_gcell and fire_threshold

M       models/lnd/clm/src/ED/fire/SFMainMod.F90
-- clean up write statemnts and a bug fix:  change tau_b(dg_sf) -> tau_b(c)

M       models/lnd/clm/src/ED/biogeophys/EDPhotosynthesisMod.F90
-- change  tpu25top(FT)  = 0.06_r8   * jmax25top(FT) to tpu25top(FT)  = 0.167_r8   * jmax25top(FT), some cleanup

M       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
-- clean up a use statement
M       models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
-- remove whitespaces after a statement
M       models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90
-- add a use_ed block to prevent some unassigned pointer errors
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
-- add canopystate_vars as argument for elai and esai for more verbose error
-- reporting added by rfisher
M       models/lnd/clm/src/biogeophys/TemperatureType.F90
-- add arg. for UpdateAccVars for new calculations, split out use_ed and use_crop
M       models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90
-- add associate statement to tlai for error reporting

M       UpDateChangeLog.pl
-- fix tiny typo

M       SVN_EXTERNAL_DIRECTORIES
-- for scripts update

CLM testing:

  build-namelist tests:

    yellowstone - N/A, no namelist changes made in this tag

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel - 45 OK , 40 OK

    Changes due to update of scripts from scripts4_140814a -> scripts4_140910 (this change came with scripts4_140828)
    FAIL namelist compare:  user_nl_clm differs
    These should pass next time.

       NEW:        flanduse_timeseries = '$DIN_LOC_ROOT/lnd/clm2/surfdata_map/surfdata.pftdyn_1x1_tropicAtl_TEST_simyr1939-1943_c140108.nc'
       BASELINE: flanduse_timeseries = '/glade/p/cesmdata/cseg/inputdata/lnd/clm2/surfdata_map/surfdata.pftdyn_1x1_tropicAtl_TEST_simyr1939-1943_c140108.nc'

          FAIL SMS_Ly3.1x1_tropicAtl.I20TRCLM45BGC.yellowstone_intel.clm-tropicAtl_subsetLate.GC.newPgi_45_intel.nlcomp
          FAIL SMS_Ly5.1x1_tropicAtl.I20TRCLM45BGC.yellowstone_intel.clm-tropicAtl_subsetMid.GC.newPgi_45_intel.nlcomp
          FAIL SMS_Ly8.1x1_tropicAtl.I20TRCLM45BGC.yellowstone_intel.clm-tropicAtl_subsetEarly.GC.newPgi_45_intel.nlcomp

    These fail due to a bug in scripts4_140905c.  Alice is aware of this and will provide a fix for a future CLM tag (but 2041):
       FAIL  ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel 
       FAIL  ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default 

    Failure that looks like a hardware problem and that Erik is looking into (bug 2042):
       RUN   ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.GC.newPgi_45_intel

    yellowstone_pgi   - 45 OK , 40 OK

    New PGI tests brought over from goldbach.  These are expected as there are no baselines for this on yellowstone

       BFAIL ERI_D.f10_f10.ICLM45BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI_D.f10_f10.ICRUCLM50BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI_D.f19_g16.ICLM45BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI_D.f19_g16.ICLM45.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI_D.f19_g16.ICRUCLM50BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI.f10_f10.ICLM45BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI.f10_f10.ICRUCLM50BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI.f19_g16.ICLM45BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERI.f19_g16.ICRUCLM50BGC.yellowstone_pgi.clm-reduceOutput.compare_hist.clm4_5_1_r081 
       BFAIL ERS_D.f10_f10.I20TRCLM45BGC.yellowstone_pgi.clm-decStart.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL ERS_D.f10_f10.I20TRCLM45BGC.yellowstone_pgi.clm-decStart.clm2.h1.compare_hist.clm4_5_1_r081 
       BFAIL ERS_D.f10_f10.I20TRCLM45BGC.yellowstone_pgi.clm-decStart.compare_hist.clm4_5_1_r081 
       BFAIL ERS_D.f10_f10.ICLM45BGC.yellowstone_pgi.clm-ciso.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL ERS_D.f10_f10.ICLM45BGC.yellowstone_pgi.clm-ciso.clm2.h1.compare_hist.clm4_5_1_r081 
       BFAIL ERS_D.f10_f10.ICLM45BGC.yellowstone_pgi.clm-ciso.compare_hist.clm4_5_1_r081 
       BFAIL ERS.f10_f10.I1850CLM45BGC.yellowstone_pgi.clm-default.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL ERS.f10_f10.I1850CLM45BGC.yellowstone_pgi.clm-default.clm2.h1.compare_hist.clm4_5_1_r081 
       BFAIL ERS.f10_f10.I1850CLM45BGC.yellowstone_pgi.clm-default.compare_hist.clm4_5_1_r081 
       BFAIL ERS_Lm3.1x1_smallvilleIA.ICLM45BGCCROP.yellowstone_pgi.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL ERS_Lm3.1x1_smallvilleIA.ICLM45BGCCROP.yellowstone_pgi.compare_hist.clm4_5_1_r081 
       BFAIL SMS_D.1x1_vancouverCAN.ICLM45.yellowstone_pgi.clm-default.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL SMS_D.1x1_vancouverCAN.ICLM45.yellowstone_pgi.clm-default.clm2.h1.compare_hist.clm4_5_1_r081 
       BFAIL SMS_D.1x1_vancouverCAN.ICLM45.yellowstone_pgi.clm-default.compare_hist.clm4_5_1_r081 
       BFAIL SMS.f45_f45.ICLM45.yellowstone_pgi.clm-ptsRLB.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL SMS.f45_f45.ICLM45.yellowstone_pgi.clm-ptsRLB.clm2.h1.compare_hist.clm4_5_1_r081 
       BFAIL SMS.f45_f45.ICLM45.yellowstone_pgi.clm-ptsRLB.compare_hist.clm4_5_1_r081 
       BFAIL SMS.f45_f45.ICLM45.yellowstone_pgi.clm-ptsROA.compare_hist.clm4_5_1_r081 
       BFAIL SMS_Ld5.f19_g16.IRCP45CLM45BGC.yellowstone_pgi.clm-decStart.clm2.h0.compare_hist.clm4_5_1_r081 
       BFAIL SMS_Ld5.f19_g16.IRCP45CLM45BGC.yellowstone_pgi.clm-decStart.clm2.h1.compare_hist.clm4_5_1_r081 
       BFAIL SMS_Ld5.f19_g16.IRCP45CLM45BGC.yellowstone_pgi.clm-decStart.compare_hist.clm4_5_1_r081 

    goldbach_nag - 45 OK , 40 OK

    Baseline missing from previous tag:
       ERI_D.f19_g16.ICLM45BGC.goldbach_nag.clm-reduceOutput-  
          file /fs/cgd/csm/ccsm_baselines/clm4_5_1_r081/ERI_D.f19_g16.ICLM45BGC.goldbach_nag.clm-reduceOutput/cpl.hi.nc does not exis
       SMS.f09_g16.ICRUCLM45.goldbach_nag.clm-af_bias_v5
          file /fs/cgd/csm/ccsm_baselines/clm4_5_1_r081/SMS.f09_g16.ICRUCLM45.goldbach_nag.clm-af_bias_v5/cpl.hi.nc does not exist
       SMS_Ly1.f19_g16.ICLM45BGCCROP.goldbach_nag.clm-reduceOutput 
          file /fs/cgd/csm/ccsm_baselines/clm4_5_1_r081/SMS_Ly1.f19_g16.ICLM45BGCCROP.goldbach_nag.clm-reduceOutput/cpl.hi.nc does no
       SMS_Ly1.f19_g16.ICLM45BGCCROP.goldbach_nag.clm-reduceOutput
          file /fs/cgd/csm/ccsm_baselines/clm4_5_1_r081/SMS_Ly1.f19_g16.ICLM45BGCCROP.goldbach_nag.clm-reduceOutput/cpl.hi.nc does no    t exist

    goldbach_intel - 45 OK , 40 OK

    goldbach_pgi (These have been moved to yellowstone due to PGI 14.1 throwing and ICE on goldbach)

CLM tag used for the baseline comparisons: clm4_5_1_r081

Changes answers relative to baseline: Only for ED compsets

===============================================================
===============================================================
Tag name:  clm4_5_1_r081
Originator(s):  mvertens (Mariana Vertenstein)
Date: Sun Aug 24 19:39:50 MDT 2014
One-line Summary: major infrastructure changes and directory reorganization under src

Purpose of changes:

   Overview of previous code design
   ==========================================
   - data structures arranged by subgrid type (pps, cps, lps, grc)
   - all functional categorization lumped in that one subgrid type which led to
   - centralization rather than modularization of all data
   - definition and instantiation in ONE big module (clmtype.F90)
   - allocation and initialization in ONE big module (clmtypeInitMod.F90)
   - history variables all in ONE big module (histFldsMod.F90)
   - restart variables in effectively TWO big modules (biogeophysicsRestMod.F90 and CNRestMod.F90)
   - time constant initialization in ONE complex module (initTimeConst.F90)
   - time varying cold start initialization in ONE module (initColdMod.F90)
   - accumulation variables in ONE module (accumulMod.F90)

   Overview of new code design
   ==========================================
   data structures arranged by scientific functional categories
     (e.g. temperature_type, waterstate_type, energyflux_type, etc)
   - a given data structure now contains ALL subgrid levels are in the data structure -
     and variables in the data structure are now appended with a unique suffix to
     indicate their subgrid levels (new suffixes: _patch, _col, _lun, _grc)
   - this does NOT effect the science code base, ONLY the associate statements
   - there are separate module for each data type definition
     (e.g. TemperatureType.F90, WaterstateType.F90, EnergyFluxType.F90, etc)
   - each data type has associated methods for
     - Allocation:
       variables now initialized as NaNs upon allocation
     - Cold Start Initialization:
       cold start initialization of variables is now ALWAYS done
       and overwritten if finidat is read in as spun up dataset (also now
       have on line interpolation of initial conditions as part of this refactor as well)
     - History initialization of variables
       All history fields now initialized as spval
     - Restart initialization of variables
     - Accumulation Initialization 
       initialization and accumulation update of variables
   - Instantiation of datatypes is now separate from their declaration
     (for now in clm_initialize.F90 - will be moved in the future)

   Centralized routines that no longer exist:
   ==========================================
   Data types  	  : clmtype.F90, clmtypeInitMod.F90
   Initialization : initTimeConst.F90, initCold.F90
   History	  : histFldsMod.F90
   Accumulation	  : accumulMod.F90
   Restart        : biogeophysRestMod.F90, CNRestMod.F90
   Biogeochemistry: CNSetValue.F90

   New Type modules that now replace clmtype.F90
   ==========================================
   main/atm2lndType.F90
   main/lnd2atmType.F90
   main/ColumnType.F90
   main/EcophysConType.F90
   main/GridcellType.F90
   main/LandunitType.F90
   main/PatchType.F90

   biogeochem/CNCarbonFluxType.F90
   biogeochem/CNCarbonStateType.F90
   biogeochem/CNDecompCascadeConType.F90
   biogeochem/CNDVType.F90
   biogeochem/CNNitrogenFluxType.F90
   biogeochem/CNNitrogenStateType.F90
   biogeochem/CNStateType.F90
   biogeochem/CropType.F90

   biogeophys/AerosolType.F90
   biogeophys/CanopyStateType.F90
   biogeophys/EnergyFluxType.F90
   biogeophys/FrictionVelocityType.F90
   biogeophys/LakeStateType.F90
   biogeophys/PhotosynthesisType.F90
   biogeophys/SoilHydrologyType.F90
   biogeophys/SoilStateType.F90
   biogeophys/SolarAbsorbedType.F90
   biogeophys/SurfaceAlbedoType.F90
   biogeophys/TemperatureType.F90
   biogeophys/UrbanParamsType.F90
   biogeophys/WaterfluxType.F90
   biogeophys/WaterStateType.F90

   ED/main/EDBioType.F90
   ED/main/EDEcophysConType.F90
   ED/main/EDVecCohortType.F90
   ED/main/EDVecPatchType.F90


   Instantiation of Types

2) Public Types:

   - the following are public types that can BE PASSED AS ARGUMENTS 
   - the type instances FOR NOW are clm_initialized and then used by the driver
   - this will be generalized in the future	

  type(ch4_type)              :: ch4_vars
  type(carbonstate_type)      :: carbonstate_vars
  type(carbonstate_type)      :: c13_carbonstate_vars
  type(carbonstate_type)      :: c14_carbonstate_vars
  type(carbonflux_type)       :: carbonflux_vars
  type(carbonflux_type)       :: c13_carbonflux_vars
  type(carbonflux_type)       :: c14_carbonflux_vars
  type(nitrogenstate_type)    :: nitrogenstate_vars
  type(nitrogenflux_type)     :: nitrogenflux_vars
  type(dgvs_type)             :: dgvs_vars
  type(crop_type)             :: crop_vars
  type(cnstate_type)          :: cnstate_vars
  type(dust_type)             :: dust_vars
  type(vocemis_type)          :: vocemis_vars
  type(drydepvel_type)        :: drydepvel_vars
  type(aerosol_type)          :: aerosol_vars
  type(canopystate_type)      :: canopystate_vars
  type(energyflux_type)       :: energyflux_vars
  type(frictionvel_type)      :: frictionvel_vars
  type(lakestate_type)        :: lakestate_vars
  type(photosyns_type)        :: photosyns_vars
  type(soilstate_type)        :: soilstate_vars
  type(soilhydrology_type)    :: soilhydrology_vars
  type(solarabs_type)         :: solarabs_vars
  type(surfalb_type)          :: surfalb_vars
  type(surfrad_type)          :: surfrad_vars
  type(temperature_type)      :: temperature_vars
  type(urbanparams_type)      :: urbanparams_vars
  type(waterflux_type)        :: waterflux_vars
  type(waterstate_type)       :: waterstate_vars
  type(atm2lnd_type)          :: atm2lnd_vars
  type(glc2lnd_type)          :: glc2lnd_vars
  type(lnd2atm_type)          :: lnd2atm_vars
  type(lnd2glc_type)          :: lnd2glc_vars
  type(glc_diagnostics_type)  :: glc_diagnostics_vars
  type(EDbio_type)            :: EDbio_vars

  - private Types (now som modules have their own PRIVATE types) 
 
   DUSTMod.F90       :    type(dust_type)     
   VOCEmissionMod.F90:    type(vocemis_type)  
   ch4Mod.F90        :    type(ch4_type)      

   API Changes:
   ==========================================
   Original APIs:
   clmtype was in effect a global common block and all routines had use statements into it
   difficult to track any intent or flow through system
   difficult to set up functional unit testing (.e.g. CanopyFluxesMod.F90, etc)
	
   Refactorized APIs:
   all new datatype instances are passed as arguments
   science code is effectively the same since only the associate statements have been modified

   New Directory Structure under clm/
   ==========================================
   bld/
   doc/	
   src/biogeochem/
   src/biogeophys/
   src/cpl/
   src/dyn_subgrid/
   src/ED/
   src/ED/biogeochem
   src/ED/biogeophys
   src/ED/fire
   src/ED/main	
   src/main/
   src/unit_test_mocks/
   src/unit_test_shr/
   src/utils/
   src_clm4_0/
   test/
   tools/  	
	
   Advantages of refactorization:
   ==========================================
   - Lets compiler enforce intent attributes
   - Makes functional unit testing easier since module drivers can be
     constructed with relevant mock data more easily
   - Makes more sense scientifically since now easier to extend code logic as
     to where you want to introduce new variables
   - Easier to maintain code since code flow is easier to follow and to modify
   - Easy to move variables around from one data type to another since now
     know everything that is logically connected to that variable that
     needs to be moved Offers new modularity for trading in and out new
     formulations of targeted functionality

Requirements for tag: N.A.

Test level of tag: regular

Bugs fixed (include bugzilla ID): N.A.

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
    directory restructuring has been reflected in changes to configure in setting up the Filepath

Describe any changes made to the namelist:
    clm_hydrology1_inparm changed to clm_canopyhydrology_inparm

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: myself, Bill Sacks

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: 

D       clm/src/clm4_5
D       clm/src/clm4_5/biogeochem
D       clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
D       clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
D       clm/src/clm4_5/biogeochem/CNRestMod.F90
D       clm/src/clm4_5/biogeochem/CropRestMod.F90
D       clm/src/clm4_5/biogeochem/CNGRespMod.F90
D       clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
D       clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
D       clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
D       clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
D       clm/src/clm4_5/biogeochem/CNFireMod.F90
D       clm/src/clm4_5/biogeochem/CNMRespMod.F90
D       clm/src/clm4_5/biogeochem/MEGANFactorsMod.F90
D       clm/src/clm4_5/biogeochem/SatellitePhenologyMod.F90
D       clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
D       clm/src/clm4_5/biogeochem/ch4RestMod.F90
D       clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
D       clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
D       clm/src/clm4_5/biogeochem/CNWoodProductsMod.F90
D       clm/src/clm4_5/biogeochem/CNSummaryMod.F90
D       clm/src/clm4_5/biogeochem/ch4Mod.F90
D       clm/src/clm4_5/biogeochem/DUSTMod.F90
D       clm/src/clm4_5/biogeochem/CNDVLightMod.F90
D       clm/src/clm4_5/biogeochem/CNInitMod.F90
D       clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
D       clm/src/clm4_5/biogeochem/ch4varcon.F90
D       clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
D       clm/src/clm4_5/biogeochem/CNDecompMod.F90
D       clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
D       clm/src/clm4_5/biogeochem/CNDVMod.F90
D       clm/src/clm4_5/biogeochem/ED
D       clm/src/clm4_5/biogeochem/ED/EDCanopyStructureMod.F90
D       clm/src/clm4_5/biogeochem/ED/EDSetValuesMod.F90
D       clm/src/clm4_5/biogeochem/ED/EDGrowthFunctionsMod.F90
D       clm/src/clm4_5/biogeochem/ED/EDPhysiologyMod.F90
D       clm/src/clm4_5/biogeochem/ED/EDCohortDynamicsMod.F90
D       clm/src/clm4_5/biogeochem/ED/EDPatchDynamicsMod.F90
D       clm/src/clm4_5/biogeochem/CNSharedParamsMod.F90
D       clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
D       clm/src/clm4_5/biogeochem/ch4InitMod.F90
D       clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
D       clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
D       clm/src/clm4_5/biogeochem/DryDepVelocity.F90
D       clm/src/clm4_5/biogeochem/CNAllocationMod.F90
D       clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
D       clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
D       clm/src/clm4_5/biogeochem/CNDecompCascadeBGCMod.F90
D       clm/src/clm4_5/biogeochem/CNSetValueMod.F90
D       clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
D       clm/src/clm4_5/biogeochem/CNDecompCascadeCNMod.F90
D       clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
D       clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
D       clm/src/clm4_5/biogeochem/CNDVInitMod.F90
D       clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
	
D       clm/src/clm4_5/main
D       clm/src/clm4_5/main/clm_varcon.F90
D       clm/src/clm4_5/main/initInterp.F90
D       clm/src/clm4_5/main/clm_varpar.F90
D       clm/src/clm4_5/main/landunit_varcon.F90
D       clm/src/clm4_5/main/initTimeConstMod.F90
D       clm/src/clm4_5/main/subgridWeightsMod.F90
D       clm/src/clm4_5/main/decompInitMod.F90
D       clm/src/clm4_5/main/clm_initializeMod.F90
D       clm/src/clm4_5/main/subgridRestMod.F90
D       clm/src/clm4_5/main/clm_glclnd.F90
D       clm/src/clm4_5/main/paramUtilMod.F90
D       clm/src/clm4_5/main/accFldsMod.F90
D       clm/src/clm4_5/main/subgridMod.F90
D       clm/src/clm4_5/main/clmtypeInitMod.F90
D       clm/src/clm4_5/main/ndepStreamMod.F90
D       clm/src/clm4_5/main/init_hydrology.F90
D       clm/src/clm4_5/main/initColdMod.F90
D       clm/src/clm4_5/main/column_varcon.F90
D       clm/src/clm4_5/main/histFileMod.F90
D       clm/src/clm4_5/main/pft2colMod.F90
D       clm/src/clm4_5/main/clm_atmlnd.F90
D       clm/src/clm4_5/main/findHistFields.pl
D       clm/src/clm4_5/main/clm_varsur.F90
D       clm/src/clm4_5/main/restFileMod.F90
D       clm/src/clm4_5/main/CMakeLists.txt
D       clm/src/clm4_5/main/controlMod.F90
D       clm/src/clm4_5/main/spitfireSF
D       clm/src/clm4_5/main/spitfireSF/SFParamsMod.F90
D       clm/src/clm4_5/main/spitfireSF/SFMainMod.F90
D       clm/src/clm4_5/main/test
D       clm/src/clm4_5/main/test/subgridWeights_test
D       clm/src/clm4_5/main/test/subgridWeights_test/test_subgridWeights.pf
D       clm/src/clm4_5/main/test/subgridWeights_test/CMakeLists.txt
D       clm/src/clm4_5/main/test/clm_glclnd_test
D       clm/src/clm4_5/main/test/clm_glclnd_test/test_clm_glclnd.pf
D       clm/src/clm4_5/main/test/clm_glclnd_test/CMakeLists.txt
D       clm/src/clm4_5/main/test/CMakeLists.txt
D       clm/src/clm4_5/main/initSubgridMod.F90
D       clm/src/clm4_5/main/filterMod.F90
D       clm/src/clm4_5/main/clm_varctl.F90
D       clm/src/clm4_5/main/clm_driver.F90
D       clm/src/clm4_5/main/surfrdUtilsMod.F90
D       clm/src/clm4_5/main/ED
D       clm/src/clm4_5/main/ED/EDInitTimeConst.F90
D       clm/src/clm4_5/main/ED/EDCLMLinkMod.F90
D       clm/src/clm4_5/main/ED/EDClmType.F90
D       clm/src/clm4_5/main/ED/EDRestVectorMod.F90
D       clm/src/clm4_5/main/ED/EDHistFldsMod.F90
D       clm/src/clm4_5/main/ED/EDClmTypeInitMod.F90
D       clm/src/clm4_5/main/ED/EDPftvarcon.F90
D       clm/src/clm4_5/main/ED/EDParamsMod.F90
D       clm/src/clm4_5/main/ED/EDInitMod.F90
D       clm/src/clm4_5/main/ED/EDTypesMod.F90
D       clm/src/clm4_5/main/ED/EDMainMod.F90
D       clm/src/clm4_5/main/subgridAveMod.F90
D       clm/src/clm4_5/main/initGridCellsMod.F90
D       clm/src/clm4_5/main/initSoilParVICMod.F90
D       clm/src/clm4_5/main/pftvarcon.F90
D       clm/src/clm4_5/main/surfrdMod.F90
D       clm/src/clm4_5/main/decompMod.F90
D       clm/src/clm4_5/main/FuncPedotransferMod.F90
D       clm/src/clm4_5/main/clmtype.F90
D       clm/src/clm4_5/main/reweightMod.F90
D       clm/src/clm4_5/main/readParamsMod.F90
D       clm/src/clm4_5/main/histFldsMod.F90
	
D       clm/src/clm4_5/biogeophys
D       clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
D       clm/src/clm4_5/biogeophys/SLakeInitMod.F90
D       clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
D       clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
D       clm/src/clm4_5/biogeophys/UrbanInputMod.F90
D       clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
D       clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
D       clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
D       clm/src/clm4_5/biogeophys/TridiagonalMod.F90
D       clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
D       clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
D       clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
D       clm/src/clm4_5/biogeophys/UrbanMod.F90
D       clm/src/clm4_5/biogeophys/QSatMod.F90
D       clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
D       clm/src/clm4_5/biogeophys/SurfaceResistanceMod.F90
D       clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
D       clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
D       clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
D       clm/src/clm4_5/biogeophys/SNICARMod.F90
D       clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
D       clm/src/clm4_5/biogeophys/CMakeLists.txt
D       clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
D       clm/src/clm4_5/biogeophys/RootBiophysMod.F90
D       clm/src/clm4_5/biogeophys/test
D       clm/src/clm4_5/biogeophys/test/CMakeLists.txt
D       clm/src/clm4_5/biogeophys/test/Daylength_test
D       clm/src/clm4_5/biogeophys/test/Daylength_test/test_daylength.pf
D       clm/src/clm4_5/biogeophys/test/Daylength_test/CMakeLists.txt
D       clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
D       clm/src/clm4_5/biogeophys/SoilWaterMovementMod.F90
D       clm/src/clm4_5/biogeophys/H2OSfcMod.F90
D       clm/src/clm4_5/biogeophys/SoilMoistStressMod.F90
D       clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
D       clm/src/clm4_5/biogeophys/SoiWatRetCurveParMod.F90
D       clm/src/clm4_5/biogeophys/ED
D       clm/src/clm4_5/biogeophys/ED/EDAccumulateFluxesMod.F90
D       clm/src/clm4_5/biogeophys/ED/EDSurfaceAlbedoMod.F90
D       clm/src/clm4_5/biogeophys/ED/EDPhotosynthesisMod.F90
D       clm/src/clm4_5/biogeophys/ED/EDBtranMod.F90
D       clm/src/clm4_5/biogeophys/FracWetMod.F90
D       clm/src/clm4_5/biogeophys/UrbanInitMod.F90
D       clm/src/clm4_5/biogeophys/SLakeRestMod.F90
D       clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
D       clm/src/clm4_5/biogeophys/SLakeCon.F90
D       clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
D       clm/src/clm4_5/biogeophys/BandDiagonalMod.F90
D       clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
D       clm/src/clm4_5/biogeophys/DaylengthMod.F90
	
D       clm/src/clm4_5/dyn_subgrid
D       clm/src/clm4_5/dyn_subgrid/test
D       clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test
D       clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test/test_update_landunit_weights_one_gcell.pf
D       clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test/test_update_landunit_weights.pf
D       clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test/CMakeLists.txt
D       clm/src/clm4_5/dyn_subgrid/test/dynVar_test
D       clm/src/clm4_5/dyn_subgrid/test/dynVar_test/test_dynVarShared.F90
D       clm/src/clm4_5/dyn_subgrid/test/dynVar_test/test_dynVarTimeInterp.pf
D       clm/src/clm4_5/dyn_subgrid/test/dynVar_test/test_dynVarTimeUninterp.pf
D       clm/src/clm4_5/dyn_subgrid/test/dynVar_test/CMakeLists.txt
D       clm/src/clm4_5/dyn_subgrid/test/dynTimeInfo_test
D       clm/src/clm4_5/dyn_subgrid/test/dynTimeInfo_test/test_dynTimeInfo.pf
D       clm/src/clm4_5/dyn_subgrid/test/dynTimeInfo_test/CMakeLists.txt
D       clm/src/clm4_5/dyn_subgrid/test/CMakeLists.txt
D       clm/src/clm4_5/dyn_subgrid/test/dynInitColumns_test
D       clm/src/clm4_5/dyn_subgrid/test/dynInitColumns_test/test_init_columns.pf
D       clm/src/clm4_5/dyn_subgrid/test/dynInitColumns_test/CMakeLists.txt
D       clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynTimeInfoMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynFileMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynConsBiogeochemMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynPriorWeightsMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynVarMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynEDMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynCNDVMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynConsBiogeophysMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90
D       clm/src/clm4_5/dyn_subgrid/dynVarMod.F90.in
D       clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90.in
D       clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90.in
D       clm/src/clm4_5/dyn_subgrid/do_genf90
D       clm/src/clm4_5/dyn_subgrid/dynInitColumnsMod.F90
D       clm/src/clm4_5/dyn_subgrid/CMakeLists.txt
	
D       clm/src/util_share
D       clm/src/util_share/organicFileMod.F90
D       clm/src/util_share/spmdGathScatMod.F90
D       clm/src/util_share/clm_time_manager.F90
D       clm/src/util_share/clm_nlUtilsMod.F90
D       clm/src/util_share/clm_varorb.F90
D       clm/src/util_share/abortutils.F90
D       clm/src/util_share/accumulMod.F90
D       clm/src/util_share/getdatetime.F90
D       clm/src/util_share/fileutils.F90
D       clm/src/util_share/dtypes.h
D       clm/src/util_share/ncdio_pio.F90
D       clm/src/util_share/SimpleMathMod.F90
D       clm/src/util_share/spmdMod.F90
D       clm/src/util_share/domainMod.F90
D       clm/src/util_share/ncdio_pio.F90.in
D       clm/src/util_share/restUtilMod.F90
D       clm/src/util_share/quadraticMod.F90
D       clm/src/util_share/restUtilMod.F90.in
D       clm/src/util_share/CMakeLists.txt
D       clm/src/util_share/GetGlobalValuesMod.F90
	
D       clm/src/clm4_0
D       clm/src/clm4_0/biogeochem
D       clm/src/clm4_0/biogeochem/CNCStateUpdate2Mod.F90
D       clm/src/clm4_0/biogeochem/CNC13StateUpdate2Mod.F90
D       clm/src/clm4_0/biogeochem/CNGapMortalityMod.F90
D       clm/src/clm4_0/biogeochem/CropRestMod.F90
D       clm/src/clm4_0/biogeochem/CNGRespMod.F90
D       clm/src/clm4_0/biogeochem/CNNStateUpdate1Mod.F90
D       clm/src/clm4_0/biogeochem/CNBalanceCheckMod.F90
D       clm/src/clm4_0/biogeochem/CNNStateUpdate3Mod.F90
D       clm/src/clm4_0/biogeochem/CNFireMod.F90
D       clm/src/clm4_0/biogeochem/CNMRespMod.F90
D       clm/src/clm4_0/biogeochem/MEGANFactorsMod.F90
D       clm/src/clm4_0/biogeochem/CNPrecisionControlMod.F90
D       clm/src/clm4_0/biogeochem/CNWoodProductsMod.F90
D       clm/src/clm4_0/biogeochem/CNSummaryMod.F90
D       clm/src/clm4_0/biogeochem/DUSTMod.F90
D       clm/src/clm4_0/biogeochem/CNDVLightMod.F90
D       clm/src/clm4_0/biogeochem/CNPhenologyMod.F90
D       clm/src/clm4_0/biogeochem/CNCStateUpdate1Mod.F90
D       clm/src/clm4_0/biogeochem/CNDecompMod.F90
D       clm/src/clm4_0/biogeochem/STATICEcosysDynMod.F90
D       clm/src/clm4_0/biogeochem/CNCStateUpdate3Mod.F90
D       clm/src/clm4_0/biogeochem/CNDVMod.F90
D       clm/src/clm4_0/biogeochem/CNC13StateUpdate1Mod.F90
D       clm/src/clm4_0/biogeochem/CNrestMod.F90
D       clm/src/clm4_0/biogeochem/CNC13StateUpdate3Mod.F90
D       clm/src/clm4_0/biogeochem/VOCEmissionMod.F90
D       clm/src/clm4_0/biogeochem/CNDVEcosystemDynIniMod.F90
D       clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90
D       clm/src/clm4_0/biogeochem/CNNStateUpdate2Mod.F90
D       clm/src/clm4_0/biogeochem/C13SummaryMod.F90
D       clm/src/clm4_0/biogeochem/DryDepVelocity.F90
D       clm/src/clm4_0/biogeochem/CNC13FluxMod.F90
D       clm/src/clm4_0/biogeochem/CNAllocationMod.F90
D       clm/src/clm4_0/biogeochem/CNNDynamicsMod.F90
D       clm/src/clm4_0/biogeochem/CNEcosystemDynMod.F90
D       clm/src/clm4_0/biogeochem/CNSetValueMod.F90
D       clm/src/clm4_0/biogeochem/CNVegStructUpdateMod.F90
D       clm/src/clm4_0/biogeochem/CNDVEstablishmentMod.F90
	
D       clm/src/clm4_0/main
D       clm/src/clm4_0/main/clm_varcon.F90
D       clm/src/clm4_0/main/clm_varpar.F90
D       clm/src/clm4_0/main/CNiniTimeVar.F90
D       clm/src/clm4_0/main/dynlandMod.F90
D       clm/src/clm4_0/main/decompInitMod.F90
D       clm/src/clm4_0/main/clm_initializeMod.F90
D       clm/src/clm4_0/main/subgridRestMod.F90
D       clm/src/clm4_0/main/clm_glclnd.F90
D       clm/src/clm4_0/main/accFldsMod.F90
D       clm/src/clm4_0/main/subgridMod.F90
D       clm/src/clm4_0/main/clmtypeInitMod.F90
D       clm/src/clm4_0/main/ndepStreamMod.F90
D       clm/src/clm4_0/main/pftdynMod.F90
D       clm/src/clm4_0/main/iniTimeConst.F90
D       clm/src/clm4_0/main/histFileMod.F90
D       clm/src/clm4_0/main/pft2colMod.F90
D       clm/src/clm4_0/main/clm_atmlnd.F90
D       clm/src/clm4_0/main/findHistFields.pl
D       clm/src/clm4_0/main/restFileMod.F90
D       clm/src/clm4_0/main/clm_varsur.F90
D       clm/src/clm4_0/main/controlMod.F90
D       clm/src/clm4_0/main/initSurfAlbMod.F90
D       clm/src/clm4_0/main/filterMod.F90
D       clm/src/clm4_0/main/clm_driver.F90
D       clm/src/clm4_0/main/clm_varctl.F90
D       clm/src/clm4_0/main/subgridAveMod.F90
D       clm/src/clm4_0/main/initGridCellsMod.F90
D       clm/src/clm4_0/main/CNiniSpecial.F90
D       clm/src/clm4_0/main/pftvarcon.F90
D       clm/src/clm4_0/main/surfrdMod.F90
D       clm/src/clm4_0/main/decompMod.F90
D       clm/src/clm4_0/main/clmtype.F90
D       clm/src/clm4_0/main/histFldsMod.F90
D       clm/src/clm4_0/main/mkarbinitMod.F90
D       clm/src/clm4_0/biogeophys
D       clm/src/clm4_0/biogeophys/BalanceCheckMod.F90
D       clm/src/clm4_0/biogeophys/SurfaceRadiationMod.F90
D       clm/src/clm4_0/biogeophys/SoilTemperatureMod.F90
D       clm/src/clm4_0/biogeophys/SnowHydrologyMod.F90
D       clm/src/clm4_0/biogeophys/UrbanInputMod.F90
D       clm/src/clm4_0/biogeophys/Biogeophysics1Mod.F90
D       clm/src/clm4_0/biogeophys/Biogeophysics2Mod.F90
D       clm/src/clm4_0/biogeophys/FracWetMod.F90
D       clm/src/clm4_0/biogeophys/UrbanInitMod.F90
D       clm/src/clm4_0/biogeophys/FrictionVelocityMod.F90
D       clm/src/clm4_0/biogeophys/TridiagonalMod.F90
D       clm/src/clm4_0/biogeophys/SurfaceAlbedoMod.F90
D       clm/src/clm4_0/biogeophys/Hydrology1Mod.F90
D       clm/src/clm4_0/biogeophys/Hydrology2Mod.F90
D       clm/src/clm4_0/biogeophys/BiogeophysicsLakeMod.F90
D       clm/src/clm4_0/biogeophys/BiogeophysRestMod.F90
D       clm/src/clm4_0/biogeophys/UrbanMod.F90
D       clm/src/clm4_0/biogeophys/SoilHydrologyMod.F90
D       clm/src/clm4_0/biogeophys/QSatMod.F90
D       clm/src/clm4_0/biogeophys/clm_driverInitMod.F90
D       clm/src/clm4_0/biogeophys/HydrologyLakeMod.F90
D       clm/src/clm4_0/biogeophys/BareGroundFluxesMod.F90
D       clm/src/clm4_0/biogeophys/SNICARMod.F90
D       clm/src/clm4_0/biogeophys/CanopyFluxesMod.F90
	
List all files added and what they do:

A       clm/src_clm40
A       clm/src_clm40/biogeochem
A       clm/src_clm40/biogeochem/CNCStateUpdate2Mod.F90
A       clm/src_clm40/biogeochem/CNC13StateUpdate2Mod.F90
A       clm/src_clm40/biogeochem/CNGRespMod.F90
A       clm/src_clm40/biogeochem/CNBalanceCheckMod.F90
A       clm/src_clm40/biogeochem/CNNStateUpdate3Mod.F90
A       clm/src_clm40/biogeochem/CNSummaryMod.F90
A       clm/src_clm40/biogeochem/CNPhenologyMod.F90
A       clm/src_clm40/biogeochem/STATICEcosysDynMod.F90
A       clm/src_clm40/biogeochem/CNCStateUpdate1Mod.F90
A       clm/src_clm40/biogeochem/CNC13StateUpdate1Mod.F90
A       clm/src_clm40/biogeochem/CNrestMod.F90
A       clm/src_clm40/biogeochem/VOCEmissionMod.F90
A       clm/src_clm40/biogeochem/CNAnnualUpdateMod.F90
A       clm/src_clm40/biogeochem/CNNStateUpdate2Mod.F90
A       clm/src_clm40/biogeochem/C13SummaryMod.F90
A       clm/src_clm40/biogeochem/CNAllocationMod.F90
A       clm/src_clm40/biogeochem/DryDepVelocity.F90
A       clm/src_clm40/biogeochem/CNNDynamicsMod.F90
A       clm/src_clm40/biogeochem/CNSetValueMod.F90
A       clm/src_clm40/biogeochem/CNGapMortalityMod.F90
A       clm/src_clm40/biogeochem/CropRestMod.F90
A       clm/src_clm40/biogeochem/CNNStateUpdate1Mod.F90
A       clm/src_clm40/biogeochem/CNFireMod.F90
A       clm/src_clm40/biogeochem/CNMRespMod.F90
A       clm/src_clm40/biogeochem/MEGANFactorsMod.F90
A       clm/src_clm40/biogeochem/CNWoodProductsMod.F90
A       clm/src_clm40/biogeochem/CNPrecisionControlMod.F90
A       clm/src_clm40/biogeochem/DUSTMod.F90
A       clm/src_clm40/biogeochem/CNDVLightMod.F90
A       clm/src_clm40/biogeochem/CNDecompMod.F90
A       clm/src_clm40/biogeochem/CNDVMod.F90
A       clm/src_clm40/biogeochem/CNCStateUpdate3Mod.F90
A       clm/src_clm40/biogeochem/CNC13StateUpdate3Mod.F90
A       clm/src_clm40/biogeochem/CNDVEcosystemDynIniMod.F90
A       clm/src_clm40/biogeochem/CNC13FluxMod.F90
A       clm/src_clm40/biogeochem/CNEcosystemDynMod.F90
A       clm/src_clm40/biogeochem/CNVegStructUpdateMod.F90
A       clm/src_clm40/biogeochem/CNDVEstablishmentMod.F90
	
A       clm/src_clm40/main
A       clm/src_clm40/main/spmdGathScatMod.F90
A       clm/src_clm40/main/organicFileMod.F90
A       clm/src_clm40/main/clm_varcon.F90
A       clm/src_clm40/main/clm_varpar.F90
A       clm/src_clm40/main/CNiniTimeVar.F90
A       clm/src_clm40/main/abortutils.F90
A       clm/src_clm40/main/accumulMod.F90
A       clm/src_clm40/main/decompInitMod.F90
A       clm/src_clm40/main/clm_glclnd.F90
A       clm/src_clm40/main/accFldsMod.F90
A       clm/src_clm40/main/subgridMod.F90
A       clm/src_clm40/main/pftdynMod.F90
A       clm/src_clm40/main/pft2colMod.F90
A       clm/src_clm40/main/clm_atmlnd.F90
A       clm/src_clm40/main/quadraticMod.F90
A       clm/src_clm40/main/GetGlobalValuesMod.F90
A       clm/src_clm40/main/clm_time_manager.F90
A       clm/src_clm40/main/filterMod.F90
A       clm/src_clm40/main/clm_varctl.F90
A       clm/src_clm40/main/subgridAveMod.F90
A       clm/src_clm40/main/dtypes.h
A       clm/src_clm40/main/CNiniSpecial.F90
A       clm/src_clm40/main/surfrdMod.F90
A       clm/src_clm40/main/domainMod.F90
A       clm/src_clm40/main/lnd_import_export.F90
A       clm/src_clm40/main/restUtilMod.F90
A       clm/src_clm40/main/clmtype.F90
A       clm/src_clm40/main/mkarbinitMod.F90
A       clm/src_clm40/main/restUtilMod.F90.in
A       clm/src_clm40/main/dynlandMod.F90
A       clm/src_clm40/main/getdatetime.F90
A       clm/src_clm40/main/clm_initializeMod.F90
A       clm/src_clm40/main/subgridRestMod.F90
A       clm/src_clm40/main/fileutils.F90
A       clm/src_clm40/main/clmtypeInitMod.F90
A       clm/src_clm40/main/ndepStreamMod.F90
A       clm/src_clm40/main/SimpleMathMod.F90
A       clm/src_clm40/main/iniTimeConst.F90
A       clm/src_clm40/main/lnd_comp_esmf.F90
A       clm/src_clm40/main/histFileMod.F90
A       clm/src_clm40/main/clm_cpl_indices.F90
A       clm/src_clm40/main/findHistFields.pl
A       clm/src_clm40/main/restFileMod.F90
A       clm/src_clm40/main/clm_varsur.F90
A       clm/src_clm40/main/controlMod.F90
A       clm/src_clm40/main/CMakeLists.txt
A       clm/src_clm40/main/initSurfAlbMod.F90
A       clm/src_clm40/main/clm_nlUtilsMod.F90
A       clm/src_clm40/main/clm_driver.F90
A       clm/src_clm40/main/clm_varorb.F90
A       clm/src_clm40/main/initGridCellsMod.F90
A       clm/src_clm40/main/lnd_comp_mct.F90
A       clm/src_clm40/main/pftvarcon.F90
A       clm/src_clm40/main/ncdio_pio.F90
A       clm/src_clm40/main/spmdMod.F90
A       clm/src_clm40/main/decompMod.F90
A       clm/src_clm40/main/ncdio_pio.F90.in
A       clm/src_clm40/main/histFldsMod.F90
	
A       clm/src_clm40/biogeophys
A       clm/src_clm40/biogeophys/BalanceCheckMod.F90
A       clm/src_clm40/biogeophys/SoilTemperatureMod.F90
A       clm/src_clm40/biogeophys/UrbanInputMod.F90
A       clm/src_clm40/biogeophys/SnowHydrologyMod.F90
A       clm/src_clm40/biogeophys/Biogeophysics1Mod.F90
A       clm/src_clm40/biogeophys/FrictionVelocityMod.F90
A       clm/src_clm40/biogeophys/TridiagonalMod.F90
A       clm/src_clm40/biogeophys/Hydrology1Mod.F90
A       clm/src_clm40/biogeophys/BiogeophysRestMod.F90
A       clm/src_clm40/biogeophys/UrbanMod.F90
A       clm/src_clm40/biogeophys/QSatMod.F90
A       clm/src_clm40/biogeophys/clm_driverInitMod.F90
A       clm/src_clm40/biogeophys/HydrologyLakeMod.F90
A       clm/src_clm40/biogeophys/BareGroundFluxesMod.F90
A       clm/src_clm40/biogeophys/SNICARMod.F90
A       clm/src_clm40/biogeophys/CanopyFluxesMod.F90
A       clm/src_clm40/biogeophys/SurfaceRadiationMod.F90
A       clm/src_clm40/biogeophys/Biogeophysics2Mod.F90
A       clm/src_clm40/biogeophys/UrbanInitMod.F90
A       clm/src_clm40/biogeophys/FracWetMod.F90
A       clm/src_clm40/biogeophys/SurfaceAlbedoMod.F90
A       clm/src_clm40/biogeophys/Hydrology2Mod.F90
A       clm/src_clm40/biogeophys/BiogeophysicsLakeMod.F90
A       clm/src_clm40/biogeophys/SoilHydrologyMod.F90
	
A       clm/src/main
A       clm/src/main/organicFileMod.F90
A       clm/src/main/clm_varcon.F90
A       clm/src/main/initInterp.F90
A       clm/src/main/landunit_varcon.F90
A       clm/src/main/clm_varpar.F90
A       clm/src/main/abortutils.F90
A       clm/src/main/accumulMod.F90
A       clm/src/main/subgridWeightsMod.F90
A       clm/src/main/decompInitMod.F90
A       clm/src/main/subgridMod.F90
A       clm/src/main/atm2lndType.F90
A       clm/src/main/lnd2atmType.F90
A       clm/src/main/column_varcon.F90
A       clm/src/main/EcophysConType.F90
A       clm/src/main/GetGlobalValuesMod.F90
A       clm/src/main/initSubgridMod.F90
A       clm/src/main/lnd2glcMod.F90
A       clm/src/main/glc2lndMod.F90
A       clm/src/main/filterMod.F90
A       clm/src/main/surfrdUtilsMod.F90
A       clm/src/main/clm_varctl.F90
A       clm/src/main/subgridAveMod.F90
A       clm/src/main/initVerticalMod.F90
A       clm/src/main/glcDiagnosticsMod.F90
A       clm/src/main/lnd2atmMod.F90
A       clm/src/main/atm2lndMod.F90
A       clm/src/main/surfrdMod.F90
A       clm/src/main/FuncPedotransferMod.F90
A       clm/src/main/readParamsMod.F90
A       clm/src/main/clm_initializeMod.F90
A       clm/src/main/subgridRestMod.F90
A       clm/src/main/paramUtilMod.F90
A       clm/src/main/ColumnType.F90
A       clm/src/main/PatchType.F90
A       clm/src/main/ndepStreamMod.F90
A       clm/src/main/init_hydrology.F90
A       clm/src/main/histFileMod.F90
A       clm/src/main/findHistFields.pl
A       clm/src/main/restFileMod.F90
A       clm/src/main/clm_varsur.F90
A       clm/src/main/controlMod.F90
A       clm/src/main/LandunitType.F90
A       clm/src/main/CMakeLists.txt
A       clm/src/main/test
A       clm/src/main/test/subgridWeights_test
A       clm/src/main/test/subgridWeights_test/test_subgridWeights.pf
A       clm/src/main/test/subgridWeights_test/CMakeLists.txt
A       clm/src/main/test/clm_glclnd_test
A       clm/src/main/test/clm_glclnd_test/test_clm_glclnd.pf
A       clm/src/main/test/clm_glclnd_test/CMakeLists.txt
A       clm/src/main/test/CMakeLists.txt
A       clm/src/main/clm_driver.F90
A       clm/src/main/GridcellType.F90
A       clm/src/main/initGridCellsMod.F90
A       clm/src/main/pftvarcon.F90
A       clm/src/main/ncdio_pio.F90
A       clm/src/main/decompMod.F90
A       clm/src/main/ncdio_pio.F90.in
A       clm/src/main/reweightMod.F90

A       clm/src/ED
A       clm/src/ED/biogeochem
A       clm/src/ED/biogeochem/EDCanopyStructureMod.F90
A       clm/src/ED/biogeochem/EDGrowthFunctionsMod.F90
A       clm/src/ED/biogeochem/EDPhysiologyMod.F90
A       clm/src/ED/biogeochem/EDCohortDynamicsMod.F90
A       clm/src/ED/biogeochem/EDPatchDynamicsMod.F90
A       clm/src/ED/main
A       clm/src/ED/main/EDBioType.F90
A       clm/src/ED/main/EDEcophysConType.F90
A       clm/src/ED/main/EDParamsMod.F90
A       clm/src/ED/main/EDMainMod.F90
A       clm/src/ED/main/EDCLMLinkMod.F90
A       clm/src/ED/main/EDVecCohortType.F90
A       clm/src/ED/main/EDVecPatchType.F90
A       clm/src/ED/main/EDRestVectorMod.F90
A       clm/src/ED/main/EDPftvarcon.F90
A       clm/src/ED/main/EDInitMod.F90
A       clm/src/ED/main/EDTypesMod.F90
A       clm/src/ED/fire
A       clm/src/ED/fire/SFParamsMod.F90
A       clm/src/ED/fire/SFMainMod.F90
A       clm/src/ED/biogeophys
A       clm/src/ED/biogeophys/EDAccumulateFluxesMod.F90
A       clm/src/ED/biogeophys/EDSurfaceAlbedoMod.F90
A       clm/src/ED/biogeophys/EDPhotosynthesisMod.F90
A       clm/src/ED/biogeophys/EDBtranMod.F90
A       clm/src/Notes
M       clm/src/unit_test_shr/unittestSubgridMod.F90

A       clm/src/utils
A       clm/src/utils/spmdGathScatMod.F90
A       clm/src/utils/clm_time_manager.F90
A       clm/src/utils/clm_nlUtilsMod.F90
A       clm/src/utils/clm_varorb.F90
A       clm/src/utils/accumulMod.F90
A       clm/src/utils/getdatetime.F90
A       clm/src/utils/fileutils.F90
A       clm/src/utils/dtypes.h
A       clm/src/utils/spmdMod.F90
A       clm/src/utils/SimpleMathMod.F90
A       clm/src/utils/domainMod.F90
A       clm/src/utils/restUtilMod.F90
A       clm/src/utils/quadraticMod.F90
A       clm/src/utils/CMakeLists.txt
A       clm/src/utils/restUtilMod.F90.in

A       clm/src/biogeochem
A       clm/src/biogeochem/CNCStateUpdate2Mod.F90
A       clm/src/biogeochem/CNDecompCascadeConType.F90
A       clm/src/biogeochem/CNNitrifDenitrifMod.F90
A       clm/src/biogeochem/CNGRespMod.F90
A       clm/src/biogeochem/CNBalanceCheckMod.F90
A       clm/src/biogeochem/CNNStateUpdate3Mod.F90
A       clm/src/biogeochem/CNDVDriverMod.F90
A       clm/src/biogeochem/SatellitePhenologyMod.F90
A       clm/src/biogeochem/CNPhenologyMod.F90
A       clm/src/biogeochem/CNCarbonFluxType.F90
A       clm/src/biogeochem/CNCarbonStateType.F90
A       clm/src/biogeochem/CNCStateUpdate1Mod.F90
A       clm/src/biogeochem/VOCEmissionMod.F90
A       clm/src/biogeochem/CNAnnualUpdateMod.F90
A       clm/src/biogeochem/CNNStateUpdate2Mod.F90
A       clm/src/biogeochem/CropType.F90
A       clm/src/biogeochem/CNAllocationMod.F90
A       clm/src/biogeochem/CNNDynamicsMod.F90
A       clm/src/biogeochem/DryDepVelocity.F90
A       clm/src/biogeochem/CNDecompCascadeBGCMod.F90
A       clm/src/biogeochem/CNSoilLittVertTranspMod.F90
A       clm/src/biogeochem/CNDecompCascadeCNMod.F90
A       clm/src/biogeochem/CNC14DecayMod.F90
A       clm/src/biogeochem/CNGapMortalityMod.F90
A       clm/src/biogeochem/CNNStateUpdate1Mod.F90
A       clm/src/biogeochem/CNFireMod.F90
A       clm/src/biogeochem/CNNitrogenFluxType.F90
A       clm/src/biogeochem/CNMRespMod.F90
A       clm/src/biogeochem/MEGANFactorsMod.F90
A       clm/src/biogeochem/CNVerticalProfileMod.F90
A       clm/src/biogeochem/CNCIsoFluxMod.F90
A       clm/src/biogeochem/CNWoodProductsMod.F90
A       clm/src/biogeochem/CNPrecisionControlMod.F90
A       clm/src/biogeochem/ch4Mod.F90
A       clm/src/biogeochem/DUSTMod.F90
A       clm/src/biogeochem/CNDVLightMod.F90
A       clm/src/biogeochem/ch4varcon.F90
A       clm/src/biogeochem/CNDecompMod.F90
A       clm/src/biogeochem/CNCStateUpdate3Mod.F90
A       clm/src/biogeochem/CNSharedParamsMod.F90
A       clm/src/biogeochem/CNDVType.F90
A       clm/src/biogeochem/CNStateType.F90
A       clm/src/biogeochem/CNEcosystemDynMod.F90
A       clm/src/biogeochem/CNNitrogenStateType.F90
A       clm/src/biogeochem/CNVegStructUpdateMod.F90
A       clm/src/biogeochem/CNDVEstablishmentMod.F90
	
A       clm/src/biogeophys
A       clm/src/biogeophys/SnowSnicarMod.F90
A       clm/src/biogeophys/SnowHydrologyMod.F90
A       clm/src/biogeophys/TridiagonalMod.F90
A       clm/src/biogeophys/FrictionVelocityType.F90
A       clm/src/biogeophys/LakeFluxesMod.F90
A       clm/src/biogeophys/PhotosynthesisMod.F90
A       clm/src/biogeophys/AerosolType.F90
A       clm/src/biogeophys/ActiveLayerMod.F90
A       clm/src/biogeophys/QSatMod.F90
A       clm/src/biogeophys/SoilHydrologyType.F90
A       clm/src/biogeophys/HydrologyDrainageMod.F90
A       clm/src/biogeophys/LakeStateType.F90
A       clm/src/biogeophys/BareGroundFluxesMod.F90
A       clm/src/biogeophys/SolarAbsorbedType.F90
A       clm/src/biogeophys/CanopyHydrologyMod.F90
A       clm/src/biogeophys/UrbanFluxesMod.F90
A       clm/src/biogeophys/SurfaceAlbedoMod.F90
A       clm/src/biogeophys/UrbanRadiationMod.F90
A       clm/src/biogeophys/PhotosynthesisType.F90
A       clm/src/biogeophys/CanopyTemperatureMod.F90
A       clm/src/biogeophys/HydrologyNoDrainageMod.F90
A       clm/src/biogeophys/DaylengthMod.F90
A       clm/src/biogeophys/WaterfluxType.F90
A       clm/src/biogeophys/BalanceCheckMod.F90
A       clm/src/biogeophys/SoilTemperatureMod.F90
A       clm/src/biogeophys/WaterStateType.F90
A       clm/src/biogeophys/LakeTemperatureMod.F90
A       clm/src/biogeophys/FrictionVelocityMod.F90
A       clm/src/biogeophys/SoilFluxesMod.F90
A       clm/src/biogeophys/TemperatureType.F90
A       clm/src/biogeophys/SurfaceAlbedoType.F90
A       clm/src/biogeophys/AerosolMod.F90
A       clm/src/biogeophys/SoilStateType.F90
A       clm/src/biogeophys/SurfaceResistanceMod.F90
A       clm/src/biogeophys/UrbanAlbedoMod.F90
A       clm/src/biogeophys/CanopyFluxesMod.F90
A       clm/src/biogeophys/CMakeLists.txt
A       clm/src/biogeophys/RootBiophysMod.F90
A       clm/src/biogeophys/test
A       clm/src/biogeophys/test/CMakeLists.txt
A       clm/src/biogeophys/test/Daylength_test
A       clm/src/biogeophys/test/Daylength_test/test_daylength.pf
A       clm/src/biogeophys/test/Daylength_test/CMakeLists.txt
A       clm/src/biogeophys/SurfaceRadiationMod.F90
A       clm/src/biogeophys/SoilWaterMovementMod.F90
A       clm/src/biogeophys/SoilMoistStressMod.F90
A       clm/src/biogeophys/SoiWatRetCurveParMod.F90
A       clm/src/biogeophys/EnergyFluxType.F90
A       clm/src/biogeophys/CanopyStateType.F90
A       clm/src/biogeophys/BandDiagonalMod.F90
A       clm/src/biogeophys/SoilHydrologyMod.F90
A       clm/src/biogeophys/LakeCon.F90
A       clm/src/biogeophys/LakeHydrologyMod.F90
A       clm/src/biogeophys/UrbanParamsType.F90
A       clm/src/dyn_subgrid
A       clm/src/dyn_subgrid/dynLandunitAreaMod.F90
A       clm/src/dyn_subgrid/dynTimeInfoMod.F90
A       clm/src/dyn_subgrid/dynSubgridDriverMod.F90
A       clm/src/dyn_subgrid/dynFileMod.F90
A       clm/src/dyn_subgrid/dynConsBiogeochemMod.F90
A       clm/src/dyn_subgrid/dynEDMod.F90
A       clm/src/dyn_subgrid/dynVarMod.F90
A       clm/src/dyn_subgrid/dynVarTimeUninterpMod.F90
A       clm/src/dyn_subgrid/dynVarMod.F90.in
A       clm/src/dyn_subgrid/dynVarTimeInterpMod.F90.in
A       clm/src/dyn_subgrid/dynVarTimeUninterpMod.F90.in
A       clm/src/dyn_subgrid/do_genf90
A       clm/src/dyn_subgrid/CMakeLists.txt
A       clm/src/dyn_subgrid/test
A       clm/src/dyn_subgrid/test/dynLandunitArea_test
A       clm/src/dyn_subgrid/test/dynLandunitArea_test/test_update_landunit_weights_one_gcell.pf
A       clm/src/dyn_subgrid/test/dynLandunitArea_test/CMakeLists.txt
A       clm/src/dyn_subgrid/test/dynLandunitArea_test/test_update_landunit_weights.pf
A       clm/src/dyn_subgrid/test/dynVar_test
A       clm/src/dyn_subgrid/test/dynVar_test/test_dynVarShared.F90
A       clm/src/dyn_subgrid/test/dynVar_test/test_dynVarTimeInterp.pf
A       clm/src/dyn_subgrid/test/dynVar_test/test_dynVarTimeUninterp.pf
A       clm/src/dyn_subgrid/test/dynVar_test/CMakeLists.txt
A       clm/src/dyn_subgrid/test/dynTimeInfo_test
A       clm/src/dyn_subgrid/test/dynTimeInfo_test/test_dynTimeInfo.pf
A       clm/src/dyn_subgrid/test/dynTimeInfo_test/CMakeLists.txt
A       clm/src/dyn_subgrid/test/CMakeLists.txt
A       clm/src/dyn_subgrid/test/dynInitColumns_test
A       clm/src/dyn_subgrid/test/dynInitColumns_test/test_init_columns.pf
A       clm/src/dyn_subgrid/test/dynInitColumns_test/CMakeLists.txt
A       clm/src/dyn_subgrid/dynHarvestMod.F90
A       clm/src/dyn_subgrid/dynPriorWeightsMod.F90
A       clm/src/dyn_subgrid/dynpftFileMod.F90
A       clm/src/dyn_subgrid/dynVarTimeInterpMod.F90
A       clm/src/dyn_subgrid/dynCNDVMod.F90
A       clm/src/dyn_subgrid/dynConsBiogeophysMod.F90
A       clm/src/dyn_subgrid/dynInitColumnsMod.F90
A       clm/src/unit_test_mocks/util_share/restUtilMod_mock.F90
A       clm/src/unit_test_mocks/util_share/restUtilMod_mock.F90.in
	
List all existing files that have been modified, and describe the changes:
	ALL files have been modified - see the general description for an
	overview of what was done - the following files have not had their directories
	changed - so the summary is below

M       clm/bld/configure
	- needed to account for change in filepath

M       clm/bld/CLMBuildNamelist.pm
M       clm/bld/namelist_files/namelist_definition_clm4_5.xml
	- see namelist changes mentioned above

M       clm/src/unit_test_mocks/util_share/clm_time_manager_mock.F90
M       clm/src/unit_test_mocks/util_share/ncdio_var.F90
M       clm/src/unit_test_mocks/util_share/ncdio_pio_mock.F90
M       clm/src/unit_test_mocks/util_share/do_genf90
M       clm/src/unit_test_mocks/util_share/CMakeLists.txt
M       clm/src/unit_test_mocks/util_share/ncdio_pio_mock.F90.in
M       clm/src/unit_test_mocks/main/histFileMod_mock.F90
M       clm/src/CMakeLists.txt
	- unit test changes needed to account for introduction of new data types and
	directory structure

M       clm/src/cpl/lnd_comp_esmf.F90
M       clm/src/cpl/lnd_import_export.F90
M       clm/src/cpl/lnd_comp_mct.F90
	- coupling interface changes needed to account for introduction of new data types

CLM testing:

  build-namelist tests:

    yellowstone yes
    goldbach yes

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel yes
    yellowstone_pgi   yes
    yellowstone_gnu   yes
    goldbach_nag      yes
    goldbach_intel    yes
    goldbach_pgi      yes

    NOTE for goldbach_nag - four ED compare_hist tests fail with small bit for bit differences. 
    In fact - looking more closely, these tests are also run for pgi and intel on goldbach - and
    values for 	LITTER_IN and LITTER_OUT are 0. for those compilers but non-zero for nag.
    With the refactoring code - those fields are again 0. for intel and pgi - but totally different
    and non-zero for nag. Apparently, this is known problem that will get resolved in when new ED changes
    are brount in

    ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_nag.clm-edTest
    ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_nag.clm-edTest
    SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest
    SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest


  short tests (aux_clm_short) (generally these are NOT used when making a tag): N/A

  tools testing: N/A

CLM tag used for the baseline comparisons: clm4_5_1_r080

Changes answers relative to baseline: No - BFB

===============================================================
===============================================================
Tag name:  clm4_5_1_r080
Originator(s):  erik (Erik)
Date: Sat Aug 16 15:01:35 MDT 2014
One-line Summary: Update externals to CESM trunk versions, allow eighth degree as a valid resolution

Purpose of changes:

Update all the externals to the very latest CESM trunk versions (based off of current
cesm1_3_alpha13a).

Requirements for tag: Get working with trunk externals

Test level of tag: regular

Bugs fixed (include bugzilla ID):

   2012 Problem with mksurfdata_map for eighth degree grid...
  Scripts issues as follows:
   2024 nlcompareonly option to create_test not working correctly for reporting
   2019 ERH tests don't save the base env_run.xml, so have trouble when resubmitted...
   2018 Failed tests in cesm1_3_beta11 needed for CLM
   2005 Remove untested named compsets and grids
   1999 T85_g16 has inconsistent land domain and surface datasets

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: 
   Archiving updated in support of time series generation
   Running test suite now builds some shared libraries built only once

Describe any changes made to the namelist: 
   Resolve env and xml vars used in user_nl_*

   Default for drv_in profile_timer changed from 4 to 1
   Some PE layours change: f10_f10 change from 15x1 to 30x1

List any changes to the defaults for the boundary datasets: Add 0.125x0.125 mapping files

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): Update to cesm1_3_alpha13a externals

    scripts      to scripts4_140814a
    scripts/doc  to doc_140519
    Machines     to Machines_140811
    CMake        to CMake_Fortran_utils_140715
    drv          to drvseq5_0_15
    cism         to cism1_140602
    timing       to timing_140416
    pio          to pio1_8_12
    cprnc        to cprnc_140625
    mapping      to mapping_140702b       (note: gen_domain changes answers)
    unit_testing to unit_testing_0_07

    PTCLM        to PTCLM2_140816

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgridmapMod.F90 -- decrease tolerance
   M    models/lnd/clm/tools/shared/ncl_scripts/getregional_datasets.ncl - Loop over variables
           and then cat the files together at the end. This makes the process possible for
           high resolution and speeds up lower resolution sub-setting as well.
   M    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkgridmapMod.F90 -- decrease tolerance
   M    models/lnd/clm/tools/shared/mkmapdata/README --------------------- Fix/update documentation
   M    models/lnd/clm/bld/unit_testers/build-namelist_test.pl ----------- Correct test count
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml --- Add 0.125x0.125
           mapping files
   M    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml - Add 0.125x0.125
           as a valid resolution
   M    models/lnd/clm/bld/namelist_files/createMapEntry.pl --- Correct path, get working again

CLM testing:

  build-namelist tests:

    yellowstone yes

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel   yes
    yellowstone_pgi     yes
    yellowstone_gnu     yes
    goldbach_nag        yes
    goldbach_intel      yes
    goldbach_pgi        yes

  short tests (aux_clm_short) (generally these are NOT used when making a tag):

    yellowstone_intel   yes
    yellowstone_pgi     yes
    goldbach_nag        yes

  tools testing:

    yellowstone interactive  yes

CLM tag used for the baseline comparisons:  clm4_5_1_r079

Changes answers relative to baseline: Yes! (PE layouts that change)

  Summarize any changes to answers, i.e.,
    - what code configurations: non single-point configurations, where PE layout
        changes (f10_f10)
    - what platforms/compilers: all
    - nature of change (roundoff)
       x2l_Flrr_volr changes to roundoff

===============================================================
===============================================================
Tag name:  clm4_5_1_r079
Originator(s):  andre (Benjamin Andre,LAWRENCE BERKELEY NATIONAL LABORATORY,510-486-4617)
Date:  Thu Jul 31 17:09:57 MDT 2014
One-line Summary: G. Bisht (LBL) soil temperature refactor; machines update for goldbach-intel

Purpose of changes: Refactor soil temperature module to break the construction of the linear system LHS matrix and RHS vector into small physics based routines. Update machines external to fix compiling with goldbach-intel.

Requirements for tag: regular

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: gbisht, self, muszala

List any svn externals directories updated (csm_share, mct, etc.): Machines

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90 - break creation of linear system into small physics based routines.


CLM testing: regular

  build-namelist tests: N/A

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel - 4.0 ok, 4.5 ok
    yellowstone_pgi - 4.0 ok, 4.5 ok
    goldbach_nag - 4.0 ok, 4.5 ok (see note below)
    goldbach_intel - 4.0 ok, 4.5 ok
    goldbach_pgi - 4.0 ok, 4.5 ok

    NOTE for goldbach_nag - four ED compare_hist tests fail with small non bit for bit differences. This is the same issue described in clm4_5_1_r078 tag notes.

    ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_nag.clm-edTest
    ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_nag.clm-edTest
    SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest
    SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest

  tools testing: N/A

CLM tag used for the baseline comparisons: clm4_5_1_r078

Changes answers relative to baseline: No, bit for bit


===============================================================
===============================================================
Tag name:  clm4_5_1_r078
Originator(s):  muszala (Stefan Muszala)
Date: Wed Jul 23 20:42:00 MDT 2014
One-line Summary: Add lai stream capability and the ability to run with V5 cruncep data.  Code written by swenson, 
modified and tested by muszala.

Purpose of changes: Add lai stream capability with use_lai_streams namelist variable.  Also add a datm_mode option
s.t. we can use cruncep V5 data if a user wants.  Move anomaly focing code out of CLM and into DATM.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: add setup_logic_lai_streams which controls use_lai_streams namelist variable 

List any changes to the defaults for the boundary datasets: added option to use V5 cruncep data sets.  V4 is default.

Describe any substantial timing or memory changes: N/A

Code reviewed by: kluzek, swenson, self

List any svn externals directories updated (csm_share, mct, etc.):

-scripts  https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/addclm50_tags/addclm50_n06_ED_scripts_015_140305_rev
+scripts  https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/addclm50_tags/addclm50_n09_ED_scripts_015_140305_rev

-models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_140312
+models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_140723

-models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_140418
+models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_140723

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

! add setup_logic_lai_streams function
M       models/lnd/clm/bld/CLMBuildNamelist.pm
! add entries for: stream_year_first_lai, stream_year_last_lai, model_year_align_lai, stream_fldfilename_lai, lai_mapalgo
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
! add default values for items added in namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
! add use_lai_streams code.   lai_init, lai_interp
M       models/lnd/clm/src/clm4_5/biogeochem/SatellitePhenologyMod.F90
! some comment clean up.  add use_lai_streams logical
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
! add use_lai_streams namelist handling and mpi_bcast call
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
! remove snomaly forcing streams since they are now in the datm
M       models/lnd/clm/src/cpl/clm_cpl_indices.F90
! remove anomaly forcing code since it is now in datm
M       models/lnd/clm/src/cpl/lnd_import_export.F90

CLM testing:

  build-namelist tests:

  yellowstone - failed  20 tests of 537.  This is expected due to the addition of the use_lai_streams namelist variable.

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

   -- nlcomp tests for 45 will fail --

    yellowstone_intel - 40 OK  - 45 OK
    yellowstone_pgi   - 40 OK  - 45 OK

    goldbach_nag      - 40 OK  - 45 OK 
    goldbach_intel    - 40 OK  - 45 OK
    goldbach_pgi      - 40 OK  - 45 OK

Both NAG tests on goldbach for ED compsets failed BFB.  All other compilers and machines pass.  Error probably related to a non-BFB error that I (spm) see with varying numbers of
time-steps on an ERS test and am currently trying to fix.

FAIL  ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_nag.clm-edTest.GC.again_45_nag.compare_hist.clm4_5_1_r077_redo 
FAIL ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_nag.clm-edTest.GC.again_45_nag.clm2.h0.compare_hist.clm4_5_1_r077_redo 
FAIL  SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest.GC.again_45_nag.compare_hist.clm4_5_1_r077_redo 
FAIL SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest.GC.again_45_nag.clm2.h0.compare_hist.clm4_5_1_r077_redo 
CLM tag used for the baseline comparisons:  clm4_5_1_r077

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_1_r077
Originator(s):  andre (Benjamin Andre,LAWRENCE BERKELEY NATIONAL LABORATORY,510-486-4617)
Date: Thu Jul 10 21:55:11 MDT 2014
One-line Summary: Refactor from Jinyun Tang (LBL) to make hydrology more modular and eventually allow runtime selection of different physics implementations.

Purpose of changes: Refactor a number of routines in clm45 hydrology to move duplicate code into reusable routines, make the code more modular for eventual unit testing and run time selection of different physics.

Requirements for tag: bit for bit, regular testing

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
	http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self, clm-cmt

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do:

  models/lnd/clm/src/util_share/SimpleMathMod.F90 - reuseable array functions
  models/lnd/clm/src/clm4_5/main/init_hydrology.F90 - initialize different hydrology submodules.
  models/lnd/clm/src/clm4_5/main/FuncPedotransferMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/SurfaceResistanceMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/RootBiophysMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/SoilWaterMovementMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/SoilMoistStressMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/SoiWatRetCurveParMod.F90 - modularize


List all existing files that have been modified, and describe the changes:

  models/lnd/clm/bld/query-xFail - check python version and provide an error message of it is too old.
  models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90 - remove unused min/max variables that conflict with intrinsics with gfortran.


  models/lnd/clm/src/clm4_5/main/initTimeConstMod.F90 - modularize
  models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90 - allocate new variable, fix bounds on porosity
  models/lnd/clm/src/clm4_5/main/controlMod.F90 - initialize new hydrology modules
  models/lnd/clm/src/clm4_5/main/clmtype.F90 - add new variable
  models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90 - modularize
  models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90 - modularize

CLM testing: regular

  build-namelist tests:

    yellowstone - n/a

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel - OK clm40, OK clm45
    yellowstone_pgi - OK clm40, OK clm45
    goldbach_nag - OK clm40, OK clm45
    goldbach_intel - OK clm40, OK clm45
    goldbach_pgi - OK clm40, OK clm45

  short tests (aux_clm_short) (generally these are NOT used when making a tag):

    yellowstone_intel - n/a
    yellowstone_pgi - n/a
    goldbach_nag - n/a

  tools testing:

    yellowstone interactive - n/a
    goldbach interactive - n/a

CLM tag used for the baseline comparisons: clm4_5_1_r076

Changes answers relative to baseline: No, bit for bit

  Note: SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTest is not bit for bit. This is the same test Stef had problems with in clm4_5_75. He has looked at it and given the ok make the tag as is.

===============================================================
===============================================================
Tag name:  clm4_5_1_r076
Originator(s):  erik (Erik)
Date: Mon Jul  7 14:24:07 MDT 2014
Orig Date: Wed Jun 25 13:49:49 MDT 2014 (Date of what was tagged as clm4_6_0, before we changed naming convention)
One-line Summary: Answer changes for fire code from Fang Li

Purpose of changes:

Several changes to CN Fire model. Some fixes for non-transient, as well as limiting of fire for high tropical
forest coverage. Change some units from per time-step to per second. Change Lightning input dataset from just
cloud to ground to total lightning. Some fire parameters were also changed and re-tuned for Qian forcing.
Some more documentation on fire fields was added.

When -ed_mode is sent to CLM build-namelist, a particular ED params dataset is used over the default. Make
a simple change that allows ED to run when CN is off. Add a 1850 and transient 20thC and rcp=8.5 datasets
for 1x1_brazil.

Requirements for tag: Fix bugs 1805 and 1719, lower fire amount in amazon

Test level of tag: regular

Bugs fixed (include bugzilla ID):
    1996 -- change cloud to ground lightning dataset to total lightning
    1995 -- change units from per time-step to per second
    1805 -- fire fix for non-transient
    1719 -- remove double counting of baf in fire area
    1992 -- allow ED to run when use_cn=.false.
    1988 -- Add ED params dataset.
    1991 -- transient datasets for 1x1_brazil

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
  specific rparams file for ED
  add 1850 and 20thC, rcp8.5 datasets for 1x1_brazil
  use lightning file that is total lightning not just cloud-to-ground

Describe any substantial timing or memory changes: 
    The test SMS.f19_g16.IRCP45CN.yellowstone_pgi showed a memory increase

Code reviewed by: self, lifang

List any svn externals directories updated (csm_share, mct, etc.): scripts
    scripts to addclm50_n06_ED_scripts_015_140305_rev

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

       M models/lnd/clm/bld/unit_testers/build-namelist_test.pl --------- Add some ED tests
       M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml - Different
             params file for ED, and add 1850 and 20thC, rcp8.5 datasets for 1x1_brazil
             and use lightning file that is total lightning not just cloud-to-ground
       M models/lnd/clm/bld/CLMBuildNamelist.pm ------------------------- Pass use_ed
             when getting paramfile
       M models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90 ------------- Revisions from
             Fang Li (2014), change parameters, add documentation, tropical forests will
             only burn if > 60% coverage, change some fields units to per second rather than
             per time-step, 
       M models/lnd/clm/src/clm4_5/biogeochem/CNInitMod.F90 ------------- change units
             for nfire, and farea_burned
       M models/lnd/clm/src/clm4_5/main/clmtype.F90 --------------------- Change units
             for nfire, lfc, lfc2, baf_crop, baf_peatf, fbac, fbac1, farea_burned
       M models/lnd/clm/src/clm4_5/main/histFldsMod.F90 ----------------- Change units for:
             LFC2, NFIRE, FAREA_BURNED, BAF_CROP, BAF_PEATF
       M models/lnd/clm/src/clm4_5/biogeophys/ED/EDPhotosynthesisMod.F90  Allow to work
             when use_cn is .false., use c3psn+1 in finding index for dr array.

CLM testing:

 build-namelist tests:  yes

    NOTE: 191 of the 537 compare tests fail, compared to clm4_5_75, because of changes in the namelist.

    yellowstone        yes

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel  yes
    yellowstone_pgi    yes
    goldbach_nag       yes
    goldbach_intel     yes
    goldbach_pgi       yes

CLM tag used for the baseline comparisons:  clm4_5_75

Changes answers relative to baseline:

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CN and BGC with CLM4.5 physics
          CLM4.0 for all modes, and CLM4.5 with SP or ED should be identical
    - what platforms/compilers: All
    - nature of change: new climate

   Fang Li, ran simulations with Qian forcing on yellowstone and tuned fire parameters to that forcing.
   However, her simulations had a minor bug in the conversion of total lightning to just cloud-to-ground
   (latitude in degree's was used for a cosine, rather than latitude in radians -- see bug 1996).

===============================================================
===============================================================
Tag name:  clm4_5_75
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date: Fri May 30 11:18:35 MDT 2014
One-line Summary: update externals to rtm1_0_38 and esmf_wrf_timemgr_140529

Purpose of changes: update externals to rtm1_0_38 and esmf_wrf_timemgr_140529.  These modifications
are based on valgrind errors that orginated in src/riverroute.  Tested in clm4_5_72 to make sure
everything was still BFB (at least w.r.t. CLM testing).  Retested (results below) against clm4_5_73.  

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): 

-models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_37
+models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_38

-models/utils/esmf_wrf_timemgr   https://svn-ccsm-models.cgd.ucar.edu/esmf_wrf_timemgr/trunk_tags/esmf_wrf_timemgr_130213
+models/utils/esmf_wrf_timemgr   https://svn-ccsm-models.cgd.ucar.edu/esmf_wrf_timemgr/trunk_tags/esmf_wrf_timemgr_140529

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: N/A

CLM testing:

in addition to other clm tests I updated the rtm and esmf externals in cesm1_3_alpha09c and
ran two B cases.

Note:  There is one ED test (SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_nag.clm-edTestGb) that failed for me in my
testing but passed for Bill with the same checkout.  We will keep an eye on this, but it's not super-critical at the moment.
Differences are very small in cpl. voc fields (largest RMS difference is 1e-13).

>>more TestStatus
PASS  ERS_PT.T31_g37.B1850CN.yellowstone_gnu 
PASS  ERS_PT.T31_g37.B1850CN.yellowstone_gnu.memleak

>>more TestStatus
PASS  ERS.ne30_g16.B1850C5CN.yellowstone_intel 
PASS  ERS.ne30_g16.B1850C5CN.yellowstone_intel.memleak

  build-namelist tests: N/A

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel - 40 OK - 45 OK - component gen comp - OK
    yellowstone_pgi   - 40 OK - 45 OK - component gen comp - OK

    goldbach_nag      - 40 OK - 45 OK
    goldbach_intel    - 40 OK - 45 OK
    goldbach_pgi      - 40 OK - 45 OK

CLM tag used for the baseline comparisons: clm4_5_73

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_74
Originator(s):  sacks (sacks)
Date: Wed May 28 16:05:36 MDT 2014
One-line Summary: misc. bfb changes - see detailed summary below

Purpose of changes:

  (1) Rename fpftdyn to flanduse_timeseries, and make related changes to names
      throughout the code. This rename is in preparation for an upcoming tag
      where this file will take on more general uses (e.g., transient crop
      areas).

  (2) Decrease thresholds for water, snow and energy balance checks (these were
      too permissive)

  (3) Move stuff out of clm_varcon into landunit_varcon (for constants specific
      to CLM's landunits) and column_varcon (for constants specific to CLM's
      columns) - analogous to the existing pftvarcon

  (4) Move some routines out of initGridCellsMod into a new initSubgridMod

  (5) Make time_info a public member of dyn_file_type, which allows removing a
      bunch of delegation methods. And rename some things in time_info_type for
      clarity.

  (6) Rework metadata for the description of landunit, column and pft types
      on the history and restart files, to centralize these descriptions to the
      appropriate place in the code.

  (7) Add general-purpose functionality for setting up subgrid structure for
      unit tests

  (8) Move unit tests into source tree, rather than being in
      test/unit_testers. Now the top-level script is in models/lnd/clm/src.

  (9) Fix baseline comparisons for PTCLM tests

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):
  - 1928 (create landunit_varcon.F90 and column_varcon.F90 from parts of clm_varcon.F90)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: fpftdyn renamed to flanduse_timeseries

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: addclm50_n03_ED_scripts_015_140305_rev -> addclm50_n04_ED_scripts_015_140305_rev
     - Rename CLM's fpftdyn to flanduse_timeseries in tests; update perl5lib

   tools/unit_testing: unit_testing_0_04 -> unit_testing_0_05
     - the major change here is allowing rebuilds with intel without needing to
       specify --clean

   models/lnd/clm/tools/PTCLM: PTCLM2_140423 -> PTCLM2_140521
     - rename fpftdyn -> flanduse_timeseries, and other related renames

List all files eliminated:

========= Renamed
D       models/lnd/clm/tools/clm4_5/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
D       models/lnd/clm/tools/clm4_0/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt

========= Move unit tests into source tree
D       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test/test_daylength.pf
D       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test
D       models/lnd/clm/test/unit_testers/clm4_5/biogeophys
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/test_update_landunit_weights_one_gcell.pf
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/test_update_landunit_weights.pf
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/test_dynVarShared.F90
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/test_dynVarTimeInterp.pf
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/test_dynVarTimeUninterp.pf
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test/test_dynTimeInfo.pf
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynInitColumns_test/test_init_columns.pf
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynInitColumns_test/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynInitColumns_test
D       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_var.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/GetGlobalValuesMod_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_var.F90.in
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/clm_time_manager_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_pio_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/spmdMod_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/do_genf90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_pio_mock.F90.in
D       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share
D       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/shr_sys_mod_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/mct_mod_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share
D       models/lnd/clm/test/unit_testers/clm4_5/mock/main/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/mock/main/histFileMod_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/main
D       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/dynFileMod_mock.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid
D       models/lnd/clm/test/unit_testers/clm4_5/mock/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/mock
D       models/lnd/clm/test/unit_testers/clm4_5/CMakeLists.txt
D       models/lnd/clm/test/unit_testers/clm4_5/README
D       models/lnd/clm/test/unit_testers/clm4_5
D       models/lnd/clm/test/unit_testers


List all files added and what they do:

========= Renamed
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/landuse_timeseries_hist_simyr1850-2005.txt
A       models/lnd/clm/tools/clm4_0/mksurfdata_map/landuse_timeseries_hist_simyr1850-2005.txt

========= Move stuff out of clm_varcon into landunit_varcon (for constants
          specific to CLM's landunits) and column_varcon (for constants specific
          to CLM's columns) - analogous to the existing pftvarcon.
A       models/lnd/clm/src/clm4_5/main/landunit_varcon.F90
A       models/lnd/clm/src/clm4_5/main/column_varcon.F90


========= Move some routines out of initGridCellsMod - these are lower-level
          routines that can also be used by unit test code. So initGridCellsMod
          contains higher-level stuff that is specific to how the subgrid
          structure is set up in a production run; and initSubgridMod contains
          lower-level stuff that doesn't know or care how things are actually
          set up, conceptually.
A       models/lnd/clm/src/clm4_5/main/initSubgridMod.F90

========= Add general-purpose functionality for setting up subgrid structure for unit tests
A       models/lnd/clm/src/unit_test_shr/unittestSubgridMod.F90
A       models/lnd/clm/src/unit_test_shr/CMakeLists.txt
A       models/lnd/clm/src/unit_test_shr


========= Move unit tests into source tree; also modify some unit tests to take
          advantage of the new unittestSubgridMod; also add tests of
          subgridWeightsMod and clm_glclnd
A       models/lnd/clm/src/clm4_5/main/test/subgridWeights_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/main/test/subgridWeights_test/test_subgridWeights.pf
A       models/lnd/clm/src/clm4_5/main/test/subgridWeights_test
A       models/lnd/clm/src/clm4_5/main/test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/main/test/clm_glclnd_test/test_clm_glclnd.pf
A       models/lnd/clm/src/clm4_5/main/test/clm_glclnd_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/main/test/clm_glclnd_test
A       models/lnd/clm/src/clm4_5/main/test
A       models/lnd/clm/src/clm4_5/biogeophys/test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/biogeophys/test/Daylength_test/test_daylength.pf
A       models/lnd/clm/src/clm4_5/biogeophys/test/Daylength_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/biogeophys/test/Daylength_test
A       models/lnd/clm/src/clm4_5/biogeophys/test
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test/test_update_landunit_weights_one_gcell.pf
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test/test_update_landunit_weights.pf
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynLandunitArea_test
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynVar_test/test_dynVarShared.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynVar_test/test_dynVarTimeInterp.pf
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynVar_test/test_dynVarTimeUninterp.pf
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynVar_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynVar_test
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynTimeInfo_test/test_dynTimeInfo.pf
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynTimeInfo_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynTimeInfo_test
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynInitColumns_test/test_init_columns.pf
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynInitColumns_test/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test/dynInitColumns_test
A       models/lnd/clm/src/clm4_5/dyn_subgrid/test
A       models/lnd/clm/src/README.unit_testing
A       models/lnd/clm/src/unit_test_mocks/util_share/ncdio_var.F90
A       models/lnd/clm/src/unit_test_mocks/util_share/GetGlobalValuesMod_mock.F90
A       models/lnd/clm/src/unit_test_mocks/util_share/ncdio_var.F90.in
A       models/lnd/clm/src/unit_test_mocks/util_share/clm_time_manager_mock.F90
        - also add a routine to this mock, needed because of refactor of
          dyn_file_type / dyn_time_inof
A       models/lnd/clm/src/unit_test_mocks/util_share/ncdio_pio_mock.F90
A       models/lnd/clm/src/unit_test_mocks/util_share/spmdMod_mock.F90
A       models/lnd/clm/src/unit_test_mocks/util_share/do_genf90
A       models/lnd/clm/src/unit_test_mocks/util_share/CMakeLists.txt
A       models/lnd/clm/src/unit_test_mocks/util_share/ncdio_pio_mock.F90.in
A       models/lnd/clm/src/unit_test_mocks/util_share
A       models/lnd/clm/src/unit_test_mocks/csm_share/shr_sys_mod_mock.F90
A       models/lnd/clm/src/unit_test_mocks/csm_share/mct_mod_mock.F90
A       models/lnd/clm/src/unit_test_mocks/csm_share/CMakeLists.txt
A       models/lnd/clm/src/unit_test_mocks/csm_share
A       models/lnd/clm/src/unit_test_mocks/main/CMakeLists.txt
A       models/lnd/clm/src/unit_test_mocks/main/histFileMod_mock.F90
A       models/lnd/clm/src/unit_test_mocks/main
A       models/lnd/clm/src/unit_test_mocks/dyn_subgrid/dynFileMod_mock.F90
A       models/lnd/clm/src/unit_test_mocks/dyn_subgrid/CMakeLists.txt
A       models/lnd/clm/src/unit_test_mocks/dyn_subgrid
A       models/lnd/clm/src/unit_test_mocks/CMakeLists.txt
A       models/lnd/clm/src/unit_test_mocks
A       models/lnd/clm/src/CMakeLists.txt

List all existing files that have been modified, and describe the changes:

========= Renamed fpftdyn -> flanduse_timeseries, and other related changes to
          variable names
          (NOTE: Some source files are listed both here and elsewhere in the
          ChangeLog entry)
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata_map.namelist
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/README
M       models/lnd/clm/tools/shared/ncl_scripts/sample_inlist
M       models/lnd/clm/tools/shared/ncl_scripts/sample_outlist
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/src/clm_varctl.F90
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata_map.namelist
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/README
M       models/lnd/clm/bld/CLMBuildNamelist.pm
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/test_build_namelist/t/input/namelist_defaults_clm4_5_test.xml
M       models/lnd/clm/bld/test_build_namelist/t/input/namelist_definition_clm4_5_test.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml
M       models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
M       models/lnd/clm/doc/UsersGuide/single_point.xml
M       models/lnd/clm/doc/UsersGuide/tools.xml
M       models/lnd/clm/doc/UsersGuide/adding_files.xml
M       models/lnd/clm/doc/UsersGuide/custom.xml
M       models/lnd/clm/doc/UsersGuide/ptclm.xml
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/surfrdUtilsMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_0/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_0/main/controlMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_0/main/clm_driver.F90
M       models/lnd/clm/src/clm4_0/biogeophys/BiogeophysRestMod.F90

========= Updated PTCLM external to rename fpftdyn -> flanduse_timeseries
M       models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES

========= Decrease threshold for water & snow balance checks by 3 orders of
          magnitude; decrease threshold for energy balance checks by 2 orders of
          magnitude
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90

========= Separate clm_varcon into clm_varcon, column_varcon and landunit_varcon
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/CMakeLists.txt

========= Move some routines out of initGridCellsMod, into a new initSubgridMod
          (see detailed notes above)
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

========= Make time_info a public member of dyn_file_type. This allows us to
          remove all methods from dyn_file_type (which were just delegating
          responsibility to time_info_type). Also rename some methods and
          variables in time_info_type.
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynFileMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynTimeInfoMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90.in
         - also change intent(in) to intent(inout), fixing a gfortran problem
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90.in
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90.in
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90

========= Rework metadata for the description of landunit, column and pft types
          on the history and restart files. Point is to centralize the
          definition of these different types as much as possible (rather than,
          e.g., having restFileMod know about the translation between landunit
          indices and names). For the history file, I am removing the metadata
          from the PCT_LANDUNIT long name, instead putting it in global
          metadata, as is done for the restart file.
M       models/lnd/clm/src/clm4_5/main/subgridWeightsMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/pftvarcon.F90

========= Change 'use' statements based on my split of clm_varcon into
          clm_varcon, landunit_varcon and column_varcon
M       models/lnd/clm/src/clm4_5/biogeochem/CNWoodProductsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4InitMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/main/initTimeConstMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/main/subgridMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/initColdMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/ED/EDCLMLinkMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynConsBiogeochemMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynEDMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynCNDVMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynConsBiogeophysMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynInitColumnsMod.F90

========= Fix baseline comparisons for PTCLM tests
M       models/lnd/clm/test/tools/TSMscript_tools.sh
M       models/lnd/clm/test/tools/TBLscript_tools.sh

========= Just changes in whitespace
M       models/lnd/clm/src/clm4_5/dyn_subgrid/CMakeLists.txt
M       models/lnd/clm/src/clm4_5/biogeophys/CMakeLists.txt


CLM testing:

  Most testing done on dynlu_crops_n01_addclm50bld_n06_clm4_5_72; PTCLM and
  tools testing done on dynlu_crops_n03_addclm50bld_n06_clm4_5_72

  Note that the branch was up-to-date with addclm50bld_n06_clm4_5_72; this is
  identical to clm4_5_73 except for a fix to the build-namelist tests (see below)

  build-namelist tests:

    yellowstone: ok
      compared against addclm50bld_n06_clm4_5_72 (essentially clm4_5_73)
      expected diffs for transient cases

      The following tests also failed when comparing the baseline against
      itself (NOTE: this is apparently fixed in clm4_5_73):

      466/497 < FAIL> <Test Id: 466> <Desc: compare file lnd_in DNE for phys-crop.clm4_5 and -res+1.9x2.5+-irrig+.true.+-crop+-bgc+cn++-envxml_dir+.>  
      467/497 < FAIL> <Test Id: 467> <Desc: compare file temp_file.txt DNE for phys-crop.clm4_5 and -res+1.9x2.5+-irrig+.true.+-crop+-bgc+cn++-envxml_dir+.>  
      496/497 < FAIL> <Test Id: 496> <Desc: compare file lnd_in DNE for phys-crop.clm5_0 and -res+1.9x2.5+-irrig+.true.+-crop+-bgc+cn++-envxml_dir+.>  
      497/497 < FAIL> <Test Id: 497> <Desc: compare file temp_file.txt DNE for phys-crop.clm5_0 and -res+1.9x2.5+-irrig+.true.+-crop+-bgc+cn++-envxml_dir+.>  

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    goldbach_nag: ok
    goldbach_intel: ok
    goldbach_pgi: ok

      Most comparisons were done against clm4_5_72.

      These comparisons failed due to a problem with component_gen_comp and the
      SSP test; manual comparisons show these to be identical to Erik's tests (for
      clm4_5_73):

        FAIL SSP.f19_g16.I1850CLM45BGC.yellowstone_pgi.clm-default.GC.0520-2021.45.p.clm2.h0.compare_hist.clm4_5_72 
        FAIL SSP.f19_g16.I1850CLM45BGC.yellowstone_pgi.clm-default.GC.0520-2021.45.p.clm2.h1.compare_hist.clm4_5_72     

      For new tests added in Erik's upcoming tag (clm4_5_73), I did manual
      comparisons against Erik's baselines (cpl & clm hist for the yellowstone
      tests, just cpl for goldbach tests) - all PASS.

      Note that CLM hist files were NOT compared for any goldbach tests, because
      there were no CLM hist file baselines for clm4_5_72.

  tools testing:

    yellowstone interactive: ok

      Compared against addclm50bld_n06_clm4_5_72 (essentially clm4_5_73)

      Failures in the following baseline comparisons, due to changed name of output
      file (surfdata.pftdyn -> landuse.timeseries). Manual comparisons showed the
      output files to be identical in all cases:

      010 bl754 TBLtools.sh clm4_0 mksurfdata_map tools__s namelist ...................................\c
       rc=7 FAIL
      012 blg54 TBLtools.sh clm4_5 mksurfdata_map tools__s namelist ...................................\c
       rc=7 FAIL
      018 bl974 TBLscript_tools.sh clm4_0 mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools_\c
       rc=7 FAIL
      030 bli74 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools_\c
       rc=7 FAIL
      040 blfg4 TBLscript_tools.sh shared PTCLM PTCLMmkdata PTCLM_USUMB_Global_clm4_5^buildtools ......\c
       rc=7 FAIL

       Other than that, all tests & baseline comparisons passed

CLM tag used for the baseline comparisons: clm4_5_72, except where noted above

Changes answers relative to baseline: NO - bfb
	
===============================================================
===============================================================
Tag name:  clm4_5_73
Originator(s):  erik (Erik Kluzek,UCAR/TSS,303-497-1326)
Date: Wed May 28 15:33:10 MDT 2014
One-line Summary: Add the stub ability for clm5_0 physics to CLM build system

Purpose of changes:

Add phys=clm5_0 as an option to the build. Currently, nothing is different in the code, this just
adds the capability to do clm5_0 as a seperate configuration. The one thing that is different between
clm4_5 and clm5_0 is the setting of urban_hac.

Fix several issues needed for CAM: problem in DryDeposition (reoccurance of bug 1883, that was fixed and then
unfixed in clm4_5_48), fix for internal compiler errors. CAM has been using the branch version of this
since: cam5_3_29.

Work on updates for PTCLM. Add some new sites for Rosie and Jinyun. Correct the call to mkmapdata.sh.
Have CLM1PT forcing directory to use DIN_LOC_ROOT_CLMFORC so you can point it to a location seperate
from DIN_LOC_ROOT. Add a new support script to PTCLM to submit a list of sites to batch: PTCLMsublist.
Also allow release_tags in version find. Get buildtools to work on edison/hopper.

Get tools to work on hopper and edison, and update mapping to use ESMF6.3.0.

Fix various bugs: internal compiler error on janus, trigger an error if user_datm.streams.txt file is 
                  readonly (rather than hang). Use DIN_LOC_ROOT_CLMFORC for CLM1PT.

Requirements for tag: Fix bug 1883 and 1985 for Cheryl and CAM, fix PTCLM, add clm5_0, tools on hopper/edison

Test level of tag: regular

Bugs fixed (include bugzilla ID):

   1985  Internal compiler error on yellowstone with CLM in CAM standalone build
   1965	 Internal compiler error on janus with CLM on janus
   1938  Upgrade mkmapdata to ESMF6.3.0 
   1937  Using a read-only user_datm.streams.txt file causes cesm_setup to hang 
   1936  CLM1PT forcing directory needs to use DIN_LOC_ROOT_CLMFORC
   1935  Changes needed to get tools to build on hopper... 
   1933  Correct call to mkmapdata.sh in PTCLM 
   1925  Add more sites to PTCLM 
   1904  check for LSF_PJL_TYPE in regridbatch.sh doesn't work correctly 
   1883	 uninitialized variable in DryDepVelocity.F90

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Add clm5_0 as a new supported physics type

Describe any changes made to the namelist: Set urban_hac according to physics
    clm5_0=ON_WASTEHEAT, and clm4_5=ON

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self (clm_phys perl object reviewed by team: bandre, muszala, sacks)

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm
   scripts       to addclm50_n03_ED_scripts_015_140305_rev
   datm          to datm8_140312
   csm_share     to share3_140418        Use trunk version rather than branch
   tools/mapping to mapping_131217a 
   PTCLM         to PTCLM2_140423

List all files eliminated:

 D    models/lnd/clm/bld/unit_testers/env_run.xml -- This file is now built dynamically when the tester is run.

List all files added and what they do:

 A    models/lnd/clm/bld/query-xFail --- Add a script from Ben Andre to read and report on expected fails.
 A    models/lnd/clm/bld/env_run.xml --- envxml_dir option is now required, so this provides a env_*.xml
            file that can be read by default, when build-namelist is called outside of CESM for testing.
 A    models/lnd/clm/bld/config_files/clm_phys_vers.pm - Enter physics version as a string i.e.: clm4_0
            and then have the ability to interpret it as different types so you can do logical operations
            on physics versions

List all existing files that have been modified, and describe the changes:

  M    models/lnd/clm/tools/shared/mkmapdata/regridbatch.sh ------- Add ability to run on hopper
  M    models/lnd/clm/tools/shared/mkmapdata/mkmapdata.sh --------- Add ability to run on hopper/edison
            remove jaguarpf, and upgrade to ESMF6.3.0
  M    models/lnd/clm/tools/shared/ncl_scripts/getregional_datasets.ncl - New version of NCL requires
            load before "begin" statement

  M    models/lnd/clm/bld/configure ------------- Allow phys=clm5_0 and add in new clm_phys_vers object
  M    models/lnd/clm/bld/README ---------------- Update info on files
  M    models/lnd/clm/bld/CLMBuildNamelist.pm --- Put list of required options at top of help, and make envxml_dir
           a required option. Add in use of clm_phys_vers object. Make sure use_ed_spitfire is only on if use_ed is
           on.  If CLM_UPDATE_GLC_AREAS=TRUE and phys=clm4_0 trigger an error
  M    models/lnd/clm/bld/config_files/config_definition_clm4_5.xml - Add all three physics version options
  M    models/lnd/clm/bld/config_files/config_definition_clm4_0.xml - Add info. about clm4_5/clm5_0 options

  M    models/lnd/clm/bld/unit_testers/build-namelist_test.pl - Add use of clm_phys_vers, and create env_run.xml
            on the fly. Also add new tests for glacier update areas, and ED: usespitfireButNOTED, useEDclm40, useEDContradict2
            useEDContradict, clm40andUpdateGlc, clm40andUpdateGlc, UpdateGlcContradict, UpdateGlcNoGLCMe, and tests
            for clm5_0

  M    models/lnd/clm/bld/test_build_namelist/t/test_vichydro.pm ----- Needs to use clm_phys_vers object
  M    models/lnd/clm/bld/test_build_namelist/test_build_namelist.pl - Needs to use clm_phys_vers object

  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml - urban_hac depends on clm4_5/clm5_0
  
-------------- Add phys=clm5_0 for all use-cases that test on phys
  M    models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
  M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml

------------- Fix bugs 1883 (rs over lake) and 1983 (CAM internal compiler error) and 1965 
-------------  (janus internal compiler error)
  M    models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90 ----- Set rs over lake
  M    models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90 -------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_5/main/restFileMod.F90 -------------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_5/main/surfrdMod.F90 ---------------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90 ------ Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90 -- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90 ----- Add use only for clmtype and dynVarTimeUninterpMod
           fixes internal compiler error on janus (1965)
  M    models/lnd/clm/src/clm4_0/biogeochem/DryDepVelocity.F90 ----- Set rs over lake
  M    models/lnd/clm/src/clm4_0/main/clm_initializeMod.F90 -------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/main/subgridRestMod.F90 ----------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/main/pftdynMod.F90 ---------------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/main/iniTimeConst.F90 ------------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/main/restFileMod.F90 -------------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/main/surfrdMod.F90 ---------------- Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/biogeophys/UrbanInputMod.F90 ------ Add use only for ncd_pio
  M    models/lnd/clm/src/clm4_0/biogeophys/BiogeophysRestMod.F90 -- Add use only for ncd_pio

CLM testing:

    a) regular
    b) build_namelist
    c) tools

  build-namelist tests:

    yellowstone    yes

  regular tests (aux_clm40, aux_clm45, with '-model_gen_comp clm2'):

    yellowstone_intel yes
    yellowstone_pgi   yes
    goldbach_nag      yes
    goldbach_intel    yes
    goldbach_pgi      yes

  tools testing:

    yellowstone interactive   yes

CLM tag used for the baseline comparisons:  clm4_5_72

Changes answers relative to baseline: No (bit-for-bit)

===============================================================
===============================================================
Tag name:  clm4_5_72
Originator(s):  muszala (Stefan Muszala)
Date: Mon May  5 17:47:52 MDT 2014
One-line Summary: Introduce code for Ecosystem Demography (CLM(ED)) Model

Purpose of changes: Introduce code for Ecosystem Demography (CLM(ED)) Model - first functional tag.

A large chunk of this code was written and re-written by Rosie Fisher.

"Introduce code for Ecosystem Demography (CLM(ED)) Model.  Adds capability to allow plant functional
types to compete for light, to represent recovery from disturbance, and to allow disturbances
(i.e. fire) to only afflict some fraction of the canopy, and to represent vegetation at the scale
of cohorts of trees. Note that this is a large change and includes:

1. Significant alterations to canopy albedo and surface radiation calculations
2. New photosynthesis scheme, based on existing science but to allow for more complex canopy structure
3. Introduction of a new allocation and growth scheme, (no consistent with that in CLM(CN)
4. Removal, for now, of Nitrogen limitation capabilities
5. Introduction of the SPITFIRE fire model, which interacts with ED via it's representation of
   size-structured mortality and removal of litter pools. 
6. Introduction of a simple seed bank model to allow persistence of vegetation through fire events.
7. For ED compsets there exists a cohort dimension on the restart files.

Cold starts and restarts work for the following.  The 1x1_brazil is the most heavily tested case both from 
science and SE standpoint:

1x1_brazil.ICLM45CNED.yellowstone_[intel | pgi]
5x5_amazon.ICLM45CNED.yellowstone_[intel | pgi]
1x1_brazil.ICLM45CNED.goldbach_[nag | intel | pgi ]
5x5_amazon.ICLM45CNED.goldbach_[nag | intel | pgi ]

Cold starts work for:

f10_f10.ICLM45CNED.yellowstone_[intel | pgi].
f19_g16.ICLM45CNED.yellowstone_[intel | pgi]

Code Origins:

The ED code in CLM is originally based on code by Moorcroft (www.oeb.harvard.edu/faculty/moorcroft/code_and_data/index.html)
and has been heavily modified in regards to both scientific implementation and assumptions.  Fom a software engineering
perspective, ED was rewritten from C into F2003 and the structure of the code has been significantly altered to fit into
the CESM/CLM framework.

The SPITFIRE code is based on (http://www.biogeosciences.net/7/1991/2010/bg-7-1991-2010.pdf) and has been significantly 
altered and extended to fit into the CESM/CLM framework.

Other points:
   1. removed many unused variables and module uses as reported by nag
	2. changing text wrapping on comments so they end at 139 characters
   3. changed many text based logical operators (.ne., .lt., .ge.) with their math. equivlanet (/=, > , <=)

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:  ED functionality brought in.  Does not change existing
configurations.  For ED, there are now a CNED and BGCED compset.  Use CNED until BGC issues are worked
out.

Describe any changes made to the namelist: ED functionality brought in.  Does not change existing
configurations.  For ED compsets, there are two new namelist variables.  They are:

use_ed = .true.
use_ed_spit_fire = .true.

use_ed_spit_fire is set to true by default if use_ed is on.  Unless you are running our ED tests, you will
have to change your user_nl_clm to something like:

paramfile ='/glade/p/cesmdata/cseg/inputdata/lnd/clm2/edParams/CLMPARAMS_ED_011514.nc'
finidat = ''
hist_mfilt             = 365
hist_nhtfrq            = -24

hist_empty_htapes = .true.

hist_fincl1='NPP','GPP','BTRAN','TOTVEGC','H2OSOI','TLAI','LITTER_IN','LITTER_OUT',
'STORVEGC','FIRE_AREA','SCORCH_HEIGHT','FIRE_INTENSITY','FIRE_TFC_ROS','fire_fuel_mef',
'LITTERC','fire_fuel_bulkd','fire_fuel_sav','FIRE_NESTEROV_INDEX','PFTbiomass',
'PFTleafbiomass','FIRE_ROS','WIND','TFC_ROS','DISPVEGC','AREA_TREES','AREA_PLANT' 

If on goldbach, use:

paramfile ='/fs/cgd/csm/inputdata/lnd/clm2/edParams/CLMPARAMS_ED_011514.nc'

List any changes to the defaults for the boundary datasets: N/A.  

Describe any substantial timing or memory changes:

Code reviewed by: Stefan Muszala and Rosie Fisher. Detailed code review by Bill Sacks, Mariana Vertenstein,
Ben Andre, and Erik Kluzek. Discussion of code review included Dave Lawrence, Forrest Hoffmann
and Ryan Knox.

List any svn externals directories updated (csm_share, mct, etc.): 

Changed externals to a branch_tag that supports ED compsets.  We are using branch_tags because trunk
scripts does not work with all of the current CLM tests:

-scripts https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/add_dynlu_tests_tags/add_dynlu_tests_n03_scripts4_140305
+scripts https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/ED_scripts_tags/ED_scripts_015_140305_rev

List all files eliminated: N/A

List all files added and what they do:

### SPITFIRE code
# new SPITEFIRE directory
A  +    models/lnd/clm/src/clm4_5/main/spitfireSF
# main SPITFIRE code
A  +    models/lnd/clm/src/clm4_5/main/spitfireSF/SFParamsMod.F90
# handle SPITFIRE parameters
A  +    models/lnd/clm/src/clm4_5/main/spitfireSF/SFMainMod.F90

# pull out, move to a shared location, place in own module
A  +    models/lnd/clm/src/util_share/quadraticMod.F90 

### new source and directories for ED
## ED code required for biogeophysics
# ED directory in biogeophys
A  +    models/lnd/clm/src/clm4_5/biogeophys/ED
# Calculates daily carbon flux drivers from hourly calculations. 
A  +    models/lnd/clm/src/clm4_5/biogeophys/ED/EDAccumulateFluxesMod.F90
# Calculates absorbed, reflected and transmitted radiation in diffuse and direct streams for
# each of the canopy layer x PFT x leaf layer three-dimensional matrix.  Uses iterative Norman
# radiation transfer scheme.
A  +    models/lnd/clm/src/clm4_5/biogeophys/ED/EDSurfaceAlbedoMod.F90
# Main photosynthesis model. Calculates leaf level fluxes on a canopy layer x PFT x leaf layer
# three-dimensional matrix. Sums to canopy to produce overall canopy conductance. Unpacks leaf-
# level fluxes into cohort level fluxes.   Uses same scientific assumptions as CLM4.5. 
A  +    models/lnd/clm/src/clm4_5/biogeophys/ED/EDPhotosynthesisMod.F90
# Generates PFT specific BTRAN vector for each ED patch. Includes option for SPA-like calculations. 
A  +    models/lnd/clm/src/clm4_5/biogeophys/ED/EDBtranMod.F90

## ED code required for biogeochemistry
# ED directory in biogeochem
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED
# Determines which cohorts are in the upper and lower canopy layers. Sets leaf area index inputs to biogeophysics calculations.
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED/EDCanopyStructureMod.F90
# Initializes some ED-specific variables to zero at startup.
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED/EDSetValuesMod.F90
# Contains allometric relationships between vegetation properties (height, dbh, LAI, dead biomass, live biomass, crown area) biogeochem/ED/EDPatchDynamicsMod.F90 : Creates patches, fuses similar patches, controls disturbance and generation of area. 
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED/EDGrowthFunctionsMod.F90
# Creates, fuses, terminates, sorts, counts and copies cohort structures. 
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED/EDCohortDynamicsMod.F90
# Contains all calculations of derivatives of biomass, litter and seed pools.  Also includes phenology model, seed and litter production and decay models, and canopy optimization model. 
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED/EDPhysiologyMod.F90
# Creates, fuses, terminates, sorts, counts and copies patch structures. 
A  +    models/lnd/clm/src/clm4_5/biogeochem/ED/EDPatchDynamicsMod.F90

## ED core functionality and types that interact with CLM (generally not science)
# ED directory in main
A  +    models/lnd/clm/src/clm4_5/main/ED
# Transmits required information for CLM (tlai, htop, tile weights). Updates ED-specific history field variables. 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDCLMLinkMod.F90
#  Initializes ED PFT parameter structure. 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDInitTimeConst.F90
# Contains ED-specific variables for CLM
A  +    models/lnd/clm/src/clm4_5/main/ED/EDClmType.F90
# Adds history field variables specific to ED to history file. 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDHistFldsMod.F90
#  Prints out and reads in ED state vector to/from history files. 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDRestVectorMod.F90
# Initializes ED-specific variables for CLM 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDClmTypeInitMod.F90
# Allocates ED PFT specific variables.
A  +    models/lnd/clm/src/clm4_5/main/ED/EDPftvarcon.F90
# Initializes ED site, patch and cohort structures, either to restarting or bare ground values. 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDInitMod.F90
# Allocates and initializes ED parameters (that are not PFT specific). 
A  +    models/lnd/clm/src/clm4_5/main/ED/EDParamsMod.F90
# Main ED model routine. Calls all other daily ED dynamics, integrates variables, checks carbon balance.
A  +    models/lnd/clm/src/clm4_5/main/ED/EDMainMod.F90
# Contains ED type structures (cohort, site, patch) and static values.
A  +    models/lnd/clm/src/clm4_5/main/ED/EDTypesMod.F90

# utility routine to help in reading parameter files
A  +    models/lnd/clm/src/clm4_5/main/paramUtilMod.F90
# transfers weights calculated internally by ED into wtcol.
A  +    models/lnd/clm/src/clm4_5/dyn_subgrid/dynEDMod.F90

List all existing files that have been modified, and describe the changes:

### build modifications
# add ED source directories for build
M       models/lnd/clm/bld/configure
# build namelist additions for ED
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
# setup_cmdl_ed_mode addition.  sets namelist vars
M       models/lnd/clm/bld/CLMBuildNamelist.pm

### util_share modifications
# add function is_beg_curr_day()
M       models/lnd/clm/src/util_share/clm_time_manager.F90
# modify get_proc_bounds to include beg, end cohort
M       models/lnd/clm/src/util_share/accumulMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/util_share/ncdio_pio.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/util_share/ncdio_pio.F90.in

### 4_5 Modifications
# change text based logical with math style (.gt. to >, .ne. to /=)
# modify get_proc_bounds to include beg, end cohort
M       models/lnd/clm/src/clm4_5/biogeochem/CNRestMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNInitMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
# add use_ed logical(s) 
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
# move some variables from stack to heap.  
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeBGCMod.F90
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
# change spacing, text wrapping
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeCNMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90

# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/main/initInterp.F90
# change spacing, text wrapping
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
# add call to call EDInitTimeConst 
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/main/initTimeConstMod.F90
# add decomposition for cohort dimension
M       models/lnd/clm/src/clm4_5/main/decompInitMod.F90
# add call for ed_init
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
# add code for cohort dimension
M       models/lnd/clm/src/clm4_5/main/subgridMod.F90
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/main/initColdMod.F90
# change get_proc_global to support cohort dimension
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
# add use_ed logical to support cohort dimension
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
# broadcast ed namelist variables
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
# use_ed logical to call edmodel
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
# change spacing, text wrapping
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
# clean up unsued variables from nag compiler warnings
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
# add routine set_cohort_decomp
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
# change spacing, text wrapping
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/main/pftvarcon.F90
# add support for cohort dimension
M       models/lnd/clm/src/clm4_5/main/decompMod.F90
# change spacing, text wrapping
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
# add call to read ED and SPITFIRE params
R  +    models/lnd/clm/src/clm4_5/main/readParamsMod.F90
# add routine set_cohort_decomp
# add use_ed logical(s)
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90

# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeInitMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
# change get_proc_global to support cohort dimension
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
# change get_proc_global to support cohort dimension
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
# change get_proc_global to support cohort dimension
M       models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
# change get_proc_global to support cohort dimension
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
# change spacing, text wrapping
# add use_ed logical(s)
# calculate ed root fractionation
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
# add use_ed logical(s) for forc_solai and parsun
# use_ed  reporting
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
# add use_ed logical(s) for norman_radiation
# change spacing
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
# remove unused variable
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeCon.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
# change text based logical with math style (.gt. to >, .ne. to /=)
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
# add use_ed logical(s) for call dyn_ED
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90

### 4_0 Modifications
# add optional cohort argument for new ED dimension to get_proc_global and
# get_proc_bounds_old for 40 backward compatibility
M       models/lnd/clm/src/clm4_0/main/decompMod.F90

CLM testing:

--SNICARFRC - moved ERI_D.T31_g37.ICLM45.goldbach_nag.clm-SNICARFRC to goldbach and nag.  This is a BFAIL.

--Testing for new ED compsets.  All compare hist portions were BFAIL's since this is the first time
the tests are being put in place.

--ED and yellowstone [ intel | pgi ]
  PASS  ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.yellowstone_[intel | pgi].clm-edTest 
  PASS  SMS.f10_f10.ICLM45CNED.yellowstone_[intel | pgi].clm-edTest
  PASS  SMS.f19_g16.ICLM45CNED.yellowstone_[intel | pgi].clm-edTest
  PASS  SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.yellowstone_[intel | pgi].clm-edTest

--ED and goldbach [nag | intel | pgi ]
  PASS  ERS_D_Mmpi-serial.1x1_brazil.ICLM45CNED.goldbach_[nag | intel | pgi ].clm-edTestGb
  PASS  SMS_D_Mmpi-serial.5x5_amazon.ICLM45CNED.goldbach_[nag | intel | pgi ].clm-edTestGb

--CLM history file comparison:

yellowstone [intel | pgi] - OK

I ran without the -model_gen_comp option, but ran component_gen_comp and summarize_cprnc_diffs
by hand for both yellowstone_intel and yellowstone_pgi.  These are both OK

--Regular tests (aux_clm testlist)

    yellowstone_intel - OK
    yellowstone_pgi   - OK
    goldbach_nag      - OK
    goldbach_intel    - OK
    goldbach_pgi      - OK

CLM tag used for the baseline comparisons:  clm4_5_71

Changes answers relative to baseline: No.  Existing compsets do not change.
If you run with an *ED* compset, then results will differ, but that is expected.

===============================================================
===============================================================
Tag name:  clm4_5_71
Originator(s):  Bill Sacks & Jeremy Fyke
Date: Fri May  2 13:00:10 MDT 2014
One-line Summary: 2-way feedbacks for glacier, veg columns compute glacier SMB, and related changes

Purpose of changes:

  (1) Bring in two-way feedbacks for glacier when coupled to CISM, via dynamic
      landunits, so that CLM's glacier area remains consistent with CISM's
      glacier area. Also update CLM's glacier topography to be consistent with
      CISM. 

  (2) Add an elevation class "0", which provides surface mass balance over the
      vegetated portion of the grid cell. This is used to achieve glacial
      inception in CISM. Along with this change, also (a) set the topographic
      height of non-glacier areas based on bare land topography from CISM, and
      (b) change the downscaling of atmospheric fields so that they are also
      downscaled over vegetated columns within CISM's ice mask, to achieve
      greater consistency between what's happening in the glacier and vegetated
      portions of CISM's domain. (Note that, because longwave radiation is
      normalized, downscaling it over the vegetated column also changes answers
      over glacier columns.) These changes were primarily from Jeremy Fyke.

  (3) Rework some consistency checks to play nicely with dynamic landunits.

  (4) Rework unit test build to use libraries for the clm source and csm_share source

  (5) Misc. other changes, as noted below.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):
  - 1969 (incorrect values for QSNWCPICE_NODYNLNDUSE)
  - 1929 (dynFileMod breaks with gfortran 4.8)
  - 1832 (logic for weights error check differs between clm4.0 and clm4.5)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):

========= Add tests
-scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_140305
+scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/add_dynlu_tests_tags/add_dynlu_tests_n03_scripts4_140305

========= Pull in Machines_140318, needed for goldbach
-scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/branch_tags/arfs_tags/arfs_01_mach140218
+scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/branch_tags/arfs_tags/arfs_02_mach140218

========= Changes needed for elevation class 0, etc.
-models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq5_0_07
+models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq5_0_10
-models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_140416
+models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_140501


List all files eliminated:

========= Point to real decompMod rather than mock
D       models/lnd/clm/test/unit_testers/clm4_5/mock/main/decompMod_boundsTypeDecl.F90

List all files added and what they do:

========= Most of reweightMod.F90 moved here; also includes the following changes:
            (1) renames some subroutines
            (2) adds some diagnostic fields that are written to the history file
            (3) adds some utility routines such as get_landunit_weight
A       models/lnd/clm/src/clm4_5/main/subgridWeightsMod.F90

========= Add code to initialize newly-active columns
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynInitColumnsMod.F90

========= New unit tests
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynInitColumns_test/test_init_columns.pf
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynInitColumns_test/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynInitColumns_test

========= Need new mocks and new real files now that we use the real decompMod, and also because of endrun calls
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/GetGlobalValuesMod_mock.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/mct_mod_mock.F90
A       models/lnd/clm/src/util_share/CMakeLists.txt

========= Need stub histFileMod now that many modules include calls to hist_addfld
A       models/lnd/clm/test/unit_testers/clm4_5/mock/main/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/mock/main/histFileMod_mock.F90

List all existing files that have been modified, and describe the changes:

========= Update glacier cover and topographic heights based on values from CISM; rework
          code to accommodate icemask and elevation class 0
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/cpl/clm_cpl_indices.F90
M       models/lnd/clm/src/cpl/lnd_import_export.F90

========= Change to be consistent with clm4_5 version, adding elevation class 0 and
          x2s%icemask (neither of which are used in the clm4_0 version)
M       models/lnd/clm/src/clm4_0/main/clm_glclnd.F90

========= Add glc_do_dynglacier namelist option, which triggers off of
          CLM_UPDATE_GLC_AREAS; rename glc_dyntopo to glc_dyn_runoff_routing and make it
          also trigger off of CLM_UPDATE_GLC_AREAS; add glc_snow_persistence_max_days; add
          dynpft_consistency_checks and finidat_consistency_checks groups
M       models/lnd/clm/bld/user_nl_clm
M       models/lnd/clm/bld/CLMBuildNamelist.pm
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/unit_testers/env_run.xml
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
          - also use parameter for file name length, so that other modules can
            ensure consistency of char length

========= Add functions to convert between col%itype and icemec class; also add
          landunit_names vector
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90

========= Add functions add_landunit, add_column, add_patch (cleans up this code, and will
          assist with setting up unit tests) and use new functions from clm_varcon
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

========= Use new functions from initGridCellsMod
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90

========= Remove old consistency checks for restart file, add new ones (these changes are
          needed so that consistency checks work right with dynamic landunits, and we're
          adding some new consistency checks that weren't in place before)
M       models/lnd/clm/src/util_share/clm_time_manager.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90.in
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
          - also read all subgrid weights and glc topo on restart
            (some of these used to be read in BiogeophysRestMod;
            we need all of them with dynamic landunits)
          - also remove redundant mcdate, mcsec
          - also add icemask restart variable
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
          - also remove redundant PFT_WTGCELL, PFT_WTLUNIT, PFT_WTCOL
            (equivalent variables are already output by subgridRestMod)
          - also add snow_persistence

========= Remove old consistency checks for pftdyn file, add new ones
          (these changes are needed so that consistency checks work right with dynamic landunits)
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
          - also call init_subgrid_weights_mod, put call to update_clm_s2x in
            loop over clumps, and move deallocation of topo_glc_mec to later
M       models/lnd/clm/src/clm4_5/main/clm_varsur.F90
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90

========= Add new dimensions for multi-level fields - for subgrid weight diagnostics; add
          a dimension to accommodate fields dimensioned by glc_nec+1
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90

========= Call new routines (update_clm_x2s, set_subgrid_diagnostic_fields, initialize_new_columns)
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90

========= Make various code operate over veg as well as icemec columns
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
          - also put call to update_clm_s2x in a loop over clumps
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
          - also compute snow_persistence, and rework some code for clarity

========= Add initialization of icemask & snow_persistence; change
          initialization of glc_topo and h2osno
M       models/lnd/clm/src/clm4_5/main/initColdMod.F90

========= Add l2g_scale_type = natveg
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90

========= Fix QSNWCPICE_NODYNLNDUSE, add l2g_scale_type for QICE & related fields, add
          SNOW_PERSISTENCE and ICE_MASK, change _FORC fields to include elevation class 0
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90

========= Get rid of associate statement that caused problems with some compilers
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynFileMod.F90

========= Track old col%active values, needed for initializing new columns
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynPriorWeightsMod.F90

========= Moved most functionality to subgridWeightsMod.F90 (now just a small
          wrapper to some of the stuff in subgridWeightsMod, whose main purpose
          is to avoid a dependency of subgridWeightsMod on filterMod)
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90

========= Changes for unit tests:
            (1) Update unit tests to use libraries for the clm source and csm_share source
            (2) New unit test
            (3) Make unit tests work with latest CLM trunk
            (4) Point to real decompMod rather than mock
M       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_var.F90
M       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_var.F90.in
M       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/spmdMod_mock.F90
M       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/shr_sys_mod_mock.F90
M       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/mock/main/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/mock/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/CMakeLists.txt
M       models/lnd/clm/src/clm4_5/main/CMakeLists.txt
M       models/lnd/clm/src/clm4_5/dyn_subgrid/CMakeLists.txt

========= Add icemask & snow_persistence; remove unused glc_frac, glc_rofi & glc_rofl
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90

========= Minor changes to 'use' statements for the sake of breaking dependencies for unit tests
M       models/lnd/clm/src/util_share/GetGlobalValuesMod.F90
M       models/lnd/clm/src/clm4_5/main/decompMod.F90

========= Changes to comments only
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
M       models/lnd/clm/src/util_share/domainMod.F90

========= Remove no-longer-failing test, change failType of a test (it was RUN
          rather than FAIL at least as far back as clm4_5_69)
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml


CLM testing:

  build-namelist tests:

    yellowstone: ok

  regular tests

    NOTE: Most tests were done on bare_land_smb_n15_clm4_5_70, which did NOT
    include r59820 (add a comma in histFileMod to fix a syntax error caught by
    nag). After r59820, reran all goldbach_nag tests, plus one goldbach_pgi and
    one goldbach_intel.

    yellowstone_intel: ok
    yellowstone_pgi: ok
    goldbach_nag: ok
    goldbach_intel: ok
    goldbach_pgi: ok

  component_gen_comp on yellowstone_intel & yellowstone_pgi: ok

CLM tag used for the baseline comparisons: clm4_5_69 (clm4_5_68 for a few tests
   with missing baselines in clm4_5_69)

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All IG compsets (i.e., GLC compsets)
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
         New Climate

   Changes are:

     (1) All IG compsets (clm4.0 & clm4.5) change due to new CISM external

     (2) In addition, IG compsets with CLM4.5 change further due to:
         (a) 2-way feedbacks (CLM updated to match CISM)
         (b) downscaling done over vegetated landunits within the icemask

     (3) Also, the QSNWCPICE_NODYNLNDUSE history diagnostic field changes for
         ALL CLM4.5 runs, due to fixing bug 1969.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_70
Originator(s):  muszala (Stefan Muszala)
Date:  Fri Apr 18 08:24:44 MDT 2014
One-line Summary: bring in SHR_ASSERT macros

Purpose of changes: bring in SHR_ASSERT macros for Santos.

Add: #include "shr_assert.h" to source files
Remove: use shr_assert_mod    , only : shr_assert

then replace "call shr_assert" with SHR_ASSERT_ALL when asserting more than one dim

-    call shr_assert((ubound(carr) == (/bounds%endc/)), errMsg(__FILE__, __LINE__))
+    SHR_ASSERT_ALL((ubound(parr) == (/bounds%endp/)), errMsg(__FILE__, __LINE__))

and use SHR_ASSERT when asserting one dimen

-    call shr_assert(bounds%level == BOUNDS_LEVEL_CLUMP, errMsg(__FILE__, __LINE__))
+    SHR_ASSERT(bounds%level == BOUNDS_LEVEL_CLUMP, errMsg(__FILE__, __LINE__))

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Self, Santos, Sacks

List any svn externals directories updated (csm_share, mct, etc.):

-scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_140218
+scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/branch_tags/arfs_tags/arfs_01_mach140218

-scripts/ccsm_utils/CMake        https://github.com/quantheory/CMake_Fortran_utils/tags/CMake_Fortran_utils_140109
+scripts/ccsm_utils/CMake        https://github.com/quantheory/CMake_Fortran_utils/tags/CMake_Fortran_utils_140403

-models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_34
+models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_37

-models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_140303
+models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_140416

-models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_131231
+models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/branch_tags/shr_assert_macro_tags/shr_assert_macro_n04_share3_140115

-models/utils/mct                https://github.com/quantheory/MCT/tags/compiler_fixes_n03_MCT_2.8.3
+models/utils/mct                https://github.com/quantheory/MCT/tags/compiler_fixes_n04_MCT_2.8.3

-models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_8_9/pio
+models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_8_11/pio

List all files eliminated: N/A

List all files added and what they do:  N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/DaylengthMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BandDiagonalMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynTimeInfoMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90.in
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90.in
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90.in
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynPriorWeightsMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynConsBiogeophysMod.F90

M       SVN_EXTERNAL_DIRECTORIES

CLM testing:

Tested with two sets of externals because:

The old scripts do not allow any PGI tests to run while the new scripts have various issues
with ERI tests and selected PGI tests plus nag debug runs (fixed in a more recent machines tag).

By running with two sets of externals, I am confident that the source mods for SHR_ASSERT are
working correctly.  When CLM gets updates in scripts and machines, these will be updated in 
later tags.

I) Those included in this tag
II) Those that are a part of cesm1_3_alpha09b (only tested clm45).

  build-namelist tests: N/A

  regular tests: for (I) above:

    yellowstone_intel - OK - component_comp_gen - OK
    goldbach_nag      - OK
    goldbach_intel    - OK

  regular tests: for (II) above:

1) Yellowstone + Intel :  all ERI tests are completing ref1 and ref2 but die a silent death in the base case.  Erik looks like you changed Testlists, so the two VIC tests might be expected.

>>./cs.status.70Intel.yellowstone | grep -v CLM50 | grep -v PASS | grep -v tputcomp | grep -v ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay | grep -v ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay | grep -v ERS_Ld211_D_P112x1.f10_f10.ICNCROP
RUN   ERI.f09_g16.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI.f10_f10.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI.f19_g16.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_D.T31_g37.ICLM45.yellowstone_intel.clm-SNICARFRC.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_D.f09_g16.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_D.f10_f10.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_D.f19_g16.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
RUN   ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.GC.70Intel
-- ref1 and ref2 run, then no output in non-ref run
FAIL  ERS_D.f10_f10.ICLM45VIC.yellowstone_intel.clm-vrtlay.GC.70Intel.compare_hist.clm4_5_69
 69 Comparing hist file with baseline hist file, /glade/scratch/muszala/ERS_D.f10_f10.ICLM45VIC.yellowstone_intel.clm-vrtlay.GC.70Intel/run/ERS_D.f10_f10.ICLM45VIC.yellowstone_intel.clm-vrtlay.GC.70Intel.cpl.hi.0001-01-12-00000    .nc /glade/p/cesmdata/cseg/ccsm_baselines/clm4_5_69/ERS_D.f10_f10.ICLM45VIC.yellowstone_intel.clm-vrtlay/cpl.hi.nc
 70 ncdump1 done
 71 ncdump2 done
 72 comparing split files x[a-z][a-z]
 73 xaa
 74 6979,6981c6979,6981 < 0.983149585541109, 0.972017300931466, 0.972017300784614, < 0.972017300929172, 0.964088275988772, 0.971373805810303, < 0.977583443108289, 0.983149585551217, 0.983149585568791, ---
 75 FAIL
 76 hist file comparison is FAIL
FAIL  SMS.f19_g16.ICLM45VIC.yellowstone_intel.clm-default.GC.70Intel.compare_hist.clm4_5_69
 60 /glade/u/spooldir/1397689222.575650.shell:  Storing new baseline in /glade/p/cesmdata/cseg/ccsm_baselines/clm4_5_70/SMS.f19_g16.ICLM45VIC.yellowstone_intel.clm-default
 61 Comparing hist file with baseline hist file, /glade/scratch/muszala/SMS.f19_g16.ICLM45VIC.yellowstone_intel.clm-default.GC.70Intel/run/SMS.f19_g16.ICLM45VIC.yellowstone_intel.clm-   default.GC.70Intel.cpl.hi.0001-01-06-00000.n    c /glade/p/cesmdata/cseg/ccsm_baselines/clm4_5_69/SMS.f19_g16.ICLM45VIC.yellowstone_intel.clm-default/cpl.hi.nc
 62 ncdump1 done
 63 ncdump2 done
 64 comparing split files x[a-z][a-z]
 65 xad
 66 18300c18300 < 0.983410370293909, 0.984052369383093, 0.979227772964994, --- > 0.983410370293909, 0.984052369383093, 0.979228345951215, 18341,18350c18341,18350
 67 FAIL
 68 hist file comparison is FAIL

2) Goldbach + NAG seems to have passed OK, _D runs have failed as expected.  The reporting is messed up...ie., TestStatus.out look OK, but TestStatus does not.

>> ./cs.status.70nag.goldbach | grep -v CLM50 | grep -v PASS | grep -v tputcomp | grep -v _D
FAIL  ERI.f10_f10.ICLM45BGC.goldbach_nag.clm-reduceOutput.GC.70nag
--look at /scratch/cluster/muszala/tests/ERI.f10_f10.ICLM45BGC.goldbach_nag.clm-reduceOutput.GC.70nag/TestStatus.out and there is no FAIL
FAIL  ERI.f19_g16.ICLM45BGC.goldbach_nag.clm-reduceOutput.GC.70nag
--/scratch/cluster/muszala/tests/ERI.f19_g16.ICLM45BGC.goldbach_nag.clm-reduceOutput.GC.70nag and there is no FAIL

3) Goldbach + Intel - these look all like passes to me:  see /scratch/cluster/muszala/tests/*/TestStatus.out

>> ./cs.status.70intel.goldbach | grep -v CLM50 | grep -v PASS | grep -v tputcomp
FAIL  ERI.f10_f10.ICLM45BGC.goldbach_intel.clm-reduceOutput.GC.70intel
-- Shows FAIL but PASSes in TestStatus.out
FAIL  ERI.f19_g16.ICLM45BGC.goldbach_intel.clm-reduceOutput.GC.70intel
-- Shows FAIL but PASSes in TestStatus.out
FAIL  ERI_D.T31_g37.I1850CLM45.goldbach_intel.clm-reduceOutput.GC.70intel
-- Shows FAIL but PASSes in TestStatus.out
FAIL  ERI_D.f10_f10.ICLM45BGC.goldbach_intel.clm-reduceOutput.GC.70intel
-- Shows FAIL but PASSes in TestStatus.out
FAIL  ERI_D.f19_g16.ICLM45BGC.goldbach_intel.clm-reduceOutput.GC.70intel
-- Shows FAIL but PASSes in TestStatus.out

4) Goldbach + PGI - some are indicating FAIL with TestStatus.out shows PASSes, others are straight out FAILs

./cs.status.70pgi.goldbach | grep -v CLM50 | grep -v PASS | grep -v tputcomp | grep -v SMS_Ly1.f19_g16.ICLM45BGCCROP.frankfurt_pgi
FAIL  ERI.f10_f10.ICLM45BGC.goldbach_pgi.clm-reduceOutput.GC.70pgi
-- Shows FAIL but PASSes in TestStatus.out
FAIL  ERI.f19_g16.ICLM45BGC.goldbach_pgi.clm-reduceOutput.GC.70pgi
-- ref1 fail:
 22    g005.cgd.ucar.edu - daemon did not report back when launched
 23    g006.cgd.ucar.edu - daemon did not report back when launched
 24    g009.cgd.ucar.edu - daemon did not report back when launched
 25 /usr/mpi/pgi/openmpi-1.4.3-qlc/bin/orted: error while loading shared libraries: libpgc.so: cannot open shared object file: No such file or directory
FAIL  ERI_D.f10_f10.ICLM45BGC.goldbach_pgi.clm-reduceOutput.GC.70pgi
-- Shows FAIL but PASSes in TestStatus.out
FAIL  ERI_D.f19_g16.ICLM45.goldbach_pgi.clm-reduceOutput.GC.70pgi
-- ref1 fail:
  1 /usr/mpi/pgi/openmpi-1.4.3-qlc/bin/orted: error while loading shared libraries: libpgc.so: cannot open shared object file: No such file or directory
  2 /usr/mpi/pgi/openmpi-1.4.3-qlc/bin/orted: error while loading shared libraries: libpgc.so: cannot open shared object file: No such file or directory
  3 /usr/mpi/pgi/openmpi-1.4.3-qlc/bin/orted: error while loading shared libraries: libpgc.so: cannot open shared object file: No such file or directory
  4 --------------------------------------------------------------------------
  5 A daemon (pid 29755) died unexpectedly with status 127 while attempting
FAIL  ERI_D.f19_g16.ICLM45BGC.goldbach_pgi.clm-reduceOutput.GC.70pgi
-- ref1 fail:
 23    g021.cgd.ucar.edu - daemon did not report back when launched
 24    g022.cgd.ucar.edu - daemon did not report back when launched
 25    g023.cgd.ucar.edu - daemon did not report back when launched
 26 /usr/mpi/pgi/openmpi-1.4.3-qlc/bin/orted: error while loading shared libraries: libpgc.so: cannot open shared object file: No such file or directory
FAIL  SMS_Ld5.f19_g16.IRCP45CLM45BGC.goldbach_pgi.clm-decStart.GC.70pgi
-- ERROR in /var/spool/torque/mom_priv/jobs/19500.goldbach.cgd.ucar.edu.SC: file /fs/cgd/csm/ccsm_baselines/clm4_5_69/SMS_Ld5.f19_g16.IRCP45CLM45BGC.goldbach_pgi.clm-decStart/cpl.hi.nc does not exist

CLM tag used for the baseline comparisons:  clm4_5_69

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_69
Originator(s):  andre (Benjamin Andre,LAWRENCE BERKELEY NATIONAL LABORATORY,510-486-4617)
Date: Tue Mar 18 21:12:34 MDT 2014
One-line Summary: start unit testing build-namelist

Purpose of changes: start doing unit testing on construction of the clm namelist.
This involved moving the contents of build-namelist into CLMBuildNamelist.pm and
bringing in perl infrastructure to supplement Test::More. Initial test suites are
implented for several name list variables.

Requirements for tag: N/A

Test level of tag: regular, build_namelist

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
	http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, clm-cmt

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do:

  models/lnd/clm/bld:
    CLMBuildNamelist.pm - contents of build-namelist
    test_build_namelist/perl5lib/* - CPAN modules needed for unit testing
    test_build_namelist/t/input/* - mock input files for build-namelist tests
    test_build_namelist/t/template_test_XXX.pm - template for new tests
    test_build_namelist/t/test_*.pm - unit tests
    test_build_namelist/test_build_namelist.pl - unit test driver
    test_build_namelist/README

List all existing files that have been modified, and describe the changes:

  models/lnd/clm/bld:
    build-namelist - moved contents into CLMBuildNamelist.pm, now just a driver calling main function.


CLM testing:

  build-namelist tests:

    yellowstone - OK new and existing generate tests
    goldbach - OK new and existing generate tests

  regular tests (aux_clm):

    yellowstone_intel - OK
    yellowstone_pgi - OK
    goldbach_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs: N/A

  short tests (aux_clm_short):

    yellowstone_intel - OK
    yellowstone_pgi - OK

  tools testing: N/A

CLM tag used for the baseline comparisons: clm4_5_68

Changes answers relative to baseline: No


===============================================================
===============================================================
Tag name:  clm4_5_68
Originator(s):  erik (Erik)
Date: Fri Mar  7 16:43:23 MST 2014
One-line Summary: Update scripts to version that turns on transient CO2 streams for 
                  transient compsets, and update CISM (changes answers)

Purpose of changes:

Bring in the scripts version that by default had transient CO2 for any transient 
compsets. You can still turn it off by setting DATM_CO2_TSERIES=FALSE in env_run.xml. 
Also bring in the latest CISM version that has answer changes for any IG compsets.
It fixes fields sent from CISM to the coupler (fixes an exact restart problem).

Requirements for tag:
   update scripts and CISM, transient and IG compsets have different answers

Test level of tag: regular

Bugs fixed (include bugzilla ID): 979 (adding CO2 streams)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
    scripts to scripts4_140305
    cism    to cism1_140303

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes: None

CLM testing:

  build-namelist tests:

    yellowstone yes

  regular tests (aux_clm):

    yellowstone_intel yes
    yellowstone_pgi   yes
    goldbach_nag      yes
    goldbach_pgi      yes
    goldbach_intel    yes

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel  yes
    yellowstone_pgi    yes

  tools testing: None

CLM tag used for the baseline comparisons:  clm4_5_67

Changes answers relative to baseline: Yes!

  Summarize any changes to answers:
    - what code configurations: transient and IG compsets
    - what platforms/compilers: all
    - nature of change: larger than roundoff

===============================================================
===============================================================
Tag name: clm4_5_67
Originator(s): mvertens
Date: Thu Mar  6 16:53:23 MST 2014
One-line Summary: removed initSurfAlb as part of the initialization

Purpose of changes: removed the call to initSurfAlb as well as part of
	the initialization and also removed the routine from the clm4.5
	code base

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

 1147 (mkgriddata can't straddle over Greenwich)
 1025 (SCM mode can NOT use a global finidat file)
 1017 (SCM mode can NOT restart)
  896 (T62 mode does not work)
  701 (svn keyword)
  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None 

M       bld/namelist_files/namelist_defaults_clm4_5.xml
	- clmi.ICRUCLM45BGCCROPmp24.0241-01-01.10x15_USGS_simyr2000_c140111.nc had not
	in fact been created - this effected the PEM test in the goldbach clm45 test suite
	- the default namelist has not been backed up to the original 
	clmi.ICRUCLM45BGCCROPmp24.0241-01-01.10x15_USGS_simyr2000_c131028.nc
	for now

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes:  None

Code reviewed by: mvertens

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M       src/clm4_5/biogeochem/ch4InitMod.F90
	- removal of code block that is no longer needed due to removal of initSurfAlb
	(this had already been commented out in clm4_5_66)

M       src/clm4_5/main/initInterp.F90
	- minor bug fix the turn off spval by default for nonactive points

D       src/clm4_5/main/initSurfAlbMod.F90
M       src/clm4_5/main/clm_initializeMod.F90
        - removal of call initSurfAlb (main purpose of this tag)
	- removal of code to upgrade old initial data files to have new metadata	 
          a new scheme should be put in place with a namelist option to take clm4.5
          restart datasets that have been created prior to the introduction of initInterp
          and introduce the new metadata at run time

M       src/clm4_5/main/initColdMod.F90
	- had to introduce setting values for the following variables in order to remove 
	call to initSurfAlb
            cps%albgrd_pur(bounds%begc:bounds%endc,:) = 0.2_r8
    	    cps%albgri_pur(bounds%begc:bounds%endc,:) = 0.2_r8
    	    cps%albgrd_bc(bounds%begc:bounds%endc,:)  = 0.2_r8
    	    cps%albgri_bc(bounds%begc:bounds%endc,:)  = 0.2_r8
    	    cps%albgrd_oc(bounds%begc:bounds%endc,:)  = 0.2_r8
    	    cps%albgri_oc(bounds%begc:bounds%endc,:)  = 0.2_r8
    	    cps%albgrd_dst(bounds%begc:bounds%endc,:) = 0.2_r8
    	    cps%albgri_dst(bounds%begc:bounds%endc,:) = 0.2_r8

M       src/clm4_5/main/clm_driver.F90
	- just comments

CLM testing:

  regular tests (aux_clm): OK means only failures were expected
	
    yellowstone_intel	: OK 
    yellowstone_pgi	: OK
    goldbach_nag	: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi  : OK

CLM tag used for the baseline comparisons: clm4_5_66

Changes answers relative to baseline: some - for all compsets where 
    finidat is set to blank, then answers will change relative to baseline

  for all compsets wehre finidat is pointing to a dataset, answers will be bfb
  compared to baseline 
	
===============================================================
===============================================================
Tag name: clm4_5_66
Originator(s): mvertens
Date: Mon Mar  3 10:50:24 MST 2014
One-line Summary: refactoring of initialization and introduction of run-time finidat interpolation

Purpose of changes: refactoring of initialization and introduction of run-time finidat interpolation

Completely rewrote clm_initialize to leverage new initialization scheme
In the new scheme, cold start initialization is ALWAYS called and values
are overwritten by either an appropriate finidat file OR by calling 
finidat_interp to interplate finidat to the output resolution/mask.

Requirements for tag:

Test level of tag: regular, short, tools, build_namelist, doc

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:

   1930 (MEGAN does not work correctly with prognostic crops on)
   1147 (mkgriddata can't straddle over Greenwich)
   1025 (SCM mode can NOT use a global finidat file)
   1017 (SCM mode can NOT restart)
    896 (T62 mode does not work)
    701 (svn keyword)
    452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

    NONE	 

Describe any changes made to the namelist:

   - ALL clm4.5 finidat files have been updated to contain new metadata that will enable the
     online interpinic to operate on them. The time stamp on all new files has the date c140111.
     The files have been created so that they are bit-for-bit compatible with the code base.
   - The following new namelist variables have been added to the namelist_definition_clm4_5.xml file
       - finidat_interp_source 
         if non-blank, then interpinic will be called to interpolate finidat_interp_source and 
         create output file specified by finidat_interp_dest.
       - finidat_interp_dest  
         if finidat_interp_source is set to non-blank, then interpinic will be called 
         to interpolate finidat_interp_source and create output file finidat_interp_dest

List any changes to the defaults for the boundary datasets:

     None

Describe any substantial timing or memory changes:

     None	 
	 
Code reviewed by: 

     mvertens, sacks

List any svn externals directories updated (csm_share, mct, etc.):

     None

List all files eliminated:

        The following file pairs were renamed and subsequently extensively modfified
        Summaries of the modifications are below:

        ------- New module initColdMod.F90 contains calls to initialize the cold start for
        ------- the entire model. The cold start values are then overwritten with either
        ------- an finidat file or an interpolation file using finidat_interp_source. 
D       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
A       models/lnd/clm/src/clm4_5/main/initColdMod.F90

        ------- Renamed file 
D       models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
A       models/lnd/clm/src/clm4_5/biogeochem/SatellitePhenologyMod.F90

        ------- Renamed file 
D       models/lnd/clm/src/clm4_5/biogeochem/CNDVEcosystemDynIniMod.F90
A       models/lnd/clm/src/clm4_5/biogeochem/CNDVInitMod.F90

        ------- Renamed file, removed initch4, merged routines initTimeConst_ch4 and makearbinit_ch4
        --------into new routine initColdCH4.Also removed almost all associate statements
        ------- (but kept the intput/output documentation) and used the explicit clmtype definition.	 
D       models/lnd/clm/src/clm4_5/biogeochem/initch4Mod.F90
A       models/lnd/clm/src/clm4_5/biogeochem/ch4InitMod.F90

        ------- Renamed and combined files
        ------- Migrated all CN cold start initialization for both soil and
        ------- special landuntis into new routine initColdCN in new module biogeochem/CNInitMod.
D       models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
D       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
A       models/lnd/clm/src/clm4_5/biogeochem/CNInitMod.F90

        ------- Renamed file and merged routines makearbinit and snow_depth2Lake
        ------- into one new routine initColdSlake. Also removed almost all associate
        ------- statements (but kept the intput/output documentation) and used the explict
        ------- clmtype definition.	 
A       models/lnd/clm/src/clm4_5/biogeophys/SLakeInitMod.F90
D       models/lnd/clm/src/clm4_5/biogeophys/initSlakeMod.F90

        ------- Renamed iniTimeConst, removed associate statements but kept
        ------- the documentation of input/output and also explictly listed 
        ------- full clmtype variables
D       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
A       models/lnd/clm/src/clm4_5/main/initTimeConstMod.F90

List all files added and what they do:

        ------- New run-time interpolation of input finidat to target resolution/mask
        ------- using the new namelist variables finidat_interp_source and finidat_interp_dest
A       models/lnd/clm/src/clm4_5/main/initInterp.F90

        ------- Obtain/write global index space value for target point at given clmlevel
A       models/lnd/clm/src/util_share/GetGlobalValuesMod.F90

List all existing files that have been modified, and describe the changes:

        ------- In all files, unless otherwise noted added call to errMsg(__FILE__,__LINE__) 
        ------- and in some cases optional arguments of decomp_index and clmlevel also added

        ------- See documentation for namelist changes above
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

        ------  Overloaded endrun subroutine to also print out global index infromation by 
        ------ 	calling new GetGlobalWrite routine if optional arguments decomp_index and
        ------ 	clm_level are passed in
M       models/lnd/clm/src/util_share/abortutils.F90 

        ------- Replaced missing value setting of huge(1) with ispval 
M       models/lnd/clm/src/util_share/accumulMod.F90

        ------- Replaced endrun with call to shr_sys_abort
M       models/lnd/clm/src/util_share/domainMod.F90
	
        ------- Added in missing values and special values for variable metadata - this
        ------- is needed needed by initInterp
M       models/lnd/clm/src/util_share/restUtilMod.F90
M       models/lnd/clm/src/util_share/restUtilMod.F90.in

        ------- Completely rewrote clm_initialize to leverage new initialization scheme
        ------- In the new scheme, cold start initialization is ALWAYS called and values
        -------	are overwritten by either an appropriate finidat file OR by calling 
        -------	finidat_interp to interplate finidat to the output resolution/mask.
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90

        -------	Added new metadata and variables - include global indices for parent subgrid
        -------	level(s) (i.e. column, landunit and gridcell for pfts)
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90

        ------- Moved view_factor routine and associated variable from a separate routine
        ------- in UrbanMod to part of the initTimeConstUrban subroutine in UrbanInitMod
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90

        ------- Removed vf_xx variables from restart file and also 
        ------- removed do_initsurfalb variable
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90

        ------- In all files, unless otherwise noted added call to errMsg(__FILE__,__LINE__) 
        ------- and in some cases optional arguments of decomp_index and clmlevel also added
M       models/lnd/clm/src/util_share/ncdio_pio.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90.in
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/MEGANFactorsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4RestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSharedParamsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeBGCMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeCNMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
M       models/lnd/clm/src/clm4_5/main/decompInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/ndepStreamMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/surfrdUtilsMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
M       models/lnd/clm/src/clm4_5/main/pftvarcon.F90
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90
M       models/lnd/clm/src/clm4_5/main/decompMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynTimeInfoMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynFileMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynConsBiogeochemMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynPriorWeightsMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90.in

CLM testing:

  regular tests (aux_clm):

    NOTE1: that all namelists compares where finidat was not blank will fail - since
    new finidat files are used that have new metadata - BUT - the results are still bfb

    yellowstone_intel  - OK
       expected failures:
    ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay
    ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay

    yellowstone_pgi - OK
       expected failures:
    ERH_D.f19_g16.I1850CLM45CN.yellowstone_pgi.clm-default
    ERS.f09_g16.ICLM45VIC.yellowstone_pgi.clm-vrtlay

    goldbach_nag   - OK

    goldbach_intel - OK

    goldbach_pgi   - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    NOTE1: all .h1 tests fail since there are new meta data fields for 
           cols1d_active, pfts1d_active - and FILLDIFF is different

    yellowstone_intel    OK
    yellowstone_pgi      OK

CLM tag used for the baseline comparisons: clm4_5_65

Changes answers relative to baseline: No - bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_5_65
Originator(s):  mvertens (Mariana Vertenstein,UCAR/CSEG,303-497-1349)
Date: Tue Feb 25 13:45:38 MST 2014
One-line Summary: Turn off MEGAN vocs when crops is running

Purpose of changes:

MEGAN does not currently work with prognostic crops. It needs a table of pft-specific values, and that this table has only been created for the 16 "standard" (non-crop) pfts.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
		                 1930 (MEGAN does not work correctly with prognostic crops on)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.):s

scripts4_140214a -> scripts4_140220
Machines_140214  -> Machines_140218

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

========
	Add a new logical variable - use_voc - that is true by default but
	is set to false if prognostic cop is activated 
========

M       src/clm4_5/main/clm_initializeMod.F90
M       src/clm4_5/main/clm_atmlnd.F90
M       src/clm4_5/main/controlMod.F90
M       src/clm4_5/main/clm_varctl.F90
M       src/clm4_5/main/clm_driver.F90
M       src/clm4_5/main/histFldsMod.F90
M       src/clm4_0/main/clm_varctl.F90
M       src/cpl/clm_cpl_indices.F90
	
	
CLM testing:

  build-namelist tests: N/A

  regular tests (aux_clm): 

    yellowstone_intel  - OK
 	expected failures
      ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay
      ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay
	expected non-bfb failures due to VIC/CROP changes
      ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default
      ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel
      SMS_Ly1.f19_g16.ICLM45BGCCROP.yellowstone_intel
	
    yellowstone_pgi    - OK
	expected failures
      ERH_D.f19_g16.I1850CLM45CN.yellowstone_pgi.clm-default
      ERS.f09_g16.ICLM45VIC.yellowstone_pgi.clm-vrtlay
	
    goldbach_nag      - OK
	expected non-bfb failures due to VIC/CROP changes
      ERS_D.f10_f10.ICLM45BGCCROP.goldbach_nag.clm-allActive
      ERS_Lm3.1x1_numaIA.ICLM45BGCCROP.goldbach_nag
	
    goldbach_intel    - OK
	expected non-bfb failures due to VIC/CROP changes
      ERS_Ly20.1x1_numaIA.ICLM45BGCDVCROP.goldbach_intel.clm-crop
      PEM.f10_f10.ICLM45BGCCROP.goldbach_intel.clm-crop

    goldbach_pgi      - OK 
	
  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK - 
    yellowstone_pgi -  OK

CLM tag used for the baseline comparisons: clm4_5_64

Changes answers relative to baseline: No - except for VOC fields when
	prognostic crop is on (this is a diagnostic only and does not impact
	the answers)

===============================================================
===============================================================
Tag name:  clm4_5_64
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date: Wed Feb 19 09:19:40 MST 2014
One-line Summary: fix and clean ncdio_pio.F90.in.  clean clm_time_manager.  update externals.

Purpose of changes:

Note 1: This is the last tag that is tested on frankfurt; new tests are on goldbach.

Note 2: Pts. mode is being deprecated for science use as of this tag.  Use PTCLM.  Pts. mode
   remains in place in our test system.

Note 3: There is an unresolved problem with higher resolutions when dov2xy is .false. and we are
   using pnetcdf.  Please see bug 1730.

ncdio_pio.F90.in - fix initialization problem where count and start are sometimes used without
   being set.
clm_time_manager - clean out unused variables
update externals to support ED compsets, move pts. mode tests to testmods.  Update Machines and
   pio to address bug 1730.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.):s

scripts4_140209 -> scripts4_140214a
Machines_140213 -> Machines_140214
pio1_8_8        -> pio1_8_9

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/util_share/clm_time_manager.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90.in

CLM testing:

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel  - OK
       Expected due to change in pts. mode:
          BFAIL SMS.f45_f45.I.yellowstone_intel.clm-ptsRLA.GC.64Intel.compare_hist.clm4_5_63 
          BFAIL SMS.f45_f45.I.yellowstone_intel.clm-ptsROA.GC.64Intel.compare_hist.clm4_5_63 
          BFAIL SMS_D_Mmpi-serial.f45_f45.ICLM45.yellowstone_intel.clm-ptsRLA.GC.64Intel.compare_hist.clm4_5_63 
          BFAIL SMS_Mmpi-serial.f45_f45.ICLM45.yellowstone_intel.clm-ptsRLA.GC.64Intel.compare_hist.clm4_5_63 
       Expected due to change in pio_buffer_size_limit
          FAIL ERI.f09_g16.ICLM45BGC.yellowstone_intel.GC.64Intel.nlcomp
          FAIL ERI_D.f09_g16.ICLM45BGC.yellowstone_intel.GC.64Intel.nlcomp
       New Failure for VIC but due to dov2xy problem
          ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay

    yellowstone_pgi    - OK
       Expected due to change in pts. mode:
          BFAIL SMS.f45_f45.I.yellowstone_pgi.clm-ptsRLB.GC.64Pgi.compare_hist.clm4_5_63 
          BFAIL SMS_D_Mmpi-serial.f45_f45.ICLM45.yellowstone_pgi.clm-ptsRLA.GC.64Pgi.compare_hist.clm4_5_63 
          BFAIL SMS_Mmpi-serial.f45_f45.ICLM45.yellowstone_pgi.clm-ptsRLA.GC.64Pgi.compare_hist.clm4_5_63
       Expected due to change in pio_buffer_size_limit
          FAIL ERI.f09_g16.I1850CRUCLM45BGC.yellowstone_pgi.GC.64Pgi.nlcomp
          FAIL ERI.f09_g16.ICLM45BGC.yellowstone_pgi.GC.64Pgi.nlcomp
          FAIL ERI_D.f09_g16.ICLM45BGC.yellowstone_pgi.GC.64Pgi.nlcomp
          FAIL ERS_D.hcru_hcru.ICRUCLM45BGC.yellowstone_pgi.GC.64Pgi.nlcomp
          FAIL ERS_D.hcru_hcru.ICRUCN.yellowstone_pgi.GC.64Pgi.nlcomp
       New Failure for VIC but due to dov2xy problem
          ERS.f09_g16.ICLM45VIC.yellowstone_pgi.clm-vrtlay

    frankfurt_nag      - OK
       Expected due to change in pts. mode:
          BFAIL SMS_D_Mmpi-serial.f45_f45.ICLM45.frankfurt_nag.clm-ptsRLA.GC.64Nag.compare_hist.clm4_5_63 
          BFAIL SMS_Mmpi-serial.f45_f45.ICLM45.frankfurt_nag.clm-ptsRLA.GC.64Nag.compare_hist.clm4_5_63 
          BFAIL SMS_Mmpich.f45_f45.ICLM45.frankfurt_nag.clm-ptsRLA.GC.64Nag.compare_hist.clm4_5_63 

    frankfurt_intel    - OK

    frankfurt_pgi      - OK 
       Expected due to change in pts. mode:
          BFAIL SMS.f45_f45.ICLM45.frankfurt_pgi.clm-ptsRLB.GC.64Pgi.compare_hist.clm4_5_63 
          BFAIL SMS.f45_f45.ICLM45.frankfurt_pgi.clm-ptsROA.GC.64Pgi.compare_hist.clm4_5_63 

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons: clm4_5_63

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_63
Originator(s):  sacks (sacks)
Date: Fri Feb 14 07:22:37 MST 2014
One-line Summary: add some code needed for dynamic landunits; activate 0-weight veg landunit sometimes

Purpose of changes:

(1) Add grc%landunit_indices(:,:), so you can find a given l index if you have
    the g index (this will be needed in a few places for dynamic landunits)

(2) Add code to update landunit weights; currently has no effect because
    landunit areas don't change yet

(3) Refactor logic in the is_active_X routines, and add logic to activate a
    virtual vegetated landunit under some conditions (needed for coupling with
    CISM, and helpful for dynamic landunits). Specifically, we activate a
    virtual (0-weight) vegetated landunit for any grid cell that is NOT 100%
    istice (i.e., standard glacier) (we exclude grid cells that are 100% istice
    to avoid the performance penalty, because these aren't used for coupling
    with CISM, and the only way this glacier can retreat is if another landunit,
    like crop, increases there, which will rarely happen).

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes:

   Performance about 6% worse for clm4.5 IG runs at f09 (i.e., with glcmec),
   because of the new virtual vegetated columns. Not investigated for f19 or
   T31, but probably a similar performance hit.

   There were also a few memcomp failures

Code reviewed by: quick review by mvertens

List any svn externals directories updated (csm_share, mct, etc.):

   Machines: Machines_140207a -> Machines_140213  (to fix pgi on yellowstone)

List all files eliminated:

========= Remove "IN_PROGRESS"
D       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90.IN_PROGRESS

List all files added and what they do:

========= Add code to update landunit weights; currently has no effect because
          landunit areas don't change yet
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90

========= Add unit tests for dynLandunitAreaMod
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/test_update_landunit_weights_one_gcell.pf
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynLandunitArea_test/test_update_landunit_weights.pf

List all existing files that have been modified, and describe the changes:

========= Add grc%landunit_indices(:,:), so you can find a given l index if you
          have the g index (this will be needed in a few places for dynamic
          landunits)
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
           - just add a comment
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

========= Call new code in dynLandunitAreaMod
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90

========= Refactor logic in the is_active_X routines, and add logic to activate
          a virtual vegetated landunit under some conditions (needed for
          coupling with CISM, and helpful for dynamic landunits)
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90

========= Add unit tests for dynLandunitAreaMod
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/CMakeLists.txt
M       models/lnd/clm/src/clm4_5/dyn_subgrid/CMakeLists.txt
M       models/lnd/clm/src/clm4_5/main/CMakeLists.txt


CLM testing:

  regular tests (aux_clm):

    NOTE: frankfurt intel & pgi ran on a slightly older version of the branch
    (dynlu_weight_updates_glacier_n05_clm4_5_62, which did not include some
    final minor refactoring to reweightMod); frankfurt nag & yellowstone
    intel/pgi ran on the final version

    yellowstone_intel: ok
    yellowstone_pgi: ok
    frankfurt_intel: ok
    frankfurt_pgi: ok
    frankfurt_nag: ok

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: ok
    yellowstone_pgi: ok

    A bunch of expected failures in h1 (1-d) hist files, due to the newly-active
    points.


  Also: Did a manual test to show that answers are the same for virtual
  vegetated columns as they would be if the column had non-zero weight (to
  ensure there are no dependencies on whether a column's weight is non-zero).

CLM tag used for the baseline comparisons: clm4_5_62 for yellowstone (but
clm4_5_61 for component_gen_comp); clm4_5_61 for frankfurt

Changes answers relative to baseline: NO

   However, note diffs in 1-d hist files due to newly-active points.
	
===============================================================
===============================================================
Tag name:  clm4_5_62
Originator(s):  erik (Erik)
Date: Mon Feb 10 04:16:07 MST 2014
One-line Summary: Get PTCLM working robustly, US-UMB test working, add CO2 streams to datm, add more 
                  consistency testing between compsets and user settings

Purpose of changes:

US-UMB fix in scripts and datm update. Fix so build-namelist will abort if there is an inconsistency with CLM_BLDNML_OPTS 
and user_nl_clm. Add CO2 streams as a built-in option to datm. Turn CO2 streams on with the DATM_CO2_TSERIES env_run.xml
variable. Can be set to: none,20tr,rcp2.6,rcp4.5,rcp6.0,rcp8.5, by default is none.

Requirements for tag:

   datm -- CO2 update, streams improvements
   Fix build-namelist consistency issues
   Fix bug 1847 -- end1d in hist for clm4_0
   Add envxml_dir
   check that cndv and fpftdyn aren't on the same time
   Add PTCLM tests to test_Driver
   Add PTCLM test system in
   Make PTCLM more robust

Test level of tag: regular, tools, build_namelist

Bugs fixed (include bugzilla ID):
     1918 -- sort options in build-namelist
     1917 -- remove WRF resolutions
     1903 -- buildtools fails for PTCLM
     1900 -- Remove BUILDHEAT and Qanth from output for CLM testing
     1896 -- CLM build-namelist should abort if use_cndv AND fpftdyn are set.
     1881 -- Add envxml_casedir option to CLM build-namelist
     1879 -- need error triggered when use_crop and CLM_BLDNL_OPTS are not consistent 
     1847 -- 'histfilemod_mp_hist_restart_ncd_$END1D' is being used without being defined 

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: frankfurt switched out for goldbach

Describe any changes made to the namelist: CLM build-namelist changed to ensure user changes don't conflict with
    command-line options

List any changes to the defaults for the boundary datasets: remove WRF datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

     scripts    to scripts4_140209
     Machines   to Machines_140207a
     datm       to datm8_140114
     pio        to pio1_8_8
     cprnc      to cprnc_140203

     PTCLM      to PTCLM2_140204

List all files eliminated: move frankfurt to goldbach

D       models/lnd/clm/test/tools/tests_posttag_frankfurt_nompi
 
List all files added and what they do: goldbach, and add PTCLM tools testing

A  +    models/lnd/clm/test/tools/tests_posttag_goldbach_nompi
A       models/lnd/clm/test/tools/TCBscripttools.sh ------------ Add script to run buildtools for PTCLM
A       models/lnd/clm/test/tools/config_files/PTCLM__s -------- Config for PTCLM
A       models/lnd/clm/test/tools/nl_files/PTCLM_USUMB_clm4_0
A       models/lnd/clm/test/tools/nl_files/PTCLM_USUMB_clm4_5
A       models/lnd/clm/test/tools/nl_files/PTCLM_USUMB_Cycle_clm4_5
A       models/lnd/clm/test/tools/nl_files/PTCLM_USUMB_Global_clm4_5
A       models/lnd/clm/bld/unit_testers/myuser_nl_clm --- New build-namelist tests
A       models/lnd/clm/bld/unit_testers/env_run.xm 


List all existing files that have been modified, and describe the changes:

    M    models/lnd/clm/bld/build-namelist ----- Sort options, add -envxml_dir option, check that user hasn't contradicted themself
             with CLM_BLDNML_OPTS and user_nl_clm, remove options: -noio, -nofire, -snicar_frc, -vsoilc, -exlaklayers, -clm4me
             use Cwd::abs_path and remove home-grown absolute_path, add some more docmentation and comments, redo some ordering and names
    M    models/lnd/clm/bld/clm.buildnml.csh --- add -envxml_dir so will use env_*.xml files to expand env variables
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml --- Add irrig setting, remove WRF files
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml --- Add irrig, bgc_spinup, and bgc_mode
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml -- Remove WRF resolutions: us20, wus12
    M    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml - Remove WRF resolutions
    M    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml - Remove WRF resolutions, add bgc_mode
    M    models/lnd/clm/bld/unit_testers/build-namelist_test.pl ----------- Add a bunch of new tests
    M    models/lnd/clm/bld/user_nl_clm ----- make note of variables that should be done by command-line build-namelist options

    M    models/lnd/clm/src/clm4_0/main/histFileMod.F90 --- Fix bug 1847

------------ Add PTCLM testing
    M    models/lnd/clm/test/tools/README.testnames
    M    models/lnd/clm/test/tools/test_driver.sh ------ Remove bluefire, lynx, mirage, jaguarpf -- switch frankfurt for goldbach
    M    models/lnd/clm/test/tools/TBLscript_tools.sh
    M    models/lnd/clm/test/tools/TSMscript_tools.sh
    M    models/lnd/clm/test/tools/input_tests_master
    M    models/lnd/clm/test/tools/tests_posttag_nompi_regression
    M    models/lnd/clm/test/tools/tests_posttag_yong
    M    models/lnd/clm/test/tools/tests_pretag_yellowstone_nompi

------------ Don't die if debug and files were not created.
    M    models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl
    M    models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl

CLM testing: regular, build-namelist, tools

  build-namelist tests:

    yellowstone

  regular tests (aux_clm):

    yellowstone_intel
    yellowstone_pgi
    goldbach_nag
    edison_intel

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel
    yellowstone_pgi

  tools testing:

    yellowstone interactive
    goldbach interactive

CLM tag used for the baseline comparisons:  clm4_5_61

Changes answers relative to baseline: None, bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_5_61
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Tue Feb  4 09:45:43 MST 2014
One-line Summary: add 3-d snow history fields; continue harvest past end of pftdyn timeseries

Purpose of changes:

   There are two separate sets of changes in this tag; both apply just to CLM4.5:

   (1) Addition of 3-d snow history fields: These history fields (inactive by
       default) provide diagnostics for each layer of the snow pack. This
       involved adding some additional history file infrastructure to handle
       the variable number of snow pack layers. See the new section in the
       user's guide (custom.xml) for a description of how these new history
       fields work, and how to interpret them.

   (2) Change the harvest logic for transient runs that extend past the end of
       the pftdyn dataset: Until now, harvest was set to 0 when you passed the
       end of the pftdyn dataset. With this tag, this behavior is changed, so
       that for all years past the end of the pftdyn dataset, harvest rates
       remain fixed at the last year's value.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes:

   Memory use increases slightly, as observed by memcomp failures for a few
   tests. This is presumably due to new fields in clmtype.

Code reviewed by: Erik reviewed changes for the 3-d snow history fields.

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Add 3-d snow history fields
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/doc/UsersGuide/custom.xml

========= Add a new snow diagnostic, sub_surf_abs_SW
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90

========= Continue harvest past end of pftdyn time series
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynTimeInfoMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynFileMod.F90
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test/test_dynTimeInfo.pf


CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    frankfurt_intel: ok
    frankfurt_pgi: ok
    frankfurt_nag: ok

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: ok
    yellowstone_pgi: ok

    Only failures are these expected failures (see notes on answer changes
    below):

    FAIL   SMS_Ly3.1x1_tropicAtl.I20TRCLM45BGC.yellowstone_intel.clm-tropicAtl_subsetLate.compare_hist.clm4_5_60.clm2.h0 
    FAIL   SMS_Ly5.1x1_tropicAtl.I20TRCLM45BGC.yellowstone_intel.clm-tropicAtl_subsetMid.compare_hist.clm4_5_60.clm2.h0 
    FAIL   SMS_Ly8.1x1_tropicAtl.I20TRCLM45BGC.yellowstone_intel.clm-tropicAtl_subsetEarly.compare_hist.clm4_5_60.clm2.h0 
 
CLM tag used for the baseline comparisons: clm4_5_60

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 transient runs that continue past the end of the pftdyn dataset
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

      New climate: Harvest rates are now continued past the end of the pftdyn
      dataset (staying fixed at their value from the last year), for the
      remainder of the simulation. This leads to potentially large answer
      changes for transient runs that continue past the end of the pftdyn
      dataset.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_60
Originator(s):  andre (Benjamin Andre,LAWRENCE BERKELEY NATIONAL LABORATORY,510-486-4617)
Date: Thu Jan 30 18:27:03 MST 2014
One-line Summary: refactor build-namelist

Purpose of changes: : break build-namelist into small unit-testable functions
    instead of a single massive script. Use output functions to standardize
    screen output for errors, warnings and messages so that results can be
    automatically searched by scripts.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
	http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, Erik

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M models/lnd/clm/bld/build-namelist - major refactor described above
  M models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - fix incorrect comments
  M models/lnd/clm/bld/unit_testers/build-namelist_test.pl - minor updates to check new output style

CLM testing:

  build-namelist tests:

    yellowstone - pass compare and generate with only xfails
    frankfurt - not tested, CLM-CMT believes tests may be broken.

  regular tests (aux_clm):

    yellowstone_intel - ok
    yellowstone_pgi - ok
    frankfurt_intel - ok
    frankfurt_pgi - ok
    frankfurt_nag - ok

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - ok
    yellowstone_pgi - ok

  short tests (aux_clm_short):

    yellowstone_intel - ok

  tools testing: N/A

CLM tag used for the baseline comparisons: clm4_5_59

Changes answers relative to baseline: none, bit for bit


===============================================================
===============================================================
Tag name:  clm4_5_59
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Wed Jan 22 15:04:12 MST 2014
One-line Summary: use new get_curr_yearfrac function in clm_time_manager

Purpose of changes:

   Use the new get_curr_yearfrac function in clm_time_manager in place of
   dyn_time_weights. The reason is that, as Erik pointed out, dyn_time_weights
   was out of place in dynUtilsMod, and really this functionality belongs in the
   clm_time_manager module.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): none

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated:

========= Made obsolete by get_curr_yearfrac in clm_time_manager
D       models/lnd/clm/src/clm4_5/dyn_subgrid/dynUtilsMod.F90
D       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/dynUtilsMod_mock.F90

List all files added and what they do:

========= Mock out get_curr_yearfrac: return a fixed fraction
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/clm_time_manager_mock.F90

List all existing files that have been modified, and describe the changes:

========= Fix get_curr_yearfrac to be real rather than integer
M       models/lnd/clm/src/util_share/clm_time_manager.F90

========= Use get_curr_yearfrac instead of dyn_time_weights
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynCNDVMod.F90
M       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90.in

========= Update unit tests to pull in clm_time_manager (mock) rather than dynUtilsMod (mock)
M       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/CMakeLists.txt
M       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/CMakeLists.txt


CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    frankfurt_intel: ok
    frankfurt_pgi: ok
    frankfurt_nag: ok

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: ok
    yellowstone_pgi: ok

CLM tag used for the baseline comparisons: clm4_5_58

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45, either transient or with DV
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      roundoff

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

     Ran testing on an intermediate tag, where I computed the time weights in
     both the old and new ways. I confirmed that the difference in time weights
     (which is the only change in this tag) is always less than 1e-13. Actually,
     this difference is always less than 2e-16, double-precision roundoff.

     Also examined cpl hist diffs for a few select tests. Diffs are generally
     ~ 1e-6 after 5 days.

===============================================================
===============================================================
Tag name:  clm4_5_58
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Wed Jan 22 14:11:30 MST 2014
One-line Summary: major refactor of transient pft code, in prep for dynamic landunits

Purpose of changes: 

Major refactor of transient pft code, in prep for dynamic landunits.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): 
   1899 (harvest rates remain non-zero even after the end of the pftdyn dataset)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Erik; design reviewed by CLM-CMT

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: scripts4_140102 -> scripts4_140114
   Machines: Machines_131206b -> Machines_140107
   csm_share: share3_131226 -> share3_131231
   pio: pio1_8_3 -> pio1_8_6
   
   CMake: New external added

List all files eliminated:

========= renamed to dynConsBiogeophysMod.F90
D       models/lnd/clm/src/clm4_5/main/dynlandMod.F90

========= renamed to dynpftFileMod.F90; much of the stuff in here moved to other
          files in the dyn_subgrid directory
D       models/lnd/clm/src/clm4_5/main/pftdynMod.F90

========= renamed
D       models/lnd/clm/test/unit

List all files added and what they do:

========= Rename test/unit to test/unit_testers, and add unit tests for some of
          the stuff in dyn_subgrid. This also involved adding some mocks -
          particularly of ncdio_pio.
A       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test/test_daylength.pf
A       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/biogeophys/Daylength_test
A       models/lnd/clm/test/unit_testers/clm4_5/biogeophys
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/test_dynVarShared.F90
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/test_dynVarTimeInterp.pf
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/test_dynVarTimeUninterp.pf
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynVar_test
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test/test_dynTimeInfo.pf
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/dynTimeInfo_test
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/dyn_subgrid
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_var.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_var.F90.in
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_pio_mock.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/spmdMod_mock.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/do_genf90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share/ncdio_pio_mock.F90.in
A       models/lnd/clm/test/unit_testers/clm4_5/mock/util_share
A       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/shr_sys_mod_mock.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/mock/csm_share
A       models/lnd/clm/test/unit_testers/clm4_5/mock/main/decompMod_boundsTypeDecl.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/main/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/mock/main
A       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/dynFileMod_mock.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/dynUtilsMod_mock.F90
A       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/mock/dyn_subgrid
A       models/lnd/clm/test/unit_testers/clm4_5/mock/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/mock
A       models/lnd/clm/test/unit_testers/clm4_5/CMakeLists.txt
A       models/lnd/clm/test/unit_testers/clm4_5/README
A       models/lnd/clm/test/unit_testers/clm4_5
A       models/lnd/clm/test/unit_testers

========= Make a new directory to hold all of the stuff related to dynamic
          subgrid weights. Currently this means transient PFTs, but soon it will
          also mean dynamic landunits. This includes stuff that used to be in
          pftdynMod and dynlandMod, as well as a bit from clm_driver. I have
          added a new driver for the dyn_subgrid stuff (dynSubgridDriverMod),
          and pulled out much of the shared, lower-level functionality into new
          modules (dynTimeInfoMod, dynFileMod, dynVarMod, dynVarTimeInterpMod,
          dynVarTimeUninterpMod, dynUtilsMod [which will soon go away]). In
          addition, I have separated the many routines in pftdynMod into
          separate modules, each with a single, better-defined function.
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynTimeInfoMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynSubgridDriverMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynHarvestMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynFileMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynConsBiogeochemMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynPriorWeightsMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynpftFileMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynCNDVMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynConsBiogeophysMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarMod.F90.in
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeInterpMod.F90.in
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynLandunitAreaMod.F90.IN_PROGRESS
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynUtilsMod.F90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/dynVarTimeUninterpMod.F90.in
A       models/lnd/clm/src/clm4_5/dyn_subgrid/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/dyn_subgrid

========= script to generate files from their .in files using genf90
A       models/lnd/clm/src/clm4_5/dyn_subgrid/do_genf90


========= move check_sums_equal_1 to a new module, partly to reduce dependencies
          of unit tests, and partly because it is cleaner design to have it
          outside of surfrdMod
A       models/lnd/clm/src/clm4_5/main/surfrdUtilsMod.F90

List all existing files that have been modified, and describe the changes:

========= Add dyn_subgrid directory
M       models/lnd/clm/bld/configure

========= Add get_curr_yearfrac function (currently broken, will be fixed in
          next tag)
M       models/lnd/clm/src/util_share/clm_time_manager.F90

========= Change type(file_desc_t) to class(file_desc_t); add 'only' clause to
          use statements to allow compilation with pgi
M       models/lnd/clm/src/util_share/ncdio_pio.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90.in

========= Change 'use statement' for reworked dyn_subgrid code
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90

========= Move surfrd_check_urban and surfrd_check_sums_equal_1 to more
          appropriate places
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90

========= Move some code into dynSubgridDriverMod
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
           - also remove incorrect header comment

========= Add compute_higher_order_weights routine
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90

========= Add unit testing support
M       models/lnd/clm/src/clm4_5/main/CMakeLists.txt


========= Frankfurt-PGI tests now pass!
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

CLM testing:

  build-namelist tests:

    yellowstone: ok

  regular tests (aux_clm):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    frankfurt_intel: ok
    frankfurt_pgi: ok
    frankfurt_nag: ok

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: ok
    yellowstone_pgi: ok

CLM tag used for the baseline comparisons: clm4_5_57

Changes answers relative to baseline: YES (very limited; see below)

  Can change answers due to the following:

  (1) Changes answers for harvest when a run starts inside the pftdyn timeseries
  but extends beyond it, without an intervening restart (see bug 1899)

  (2) Could theoretically change answers for yellowstone-pgi or hopper-pgi due
  to machines updates, but no changes showed up in the yellowstone test suite
	
===============================================================
===============================================================
Tag name:  clm4_5_57
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Tue Jan  7 14:17:04 MST 2014
One-line Summary: change CNDV water conservation to use the pftdyn method

Purpose of changes:

   For my dynamic landunit work, I was trying to reconcile what's going on with
   prescribed transient PFTs (pftdyn) vs CNDV. The reason is that I'm trying to
   set up an overall control flow for dynamic landunits, and you need to be able
   to run either of these in conjunction with dynamic landunits.

   In doing this, I noticed that water conservation is handled differently for
   pftdyn vs CNDV:

   For pftdyn, water conservation is done as described in section 21.2 of the
   CLM4.5 tech note: water contents are summed before and after transition, and
   the difference is put in the runoff term

   CNDV appears not to use this before & after difference. Instead, it does a
   correction for canopy water in pftdynMod: pftdyn_wbal.

   For dynamic landunits, we're planning to use an approach like what is
   currently done for pftdyn. I think it's going to be messy and confusing to
   try to maintain the current CNDV approach when it's possible to have CNDV in
   conjunction with dynamic landunits.

   Thus, I am changing CNDV to use the pftdyn approach to water conservation,
   whether or not you are running with dynamic landunits. This will change
   answers for CNDV/BGCDV cases in CLM4.5, though I expect the effects to be
   small.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: erik; concept approved by Sam Levis

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Main changes are here; also minor (somewhat related) cleanup: fix some
          section heading comments, add a timer (ndep_interp) - pulling out some
          stuff that used to be (inappropriately) in the pftdynwts timer section
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

========= Remove a bunch of now-unneeded code, especially from pftdynMod
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90


CLM testing:

  NOTE: Most testing was done from tag cndv_water_conservation_n01_clm4_5_55 -
  up-to-date with clm4_5_55, NOT clm4_5_56. I then updated to clm4_5_56 and
  reran just the three tests that were run for that tag (see its ChangeLog
  entry, below), with comparison to clm4_5_56.

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

CLM tag used for the baseline comparisons: clm4_5_55 for most tests, clm4_5_56
for three tests (see above note)

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 with DV (CNDV / BGCDV)
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      
      Not investigated, but expected to be larger than roundoff/same climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_56
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Thu Jan  2 09:06:32 MST 2014
One-line Summary: update scripts external to fix I20TRCLM45BGC compset

Purpose of changes: update scripts external to fix I20TRCLM45BGC compset

Requirements for tag: fix bug 1869

Test level of tag: limited (see below)

Bugs fixed (include bugzilla ID): 1869 (I20TRCLM45BGC compset improperly defined)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: scripts4_131203 -> scripts4_140102

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes: none

CLM testing:

   ONLY TESTED THE 3 AFFECTED TESTS from the yellowstone & frankfurt aux_clm test suites:

   PASS  PET_P15x2_Lm13.f10_f10.I20TRCLM45BGC.yellowstone_pgi.clm-reduceOutput.GC.140102-060037 
   PASS  ERS_D.f10_f10.I20TRCLM45BGC.frankfurt_pgi.clm-decStart.GC.140102-060448 
   PASS  ERS_Mmpich.f10_f10.I20TRCLM45BGC.frankfurt_nag.clm-decStart.GC.140102-060608 

CLM tag used for the baseline comparisons: clm4_5_55

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: Only I20TRCLM45BGC compsets
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
       
       New climate for this compset: correctly uses CLM4.5 instead of CLM4.0 code.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_55
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Fri Dec 27 16:21:45 MST 2013
One-line Summary: add hooks to Sean Santos's unit test framework, and begin to add CLM unit tests

Purpose of changes:

   (1) add hooks to Sean Santos's unit test framework

   (2) begin to add CLM unit tests

   Note: this tag currently does NOT have the CMake utilities that are needed to
   run the unit tests. Instead, the instructions show how to point to a version
   of these in my directory. That's because, as of the time I submitted this tag
   for testing, the necessary working version of the CMake utilities was not yet
   tagged. In the near future, another external could be added to pull in these
   CMake utilities in the CLM directory tree.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self, santos

List any svn externals directories updated (csm_share, mct, etc.):

   tools/unit_testing: added external
   models/csm_share: share3_131101 -> share3_131226 (to get changes needed for building unit tests)

List all files eliminated: None

List all files added and what they do:

========= Set up unit test directories & CMakeLists.txt files, and add unit
          tests for DaylengthMod. Note that the tests themselves are in
          Daylength_test/test_daylength.pf. See the README file for how to run
          the tests
A       models/lnd/clm/test/unit
A       models/lnd/clm/test/unit/clm4_5
A       models/lnd/clm/test/unit/clm4_5/README
A       models/lnd/clm/test/unit/clm4_5/CMakeLists.txt
A       models/lnd/clm/test/unit/clm4_5/mock
A       models/lnd/clm/test/unit/clm4_5/mock/decompMod_boundsTypeDecl.F90
A       models/lnd/clm/test/unit/clm4_5/mock/CMakeLists.txt
A       models/lnd/clm/test/unit/clm4_5/Daylength_test
A       models/lnd/clm/test/unit/clm4_5/Daylength_test/test_daylength.pf
A       models/lnd/clm/test/unit/clm4_5/Daylength_test/CMakeLists.txt

========= Add CMakeLists.txt files that are needed to build unit tests
A       models/lnd/clm/src/clm4_5/main/CMakeLists.txt
A       models/lnd/clm/src/clm4_5/biogeophys/CMakeLists.txt

List all existing files that have been modified, and describe the changes:

========= Remove unneeded 'use' statement, to prevent pulling in more than is
          necessary for the unit test build
M       models/lnd/clm/src/clm4_5/main/clmtype.F90

========= Externals updated - see above
M       SVN_EXTERNAL_DIRECTORIES


CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

  Also ran the new unit tests, as per the instructions in
  models/lnd/clm/test/unit/clm4_5/README - all PASS

CLM tag used for the baseline comparisons: clm4_5_54

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_54
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Fri Dec 27 15:55:05 MST 2013
One-line Summary: update externals to cesm1_3_beta06

Purpose of changes:

   Update externals to cesm1_3_beta06 versions.

   However, do NOT update RTM, because the latest version of RTM results in
   failures for ERI _N2 tests.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): none

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: not investigated

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   Index: SVN_EXTERNAL_DIRECTORIES
   ===================================================================
   --- SVN_EXTERNAL_DIRECTORIES	(.../trunk_tags/clm4_5_53)	(revision 56268)
   +++ SVN_EXTERNAL_DIRECTORIES	(.../branch_tags/clm_update_externals_cesm1_3_beta06_tags/clm_update_externals_cesm1_3_beta06_n02_clm4_5_53)	(revision 56268)
   @@ -1,25 +1,25 @@
    # CESM scripts, machines and driver
   -scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_131126a
   -scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130930b
   -models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq5_0_02
   +scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_131203
   +scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_131206b
   +models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq5_0_07
    
    # Model components: Data atmosphere, and stub components as well as land-ice model
   -models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_131116
   -models/ocn/socn                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_03/socn
   -models/ice/sice                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_03/sice
   -models/glc/sglc                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_03/sglc
   -models/wav/swav                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_03/swav
   -models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_34 
   -models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130924 
   +models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_131201
   +models/ocn/socn                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_04/socn
   +models/ice/sice                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_04/sice
   +models/glc/sglc                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_04/sglc
   +models/wav/swav                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_04/swav
   +models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_34
   +models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_131008
    
    # Utilities: csm_share, esmf, timing, MCT, PIO
   -models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_130918
   +models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_131101
    models/utils/esmf_wrf_timemgr   https://svn-ccsm-models.cgd.ucar.edu/esmf_wrf_timemgr/trunk_tags/esmf_wrf_timemgr_130213
   -models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_130506
   +models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_131108
    models/utils/mct                https://github.com/quantheory/MCT/tags/compiler_fixes_n03_MCT_2.8.3
   -models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_7_2/pio
   +models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_8_3/pio
    
    # Mapping tools:
   -tools/cprnc                            https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_130529
   +tools/cprnc                            https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_131120
    tools/mapping                          https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130716
    models/lnd/clm/tools/shared/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130716/gen_domain_files


List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= NCK tests no longer fail; change fail type of
          ERS_D.f19_g16.IGRCP26CN.frankfurt_pgi from CFAIL to RUN
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

CLM testing:

  build-namelist tests:

    yellowstone: OK

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: generate only (no baselines from clm4_5_53)

CLM tag used for the baseline comparisons: clm4_5_53

Changes answers relative to baseline: YES, but only for multi-instance

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: Multi-instance
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
        Not investigated, but suspected to be new climate

   Note that NCK tests newly pass (they had been failing), so this answer change
   for multi-instance tests is expected.

   These answer changes show up in the following tests:

   FAIL  CME_N2.f10_f10.I1850CLM45BGC.yellowstone_intel.clm-default.GC.131227-063851.compare_hist.clm4_5_53 
   FAIL  ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.GC.131227-063851.compare_hist.clm4_5_53 
   FAIL  ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.GC.131227-063851.compare_hist.clm4_5_53 

   FAIL   CME_N2.f10_f10.I1850CLM45BGC.yellowstone_intel.clm-default.compare_hist.clm4_5_53.clm2.h0 
   FAIL   ERI_N2.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.compare_hist.clm4_5_53.clm2.h0 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_53
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date: Thu Dec 19 07:59:56 MST 2013
One-line Summary: refactor restart interfaces

Purpose of changes: Refactor restart interfaces.  Most work done by mvertens.

1) Add two *.F90.in files that use genf90.pl go generate source.  This saves time
   in dev. and maintenence.  If you modify only the *.F90 file, your changes will
   be lost.  Instead modify the *F90.in file, then run genf90.pl on that file.  
   If you have questions, ask a clm developer for help.
2) Restart capability has now been encapsulated in a subroutine call that uses
   Fortran 2003 interfaces over type and dimension.  For example:

-    if (flag == 'define') then
-       call ncd_defvar(ncid=ncid, varname='grainc_storage_to_xfer', xtype=ncd_double,  &
-            dim1name='pft',long_name='grain C shift storage to transfer',units='gC/m2/s')
-    else if (flag == 'read' .or. flag == 'write') then
-       call ncd_io(varname='grainc_storage_to_xfer', data=pcf%grainc_storage_to_xfer, &
-            dim1name=namep, ncid=ncid, flag=flag, readvar=readvar) 
-       if (flag=='read' .and. .not. readvar) then
-           if (is_restart()) call endrun
-       end if       
-    end if
+    call restartvar(ncid=ncid, flag=flag,  varname='grainc_storage_to_xfer', xtype=ncd_double,  &
+         dim1name='pft', &
+         long_name='grain C shift storage to transfer', units='gC/m2/s', &
+         interpinic_flag='interp', readvar=readvar, data=pcf%grainc_storage_to_xfer)

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary data sets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated:

! renamed for consistency
D       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90

List all files added and what they do:

A       models/lnd/clm/src/util_share/dtypes.h
A       models/lnd/clm/src/util_share/ncdio_pio.F90.in
A       models/lnd/clm/src/util_share/restUtilMod.F90
A       models/lnd/clm/src/util_share/restUtilMod.F90.in
A       models/lnd/clm/src/clm4_5/biogeochem/CNRestMod.F90

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/util_share/clm_time_manager.F90
M       models/lnd/clm/src/util_share/accumulMod.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4RestMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeRestMod.F90

CLM testing:

  regular tests (aux_clm):

    yellowstone_intel - OK
    yellowstone_pgi - OK
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons: clm4_5_52

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_52
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Tue Nov 26 22:07:32 MST 2013
One-line Summary: turn on longwave radiation downscaling for glc_mec by default

Purpose of changes: Turn on longwave radiation downscaling for glc_mec by default


Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: set glcmec_downscale_longwave to true
by default

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: updated to scripts4_131126a, to get tweaked test list

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Change glcmec_downscale_longwave to true by default
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90

========= Remove build-namelist tests that are no longer xFails
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

========= Update scripts to scripts4_131126a, to get tweaked test list
M       SVN_EXTERNAL_DIRECTORIES


CLM testing:

  build-namelist tests:

    yellowstone: ok
    frankfurt

  regular tests (aux_clm):

    yellowstone_intel: ok
    yellowstone_pgi: ok
    frankfurt_intel: ok
    frankfurt_pgi: ok
    frankfurt_nag: ok

Expected baseline failures:
FAIL  ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.131126-131812.compare_hist.clm4_5_51 
FAIL ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.131126-131812.nlcomp

Two BFAILs due to changed tests; I reran them as their old versions and confirmed that answers changed, as expected:
BFAIL ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel.clm-glcMEC_changeFlags.GC.131126-131807.compare_hist.clm4_5_51 
BFAIL PEM_D.f19_g16.IG1850CLM45.yellowstone_pgi.clm-glcMEC.GC.131126-214346.compare_hist.clm4_5_51 


  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: ok
    yellowstone_pgi: ok

CLM tag used for the baseline comparisons: clm4_5_51

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 with glc_mec (IG compsets)
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	larger than roundoff; not investigated whether it is same climate or new climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_51
Originator(s):  sacks (sacks)
Date: Tue Nov 26 05:46:29 MST 2013
One-line Summary: rework downscaling of atm fields for glc_mec

Purpose of changes:

A number of changes related to downscaling atm -> clm fields for glc_mec
landunits:

(1) Add new options to downscale precip (division into rain/snow) and longwave
    radiation (developed by Bill Lipscomb). Both are currently off by default.

(2) Move downscaling code out of clm_driverInit into clm_atmlnd.F90 - this is a
    more appropriate module, and is a step towards modularity, because the code
    to deal with the atmospheric forcing fields lives in the same module as the
    definition of these atmospheric forcing fields.

(3) Ensure that all code uses the downscaled, column-level fields where
    possible. Previously, some code (which did not operate over glc_mec
    landunits) used the non-downscaled, gridcell-level version of fields such as
    forc_t. This was a problem because (a) it was confusing and error-prone, and
    (b) we will soon be bringing in code to do downscaling over other landunits
    as well as glc_mec landunits.

(4) To support (3), and make it harder for someone to accidentally use the
    gridcell-level version of a field when they should be using the downscaled,
    column-level version: Broke clm_a2l into two pieces - one containing fields
    that aren't downscaled, and one containing fields that are downscaled. For
    fields that are downscaled, clearly distinguished the non-downscaled
    versions so they couldn't be used by accident.


Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: For glc_mec runs, added two new
namelist options: glcmec_downscale_rain_snow_convert and
glcmec_downscale_longwave.

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik; portions reviewed by Bill Lipscomb, Mariana, Stefan

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Significant changes: includes stuff that used to be in
          clm_driverInitMod; added new downscaling code for precip & lwrad;
          split atm2lnd type into two types; reworked initialization interfaces;
          removed unused field rainf, because it currently isn't used and could
          theoretically become inconsistent with the downscaled rain/snow
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90

========= Removed downscaling code from here
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90

========= Added call to downscale_forcings
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

========= Changed interface to init_atm2lnd: previously, clm_initialize used
          clm_a2l from clm_atmlnd and passed it to init_atm2lnd_type (also in
          clm_atmlnd) - there was no reason for this, it was confusing, and to
          some extent broke modularity
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90

========= New parameter
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90

========= Removed some variables
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90

========= New namelist control variables
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml

========= Removed unused rainf, added pointer to allow lnd_import_export to
          remain identical between clm4_0 and clm4_5 code
M       models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90

========= Fixed test ids for failing build-namelist tests
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

========= Minor changes in lots of places to (a) use fields from
          a2l_downscaled_col instead of clm_a2l, and (b) index those fields by
          column rather than by gridcell
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/cpl/lnd_comp_esmf.F90
M       models/lnd/clm/src/cpl/lnd_import_export.F90
M       models/lnd/clm/src/cpl/lnd_comp_mct.F90


CLM testing:

  build-namelist tests:

    yellowstone: OK

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

    Note the following expected nlcomp failures:
    FAIL ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel.clm-glcMEC.GC.131125-104703.nlcomp
    FAIL ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.131125-104751.nlcomp
    FAIL PEM_D.f19_g16.IG1850CLM45.yellowstone_pgi.GC.131125-104751.nlcomp

    Also, there were BFAILs for the following, implying that the baselines
    didn't exist; I'm not too concerned because baseline comparisons passed for
    similar tests:
    BFAIL SMS_Ly1_Mmpich.f19_g16.ICLM45BGCCROP.frankfurt_nag.clm-reduceOutput.GC.131125-104832.compare_hist.clm4_5_50 
    BFAIL ERS_Ly5.f10_f10.I20TRCRUCLM45BGC.yellowstone_intel.clm-monthly_noinitial.GC.131125-104703.compare_hist.clm4_5_50 

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

    As above, baselines were missing for this test:
    BFAIL2 ERS_Ly5.f10_f10.I20TRCRUCLM45BGC.yellowstone_intel.clm-monthly_noinitial.compare_hist.clm4_5_50.clm2.h0 (baseline history file does not exist)
    BFAIL2 ERS_Ly5.f10_f10.I20TRCRUCLM45BGC.yellowstone_intel.clm-monthly_noinitial.compare_hist.clm4_5_50.clm2.h1 (baseline history file does not exist)


CLM tag used for the baseline comparisons: clm4_5_50

Changes answers relative to baseline: NO

===============================================================
===============================================================
Tag name:  clm4_5_50
Originator(s):  erik (Erik)
Date: Sun Nov 24 18:51:11 MST 2013
One-line Summary: Bring in a crop of b4b bugfixes, fix getregional script,
                   start move of PTCLM to PTCLMmkdata tool

Purpose of changes:

Bring in a crop of bit-for-bit bug-fixes to the trunk for November.
Fix the getregional_datasets script and initial move of PTCLM to just
be a CLM tool under models/lnd/clm/tools/shared to create single-point
datasets.

New option to create_newcase "-user_mods_dir" for a directory with
user chagnes such as user_nl_* namelist modification files, xmlchange_cmnds
file with xmlchanges to make, and SourceMods/src.*/* files.

Requirements for tag: bit-for-bit bug-fixes and work on PTCLM

Test level of tag: regular

Bugs fixed (include bugzilla ID):
   1868 (Add user_mods_dir to create_newcase)
   1854 (Remove fndepdat no longer used)
   1842 (Remove unused variables from gridcell type) (Bill)
   1835 (Add write statement to pftdyn so you can see what it is doing)
   1828 (Clarify modulo used in irrigation code) (Bill)
   1770 (Remove sitespf_pt valid_values list for clm4_0)
   1724 (getregional script does NOT work)
   1625 (Problem setting finidat in CLM for RUN_TYPE=hybrid/branch)
   1543 (large-file format does NOT work in latest clm)
   1481 (Provide a more direct way to set a user provided finidat file)
   1437 (problems with link_dirtree -- no longer needed)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: SourceMods directory on create_newcase

   New -user_mods_dir option to create_newcase that will copy SourceMods/src.*/*
   files to the new case. Also copies user_nl_* files and xmlchange_cmnds

Describe any changes made to the namelist: remove outnc_large_files
   Remove outnc_large_files -- wasn't functional 
   (now always use 64-bit format)
   Remove fndepdat from namelist_definition/defaults no longer used.

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, sacks (fixes for 1842 and 1828)

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts updated to scripts4_131119

List all files eliminated: None

List all files added and what they do:

------ Add externals for tools so PTCLM shows up in tool directory
------ Add same files and a README file for getregional
A       models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES
A       models/lnd/clm/tools/shared/ncl_scripts/sample_inlist
A       models/lnd/clm/tools/shared/ncl_scripts/sample_outlist
A       models/lnd/clm/tools/shared/ncl_scripts/README.getregional

List all existing files that have been modified, and describe the changes:

------ Get getregional_datasets script working again. Now operates on
------ lists of files.
M       models/lnd/clm/tools/shared/ncl_scripts/getregional_datasets.pl
M       models/lnd/clm/tools/shared/ncl_scripts/getregional_datasets.ncl
M       models/lnd/clm/test/tools/TSMscript_tools.sh --- Copy sample_*list files
M       models/lnd/clm/test/tools/nl_files/getregional - change arguments

------ 
M       models/lnd/clm/tools/clm4_0/interpinic/src/interpinic.F90

------ Remove clm_startfile option and outnc_large_files
M       models/lnd/clm/bld/config_files/config_definition_clm4_0.xml --
          Remove valid_values from sitespf_pt so can be anything.
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl -- Remove
          clm_startfile option and move some clm4_5 configure options
          to build-namelist
M       models/lnd/clm/bld/build-namelist --- Remove clm_startfile option
          and outnc_large_files
M       models/lnd/clm/bld/clm.buildnml.csh - Remove clm_startfile option
          set finidat/nrevsn like how is done in CAM

------ Remove fndepdat and outnc_large_files
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0_tools.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml

M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90 -------- Remove
         some gridcell variables not sued
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90 ------------- write
         on what's going on
M       models/lnd/clm/src/clm4_5/main/controlMod.F90 ------------ Remove
         outnc_large_files
M       models/lnd/clm/src/clm4_5/main/clmtype.F90 --------------- Remove
         a bunch of gridcell variables not needed
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90 - Add
         seconds_since_irrig_start_time temporary to clarify

------ 
M       models/lnd/clm/src/clm4_0/main/pftdynMod.F90 --- add some writes statements
M       models/lnd/clm/src/clm4_0/main/controlMod.F90 -- remove outnc_large_files

CLM testing:

  build-namelist tests:

    yellowstone yes
    frankfurt   no

  NOTE: there were some tests that were passing but in the xFail list
        from before clm4_5_49 that I marked as working.

  regular tests (aux_clm):

    yellowstone_intel yes
    yellowstone_pgi   yes
    frankfurt_intel   yes
    frankfurt_pgi     yes
    frankfurt_nag     yes

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel yes
    yellowstone_pgi   yes

  tools testing:

    yellowstone interactive yes

CLM tag used for the baseline comparisons:  clm4_5_49

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_5_49
Originator(s):  muszala (Stefan Muszala)
Date: Sat Nov 16 07:51:27 MST 2013
One-line Summary: Swenson anomaly forcing - Part 1

purpose of changes:
   add additional data streams to modify existing
   data streams for purposes such as bias correction or specifying 
   future changes relative to baseline data streams, e.g. specifying
   future atmospheric forcing anomalies when running CLM with data atmosphere. 
   Paired with datm8_131115.

   For what to set in user_nl_cpl, user_nl_datm, see testing section.

   This is part 1 of 2.  Part 2 will address a general way to handle
   streams in the DATM that is triggered off of an AF compset.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: swenson, kluzek, self

List any svn externals directories updated (csm_share, mct, etc.): update to datm8_131116

List all files eliminated:  N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90
M       models/lnd/clm/src/cpl/clm_cpl_indices.F90
M       models/lnd/clm/src/cpl/lnd_import_export.F90
M       SVN_EXTERNAL_DIRECTORIES

CLM testing:

Testing for features of this tag: f09_g16, ICRUCLM45

anomaly forcing namelists
   user_nl_cpl: cplflds_custom = 'Sa_prec_af->a2x', 'Sa_prec_af->x2l','Sa_tbot_af->a2x',
           'Sa_tbot_af->x2l','Sa_pbot_af->a2x', 'Sa_pbot_af->x2l','Sa_shum_af->a2x',
           'Sa_shum_af->x2l','Sa_u_af->a2x', 'Sa_u_af->x2 l','Sa_v_af->a2x',
           'Sa_v_af->x2l','Sa_swdn_af->a2x', 'Sa_swdn_af->x2l','Sa_lwdn_af->a2x',
           'Sa_lwdn_af->x2l'
   user_nl_datm: anomaly_forcing = 'Anomaly.Forcing.Precip','Anomaly.Forcing.Temperature',
            'Anomaly.Forcing.Pressure','Anomaly.Forcing.Humidity','Anomaly.Forcing.Uwind',
            'Anomaly.Forcing.Vwind','Anomaly.Forcing.Shortwave','Anomaly.Forcing.Longwave'
bias correction namelists
   user_nl_cpl: cplflds_custom = 'Sa_precsf->a2x', 'Sa_precsf->x2l'
   user_nl_datm: bias_correct = 'BC.CRUNCEP.GPCP.Precip' 

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel - OK 
    yellowstone_pgi - OK 
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons:  clm4_5_48

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_48
Originator(s):  muszala (Stefan Muszala)
Date: Thu Nov 14 08:28:31 MST 2013
One-line Summary: bug fixes for CLM dry deposition and MEGAN VOC emissions

Purpose of changes: Bring in bug fixes from fvitt for CLM dry deposition and MEGAN VOC emissions.  Any changes
   to answers are limited to rare circumstances.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: fvitt, self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_0/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/DryDepVelocity.F90

CLM testing:

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel - OK
    yellowstone_pgi - OK
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons:  clm4_5_47

Changes answers relative to baseline:  Answers change for some of the chemistry configurations, but 
   these changes will not be see in the CLM standalone tests.

===============================================================
===============================================================
Tag name:  clm4_5_47
Originator(s):  muszala (Stefan Muszala)
Date: Tue Nov 12 09:26:20 MST 2013
One-line Summary: fix Bug 1858 - AGDD now reset annually

Purpose of changes: Fix bug 1858.  AGDD is now reset annually.  Replace -99999_r8 with a 
   parameter in accumulMod.F90 which is used in accFldsMod.F90

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1858

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: slevis, sacks, muszala

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/util_share/accumulMod.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90

CLM testing:

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel - OK
    yellowstone_pgi - OK
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons:  clm4_5_46

Changes answers relative to baseline: Generally, No.  There may be changes
  in DV compsets over very long simulation times and at very high resolutions.

===============================================================
===============================================================
Tag name:  clm4_5_46
Originator(s):  sacks (sacks)
Date: Fri Nov  8 17:26:02 MST 2013
One-line Summary: remove zeroing out of slope for special landunits

Purpose of changes:

   Previously, there was code to zero out slope for grid cells with 100% special
   landunits. However, there were a number of problems with this:

   (1) With dynamic landunits, this is problematic, because a grid cell could
   start as 100% special landunits, then later become < 100% special landunits
   (e.g., due to retreating glaciers)

   (2) Moreover, why should the slope of a special landunit depend on whether
   the grid cell has 100% special landunits. This seems to be saying that, e.g.,
   the slope of a glacier landunit depends on whether the grid cell is entirely
   glacier or part glacier and part natural veg.

   (3) And I guess moreover, why is the slope zeroed out for special landunits
   in the first place?


   From talking with Erik, we decided thish code was probably a relic from a
   time when the surface dataset had some bad values (e.g., over Greenland /
   Antarctica). This is no longer the case, so this code is no longer needed.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90

CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

    Following are the baseline failures, which are expected (see below):

FAIL  SMS_D.1x1_mexicocityMEX.ICLM45.frankfurt_intel.clm-default.GC.131107-223431.compare_hist.clm4_5_45 
FAIL  SMS_D.1x1_vancouverCAN.ICLM45.frankfurt_pgi.clm-default.GC.131107-223435.compare_hist.clm4_5_45 
FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.I1PTCLM45.frankfurt_nag.clm-default.GC.131107-223439.compare_hist.clm4_5_45 
FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PTCLM45.frankfurt_nag.clm-default.GC.131107-223439.compare_hist.clm4_5_45 
FAIL  ERI.f09_g16.ICLM45BGC.yellowstone_intel.GC.131107-223256.compare_hist.clm4_5_45 
FAIL  ERI_D.f09_g16.ICLM45BGC.yellowstone_intel.GC.131107-223256.compare_hist.clm4_5_45 
FAIL  ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.GC.131107-223256.compare_hist.clm4_5_45 
FAIL  ERS_Lm3.1x1_vancouverCAN.I1PTCLM45.yellowstone_intel.clm-default.GC.131107-223256.compare_hist.clm4_5_45 
FAIL  SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.clm-default.GC.131107-223256.compare_hist.clm4_5_45 
FAIL  ERI.f09_g16.I1850CRUCLM45BGC.yellowstone_pgi.GC.131107-223301.compare_hist.clm4_5_45 
FAIL  ERI.f09_g16.ICLM45BGC.yellowstone_pgi.GC.131107-223301.compare_hist.clm4_5_45 
FAIL  ERI_D.f09_g16.ICLM45BGC.yellowstone_pgi.GC.131107-223301.compare_hist.clm4_5_45 


  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

    Following are the baseline failures, which are expected:

FAIL   ERS_Lm3.1x1_vancouverCAN.I1PTCLM45.yellowstone_intel.clm-default.compare_hist.clm4_5_45.clm2.h0 
FAIL   ERS_Lm3.1x1_vancouverCAN.I1PTCLM45.yellowstone_intel.clm-default.compare_hist.clm4_5_45.clm2.h1 
FAIL   SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.clm-default.compare_hist.clm4_5_45.clm2.h0 
FAIL   SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.clm-default.compare_hist.clm4_5_45.clm2.h1 


CLM tag used for the baseline comparisons: clm4_5_45

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: Any configuration that includes a grid cell that
      has 100% special landunits, including at least some urban
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

      Not investigated carefully, but expected to be larger than roundoff/same
      climate - since this only affects a very small number of grid cells, and
      (I believe) only the urban pervious road in those grid cells

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_45
Originator(s):  sacks (sacks)
Date: Fri Nov  8 16:10:22 MST 2013
One-line Summary: refactor daylength calculation, and other minor changes

Purpose of changes:

   (1) Compute daylength in a single place, and compute necessary variables at
   initialization rather than having them on the restart file

   (2) Compute daylength-related variables at initialization rather than having
   them on the restart file, both to clean things up and to fix some daylength
   bugs at initialization (these bugs were fixed in a kludgey way in clm4_5_44,
   and now are fixed robustly)

   (3) Fix daylength calculation at the poles (previously blew up due to
   roundoff errors) (doesn't change behavior currently, but could change
   behavior / answers if there were a vegetated landunit at the pole)

   (4) Fix sminn on restart, so that crop restarts can be bfb (bug 1846)

   (5) Add all_active namelist variable that makes even 0-weight points active,
   for testing purposes

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

   - 1846 (crop restarts aren't exact due to sminn field)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: add all_active namelist variable

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: (1) & (2) reviewed by erik, (3) by self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: update from scripts4_131030 -> scripts4_131107a

List all files eliminated: none

List all files added and what they do:

========= Compute daylength in a single place
A       models/lnd/clm/src/clm4_5/biogeophys/DaylengthMod.F90

List all existing files that have been modified, and describe the changes:

========= Refactor daylength calculation to just compute daylength in a single,
          central place, and compute necessary variables at initialization
          rather than having them on the restart file
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
           - also fix sminn on restart (bug 1846)
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90

========= Add all_active namelist variable that makes even 0-weight points
          active, for testing purposes
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90


========= Add & remove tests from xFail list
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

*** No longer tested (replaced by CME_Ly4)
-               <entry testId="CME_Ly5.f10_f10.I1850CLM45BGC.yellowstone_intel.clm-default" failType="RUN">Runs out of time. CME_Ly4.f10_f10.I1850CLM45BGC.yellowstone_intel.clm-monthly passes</entry>

*** Now passes
-               <entry testId="ERS_Ly5.f10_f10.ICLM45BGCCROP.yellowstone_intel.clm-irrigOn_reduceOutput" failType="FAIL" bugz="1846" >restarts not exact due to bug 1846: crop restarts are not exact due to sminn field</entry>

+               <entry testId="NCK.f10_f10.ICRUCLM45.yellowstone_intel"                    failType="FAIL"  bugz="1860">Diffs in cpl log files in rofl, rofi and volr</entry>
+               <entry testId="NCK.f10_f10.I.yellowstone_pgi"                              failType="FAIL"  bugz="1860">Diffs in cpl log files in rofl, rofi and volr</entry>


CLM testing:

  build-namelist tests:

    yellowstone: OK

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

    Note that we get the following failures in compare_hist:

    FAIL  PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel.clm-reduceOutput.GC.131107-214732.compare_hist.clm4_5_44 
    FAIL  PET_P15x2_Ly3.f10_f10.ICLM45BGCCROP.yellowstone_intel.clm-irrigOn_reduceOutput.GC.131107-214732.compare_hist.clm4_5_44 

    However, I think that's expected due to the oddities in the clm4_5_44 tag
    with openmp - see notes in the ChangeLog for clm4_5_44 for details. Note
    that this one is identical to clm4_5_43, suggesting that clm4_5_45 undoes
    the problem introduced in clm4_5_44:

    PASS   PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel.clm-reduceOutput.compare_hist.clm4_5_43.cpl.hi 


  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

    In particular, note that the clm hist comparison passes for the two above
    tests that had unexpected cpl diffs:

    PASS   PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel.clm-reduceOutput.compare_hist.clm4_5_44.clm2.h0 
    PASS   PET_P15x2_Ly3.f10_f10.ICLM45BGCCROP.yellowstone_intel.clm-irrigOn_reduceOutput.compare_hist.clm4_5_44.clm2.h0 


CLM tag used for the baseline comparisons: clm4_5_44

Changes answers relative to baseline: NO

===============================================================
===============================================================
Tag name:  clm4_5_44
Originator(s):  sacks (sacks)
Date: Fri Nov  8 08:19:56 MST 2013
One-line Summary: temporary hack to daylength initialization to provide baselines for the next tag

Purpose of changes:

   The next tag (clm4_5_45) involves a major refactor to the daylength
   calculation. That refactor is bfb in most respects, but gives differences in
   the first time step in a few situations.

   This tag (clm4_5_44) does the minimal changes needed to get the same results
   as clm4_5_45, in order to have more confidence when testing clm4_5_45. 

   Note that the changes here are a kludge that will be reverted in clm4_5_45.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

   1850 (incorrect daylength in first timestep of some runs)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90

CLM testing:

  build-namelist tests:

    yellowstone: OK

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

    There were a number of expected compare_hist failures, as described below.

    There was one unexpected compare_hist failure:
    FAIL  PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel.clm-reduceOutput.GC.145424.compare_hist.clm4_5_43 

    Diffs are just in voc cpl fields. CLM hist files are identical at the end of
    the run. An SMS version of this test passes. Interestingly, the kludgey code
    that I have added for clm4_5_44 isn't even executed in this test... so the
    only diffs should be in variable declarations and 'use' statements. And
    clm4_5_45 (which I will tag soon) gives identical cpl hist files to
    clm4_5_43. So there may just be a compiler fluke in the compilation of this
    tag with openmp enabled. Because clm4_5_45 will give identical results to
    clm4_5_43, I'm not worrying about this.


  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

    A number of expected compare_hist failures, as described below.

CLM tag used for the baseline comparisons: clm4_5_43

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 with BGC (and probably CN), involving
      either (a) initial conditions interpolated from a different resolution, or
      (b) a change in start date relative to the ref date of an initial file
      (which shows up in ERI tests) - see bug 1850
    - what platforms/compilers: ALL
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
        Not investigated carefully, but almost certainly larger than
        roundoff/same climate, since this code mod just changes things in the
        first timestep.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_43
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Wed Nov  6 09:21:25 MST 2013
One-line Summary: allocate memory for most landunits in every grid cell (needed for dynamic landunits)

Purpose of changes:

   Main change is to allocate memory for most landunits in every grid cell, to
   support dynamic landunits. Note that we ALWAYS do this extra memory
   allocation, so that the user isn't required to do interpinic between a
   non-dynamic run and a dynamic landunit run. (If we eventually change the
   restart file format / processing so that you can add / remove 0-weight points
   at will, then we could potentially add some logic to only do this extra
   allocation if we're using dynamic landunits.)

   Supporting changes are (1) determining which grid cells have enough parameter
   data to support urban landunits, (2) new initial conditions files, (3) in
   mksurfdata_map, don't set soil parameters to 0 under glacier, and set urban
   parameters even if urban cover is 0%

   Other changes are:

   (1) only do snow balance check over active columns

   (2) fix interpinic bug (bug 1839)

   (3) newer files for testing interpinic


   NOTE: All CLM4.5 initial conditions will need to be interpinic'ed to be
   usable in this tag (this has been done for all out-of-the-box initial
   conditions)

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

   - 1839 (interpinic uses wrong column when there are 0-weight columns in the
     input file)

   - 1840 (snow balance check is executed over inactive columns)

   - 1825 (surface datasets need urban parameters even when pcturb is 0
     everywhere): partial fix - still waiting on new USUMB dataset

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: new initial conditions for CLM4.5

List any changes to the defaults for the boundary datasets: new initial
conditions for CLM4.5

Describe any substantial timing or memory changes:

   Significant memory increases for all CLM4.5 configurations - memory is now
   allocated for all natural veg landunits, all crop landunits (if using
   create_crop_landunit), and most urban landunits.

   Also, significant performance decrease (~ 10%) associated with the above
   change, which I believe is mainly due to decreased cache friendliness.

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated:

========= Change files used for testing interpinic, in order to use files that
          are up-to-date with the current version of CLM, for a more accurate test
D       models/lnd/clm/tools/clm4_5/interpinic/clmi.I2000CLM45BGC.2000-01-01.10x15_simyr2000_c130607.nc

List all files added and what they do:

========= Change files used for testing interpinic, in order to use files that
          are up-to-date with the current version of CLM, for a more accurate test
A       models/lnd/clm/tools/clm4_5/interpinic/clmi.I2000CLM45BGC.2000-01-01.10x15_simyr2000_c131104.nc

List all existing files that have been modified, and describe the changes:

========= Determine which grid cells should have urban landunits
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varsur.F90
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90

========= Create a natural veg landunit and crop landunit in all grid cells;
          create an urban landunit in all grid cells for which we have
          determined that urban is "valid"
M       models/lnd/clm/src/clm4_5/main/subgridMod.F90

========= Change a comment
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90

========= Only do snow balance check over active columns (fixes bug 1840)
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90

========= Use new initial conditions files that are consistent with the expanded
          1-d memory structures
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

========= Don't set soil parameters to 0 under glacier; set urban parameters
          even if urban cover is 0%
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksoilMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90

========= Fix interpinic bug (bug 1839)
M       models/lnd/clm/tools/clm4_5/interpinic/src/interpinic.F90

========= Change files used for testing interpinic, in order to use files that
          are up-to-date with the current version of CLM, for a more accurate test
M       models/lnd/clm/tools/clm4_5/interpinic/interpinic.runoptions


========= Add two tests to the xFail list
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

+               <entry testId="CME_Ly5.f10_f10.I1850CLM45BGC.yellowstone_intel.clm-default" failType="RUN">Runs out of time. CME_Ly4.f10_f10.I1850CLM45BGC.yellowstone_intel.clm-monthly passes</entry>
+               <entry testId="SMS_D_Lm1_Mmpi-serial.CLM_USRDAT.I1PTCLM45.yellowstone_pgi.clm-USUMB" failType="FAIL" bugz="1825"> Needs new surface dataset</entry>


CLM testing:

NOTE: main tests were done with
dynlu_allocate_memory_n11_fix_cndv_time_averages_n01_clm4_5_41; tools tests with
dynlu_allocate_memory_n12_clm4_5_42; build-namelist tests with a slightly older
tag

  build-namelist tests:

    yellowstone: OK. However, the "correct" comparisons are spurious, because I
    think the build-namelist test is broken

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

  tools testing:

    yellowstone interactive: OK

   *** Expected failures
   027 smiS4 TSMscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional .............\c
    rc=6 FAIL
   028 bliS4 TBLscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional .............\c
    rc=4 FAIL


   *** Expected baseline failure (uses new input & output file, and there is a non-bfb change in interpinic)
   016 blh54 TBLtools.sh clm4_5 interpinic tools__ds runoptions ....................................\c
    rc=7 FAIL

   *** Expected diffs in PCT_SAND, PCT_CLAY, SOIL_COLOR
   012 blg54 TBLtools.sh clm4_5 mksurfdata_map tools__s namelist ...................................\c
    rc=7 FAIL
   020 bli24 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds \c
    rc=7 FAIL
   022 bli53 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__o ....\c
    rc=7 FAIL
   024 bli54 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__ds ...\c
    rc=7 FAIL
   026 bli57 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__do ...\c
    rc=7 FAIL

   *** Expected diffs in urban fields
   030 bli74 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools_\c
    rc=7 FAIL
   032 bliT4 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp24_2000^tools_\c
    rc=7 FAIL


CLM tag used for the baseline comparisons: clm4_5_42

Changes answers relative to baseline: NO - but see note below:

   NOTE: This tag has the potential to change answers for cases using initial
   conditions that were interpinic'ed using the out-of-the-box interpinic,
   because of bugs in interpinic. This applies to CLM4.5 cases @ ne30 and hcru
   resolutions, as well as CLM4.5 cases using DV @ f09. However, no diffs showed
   up in the test suite, so it's possible that this isn't a problem.

===============================================================
===============================================================
Tag name:  clm4_5_42
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Mon Nov  4 09:45:36 MST 2013
One-line Summary: fix bug 1857 for CLM4.5 - CNDV running temperature means are incorrect

Purpose of changes:

   Fix bug 1857 for CLM4.5 (not yet fixed for CLM4.0!). From the bugzilla entry:

   In this code in CNDVMod:

       do p = bounds%begp, bounds%endp
          g = pft%gridcell(p)
          if (kyr == 2) then ! slevis: add ".and. start_type==arb_ic" here?
             tmomin20(g) = t_mo_min(p) ! NO, b/c want to be able to start dgvm
             agdd20(g) = agdd(p)       ! w/ clmi file from non-dgvm simulation
          end if
          tmomin20(g) = (19._r8 * tmomin20(g) + t_mo_min(p)) / 20._r8
          agdd20(g)   = (19._r8 * agdd20(g)   + agdd(p)    ) / 20._r8
       end do

   Notice that this is a loop over p, but it's updating gridcell-level variables.
   This means that the running temperature means aren't at all what they purport
   to be. e.g., in a grid cell with the 17 natural PFTs and nothing else, the grid
   cell-level values will get the 17 pft values averaged in each year, rather than
   getting a single pft value per year. This means that these temperature
   variables are closer to a single year's value than to a running mean.

   The fix here should be simple: just change tmomin20 & agdd20 to pft-level
   variables.

   
   WARNING: USE CAUTION WHEN USING THIS TAG WITH AN OLDER RESTART FILE FROM A
   CLM4.5 DV CASE (this is not a problem for any out-of-the-box initial
   conditions files, but could apply if you have your own initial file from a DV
   run): In this case, the two DV-related variables AGDD20 and TMOMIN20 will be
   reset to their arbitrary initial conditions.


Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID): 
   1857 - partial fix (still open for clm4.5)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEcosystemDynIniMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90

========= Remove SSP compare_hist BFAIL from xFAIL list (Ben fixed this in the last tag)
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

    All baseline comparisons pass except the following expected failure:
	FAIL  PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel.clm-reduceOutput.GC.104252.compare_hist.clm4_5_41 

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

    All baseline comparisons pass except the following expected failure:
       FAIL   PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel.clm-reduceOutput.compare_hist.clm4_5_41.clm2.h0 

CLM tag used for the baseline comparisons: clm4_5_41

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM4.5 with DV
    - what platforms/compilers: ALL
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      
      Definitely larger than roundoff, but not investigated as to whether it's
      same climate or new climate.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_41
Originator(s):  andre (Benjamin Andre,LAWRENCE BERKELEY NATIONAL LABORATORY,510-486-4617)
Date: Wed Oct 30 17:33:16 MDT 2013
One-line Summary: update scripts to convert clm4_5 CPP flags to namelist variables.

Purpose of changes: Convert clm4_5 CPP flags in controlMod.F90
	into namelist variables, update scripts infrastructure
	to generate cases with namelist variables for bgc
	(CN, CNDV, methane, vsoilc_centbgc), crop, extra lake layers,
	vic, nofire, noio, sitespf_pt, snicarfrc, maxpatch_pft.

Requirements for tag:

Test level of tag: regular, tools, build_namelist

Bugs fixed (include bugzilla ID): 1728 (scripts4_20131030 tag). 1770 (clm4_5 portion).

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: removed clm4_5 CPP flags:
    NOFIRE, LCH4, NITRIF, VERTSOILC, EXTRALAKELAYERS, VICHYDRO, CENTURY, CN, 
    CNDV, CROP, SNICAR, VANCOUVER, NOIO, MEXICOCITY

Describe any changes made to the namelist: added namelist variables:

    use_nofire, use_lch4, use_nitrif_denitrif, use_vertsoilc, use_extralakelayers,
    use_vichydro, use_century_decomp, use_cn, use_cndv, use_crop, use_snicar_frc,
    use_vancouver, use_mexicocity, use_noio

    All new namelist variables are logicals.

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Erik Kluzek, Bill Sacks

List any svn externals directories updated (csm_share, mct, etc.): scripts4_131030

List all files eliminated:
D       models/lnd/clm/bld/config_files/config_definition.xml - split into clm4_X variants

List all files added and what they do:
A       models/lnd/clm/bld/config_files/config_definition_clm4_5.xml
A       models/lnd/clm/bld/config_files/config_definition_clm4_0.xml

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl - set crop=off by default to pick up correct defaults.
M       models/lnd/clm/bld/configure - completely remove clm4_5 only cpp flags, add physics dependent logic to clm4_0 flags.
M       models/lnd/clm/bld/queryDefaultNamelist.pl - point to physics specific config_definitions.xml file
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml - replace xml special characters with alternatives so file can be parsed. Add new build-namelist failures.

M       models/lnd/clm/bld/build-namelist - add logic for all new clm4_5 namelist variables, commandline options, switch defaults to use_N.

M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml - add new namelist variables

M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90 - add CNNDynamicsInit() and logic to set nfix_timeconst from use_nitrif_denitrif namelist instead of CPP.
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90 - convert ifdef'd parameters to variables
M       models/lnd/clm/src/clm4_5/main/controlMod.F90 - final conversion of CPP flags to namelist variables

	Switch the following files to use new namelist variables for attributes:
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml


CLM testing:

  build-namelist tests:

    yellowstone - most tests will fail, tests need to be updated in future tag
    frankfurt

  regular tests (aux_clm):
    - nlcomp tests fail for all clm4_5 because of the new namelist variables.
    - SSP tests should now be BFAIL, pass on next tag
    - All hist comp are bit for bit.

    yellowstone_intel ok
    yellowstone_pgi ok
    frankfurt_intel ok
    frankfurt_pgi ok
    frankfurt_nag ok

  tools testing:

    yellowstone interactive - smiS4 (getregional) also fails in clm4_5_40
    frankfurt interactive - N/A

CLM tag used for the baseline comparisons: clm4_5_40

Changes answers relative to baseline: None.

===============================================================
===============================================================
Tag name:  clm4_5_40
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date:  Thu Oct 24 07:54:46 MDT 2013
One-line Summary: fix Bug 1752 - urban conductances depend on weights in an undesirable way

Purpose of changes: 

Three parts to this tag.  Description from Oleson:

1) 
 fix Bug 1752 - modified UrbanMod.F90 to calculate
2) 
 add 2 new diagnostic history fields (FIRE_U, FIRE_R)
 the conductances correctly.  I created new variables to more clearly
 distinguish between scaled and unscaled conductances.
3)
 fix small bug in which the history field output of some of the
 anthropogenic heat flux variables are not bfb on restart when finidat is blank.
 I found this when verifying bfb for the original bug fix.  The cause of this
 is initialization which sets non-urban to special value, instead of zero, which
 is what is desired. On restart, this initialization is not done and the history
 file set_nourb=0 has precedent.  A related issue is that eflx_building_heat is
 not zero for pervious/impervious road when nlevurb /= nlevgrnd.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1752

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: oleson, sacks, self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90

CLM testing:

  regular tests (aux_clm):

Note: compare_hist fails for all clm4_5 compsets, but this is expected.

    yellowstone_intel - OK
    yellowstone_pgi  - OK
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel

CLM tag used for the baseline comparisons:  clm4_5_39

Changes answers relative to baseline: Yes.  

These modifications have been verified in a single simulation
(clm4_5_20_wsth_deriv_spin).  All of these affect urban areas only and typical
changes in TSA_U are less than 0.1 K.  Gridcell average (e.g., TSA) differences
are much smaller due to small urban fractions.

Fields that changed are:

BUILDHEAT, EFLX_LH_TOT, EFLX_LH_TOT_U, ERRH2O, ERRH2OSNO, ERRSEB, ERRSOI, FCTR, 
FGEV, FGR, FGR12, FGR_U, FIRA, FIRA_U, FIRE, FSA, FSA_U, FSH, FSH_G, FSH_NODYNLNDUSE, 
FSH_U, FSM, FSM_U, FSNO, FSNO_EFF, FSR, FSRND, FSRNDLN, FSRNI, FSRVD, FSRVDLN, FSRVI, 
GC_HEAT1, GC_ICE1, GC_LIQ1, H2OSNO, H2OSNO_TOP, H2OSOI, HEAT_FROM_AC, LWup, Q2M, 
Qanth, QDRAI, QDRAI_PERCH, QDRAI_XS, QFLX_LIQ_DYNBAL, QINFL, QOVER, QRUNOFF, 
QRUNOFF_NODYNLND, QSNOMELT, QSNWCPICE, QSOIL, QVEGT, RH2M, RH2M_U, SABG, SNOBCMCL, 
SNOBCMSL, SNODSTMCL, SNODSTMSL, SNOOCMCL, SNOOCMSL, SNOW_DEPTH, SNOWDP, SNOWICE, 
SNOWLIQ, SNOW_SINKS, SNOW_SOURCES, SoilAlpha_U, SOILICE, SOILLIQ, SOILPSI, SWup, 
T10, TAUX, TAUY, TBUILD, TG, TG_U, TH2OSFC, TRAFFICFLUX, TREFMNAV, TREFMNAV_U, 
TREFMXAV, TREFMXAV_U, TSA, TSA_U, TSOI, TWS, U10, URBAN_AC, URBAN_HEAT, VOLR, 
WASTEHEAT, WF
	
===============================================================
===============================================================
Tag name:  clm4_5_39
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date: Wed Oct 23 08:24:47 MDT 2013
One-line Summary: bug fix from santos - h2osoi_vol not passed to atmosphere model on restart

Purpose of changes:

Update soilw for atmosphere at every timestep.

- Fix bug where soilw was only being set from h2osoi_vol on the first
timestep. This field is used by some CARMA dust models.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1787

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, santos

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M        models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90
M        models/lnd/clm/src/clm4_0/main/clm_initializeMod.F90
M        models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M        models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
   - Create a new subroutine, clm_map2gcell_minimal, which updates
     only the fields needed at initialization.
   - Have the regular clm_map2cell call clm_map2gcell_minimal, thus
     guaranteeing that fields updated on the first time step will
     always be a subset of the fields updated on every time step.

CLM testing:

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel-OK
    yellowstone_pgi-OK
    frankfurt_intel-OK
    frankfurt_pgi-OK
    frankfurt_nag-OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons:  clm4_5_38

Changes answers relative to baseline: No.  Tag is BFB.

===============================================================
===============================================================
Tag name:  clm4_5_38
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date:  Fri Oct 18 12:36:03 MDT 2013
One-line Summary: change irrigation variables to be pft-level

Purpose of changes:

   Irrigation variables were previously defined on the column-level. That is
   fine with the current operation of the code (for which there is only one pft
   per column), but is not robust to changes that might put multiple irrigated
   pfts (or some irrigated & some unirrigated pfts) on the same column. This
   changes these variables to be pft-level, so that the code is robust to these
   types of changes.

   Also, remove some unnecessary setting of qflx_irrig to 0.

   WARNING: USE CAUTION WHEN USING THIS TAG WITH AN OLDER RESTART FILE IN WHICH
   IRRIGATION WAS TURNED ON (this is not the case for any out-of-the-box initial
   conditions files, but could apply if you have your own initial file from a
   run that included irrigation): Using this tag with old initial conditions
   files will give incorrect irrigation results for the first day, if the old
   initial conditions files had non-zero irrigation. Similarly, if you use
   interpinic on an old initial conditions file that had non-zero irrigation,
   the irrigation in the new file will cause incorrect behavior for the first
   day.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: ncdio_pio design review by erik; other changes just reviewed
by self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: Update to scripts4_131018 to get new test

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Change irrigation variables to pft-level, and add column-level qflx_irrig in pwf_a
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/pft2colMod.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
          - also remove unnecessary initialization of qflx_irrig to 0
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
          - also remove unnecessary set_lake
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
          - also remove unnecessary setting of qflx_irrig to 0

========= Remove unnecessary setting of qflx_irrig to 0
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

========= Add a routine to get the dimension length of a given dimension of a variable
M       models/lnd/clm/src/util_share/ncdio_pio.F90

========= Add the new 5-year ERS test and one other to the xFail list
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml


CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK

       Note: added the following to the xFail list:
               <entry testID="ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay"      failType="FAIL" >Seg fault while writing h1 file. This used to pass on yellowstone, but it failed on edison; now it is failing on yellowstone, too (it fails in clm4_5_37, too).</entry>

    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

CLM tag used for the baseline comparisons: clm4_5_37

Changes answers relative to baseline: NO

===============================================================
===============================================================
Tag name:  clm4_5_37
Originator(s):  muszala (Stefan Muszala)
Date: Thu Oct 10 09:48:50 MDT 2013
One-line Summary: Modifications to bring clm up to date with major driver refactoring in drvseq5_0_01

Purpose of changes:

Modifications to bring clm up to date with major driver refactoring in drvseq5_0_01.
Mods. by mvertens, tested and tagged by muszala.

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: mvertens

List any svn externals directories updated (csm_share, mct, etc.):

-models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_3_03
+models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq5_0_02
-models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_32
+models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_34 
-models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130905
+models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130924 

List all files eliminated: 

D       models/lnd/clm/src/cpl_share
D       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90
D       models/lnd/clm/src/cpl_mct
D       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
D       models/lnd/clm/src/cpl_esmf
D       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
D       models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90

List all files added and what they do:

A  +    models/lnd/clm/src/cpl
A  +    models/lnd/clm/src/cpl/lnd_comp_esmf.F90
A  +    models/lnd/clm/src/cpl/clm_cpl_indices.F90
A  +    models/lnd/clm/src/cpl/lnd_import_export.F90
A  +    models/lnd/clm/src/cpl/lnd_comp_mct.F90

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/configure
M       SVN_EXTERNAL_DIRECTORIES

CLM testing:

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel - run on edison - OK
    yellowstone_pgi - run on edison - OK
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - run on edison - OK

CLM tag used for the baseline comparisons:  clm4_5_36

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_36
Originator(s):  sacks (Bill Sacks)
Date: Fri Oct  4 09:40:54 PDT 2013
One-line Summary: new surface datasets, and other minor fixes

Purpose of changes:

(1) New surface datasets for CLM4.5 at all resolutions, generated with a version
    of mksurfdata_map that doesn't zero out soil properties under points
    believed to be 100% glacier (note that this can change answers, because some
    of these points ended up not being 100% glacier, and so this can affect soil
    properties under lakes)

(2) For CLM4.5, distinguish between irrigate=.true. and irrigate=.false. when
    determining finidat with crop=on. Also add an initial conditions file for
    irrigate=.true. at f10 resolution.

(3) Update scripts to get a slightly reworked test list, in particular fixing
    the clm-default testmods directory for multi-instance tests, and adding a
    long test with irrigate=.true. (because irrigation likely never took effect
    in the old test).

Requirements for tag:

Test level of tag: regular & build_namelist

Bugs fixed (include bugzilla ID):
   - 1827 / 1830: testmods don't work right for multi-instance tests (fix via
     scripts update)
   - 1829: PCT_SAND, PCT_CLAY and SOIL_COLOR are incorrect for some grid cells
     (fix via new surface datasets)
   - 1831: turning on irrigation leads to death in initialization (fix via a new
     initial conditions file)


Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: see changes in boundary datasets

List any changes to the defaults for the boundary datasets:
  
   - new surface datasets for all resolutions for CLM4.5: same as before except
     for PCT_SAND, PCT_CLAY and SOIL_COLOR: these are no longer zeroed out under
     points that are believed to be 100% glacier ("believed to be" because this
     previously zeroed out some points that ended up having some other special
     landunits, such as lake)

   - new initial conditions file for CLM4.5, irrigate=.true., f10

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts: scripts4_131001 -> scripts4_131003

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= new logic for irrigation for finidat
M       models/lnd/clm/bld/build-namelist

========= new surface datasets; distinguish finidat based on value of 'irriagte'
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

CLM testing:

  build-namelist tests:

    caldera: OK
       The following failures were expected due to new surface datasets:
          413/439 < FAIL> <Test Id: 413> <Desc: lnd_in file the same as expected for phys45>  
          418/439 < FAIL> <Test Id: 418> <Desc: lnd_in file the same as expected for phys45>  
          423/439 < FAIL> <Test Id: 423> <Desc: lnd_in file the same as expected for phys45>  
          428/439 < FAIL> <Test Id: 428> <Desc: lnd_in file the same as expected for phys45>  
          433/439 < FAIL> <Test Id: 433> <Desc: lnd_in file the same as expected for phys45>  
          438/439 < FAIL> <Test Id: 438> <Desc: lnd_in file the same as expected for phys45-crop>  


  regular tests (aux_clm):

    edison_intel (aux_clm_ys_intel & aux_clm_ys_pgi lists): OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    edison_intel: aux_clm_ys_intel list: OK
    edison_intel: aux_clm_ys_pgi list: OK

CLM tag used for the baseline comparisons: clm4_5_35

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All CLM45
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

        Not investigated carefully, but probably larger than roundoff/same climate.

        Answer changes are due to new surface datasets. This is due to fixing
        bug 1829 (PCT_SAND, PCT_CLAY and SOIL_COLOR are incorrect for some grid
        cells); it looks like this just affects answers over a small number of
        lake points (e.g., 9 lake points in an f19 run).

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_35
Originator(s):  sacks (Bill Sacks)
Date: Tue Oct  1 09:47:45 PDT 2013
One-line Summary: get CLM running on edison

Purpose of changes:

   Update scripts and Machines externals to get the CLM test suite running on
   edison; this will be our replacement for yellowstone while yellowstone is
   down.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: N/A

List any svn externals directories updated (csm_share, mct, etc.):

-scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130929
-scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130927
+scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_131001
+scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130930b

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes: 

========= Remove PEM test that should pass now; add xFails for edison
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml


CLM testing:

  NOTE: Testing was done on tag port_to_edison_02_clm4_5_34. Since then, scripts
  has been updated from scripts4_130930a to scripts4_131001. However, the only
  difference is the removal of some duplicated tests from the test list.

  regular tests (aux_clm):

    edison_intel (aux_clm_ys_intel & aux_clm_ys_pgi lists): OK
       All pass except:

               <entry testID="ERH_D.f19_g16.I1850CLM45CN.edison_intel.clm-default"               failType="FAIL" >See "ERH_D.f19_g16.I1850CLM45CN.yellowstone_pgi.clm-default</entry>
               <entry testID="SMS_D_Lm1_Mmpi-serial.CLM_USRDAT.I1PTCLM45.edison_intel.clm-USUMB" failType="SFAIL" >Can't find user datasets</entry>
               <entry testID="ERI_D.ne30_g16.ICLM45BGC.edison_intel.clm-vrtlay"                  failType="FAIL" >Seg fault while writing h1 file</entry>
               <entry testID="ERS_Ld211_D_P144x1.f10_f10.ICNCROP.edison_intel.clm-crop"          failType="FAIL" bugz="1696" >See ERS_Ld211_D_P112x1.f10_f10.ICNCROP in yellowstone intel list</entry>

       #1 and #4 have been failing on yellowstone, #2 and #3 are new failures on edison

    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    NOTE: only generate done here, because no baselines existed

    edison_intel: aux_clm_ys_intel list: OK
    edison_intel: aux_clm_ys_pgi list: OK

CLM tag used for the baseline comparisons: clm4_5_34

   NOTE: Baseline comparisons only done for frankfurt tests; no baseline
   comparisons done with component_gen_comp, because no baselines existed on
   edison.

Changes answers relative to baseline: NO
	
===============================================================
===============================================================
Tag name:  clm4_5_34
Originator(s):  erik (Erik Kluzek)
Date: Mon Sep 30 01:30:25 MDT 2013
One-line Summary: Get PTCLM working, fix a few small bugs

Purpose of changes:

Get PTCLM fully working. Allow PTCLM to work with ALL I compsets including clm4_0 compsets.
Add a new option to PTCLM from Keith Oleson --cycle_forcing to set it up to cycle over the forcing.
Another option is to build datasets in the "-mydatafiles" directory (by default under PTCLM
directory). The datasets now have creation time-stamps in them as well. Rename QIAN_tower_yrs
to -use_tower_yrs and remove QIANforcing (now chosen by compset).
scripts now has four different I1PT compsets two new ones for CLM40CN and CLM45BGC. datm
CLM_USRDAT domain file for CLM1PT forcing points to the ATM_DOMAIN_FILE/PATH. Add some new
datasets to the siteDIR from Keith Oleson. Update documenation, remove unused template dir.
Add a script to rename creation dates for map files, so you don't have to regenerate them
each day.

Fix a few small bugs. Allow clm4_5 to have suplnitro and bgc_spinup to only give a warning
rather than die. Fix a corrupted rawdata PFT file. Fix mkscripgrid.ncl for regional SCRIP
grid creation. Remove some leftover fine-mesh variables that aren't needed anymore. Remove
reference to scaled_harvest in CLM build-namelist which was removed a long time ago.

Remove a mapping file that didn't seem to be needed for clm4_0 mkmapdata (a default
didn't exist for it either). Add -usr_mapdir option to clm4_0 mksurfdata.pl which is needed
for PTCLM for clm4_0 compsets.

Requirements for tag: Update scripts and get PTCLM working

Test level of tag: regular

Bugs fixed (include bugzilla ID):
                                 1826 (allow clm4_5 and suplnitro to be ALL for bgc_spinup)
                                 1818 (two new options to PTCLM)
                                 1762 (Fix corrupted rawdata PFT file)
                                 1757 (Bug in mkscripgrid.ncl for regional/global SCRIP grid creation)
                                 1623 (Remove some leftover fine-mesh variables _a arrays)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: Allow two options to go without dying

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines, datm, and csm_share
     scripts   to scripts4_130929
     Machines  to Machines_130927
     datm      to datm8_130919
     csm_share to share3_130918

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/tools/shared/mkmapdata/mkmapdata.sh ------- Remove 10x10min_IGBPmergeICESatGIS for clm4_0
   M models/lnd/clm/tools/shared/mkmapgrids/mkscripgrid.ncl --- Fix bug 1757 for regional grid creation
   M models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl - Add usr_mapdir option

   M models/lnd/clm/bld/build-namelist - Allow missing clm_usrdat files to continue, remove scaled_harvest (long gone)
                                         allow bgc_spinup and suplnitro to coexist with warning

   M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0_tools.xml - Fix corrupted 856 raw PFT file
   M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml - Fix corrupted 856 raw PFT file, remove 1000-1004 testyrs

   M models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90 - Remove finemesh _a variables
   M models/lnd/clm/src/clm4_5/main/clmtype.F90 -------- Remove finemesh _a variables
   M models/lnd/clm/src/clm4_0/main/clmtypeInitMod.F90 - Remove finemesh _a variables
   M models/lnd/clm/src/clm4_0/main/clmtype.F90 -------- Remove finemesh _a variables

CLM testing: regular, build_namelist, tools

  build-namelist tests:

    yellowstone   yes
    frankfurt     yes

  regular tests (aux_clm):

    yellowstone_intel       yes
    yellowstone_pgi         yes
    frankfurt_intel         yes
    frankfurt_pgi           yes
    frankfurt_nag           yes

  tools testing:

    yellowstone interactive yes

CLM tag used for the baseline comparisons:  clm4_5_33

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_5_33
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date: Thu Sep 26 10:42:56 MDT 2013
One-line Summary: clean up from mistakes in previous tag

Purpose of changes: clean up time-stamps and a mistake in clm4_5_32

Requirements for tag: N/A

Test level of tag: N/A

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: N/A

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: N/A

CLM testing: N/A

CLM tag used for the baseline comparisons: N/A

Changes answers relative to baseline: N/A

===============================================================
===============================================================
Tag name:  clm4_5_32
Originator(s):  muszala (Stefan Muszala,UCAR/TSS,303-497-1320)
Date: Thu Sep 26 10:07:14 MDT 2013
One-line Summary: bug fix tag - 1798, 1810

Purpose of changes: fix bug 1798 and 1810.

http://bugs.cgd.ucar.edu/show_bug.cgi?id=1798
http://bugs.cgd.ucar.edu/show_bug.cgi?id=1810

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1798 and 1810

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

- for bug 1798
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
- for bug 1810
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_0/main/controlMod.F90

CLM testing:

  regular tests (aux_clm):

    yellowstone_intel - OK
    yellowstone_pgi - OK
    frankfurt_intel - OK
    frankfurt_pgi - OK
    frankfurt_nag - OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK

CLM tag used for the baseline comparisons:  clm4_5_31

Changes answers relative to baseline: no

===============================================================
===============================================================
Tag name:  clm4_5_31
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Wed Sep 25 10:12:47 MDT 2013
One-line Summary: fix bug 1820: incomplete conditional in CNSoyfix leads to buggy results and decomposition dependence

Purpose of changes:

   Fix bug 1820: incomplete conditional in CNSoyfix leads to buggy results and
   decomposition dependence. Fix for this is based on analysis of the original
   Agro-IBIS code.

Requirements for tag: fix bug 1820, the following tests should now pass:
             PET_P15x2_Lm25.f10_f10.ICLM45BGCDVCROP.yellowstone_intel
             PET_P15x2_Ly3.f10_f10.ICLM45BGCCROP.yellowstone_intel

Test level of tag: regular

Bugs fixed (include bugzilla ID): 
     1820: incomplete conditional in CNSoyfix leads to buggy results and decomposition dependence

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Beth Drewniak, Sam Levis

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none 

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90

========= Remove now-passing PET tests
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

CLM tag used for the baseline comparisons: clm4_5_30

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 with CROP
    - what platforms/compilers: ALL
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
       larger than roundoff, but not investigated in detail

       Note that no changes were observed in the test suite, but this is due to
       a limitation of the test suite (there are very few multi-year crop tests;
       the only global multi-year tests are the newly-passing PET tests, which
       don't have baselines)

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_30
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Tue Sep 24 13:08:01 MDT 2013
One-line Summary: fix performance bug in decomposition initialization

Purpose of changes:

Fix performance bug in decomposition initialization (bug 1771). Code mods from
Tony Craig.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1771 ( Fix for an initialization performance bug)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes:

   Improves timing of initialization for high resolution casse

Code reviewed by: tcraig

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/decompInitMod.F90
M       models/lnd/clm/src/clm4_0/main/decompInitMod.F90

CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

CLM tag used for the baseline comparisons: clm4_5_29

Changes answers relative to baseline: NO
	
===============================================================
===============================================================
Tag name:  clm4_5_29
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Tue Sep 24 10:55:42 MDT 2013
One-line Summary: fix threading in CLM4.5, and other misc fixes

Purpose of changes:
 
(Mostly) fix threading in CLM4.5. This consisted of:

(1) Rework initGridCellsMod to keep all points in a clump contiguous

(2) Add info in bounds derived type (not necessary, but this allows
for more error checking and simplifies some code)

(3) Fix which bounds are passed to reweightWrapup in initialization

(4) Get rid of syntax like foo(:) = 0, instead using explicit bounds

(5) Rework bounds declarations for subroutine array arguments, both in
caller (explicitly subset argument by bounds) and callee (use
assumed-shape array arguments rather than declaring upper bounds), and
add assertions on array sizes.

See https://wiki.ucar.edu/display/ccsm/Community+Land+Model+Developers+Guide
("Guidelines for passing array arguments to subroutines") for the new
conventions that are implemented here.

(6) Fix crop threading bug, related to nyrs (bug 1598), both in clm4.5 and clm4.0

However, note that there is still a crop threading bug (bug 1820), which will
need to be fixed in a separate tag.


Also, some unrelated changes:

(1) Fix size of a megan variable, both in clm4.5 and clm4.0.

(2) Remove some unused variables from Hydrology2Mod / SoilHydrologyMod

(3) Fix some bugs in histFileMod / histFldsMod

(4) Reorder a loop in SurfaceAlbedo to get better performance (especially with
expanded memory allocation for dynamic landunits, in an upcoming tag)


Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID):

   1598 (crop threading in clm4.0 and clm4.5)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: 

   Added f10 initial file for CLM4.5 BGCCROP, for testing purposes

Describe any substantial timing or memory changes:

   Timing is currently 5-10% worse, due to calls to shr_log_errMsg, within
   shr_assert calls. This should return to previous timings in non-debug runs
   once shr_assert calls are ifdef'ed out in non-debug runs (this requires a
   csm_share update that Sean Santos is working on).

Code reviewed by: portions reviewed by erik

List any svn externals directories updated (csm_share, mct, etc.):

   scripts4_130912 -> scripts4_130916

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Significant rework to work with multiple clumps per proc
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

========= Add info in bounds derived type
M       models/lnd/clm/src/clm4_5/main/decompMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
          - also fix crop threading bug (1598)
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90
          - also use explicit bounds instead of things like foo(:)

========= Remove some unused variables
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
          - also other bounds-related changes as above

========= Change 'bounds' to 'bounds_proc', use clump bounds for call to
          reweightWrapup, get rid of abort if running with openMP
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90

========= Get rid of syntax like foo(:), instead using explicit bounds
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90

========= Rework bounds declarations for subroutine array arguments, both in
          caller (explicitly subset argument by bounds) and callee (use
          assumed-shape array arguments rather than declaring upper bounds), and
          add assertions on array sizes
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
          - also use explicit bounds instead of things like foo(:)
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/main/dynlandMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
          - also use explicit bounds instead of things like foo(:)
M       models/lnd/clm/src/clm4_5/main/pft2colMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
          - also use explicit bounds instead of things like foo(:)
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
          - also use explicit bounds instead of things like foo(:)
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
          - also use explicit bounds instead of things like foo(:)
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
          - also remove some now-unneeded temporary arrays
          - also use explicit bounds instead of things like foo(:)
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
          - also reorder a loop to get better performance
M       models/lnd/clm/src/clm4_5/biogeophys/BandDiagonalMod.F90

========= Fix crop threading bug (1598), in both clm4.5 and clm4.0, by reworking
          where nyrs is updated
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_driver.F90

========= Add comments
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90

========= Fix size of a megan variable
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
          - also initialize rootr, as it was in clm4_5_20 and prior
M       models/lnd/clm/src/clm4_0/main/clmtypeInitMod.F90

========= Fix some hist file bugs:
            - increase max number of characters allowed for hist field names
            - when adding a field, make it work to say default='active' --
              previously, explicitly setting default='active' did the same thing
              as setting default='inactive'
            - change ptr_pft to ptr_col for a few column-level history variables
            - remove two duplicate hist_addfld calls
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
          - also add some bounds to array arguments
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90

========= Add f10 initial file for CLM45 BGCCROP, for testing
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

========= Remove some PET tests from the xFail list; note that some PET tests
          still fail due to bug 1820
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml


CLM testing:

  build-namelist tests:

    yellowstone: OK

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK   
    frankfurt_intel: OK  
    frankfurt_pgi: OK  
    frankfurt_nag: OK    

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

CLM tag used for the baseline comparisons: clm4_5_28

Changes answers relative to baseline: NO, with the following minor exceptions:

  In general, no answer changes for non-threaded runs (changes answers for
  threaded runs due to significant bug fixes!)

  Changes answers for CLM45 BGC CROP at f10 due to new initial conditions
  (instead of cold start)

===============================================================
===============================================================
Tag name:  clm4_5_28
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Fri Sep 20 21:29:39 MDT 2013
One-line Summary: fix FracH2oSfc bug

Purpose of changes: 

Fix bug 1811: FracH2oSfc is called from within a loop over all points. Sean
Swenson realized that the offending block of code is no longer needed, so we
have removed it.

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1811 (FracH2oSfc is called from within a loop
over all points)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Remove the offending (and no longer needed) block of code
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

========= Remove a now-unused variable
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90

========= Move xFail test to the right location
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml


CLM testing:

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
    yellowstone_pgi: OK

      See notes below on answer changes


CLM tag used for the baseline comparisons: clm4_5_27

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All CLM45 cases
    - what platforms/compilers: All
    - nature of change: larger than roundoff/same climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   Sean Swenson performed two 20-year runs with and without the fix. His report
   is:

   There are some differences, mainly in runoff, and it looks like at the 1%
   level mostly, with a few scattered points showing up on the significance
   plots.  Other fields like latent heat, soil moisture/temperature, or water
   table show even less differences.

   http://www.cgd.ucar.edu/staff/swensosc/public/diagnostics/test_frach2o-test_no_frach2o/setsIndex.html
	
===============================================================
===============================================================
Tag name:  clm4_5_27
Originator(s):  sacks (Bill Sacks,UCAR/CSEG,303-497-1762)
Date: Fri Sep 20 20:43:16 MDT 2013
One-line Summary: fix crop nyrs bug

Purpose of changes: Fix bug 1815 (nyrs is incorrect at the start of a crop run,
leading to incorrect GDD values for the first 20 years or so of a crop
simulation)

Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID): 
- 1815 (nyrs is incorrect at the start of a crop run, leading to incorrect GDD
values for the first 20 years or so of a crop simulation)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None (but see changes to boundary
datasets below)

List any changes to the defaults for the boundary datasets: 

   New crop initial conditions for CLM4.5 BGCCROP @ f19 - same as old dataset,
   but with restyear changed from 1 to 0

Describe any substantial timing or memory changes: None

Code reviewed by: slevis

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Don't increment nyrs on the first timestep of a startup run, so that
          nyrs is correctly 0 rather than 1 for the first year
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CNPhenologyMod.F90

========= New crop initial conditions for CLM4.5 BGCCROP @ f19 - same as old dataset,
          but with restyear changed from 1 to 0
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

========= add test that sometimes runs out of time, move test from
          yellowstone_intel to yellowstone_pgi
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

CLM testing:

  build-namelist tests:

    yellowstone: OK

  regular tests (aux_clm):

    yellowstone_intel: OK
    yellowstone_pgi: OK
    frankfurt_intel: OK
    frankfurt_pgi: OK
    frankfurt_nag: OK

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: OK
       - expected diffs in SMS_Ly1.f19_g16.ICLM45BGCCROP.yellowstone_intel
       - baselines messed up for
         ERS_Ly5.f10_f10.I20TRCRUCLM45BGC.yellowstone_intel, so comparison not
         done for that test
    yellowstone_pgi: NO BASELINES, SO COMPARISONS NOT RUN

CLM tag used for the baseline comparisons: clm4_5_27

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All crop cases (clm4.0 or clm4.5) that either
      use arbitrary initial conditions or use the clm4.5 out-of-the-box initial
      conditions for BGCCROP @ f19
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new
  climate): new climate


   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)

     Sam Levis examined a 3-year run with arbitrary initial conditions, and
     verified that crop LAI is much more realistic in the new simulation
     (previously, crop LAI was near-zero for the first few years)

===============================================================
===============================================================
Tag name:  clm4_5_26
Originator(s):  muszala (Stefan Muszala)
Date: Thu Sep 19 17:07:11 MDT 2013
One-line Summary: water balance and SMS_Ly1.f19_g16.ICLM45BGCCROP fix

Purpose of changes: 1) Fix water balance error in f09_g16 I1850CRUCLM45BGC simulation
                    2) Get all machine/compiler combinations of 
                          SMS_Ly1.f19_g16.ICLM45BGCCROP working
                       - this fix required (1) and a fix to fthresh in RtmFloodInit 
                         - new RTM tag rtm1_0_32 to go along with this
                       - PGI+frankfurt version of this test only work with 16 MPI processes

Requirements for tag: N/A

Test level of tag: regular

Bugs fixed (include bugzilla ID):1808 

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: S. Swenson, D. Lawrence

List any svn externals directories updated (csm_share, mct, etc.): rtm1_0_32 

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Index: models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
===================================================================
--- models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90   (revision 51190)
+++ models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90   (working copy)
@@ -1110,15 +1110,8 @@
        do j = 1, nlevsoi
           if(h2osoi_liq(c,j)<0._r8)then
              qflx_deficit(c) = qflx_deficit(c) - h2osoi_liq(c,j)
-             h2osoi_liq(c,j) = 0._r8
           endif
        enddo
-       !reduce qcharge if necessary
-       !ideally, I can set qflx_deficit as a local variable, but it is helpful
-       !to diagnose the problem associated with the solver for the richards' equation.
-       if(qflx_deficit(c)>0._r8)then
-          qcharge(c) = qcharge(c) - qflx_deficit(c)/dtime
-       endif
     enddo
 
     end associate 
@@ -1892,9 +1885,12 @@
 
     do fc = 1, num_hydrologyc
        c = filter_hydrologyc(fc)
-       xs1(c)          = max(max(h2osoi_liq(c,1),0._r8)-max(0._r8,(pondmx+watsat(c,1)*dzmm(c,1)-h2osoi_ice(c,1))),0._r8)
-       h2osoi_liq(c,1) = min(max(0._r8,pondmx+watsat(c,1)*dzmm(c,1)-h2osoi_ice(c,1)), h2osoi_liq(c,1))
 
+       !scs: watmin addition to fix water balance errors
+       xs1(c)          = max(max(h2osoi_liq(c,1)-watmin,0._r8)- &
+          max(0._r8,(pondmx+watsat(c,1)*dzmm(c,1)-h2osoi_ice(c,1)-watmin)),0._r8)
+       h2osoi_liq(c,1) = h2osoi_liq(c,1) - xs1(c)
+
        if (urbpoi(clandunit(c))) then
           qflx_rsub_sat(c)     = xs1(c) / dtime
        else

CLM testing:

- general note: for clm45 compsets-both clm and cpl history files change

- specfic testing for these bug fixes:

1) Water balance fix-ran a clone of run from Dave Lawrence:
   -- create_newcase -compset I1850CRUCLM45BGC -res f09_g16 -mach yellowstone -case /glade/u/home/dlawren/expts/clm4.5/clm45bgc_1deg4519_1850spin_bd
   -- this ran for over 25 years with no water balance errors.

2) SMS_Ly1.f19_g16.ICLM45BGCCROP

PASS  SMS_Ly1.f19_g16.ICLM45BGCCROP.yellowstone_intel.clm-reduceOutput.115612
PASS  SMS_Ly1.f19_g16.ICLM45BGCCROP.yellowstone_pgi.clm-reduceOutput.115522

PASS  SMS_Ly1.f19_g16.ICLM45BGCCROP.frankfurt_intel.clm-reduceOutput.115217
PASS  SMS_Ly1_Mmpich.f19_g16.ICLM45BGCCROP.frankfurt_nag.clm-reduceOutput.120824
PASS  SMS_Ly1.f19_g16.ICLM45BGCCROP.frankfurt_pgi.clm-reduceOutput.016  -- only with 16 MPI tasks

3) To make sure the RTM refactor did not create any BFB changes, I ran SMS_D.f19_g16.ICLM45BGCCROP.yellowstone_intel 
   with rtm1_0_31 and rivrtm/branch_tags/bcf_tags/bcf_02_rtm1_0_31.
     - With flood_mode='NULL'   - Coupler and land history files were BFB.
     - With flood_mode='ACTIVE' - Coupler, rtm and land history files were BFB.

  build-namelist tests: N/A

  regular tests (aux_clm):

    yellowstone_intel - OK - changes in cpl. hist files expected
    yellowstone_pgi - OK - changes in cpl. hist files expected
    frankfurt_intel - OK - changes in cpl. hist files expected
    frankfurt_pgi - OK - changes in cpl. hist files expected
    frankfurt_nag - OK - changes in cpl. hist files expected

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel - OK - changes in clm fields expected.

CLM tag used for the baseline comparisons:  clm4_5_25

Changes answers relative to baseline: Yes.  For CLM45 compsets.  All changes are from the SoilHydrology mods
as the RTM refactor and fthresh fix are BFB.

Coupler history fields that change:

l2x_Sl_avsdr, l2x_Sl_anidr, l2x_Sl_avsdf, l2x_Sl_anidf, l2x_Sl_tref, l2x_Sl_qref, 
l2x_Sl_t, l2x_Sl_fv, l2x_Sl_ram1, l2x_Sl_snowh, l2x_Sl_u10, l2x_Fall_swnet, 
l2x_Fall_taux, l2x_Fall_tauy, l2x_Fall_lat, l2x_Fall_sen, l2x_Fall_lwup, 
l2x_Fall_evap, l2x_Fall_flxdst1, l2x_Fall_flxdst2, l2x_Fall_flxdst3, l2x_Fall_flxdst4, 
l2x_Flrl_rofl, l2x_Fall_voc001, l2x_Fall_voc002, l2x_Fall_voc003, l2x_Fall_voc004, 
l2x_Fall_voc005, l2x_Fall_voc006, l2x_Fall_voc007, l2x_Fall_voc008, x2l_Flrr_volr, 
r2x_Forr_rofl, r2x_Forr_rofi, r2x_Flrr_volr, x2r_Flrl_rofl

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45 compsets
    - what platforms/compilers: All

===============================================================
===============================================================
Tag name:  clm4_5_25
Originator(s):  erik (Erik Kluzek)
Date: Fri Sep 13 13:49:45 MDT 2013
One-line Summary: Bring in Tony's changes to kick sno all the way up to the coupler layer, makes all 
                  CESM components more similar to each other

Purpose of changes:
   Bring in Tony's cplupa branch (cplupa_n06_clm4_5_24) to trunk. This branch moves sno
   fields all the way to the top coupler layer rather than being inside of CLM. This makes all
   CESM components more similar to each other.

   There was also some small fixes on the side that allow some more tests to work.

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1789 (fix NoVSNoNI test)
                                  1788 (fix US-UMB test)
                                  1779 (fix RTM multi-instance)
                                  1777 (fix RTM branch cases)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Add new CPP token to CLM USE_ESMF_METADATA (with no direct machanism to use)
   We hate CPP tokens (but had to let this go, only needed by ESMF development folks)

Describe any changes made to the namelist: drv namelist changes, no changes to CLM namelist

List any changes to the defaults for the boundary datasets: CLM_USRDAT fsurdat files different directory for clm4_0 than clm4_5
     remove missing ne16np4 fpftdyn file

Describe any substantial timing or memory changes: 

Code reviewed by: self, tcraig

List any svn externals directories updated (csm_share, mct, etc.):, scripts, drv, cism, rtm, csm_share, data and stub models

    scripts             to scripts4_130912
    drv                 to drvseq4_3_03
    datm                to datm8_130424
    socn/sice/sglc/swav to stubs1_4_02
    rtm                 to rtm1_0_31
    cism                to cism1_130905
    csm_share           to share3_130906

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M    models/lnd/clm/bld/unit_testers/build-namelist_test.pl ------------ Remove ne16 20thC test
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml ---- Remove missing ne16 fpftdyn file
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Different directory for
            clm4_0/clm4_5 surface datasets

  M    models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - Field names change
  M    models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 ------ Remove "sno" and "s" fields
  M    models/lnd/clm/src/clm4_5/main/clm_glclnd.F90 ---- Remove rofi/rofl
  M    models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 ---- Remove "sno" and "s" fields, add USE_ESMF_METADATA #ifdef
  M    models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 ----- Remove "sno" and "s" fields, add USE_ESMF_METADATA #ifdef
  M    models/lnd/clm/src/clm4_0/main/clm_glclnd.F90 ---- Remove rofi/rofl

CLM testing: regular

  build-namelist tests:

    bluefire  yes
    frankfurt yes

  regular tests (aux_clm):

    yellowstone_intel yes
    yellowstone_pgi   yes
    frankfurt_intel   yes
    frankfurt_pgi     yes
    frankfurt_nag     yes

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel partial (not completed before tag made)
    yellowstone_pgi   partial (not completed before tag made)

CLM tag used for the baseline comparisons:  clm4_5_24

Changes answers relative to baseline: None (bit-for-bit)

    Although my "I compset" testing showed no changes, fully coupled changes
    do show differences. Coupler namelists also change.

===============================================================
===============================================================
Tag name:  clm4_5_24
Originator(s):  sacks (sacks)
Date:  Tue Sep  3 21:36:13 MDT 2013
One-line Summary: update externals to cesm1_3_beta02 or later

Purpose of changes:

Update externals to cesm1_3_beta02 or later


Requirements for tag:

Test level of tag: regular

Bugs fixed (include bugzilla ID): 1722 (Test failure with VIC and more_vertlayers)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Not investigated

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   scripts    : scripts4_130816 -> scripts4_130830a
   Machines   : Machines_130529 -> Machines_130830
   drv        : drvseq4_2_33 -> drvseq4_2_35
   cism       : cism1_130502 -> cism1_130624
   csm_share  : share3_130528 -> share3_130723
   timing     : timing_130417 -> timing_130506
   mct        : compiler_fixes_n01_MCT_2.8.3 -> compiler_fixes_n03_MCT_2.8.3
   mapping    : mapping_130509 -> mapping_130716
   gen_domain : mapping_130509/gen_domain_files -> mapping_130716/gen_domain_files

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Remove trailing whitespace
M       .ChangeLog_template


Index: models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
===================================================================
--- models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml	(revision 50759)
+++ models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml	(working copy)
@@ -51,17 +51,14 @@
          <yellowstone>
             <INTEL>
                <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                         failType="FAIL"  bugz="1696" >use before define in history.  runs with frankfurt_pgi, yellowstone_intel and yellowstone_pgi</entry>
-               <entry testId="ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay"       failType="RUN"   bugz="1722" >floating point exception.  problem with VIC combined with vertical layers</entry>
                <entry testId="PET.f10_f10.ICLM45BGC.yellowstone_intel"                    failType="TFAIL">once threading fixed, this should pass</entry>
                <entry testId="PET_PT.f10_f10.ICLM45BGC.yellowstone_intel"                 failType="TFAIL">once threading fixed, this should pass</entry>
-               <entry testId="ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay"      failType="FAIL" >core dumps in ref1.  Problems with vertical layers.  Run without clm-vrtlay and clm-default and it runs</entry>
                <entry testId="SSP.f19_g16.I1850CLM45BGC.yellowstone_intel.clm-default"    failType="BFAIL" bugz="1728" >starting in clm4_5_07--The cpl.hi.nc file is not being copied on a generate like it should.</entry>
                <entry testId="ERS_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-rootlit"      failType="SFAIL" >Cannot turn clm4me mode on -- without clm4_5 physics! problem in scripts4_130809b </entry>
             </INTEL>
             <PGI>
-               <entry testId="ERB.ne30_g16.I_1948-2004.yellowstone_pgi"                   failType="FAIL" >Problem with scripts and testId string length.  This passes with a long testId</entry>
+               <entry testId="ERB.ne30_g16.I4804.yellowstone_pgi"                         failType="FAIL" >Problem with scripts and testId string length.  This passes with a long testId</entry>
                <entry testId="ERH_D.f19_g16.I1850CLM45CN.yellowstone_pgi.clm-default"     failType="FAIL" >Restart not BFB.  Runs as ERH_D.f19_g16.I1850CLM45CN.yellowstone_pgi</entry>
-               <entry testId="ERS.f09_g16.ICLM45VIC.yellowstone_pgi.clm-vrtlay"           failType="RUN" bugz="1722" >floating point exception.  problem with VIC combined with vertical layers</entry>
                <entry testId="PET.f10_f10.I1850CLM45BGC.yellowstone_pgi.clm-default"      failType="TFAIL" >once threading fixed, this should pass</entry>
                <entry testId="PET_PT_D.f10_f10.I1850CLM45BGC.yellowstone_pgi.clm-ciso"    failType="TFAIL" >once threading fixed, this should pass</entry>
                <entry testId="PET_PT_D.f19_g16.ICLM45BGCDVCROP.yellowstone_pgi.clm-crop"  failType="TFAIL" >once threading fixed, this should pass</entry>
@@ -78,7 +75,7 @@
                <entry testId="SMS_Ly1.f19_g16.ICLM45BGCCROP.frankfurt_nag" failType="RUN"   >Water balance errors followed by "negative conc. in ch4tran", then tries "-10^-12 < smin_nh4 < 0. resetting to zero.", then it exits at approximately 9 months.  This same test passes with yellowstone_intel and frankfurt_intel</entry>
             </NAG>
             <PGI>
-               <entry testId="ERS_D.f19_g16.IGRCP26CN.frankfurt_pgi"                     failType="CFAIL" >CMake 2.8.6 or higher is required.  You are running version 2.6.4</entry>
+               <entry testId="ERS_D.f19_g16.IGRCP26CN.frankfurt_pgi"                     failType="CFAIL" >Problem with cism build</entry>
                <entry testId="ERI_D.f19_g16.ICLM45BGC.frankfurt_pgi"                     failType="FAIL"  >Fails after reading clmforc.Li_2012_hdm_0.5x0.5_AVHRR_simyr1850-2010_c130401.nc.  This same test passes with yellowstone_intel, yellowstone_pgi, frankfurt_intel and frankfurt_nag</entry>
                <entry testId="ERI.f19_g16.ICLM45BGC.frankfurt_pgi"                       failType="FAIL"  >Fails after reading clmforc.Li_2012_hdm_0.5x0.5_AVHRR_simyr1850-2010_c130401.nc.  This same test passes with yellowstone_intel, yellowstone_pgi, frankfurt_intel and frankfurt_nag</entry>
                <entry testId="SMS_Ld5.f19_g16.IRCP45CLM45BGC.frankfurt_pgi.clm-decStart" failType="FAIL"  >Fails after reading clmforc.Li_2012_hdm_0.5x0.5_AVHRR_simyr1850-2010_c130401.nc.  This same test passes with yellowstone_intel</entry>


CLM testing:

  build-namelist tests:

    yellowstone: YES
       All PASS or xFAIL

  regular tests (aux_clm):

    yellowstone_intel: YES
    yellowstone_pgi: YES
    frankfurt_intel: YES
    frankfurt_pgi: YES
    frankfurt_nag: YES

    All PASS or xFAIL        

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel: YES      
       All PASS except for the following newly-passing tests (for
       which these failures are unsurprising):

       BFAIL2 ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_23.clm2.h0 (baseline history file does not exist)
       BFAIL2 ERI_D.ne30_g16.ICLM45BGC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_23.clm2.h1 (baseline history file does not exist)
       FAIL   ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_23.clm2.h0 
       FAIL   ERS_D.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_23.clm2.h1 

    yellowstone_pgi: YES
       Some answer changes (presumably due to compiler change)

CLM tag used for the baseline comparisons: clm4_5_23
   Note: renamed baselines for frankfurt nag because test names have changed

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

        compsets using cism change answers for g2x gields

        many tests change answers with pgi, both on yellowstone &
        frankfurt, presumably due to new compiler

        nature of change not investigated


   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_5_23
Originator(s):  muszala (Stefan Muszala)
Date: Thu Aug 22 09:42:43 MDT 2013
One-line Summary: refactor to allow CH4 params. to be read from netcdf file and clean up clm4_5_20

Purpose of changes: 
   The second of two tags that brings in parameters that are read from netcdf file (ch4 parameters).  Please 
   see the ChangeLog entry for clm4_5_20.

   - Bring in ch4 parameters
   - Combine fconsts file and fpftcon file.  New file name is paramfile (clm_params.c130821.nc)
   - Refactor so that types, subroutine names and type instances have the names params in them (instead of consts)
   - Remove many ch4 namelist vars. since they are now read from the param file
   - Add new namelist called use_aereoxid_prog to control old aereoxid namelist

   A bulk of this work was completed by Rajendra Paudel.

Requirements for tag: N/A

Test level of tag: regular and build_namelist

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: remove many optional ch4 namelists.
   add new namelist valled use_aereoxid_prog.

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, dlawren, Rajendra Paudel

List any svn externals directories updated (csm_share, mct, etc.): scripts4_130730 -> scripts4_130816

List all files eliminated:

- these were renamed 
models/lnd/clm/src/clm4_5/biogeochem/CNSharedConstsMod.F90
models/lnd/clm/src/clm4_5/main/readConstantsMod.F90

List all files added and what they do:

- renamed 
models/lnd/clm/src/clm4_5/biogeochem/CNSharedParamsMod.F90
models/lnd/clm/src/clm4_5/main/readParamsMod.F90

List all existing files that have been modified, and describe the changes:

- refactor to remove old namelist vars. for ch4 and add new functionality
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

- put in ch4 parameters and refactor const->params names
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeBGCMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeCNMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
M       models/lnd/clm/src/clm4_5/main/pftvarcon.F90
M       models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90

CLM testing:

  build-namelist tests:

    yellowstone: OK.  Some changes to phys45 and phys45-crop.  Should be OK in next tag.

  regular tests (aux_clm): A few nlcomp differences that will go away in the next tag.  
     Other than a few expected failures due to new scripts entries, all OK.

    yellowstone_intel  OK        
    yellowstone_pgi    OK        
    frankfurt_intel    OK  
    frankfurt_pgi      OK     
    frankfurt_nag      OK 

  history file comparison with component_gen_comp and summarize_cprnc_diffs:

    yellowstone_intel  OK      
    yellowstone_pgi    OK

CLM tag used for the baseline comparisons:  clm4_5_22

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_22
Originator(s):  muszala (Stefan Muszala)
Date: Tue Jul 30 15:22:51 MDT 2013
One-line Summary: aux_clm testlist reorganization

Purpose of changes: 

    Reorganize all aux_clm tests and fix new failing tests.  As part of
    this, bring in a change from Maoyi for VIC w/vertical layers.
    A few bug fixes to get new tests working. 
    Why did we do this?

       1) better balance between frankfurt, yellowstone and various compilers
		 2) faster turn around time for development
       3) make sure current science functionality is properly tested
       4) removed outdated / irrelevant tests

    Other points:

       1) Introduce regular and short test list.  Testing now can consist of:

		    a) regular (must be run before handing off a tag to SEs and must be run
		       before committing a tag)
			 b) build_namelist (if namelists and/or build_system changed))
		    c) tools (only if tools are modified and no CLM source is modified)
			 d) short (for use during development and in rare cases where only a small
			       change with known behavior is added ... eg. a minor bug fix)
			 e) doc (no source testing required)

       2) PET tests will fail until threading is fixed in CLM

Requirements for tag: N/A

Test level of tag: regular.  ran tests with old testlists to double check any new mods.

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: add no-vert:no-nitrif option to configure

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self.  Extensive discussion regaring list content with Lawrence,
   Sacks, Kluzek and Andre.

List any svn externals directories updated (csm_share, mct, etc.): new scripts

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: 

- add no-vert:no-nitrif option
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/config_files/config_definition.xml
- Update expected failures
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
- Maoyi VIC+vertical layers fix 
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
- Update change log template
M       .ChangeLog_template
- Change intent out to inout for ciso_flux
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
- Remove crop_prog check to get rid of unassociated pointer with NAG
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
- Fix bounds type error (should be intent=in)
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90

Machines testing ran on:  (Tests in priority order)

  Note:

     1) All PET tests will fail until openMP is fixed.
     2) All IG compsets fail with the NAG compiler due to non-compliant f77 code.
     3) If one combination fails, it's backed up with a another combination that passes.
          There are one or two exceptions to this.

   I) aux_clm tests with old testlists:

    yellowstone/aux_clm     intel - OK  
    yellowstone/aux_clm     pgi   - OK
    frankfurt/aux_clm       intel - OK 
    frankfurt/aux_clm       pgi   - OK 
    frankfurt/aux_clm       nag   - OK  

  CESM history file comparison:

    yellowstone/aux_clm     intel - OK

   II) aux_clm tests with new testlists:

    yellowstone/aux_clm     intel - OK
    yellowstone/aux_clm     pgi   - OK    
    frankfurt/aux_clm       intel - OK   
    frankfurt/aux_clm       pgi   - OK    
    frankfurt/aux_clm       nag   - OK   

   III) aux_clm_short tests with new testlists:

    yellowstone/aux_clm     intel - OK
    yellowstone/aux_clm     pgi   - OK    
    frankfurt/aux_clm       intel - OK   
    frankfurt/aux_clm       pgi   - OK    
    frankfurt/aux_clm       nag   - OK   

  CESM history file comparison: Not run since no baseline comparisons.

CLM tag used for the baseline comparison tests if applicable: CLM4_5_21 with old testlist.  Only ran generate with new testlists.

Changes answers relative to baseline: Only for VIC with vertical layers.

===============================================================
===============================================================
Tag name:  clm4_5_21
Originator(s):  muszala (Stefan Muszala)
Date: Wed Jul 24 14:23:19 MDT 2013
One-line Summary: ifdef and bounds refactor

Purpose of changes:  
- Almost all implementation by Mvertens
- Refactor ifdef use so that a majority are now in controlMod.F90.  This is the 
first step to removing them competely.
- Introduction of bounds_type and clump_type
- Refactor interfaces to support bounds_type and clump_type
- Bug fix from Sacks

Also: Changed layout of landunit, column and pft-level arrays: Previously, all
points for a given grid cell were grouped together. Now, all points for a given
landunit type are grouped together. This improves performance of loops over
filters, because it leads to more memory locality – this will be especially true
when we add more 0-weight points to arrays for the purpose of dynamic
landunits. For example, if a processor has 2 grid cells and there are 3 landunit
types:

Old layout in memory: (G1L1, G1L2, G1L3, G2L1, G2L2, G2L3)
New layout in memory: (G1L1, G2L1, G1L2, G2L2, G1L3, G2L3)


Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: mvertens, sacks, self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated:

D       models/lnd/clm/src/util_share/decompInitMod.F90
D       models/lnd/clm/src/util_share/ndepStreamMod.F90
D       models/lnd/clm/src/util_share/decompMod.F90
D       models/lnd/clm/src/clm4_5/main/initParametersMod.F90

List all files added and what they do:

A  +    models/lnd/clm/src/clm4_5/main/decompInitMod.F90
A  +    models/lnd/clm/src/clm4_5/main/ndepStreamMod.F90
A  +    models/lnd/clm/src/clm4_5/main/decompMod.F90
A  +    models/lnd/clm/src/clm4_0/main/decompInitMod.F90
A  +    models/lnd/clm/src/clm4_0/main/ndepStreamMod.F90
A  +    models/lnd/clm/src/clm4_0/main/decompMod.F90

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/doc/ChangeLog
M       models/lnd/clm/doc/ChangeSum
M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/initch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/MEGANFactorsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4RestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNWoodProductsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVLightMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
M       models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEcosystemDynIniMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeBGCMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeCNMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSharedConstsMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/dynlandMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/pft2colMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/clm_varsur.F90
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
M       models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
M       models/lnd/clm/src/clm4_5/main/pftvarcon.F90
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90
M       models/lnd/clm/src/clm4_5/main/readConstantsMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/QSatMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FracWetMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BandDiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
M       models/lnd/clm/src/clm4_0/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_0/main/controlMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_0/main/clm_driver.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   Not run

  CESM test lists:

    yellowstone/aux_clm     intel       BFB
    yellowstone/aux_clm     pgi         BFB 
    frankfurt/aux_clm       intel       BFB 
    frankfurt/aux_clm       pgi         BFB 
    frankfurt/aux_clm       nag         BFB 

  CESM history file comparison:

    yellowstone/aux_clm     intel       BFB

CLM tag used for the baseline comparison tests if applicable: clm4_5_20

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_20
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Sat Jul 20 10:54:43 MDT 2013
One-line Summary: refactor to allow CN and BGC params. to be read from netcdf file

Purpose of changes:

The first of two tags that allows all parameters to be read from a netcdf file to
provide sensitivity analysis capability, to increase modularity of code and to
remove "magic numbers" from code.  This tag introduces a new namelist variable
"fconsts" which points to a netcdf file of CN and BGC parameters.  In a future
tag, this netcdf file will be combined with CH4 parameters and PFT parameters.

Values are read in readConstantsMod.F90.  Each module that requires
a parameter provides a read subroutine.  That read subroutine is called 
from readConstantsMod.F90 and places parameters into a private type 
for that module.  For example, CNDecompMod.F90 provides readCNDecompConsts which 
is called from readConstantsMod and populates the type instance CNConstShareInst.
CHConstShareInst is then used in CNDecompMod as:

+ sminn_to_denit_decomp_cascade_vr(c,j,k) = -CNDecompConstInst%dnp * pmnf_decomp_cascade(c,j,k

which replaces:

- dnp = 0.01_r8
...
- sminn_to_denit_decomp_cascade_vr(c,j,k) = -dnp * pmnf_decomp_cascade(c,j,k)

A bulk of this work was completed by Rajendra Paudel.

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: new namelist variable called fconsts.

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, D. Lawrence, R. Paudel.  (for design: discussion w/ mvertens, sacks, kluzek)

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated:

Renamed
D       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
D       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90

List all files added and what they do:

Rename of Deleted files
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeBGCMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeCNMod.F90

Module to read parameters shared by multiple modules
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSharedConstsMod.F90

Module that reads shared an private parameters
A  +    models/lnd/clm/src/clm4_5/main/readConstantsMod.F90

List all existing files that have been modified, and describe the changes:

Add fconsts namelist variable
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

Add in functionality to read parameters off of netcdf file
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.  These FAILs should pass next round:

  418/444 < FAIL> <Test Id: 418> <Desc: lnd_in file the same as expected for phys45>  
  423/444 < FAIL> <Test Id: 423> <Desc: lnd_in file the same as expected for phys45>  
  428/444 < FAIL> <Test Id: 428> <Desc: lnd_in file the same as expected for phys45>  
  433/444 < FAIL> <Test Id: 433> <Desc: lnd_in file the same as expected for phys45>  
  438/444 < FAIL> <Test Id: 438> <Desc: lnd_in file the same as expected for phys45>  
  443/444 < FAIL> <Test Id: 443> <Desc: lnd_in file the same as expected for phys45-crop> 

  CESM test lists:

CLM45 compsets have failures for nlcomp due to the introduction of fconsts namelist variable.
For example:

FAIL ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.test20Pgi.nlcomp
FAIL ERH_D.f19_g16.I1850CLM45CN.yellowstone_intel.GC.test20Intel.nlcomp

    yellowstone/aux_clm     intel    OK   
    yellowstone/aux_clm     pgi      OK  
    frankfurt/aux_clm       intel    OK   
    frankfurt/aux_clm       pgi      OK 
    frankfurt/aux_clm       nag      OK

  CLM history file comparison:

    yellowstone/aux_clm     intel    OK

CLM tag used for the baseline comparison tests if applicable: clm4_5_19

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_19
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Wed Jul 17 14:29:32 MDT 2013
One-line Summary: fix setting of bd in iniTimeConst

Purpose of changes:

In iniTimeConst, bd (bulk density) was being set incorrectly, so that,
for a given processor, the same value was being put in all (c,j)
locations. In addition to being incorrect, this meant that results
differed depending on processor count. This tag fixes this problem.

This only affects CLM4.5 BGC runs, because the bd array is only used
in CNNitrifDenitrifMod.F90. (However, as a side note: This array
SHOULD be used in DUSTMod and initSLakeMod, which currently recompute
bd.)


Requirements for tag:

Test level of tag: 

Bugs fixed (include bugzilla ID):
   1736 (bd set incorrectly in iniTimeConst, leads to results that depend on processor count)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: mvertens

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90


Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   NO

  CESM test lists:

    yellowstone/aux_clm     intel       yes ***
       All PASS or xFAIL
    yellowstone/aux_clm     pgi         yes
       All PASS
    frankfurt/aux_clm       intel       yes **
       All PASS
    frankfurt/aux_clm       pgi         yes
       All PASS
    frankfurt/aux_clm       nag         yes
       All PASS

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel       yes **
       All PASS or BFAIL1 except CLM45BGC comparisons

  test_driver.sh tools testing:

    yellowstone interactive:    no
    frankfurt interactive:      no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_5_18

Changes answers relative to baseline: YES

IF tag changes answers relative to baseline comparison the
following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All CLM45BGC
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
        Larger than roundoff; still to be determined if this gives new
        climate (Dave Lawrence will run a simulation to determine this)

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: (Not yet done)

   URL for LMWG diagnostics output used to validate new climate: (Not
   yet done)
	
===============================================================
===============================================================
Tag name:  clm4_5_18
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Tue Jul  9 10:07:08 MDT 2013
One-line Summary: rework urban indexing

Purpose of changes:

Change urban derived type and local variables in UrbanMod subroutines to go
lbl:ubl rather than 1:num_urbanl. There are a few reasons for this: (1) this
works better when the urban filter can change (with dynamic landunits), (2) more
consistency with the rest of the CLM code, (3) no longer have to remember
whether a given variable should be indexed by fl or l. The downside is that it
leads to slightly greater memory use.

Along with doing this, I also changed a few loops in UrbanMod to be simpler
(which is allowed with the above change).

Also, no longer run over 0-weight urban columns - we don't have to do this any
more now that I have reworked some loops in UrbanMod.


Requirements for tag:

Test level of tag: standard

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: 

   Increase in memory use by UrbanMod, which should lead to a small overall
   memory increase - though this doesn't show up in most memcomp tests, showing
   that the increase is pretty small.

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Major changes to indexing: local variables now dimensioned lbl:ubl
          rather than 1:num_urbanl. Also, remove canyon_hwr, wtroad_perv,
          ht_roof and wtlunit_roof from urban_params, because there are
          duplicate variables in clmtype.
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90

========= No longer make 0-weight urban columns active
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90

========= Remove unused wind_hgt_canyon from clmtype
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90

========= Minor changes for new UrbanMod interfaces
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90



Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   NO

  CESM test lists:

    yellowstone/aux_clm     intel       yes ***
       All PASS or xFAIL
    yellowstone/aux_clm     pgi         yes **
       All PASS
    frankfurt/aux_clm       intel       yes **
       All PASS
    frankfurt/aux_clm       pgi         yes
       All PASS, except the following, which appears to be a system problem:
          FAIL  ERI_D.f19_g16.ICLM45.frankfurt_pgi.GC.214513 
       I will rerun the above test once the system problem is resolved
    frankfurt/aux_clm       nag         yes
       All PASS

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel       yes **
       All PASS or BFAIL, except the following expected failures:

       *** Expected failures because of failures in the base tests
       FAIL   ERS.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_17.clm2.h0 
       FAIL   ERS.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS_Ld211_D_P112x1.f10_f10.ICNCROP.yellowstone_intel.clm-crop.compare_hist.clm4_5_17.clm2.h0 (no history file in test case)

       *** Expected differences in cols1d_active and pfts1d_active, as well as
           FILLDIFFs, due to making 0-weight urban columns no longer active
       FAIL   ERI_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS_D.f10_f10.ICLM45BGCNoVS.yellowstone_intel.clm-rootlit.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-ch4_set2_ciso.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-ch4_set3_pftroot.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel.clm-glcMEC.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.clm-default.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.compare_hist.clm4_5_17.clm2.h1 
       FAIL   ERS_Ld3_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel.clm-default.compare_hist.clm4_5_17.clm2.h1 
       FAIL   SSP.f19_g16.I1850CLM45BGC.yellowstone_intel.clm-default.compare_hist.clm4_5_17.clm2.h1 
       

  test_driver.sh tools testing:

    yellowstone interactive:    no
    frankfurt interactive:      no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_5_17

Changes answers relative to baseline: NO, except for inconsequential changes in
1-d hist files (cols1d_active, pfts1d_active, and some FILLDIFFS, due to making
0-weight urban columns no longer active)
	
===============================================================
===============================================================
Tag name:  clm4_5_17
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Wed Jul  3 10:54:03 MDT 2013
One-line Summary: misc cleanup and bug fixes

Purpose of changes: 

Bit-for-bit cleanup following from tag clm4_5_11. The biggest change is the
removal of maxpatch, npatch_* and some related variables from clm_varpar (these
were maintenance headaches).


Requirements for tag:

Test level of tag: standard + tools

Bugs fixed (include bugzilla ID):

     1747 (need 1x1_tropicAtl datasets)
     1754 (mksurfdata_map problem making CH4 parameters for ne240 CLM4.5 surface dataset)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New 1x1_tropicAtl datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Remove maxpatch, npatch_* and a few related variables that are no
          longer needed (these variables were a maintenance headache)
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90

========= Rework code to not require the variables that were removed from clm_varpar
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90

========= Remove unneeded 'use' statements
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90

========= Allow roundoff-level errors (needed to make ne240 dataset)
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkCH4inversionMod.F90

========= Fix generation of 1x1_tropicAtl datasets
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl

========= New 1x1_tropicAtl datasets
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml



Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   yes
     All PASS or xFAIL

  CESM test lists:

    yellowstone/aux_clm     intel       yes ***
       All PASS or xFAIL
    yellowstone/aux_clm     pgi         yes **
       All PASS
    frankfurt/aux_clm       intel       yes **
       All PASS
    frankfurt/aux_clm       pgi         yes
       All PASS
    frankfurt/aux_clm       nag         yes
       All PASS

    Additional tests (with comparison to clm4_5_16, including
    component_gen_comp; for the FARM test, used a sandbox corresponding to
    cesm1_3_alpha01a for components other than CLM):

       ERS_Ly5.f10_f10.I20TRCRUCLM45BGC.yellowstone_intel.clm-monthly_noinitial
       SMS.T42_T42.FARM95C4.yellowstone_intel.clm-daily 
          [the clm-daily nl dir just sets hist_nhtfrq = -24]
    

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel       yes **
       All PASS or BFAIL1, except irrelevant failures from this failing test:
       FAIL   ERS.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_16.clm2.h0 
       FAIL   ERS.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_16.clm2.h1 

  test_driver.sh tools testing:

    yellowstone interactive:    yes
       All PASS except expected failures:

       027 smiS4 TSMscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional .............\c
        rc=6 FAIL
       028 bliS4 TBLscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional .............\c
        rc=4 FAIL


    frankfurt interactive:      no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_5_16

Changes answers relative to baseline: NO

===============================================================
===============================================================
Tag name:  clm4_5_16
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Tue Jul  2 09:22:41 MDT 2013
One-line Summary: only run filters over 'active' points

Purpose of changes:

In preparation for dynamic landunits, we only want to run most filters over
'active' points. This required changing landunit and column-level filters to
only run over active points. In addition, I changed the nourbanp filter to only
run over active points (in contrast to other pft-level filters, this filter had
previously operated over non-active points, too).

In addition, this tag includes some related changes, most of which were required
to get the code to run correctly in light of the above changes. Some of these
changes - in particular, the changes to reweightMod, filterMod, and the use of
the new filter_inactive_and_active in some places - effectively undid that
general filter change for select landunits (urban) or subroutine calls.


Requirements for tag:

Test level of tag: standard

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: changes to filterMod reviewed by erik, mvertens,
                  stefan, dave lawrence & ben andre; other changes
                  only by self

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Change main filters to just run over active points; add new filters
          that include inactive as well as active points; refactor subroutines
          to avoid code duplication now that we have two groups of filters
M       models/lnd/clm/src/clm4_5/main/filterMod.F90

========= Change filter to just run over active points
M       models/lnd/clm/src/clm4_5/main/pft2colMod.F90

========= Change urban columns & pfts to be active whenever their landunit is
          active (to avoid making urban code messier)
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90

========= Get rid of wt > 0 checks, which are no longer appropriate in the code
          (checks of the active flags should be done instead - and these have
          been folded in to the filters)
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90

========= Make a loop more consistent in its use of a filter; remove undesirable
          pactive check (because decomp_vertprofiles now sometimes operates on
          inactive as well as active points)
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90

========= Use filters that include inactive points in call to
          decomp_vertprofiles (this is needed because of the unusual placement
          of this routine in the driver sequence)
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

========= Use filters that include inactive points in calls to SurfaceAlbedo and
          UrbanAlbedo. For SurfaceAlbedo, this is necessary to avoid floating
          point exceptions in transient cases; for UrbanAlbedo, this probably
          isn't necessary now, but likely will be needed when we have dynamic
          landunits, for the same reason that we need it for SurfaceAlbedo.
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90

========= Remove pactive check in setting up vegsol / novegsol filters - as far
          as I can tell, this check is now unnecessary, and it led to the odd
          result that novegsol included all inactive points (e.g., even inactive
          istsoil points). Also add some comments and remove some obsolete
          comments.
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90

========= Remove pactive checks that are unnecessary now that the nourbanp
          definition has changed
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90

========= Only check errsoi_col on active columns (to prevent NaN-related
          problems in crop runs)
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90

========= Add comments
M       models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
M       models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90




Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes
     All PASS or xFAIL

  CESM test lists:

    yellowstone/aux_clm     intel       yes
       All PASS or xFail

       Also ran the following, which PASSes (also PASSes cpl & clm
       hist comparisons, except for expected failures in .h1 file
       comparisons, as below):
       ERS_Ly5.f10_f10.I20TRCRUCLM45BGC.yellowstone_intel.clm-monthly_noinitial

    yellowstone/aux_clm     pgi         yes
       All PASS

    frankfurt/aux_clm       intel       yes
       All PASS
    frankfurt/aux_clm       pgi         yes
       All PASS
    frankfurt/aux_clm       nag         yes
       All PASS

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel       yes
       All PASS, except:
       *** Irrelevant, because this test fails
       FAIL   ERS.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_15.clm2.h0 
       FAIL   ERS.f09_g16.ICLM45VIC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_15.clm2.h1 

       *** Expected diffs in h1 files: differences in cols1d_active,
           pfts1d_active, and related FILLDIFFs in a number of variables
       FAIL   ERI_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-vrtlay.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS_D.f10_f10.ICLM45BGCNoVS.yellowstone_intel.clm-rootlit.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-ch4_set2_ciso.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS_D.f10_f10.ICLM45BGC.yellowstone_intel.clm-ch4_set3_pftroot.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel.clm-glcMEC.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.clm-default.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS.f19_g16.ICRUCLM45BGCCROP.yellowstone_intel.clm-default.compare_hist.clm4_5_15.clm2.h1 
       FAIL   ERS_Ld3_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel.clm-default.compare_hist.clm4_5_15.clm2.h1 
       FAIL   SSP.f19_g16.I1850CLM45BGC.yellowstone_intel.clm-default.compare_hist.clm4_5_15.clm2.h1 

  test_driver.sh tools testing:

    yellowstone interactive:    no
    frankfurt interactive:      no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_5_15

Changes answers relative to baseline: NO, except for changes in fill
patterns & active flags in 1-d hist files, as noted above

===============================================================
===============================================================
Tag name:  clm4_5_15
Originator(s):  muszala (Stefan Muszala)
Date: Mon Jul  1 10:44:05 MDT 2013
One-line Summary: complete associate refactor for pointers in clm4_5 source

Purpose of changes:  Refactor all clm4_5 source so that pointers assignements are
   placed in associate blocks at the start of a subroutine.  This allows us to 
   get rid of pointer declarations, makes the code easier to modify, makes the
   code more robust and sets us up for future interface refactorings.  The refactor is
   explained in more detail in models/lnd/clm/tools/clm4_5/refactorTools/README.

-    real(r8), pointer :: fdry(:)           ! fraction of foliage that is green and dry [-] (new)
-    fdry => pps%fdry
+   associate(& 
+   fdry               => pps%fdry             & ! Output: [real(r8) (:)]  fraction of foliage that is green and dry [-] (new)
+   )
 ...
-  end subroutine FracWet
+    end associate 
+   end subroutine FracWet

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes:  BGC compsets will see increases
   in memory (highwater) use.  This can be seen in memcomp portions of testing with
   one specific example.  Something to keep track of.

      FAIL  ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.clm-default.GC.4515preIntel.memcomp.clm4_5_14 
         - highwater goes from 166 MB in clm4_5_14 to 236 MB in clm4_5_15
      FAIL  ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.rtm-rtmOff.GC.4515preIntel.memcomp.clm4_5_14 
      FAIL  ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.rtm-rtmOnFloodOnEffvelOff.GC.4515preIntel.memcomp.clm4_5_14 
      FAIL  ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.rtm-rtmOnFloodOnEffvelOn.GC.4515preIntel.memcomp.clm4_5_14 
      FAIL  ERS.f19_g16.I1850CLM45BGC.yellowstone_intel.rtm-rtmOnIceOn.GC.4515preIntel.memcomp.clm4_5_14 
      FAIL  ERS.f19_g16_r01.I1850CLM45BGC.yellowstone_intel.rtm-rtmOnFloodOnEffvelOff.GC.4515preIntel.memcomp.clm4_5_14 

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: 

A       models/lnd/clm/tools/clm4_5/refactorTools/associate/refactor_new.pl
A       models/lnd/clm/tools/clm4_5/refactorTools/associate/README

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/initch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
M       models/lnd/clm/src/clm4_5/biogeochem/MEGANFactorsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVLightMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FracWetMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)
  build-namelist unit tester:   OK

  CESM test lists:

    yellowstone/aux_clm     intel       OK
    yellowstone/aux_clm     pgi         OK
    frankfurt/aux_clm       intel       OK
    frankfurt/aux_clm       pgi         OK
    frankfurt/aux_clm       nag         OK

  CESM history file comparison:

    yellowstone/aux_clm                 OK

CLM tag used for the baseline comparison tests if applicable: clm4_5_14

Changes answers relative to baseline: NO

===============================================================
===============================================================
Tag name:  clm4_5_14
Originator(s):  muszala (Stefan Muszala)
Date:  Thu Jun 20 07:51:54 MDT 2013
One-line Summary: preparation for associate refactor in clm4_5_15

Purpose of changes:
         Most work by mvertens.
         - prep. work for modifying associate
         - refactor subgridAveMod.F90 to accept upper and lower bounds
         - remove duplicate pointer uses
         - remove inicPerpMod.F90 and is_perpetual use

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: 

D       models/lnd/clm/src/clm4_5/main/inicPerpMod.F90

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/main/pft2colMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:  OK.  Fixed generate numbering.

  CESM test lists:

    yellowstone/aux_clm     intel  OK
    yellowstone/aux_clm     pgi    OK
    frankfurt/aux_clm       intel  OK
    frankfurt/aux_clm       pgi    OK
    frankfurt/aux_clm       nag    OK

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel  OK

CLM tag used for the baseline comparison tests if applicable: clm4_5_13

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_13
Originator(s):  andre (Benjamin Andre,LAWRENCE BERKELEY NATIONAL LABORATORY,510-486-4617)
Date: Fri Jun 14 15:01:33 MDT 2013
One-line Summary: hydrology reordering from Jinyun Tang

Purpose of changes:
    reordering the operations of the hydrology. hydrology with and without drainage

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Jinyun Tang, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

    M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90 - splits out leaching
    M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90 - add icefrac and qflx_deficit
    M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90 - update calls to CNEcosystemDyn
    M       models/lnd/clm/src/clm4_5/main/clm_driver.F90 - update calls to CNEcosystemDyn and Hydrology
    M       models/lnd/clm/src/clm4_5/main/clmtype.F90 - add icefrac and qflx_deficit
    M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90 - splits out drainage calculations
    M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90 - calculate water table before subsurface drainage, icefraction, water deficit

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes/no ***

  CESM test lists:

    yellowstone/aux_clm     intel       yes OK
    yellowstone/aux_clm     pgi         yes OK
    frankfurt/aux_clm       intel       no
    frankfurt/aux_clm       pgi         no
    frankfurt/aux_clm       nag         no

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

  test_driver.sh tools testing: N/A

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_5_12

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: all clm 4.5 with hydrology
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): new climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)

	casename: ERS_D.f19_g16.ICLM45 - an 11-year base line simulation
	was created with the standard trunk version, then a comparison run
	was created with the version including hydrology re-ordering.  The
	comparisons were evaluated by looking at the relative differences
	for hydrologic variables as QDRAI, EFLX_LH_TOT, QRUNOFF.  Large
	relative differences were found for these variables in a few grid
	cells, but their absolute magnitudes in those grid cells were
	small.  Tests were also conducted with VIC hydrology on, the
	change in results were similar as that when VIC hydrology was off.

   URL for LMWG diagnostics output used to validate new climate: N/A

===============================================================
===============================================================
Tag name:  clm4_5_12
Originator(s):  muszala (Stefan Muszala)
Date: Thu Jun 13 09:41:56 MDT 2013
One-line Summary: NoVS test, NAG mods and remove TWS from restart file

Purpose of changes: 
     
   -Fix (from jedwards) for ERS_D.f10_f10.ICLM45BGCNoVS.yellowstone_intel.clm-rootlit test
      Previous tags using ICLM45BGCNoVS are suspect!
   -Since I tested this with NAG there are also port mods to CLM that I had to put in.
   -Remove TWS from BiogeophysRestMod.F90 per sacks request.  OK'd by swenson.
   -Update to rtm1_0_29

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): 1746

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, NoVs error: Charlie Koven and jedwards

List any svn externals directories updated (csm_share, mct, etc.): rtm1_0_28 -> rtm1_0_29

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

-NoVS fix and NAG mods
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
-Nag mods
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
-remove TWS from restart
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
-update to rtm1_0_29
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/aux_clm     intel OK 
    yellowstone/aux_clm     pgi   OK  
    frankfurt/aux_clm       intel OK    
    frankfurt/aux_clm       pgi   OK
    frankfurt/aux_clm       nag   OK

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel  OK.  The only differences are in ERS_D.f10_f10.ICLM45BGCNoVS.yellowstone_intel.clm-rootlit.
         These are expected due to the fix in ch4Mod.F90.

CLM tag used for the baseline comparison tests if applicable: clm4_5_11

Changes answers relative to baseline: Only for ERS_D.f10_f10.ICLM45BGCNoVS.yellowstone_intel.clm-rootlit.  Previous
   versions of this compset should be considered suspect.  Fields that change (119 in total) for this test are:

   ACTUAL_IMMOB, CH4STRESS_SAT, CH4STRESS_UNSAT, CH4_AERE_DEPTH_SAT, CH4_AERE_DEPTH_UNSAT, CH4_EBUL_DEPTH_SAT,
   CH4_OXID_DEPTH_SAT, CH4_OXID_DEPTH_UNSAT, CH4_PROD_DEPTH_SAT, CH4_SURF_AERE_SAT, CH4_SURF_AERE_UNSAT,
   CH4_SURF_DIFF_SAT, CH4_SURF_DIFF_UNSAT, CH4_SURF_EBUL_SAT, CH4_TRAN_DEPTH_SAT, CH4_TRAN_DEPTH_UNSAT,
   COL_CTRUNC, COL_NTRUNC, CONC_CH4_SAT, CONC_CH4_UNSAT, CONC_O2_SAT, CONC_O2_UNSAT, CWDC, CWDC_LOSS,
   CWDC_TO_LITR2C, CWDC_TO_LITR3C, CWDN, CWDN_TO_LITR2N, CWDN_TO_LITR3N, DENIT, ER, FCH4, FCH4TOCO2,
   FUELC, F_DENIT, F_N2O_DENIT, F_N2O_NIT, F_NIT, GROSS_NMIN, HR, LAND_UPTAKE, LITHR, LITR1C, LITR1C_TO_SOIL1C,
   LITR1N, LITR1N_TO_SOIL1N, LITR1_HR, LITR2C, LITR2C_TO_SOIL1C, LITR2N, LITR2N_TO_SOIL1N, LITR2_HR, LITR3C,
   LITR3C_TO_SOIL2C, LITR3N, LITR3N_TO_SOIL2N, LITR3_HR, LITTERC, LITTERC_HR, LITTERC_LOSS, NBP, NEE, NEM, NEP,
   NET_NMIN, O2STRESS_SAT, O2_AERE_DEPTH_SAT, O2_DECOMP_DEPTH_SAT, O2_DECOMP_DEPTH_UNSAT, POTENTIAL_IMMOB,
   POT_F_DENIT, POT_F_NIT, SMINN_TO_SOIL1N_L1, SMINN_TO_SOIL1N_L2, SMINN_TO_SOIL1N_S2, SMINN_TO_SOIL1N_S3,
   SMINN_TO_SOIL2N_L3, SMINN_TO_SOIL2N_S1, SMINN_TO_SOIL3N_S1, SMINN_TO_SOIL3N_S2, SMIN_NH4, SMIN_NO3,
   SMIN_NO3_LEACHED, SOIL1C, SOIL1C_TO_SOIL2C, SOIL1C_TO_SOIL3C, SOIL1N, SOIL1N_TO_SOIL2N, SOIL1N_TO_SOIL3N,
   SOIL1_HR_S2, SOIL1_HR_S3, SOIL2C, SOIL2C_TO_SOIL1C, SOIL2C_TO_SOIL3C, SOIL2N, SOIL2N_TO_SOIL1N,
   SOIL2N_TO_SOIL3N, SOIL2_HR_S1, SOIL2_HR_S3, SOIL3C, SOIL3C_TO_SOIL1C, SOIL3N, SOIL3N_TO_SOIL1N, SOIL3_HR,
   SOILC, SOILC_HR, SOILC_LOSS, SOMHR, SR, TOTCOLC, TOTCOLCH4, TOTCOLN, TOTECOSYSC, TOTECOSYSN, TOTLITC, TOTLITN,
   TOTSOMC, TOTSOMN

===============================================================
===============================================================
Tag name:  clm4_5_11
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Tue Jun 11 20:54:11 MDT 2013
One-line Summary: Change pct_pft and related surface dataset variables to be % of landunit

Purpose of changes:

Main purpose is to change pct_pft and related surface dataset variables to be %
of landunit rather than % of grid cell. This is needed to support transient PFTs
with dynamic landunits. This required substantial changes in both mksurfdata_map
and CLM. This also required generating all new surface datasets.

A very related change is the separation of PCT_PFT in the surface dataset into
PCT_NAT_PFT and PCT_CFT; in addition to these two variables, there are also new
PCT_NATVEG (% of natural veg landunit on the gridcell) and PCT_CROP (% of crop
landunit on the gridcell) variables. Note that the separation of PCT_PFT into
natural vs crop was only done on the surface dataset -- raw datasets to
mksurfdata_map have not been changed, nor have most of the CLM data structures.

In addition, this tag includes the following:

(1) Renumbered landunits to (a) add separate landunit numbers for each urban
landunit, (b) do away with the obsolete shallow lake, and (c) group together
similar landunits

(2) In any urban landunit, allocate space for ALL urban columns. Previously,
there were some urban landunits with only one of the two road types. This change
simplifies the code and only adds a relatively small number of columns in memory.

(3) Modified interpinic, partly to have compatibility with (1), partly to fix
urban bug (allowed by (1)), and partly to fix an unrelated bug

(4) All new initial conditions for CLM4.5, to have compatibility with (1) and (2)

(5) Check _OPENMP in initialization rather than driver

(6) Tighten error check in reweightMod: checkWeights. It seems like this error
check can be stricter with the new pct_pft formulation


Requirements for tag: Standard test + tools

Test level of tag: standard

Bugs fixed (include bugzilla ID):
     1621 (normalization issue in ne120np4 datasets and in CLM)
     1675 (need to relax error tolerance in reweightMod: weightsOkay) -- note
          that I have actually TIGHTENED the tolerance, but that seems to be
          okay now
     1702- PARTIAL FIX (clm4.5 interpinic doesn't work right for urban)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

    1747 - need 1x1_tropicAtl surface dataset and pftdyn dataset for clm4_5_11 and later

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: Changes to fsurdat and finidat for
CLM4.5, as described below

List any changes to the defaults for the boundary datasets: 

   For CLM4.5, all surface datasets and initial conditions files have been
   recreated. For surface datasets, changes result in only roundoff-level
   differences in the pct_* fields. For initial conditions, the new initial
   conditions are effectively the same as the old, but bugs in interpinic
   prevent them from being exactly the same.

Describe any substantial timing or memory changes: 

   Slight (probably < 1%) increase in memory for all CLM4.5 cases, due to
   allocation of ALL urban columns wherever there is an urban landunit

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): NONE

List all files eliminated:

========= Remove unneeded modules (iulog moved to fileutils.F90)
D       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/clm_varpar.F90
D       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/clm_varctl.F90

========= Now differs for clm4_0 and clm4_5, so copied to those two places
D       models/lnd/clm/src/util_share/clm_varsur.F90

========= Replaced with new file for testing interpinic
D       models/lnd/clm/tools/clm4_5/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c121113.nc


List all files added and what they do:

========= New file for testing interpinic
A       models/lnd/clm/tools/clm4_5/interpinic/clmi.I2000CLM45BGC.2000-01-01.10x15_simyr2000_c130607.nc

========= Add tests
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkpftMod.F90

========= Moved from util_share
A       models/lnd/clm/src/clm4_0/main/clm_varsur.F90

========= Moved from util_share, and modified extensively to support new surface
          dataset format
A       models/lnd/clm/src/clm4_5/main/clm_varsur.F90

========= Add module to do some initialization that doesn't fit well elsewhere,
          and/or can't go elsewhere because of circular dependencies
A       models/lnd/clm/src/clm4_5/main/initParametersMod.F90


List all existing files that have been modified, and describe the changes:

========= Change pct_pft and related variables on surface dataset to be % of
          landunit; this requires significant changes for mkpftMod, mkglcmecMod
          and the error checks / corrections done in mksurfdat.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkutilsMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/fileutils.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkfileMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarpar.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Srcfiles
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpftMod.F90

========= Add tests
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkutilsMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Srcfiles
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mksurfdata_map.F90

========= Update crop landunit numbering, fix urban bug for column-level
          variables, take code out of a conditional to prevent floating point
          exceptions
M       models/lnd/clm/tools/clm4_5/interpinic/src/interpinic.F90

========= New files for testing interpinic
M       models/lnd/clm/tools/clm4_5/interpinic/interpinic.runoptions

========= Change landunit and column numbering; delete udenstype
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90

========= Add variables for determining number of natural & crop PFTs
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90

========= Major changes to handle pct_pft being specified as % of landunit
          rather than % of gridcell
M       models/lnd/clm/src/clm4_5/main/surfrdMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridMod.F90
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

========= Initialize new surface variables, check _OPENMP here instead of driver
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90

========= Update comments, remove udenstype
M       models/lnd/clm/src/clm4_5/main/clmtype.F90

========= Change 'use' statements, use ltype instead of udenstype, fix
          initialization for 0-weight columns
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90

========= Add some consistency checks (moved here from clmtypeInitMod), change others
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90

========= Change 'use' statements; use urbpoi rather than isturb; remove
          references to 'istslak'
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/dynlandMod.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
          -- also, remove udenstype, and move some consistency checks elsewhere
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/restFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
          -- also, move _OPENMP check to initialization
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
M       models/lnd/clm/src/clm4_5/main/inicPerpMod.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90

========= Tighten tolerance for error check
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90

========= Use 'crop_prog' rather than the CROP CPP def
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90

========= New surface datasets and initial conditions
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

========= Change environment variable in component_gen_comp command to something universal
M       .ChangeLog_template

========= Restore a failing test (see bug 1658)
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml



Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

     All PASS or xFail except for the following expected baseline failures:
     418/444 < FAIL> <Test Id: 418> <Desc: lnd_in file the same as expected for phys45>  
     423/444 < FAIL> <Test Id: 423> <Desc: lnd_in file the same as expected for phys45>  
     428/444 < FAIL> <Test Id: 428> <Desc: lnd_in file the same as expected for phys45>  
     433/444 < FAIL> <Test Id: 433> <Desc: lnd_in file the same as expected for phys45>  
     438/444 < FAIL> <Test Id: 438> <Desc: lnd_in file the same as expected for phys45>  
     443/444 < FAIL> <Test Id: 443> <Desc: lnd_in file the same as expected for phys45-crop>  


  CESM test lists:

    yellowstone/aux_clm     intel       yes
       Tests themselves: All PASS or xFail, except
       ERB.ne30_g16.I_1948-2004.yellowstone_intel, which I have re-added to the
       xFail list (see bugz 1658)
       
       Comparisons: Some nlcomp and compare_hist failures, as expected

    yellowstone/aux_clm     pgi         yes
       All PASS or xFail except for some nlcomp & compare_hist failures (expected)

    frankfurt/aux_clm       intel       yes
       All PASS or xFail except for some nlcomp & compare_hist failures (expected)

    frankfurt/aux_clm       pgi         NO

    frankfurt/aux_clm       nag         yes
       All PASS or xFail except for nlcomp failures (expected)

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $CESMDATAROOT/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel       yes

       Some compare_hist failures for CLM4.5 tests, as expected

  test_driver.sh tools testing:

    yellowstone interactive:    yes
       All PASS except for expected baseline failures:
       012 blg54 TBLtools.sh clm4_5 mksurfdata_map tools__s namelist ...................................rc=7 FAIL
       016 blh54 TBLtools.sh clm4_5 interpinic tools__ds runoptions ....................................rc=7 FAIL
       020 bli24 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds rc=7 FAIL
       022 bli53 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__o ....rc=7 FAIL
       024 bli54 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__ds ...rc=7 FAIL
       026 bli57 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__do ...rc=7 FAIL
       032 bliT4 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp24_2000^tools_rc=7 FAIL

       and expected failures:
       027 smiS4 TSMscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional .............rc=6 FAIL
       028 bliS4 TBLscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional .............rc=4 FAIL


    frankfurt interactive:      NO

  yellowstone/PTCLM:            NO

CLM tag used for the baseline comparison tests if applicable: clm4_5_10

Changes answers relative to baseline: YES

IF tag changes answers relative to baseline comparison the
following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: Changes in all CLM4.5 configurations. See below
      for details
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate):
      Mostly roundoff, but some larger than roundoff -- see below for details.

      Changes are limited to CLM4.5. Where the below notes refer to "all
      configurations", this is really limited to CLM4.5 configurations.

      For all configurations, there are roundoff-level changes due to
      roundoff-level differences in subgrid weights. These changes can quickly
      grow to greater than roundoff (which I believe is due to nonlinear
      feedbacks with snow variables), but as described below, I have verified
      that the root cause of differences is this roundoff-level change.

      For cases that use initial conditions, where these initial conditions were
      previously interpinic'ed, there are greater-than-roundoff level changes
      due to various bugs and limitations of interpinic (for example, some
      fields, like tsai, are skipped). I took pains to ensure that, for cases
      using original (non-interpinic'ed) initial conditions in clm4_5_10 and
      prior, the new initial conditions are nearly identical to the old (but not
      entirely identical, due to bug 1702 - see comment 2); this applies to most
      f09 initial conditions. However, this was not practical for cases that
      used interpinic'ed files; this applies to f19, ne30 and hcru initial
      conditions, as well as f09 BGCDV initial conditions. So for this latter
      set of cases, there can be large differences from clm4_5_10, especially at
      the start of the simulation.

      There are also greater than roundoff-level changes for some glc_mec
      virtual columns, because we now use information on topo_glc_mec whenever
      we can.

      There are also greater than roundoff-level changes in subgrid weights in
      virtual (0-weight) glc_mec and crop landunits, now that we no longer use
      arbitrary subgrid weights there; I don't think this will affect anything
      important, though.

      Some tests that exhibited larger-than-usual changes from baseline, in cpl
      hist and/or clm hist files, were the following (ignoring changes that can
      be explained by the above notes):
      
      ERS_Lm3.f19_g16.IGRCP60CLM45CN.yellowstone_intel
      ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel.clm-glcMEC
      ERS_D.f10_f10.ICLM45BGCNoVS.yellowstone_intel.clm-rootlit
      ERS_Ld3_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel.clm-default

      From these results, it seems that large changes may occur more often in
      glc_mec runs, even above and beyond the virtual column changes that are
      expected, as noted above.

      For the four above tests, I verified that differences were attributable to
      the roundoff-level changes in subgrid weights, using the procedure
      documented below.


   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

      In order to confirm that answers only differed by roundoff, I ran 7
      additional tests (these tests all had nl_dirs, but that was not central to
      these tests, so I'm not listing them here):

          SMS_Lm1.f19_g16.I_1850_CLM45_BGC
          SMS_Ly2.T31_g37.IG1850CLM45CN
          SMS_Ly5.T31_g37.I20TRCRUCLM45BGC
          SMS_Ly5.T31_g37.ICLM45BGCDV
          SMS_Ly5.T31_g37.I_2000_CLM45_BGC
          SMS_Ly5.f10_f10.ICLM45BGCDVCROP
          SMS_Ly5.f10_f10.I_2000_CLM45_BGC_CROP

      Each test was done as follows:

      (1) Created baselines from clm4_5_04

      (2) Ran tests from a branch (allocate_all_urban_cols), where all I changed
      from the baseline was (a) wherever we have an urban landunit, create ALL
      urban landunits, and (b) for f19, change finidat files to use a new,
      interpinic'ed file based on the original. Confirmed that this was bfb with
      (1) except for (a) 1-d history files (now have extra urban columns), and
      (b) any CLM4.5 test that uses initial conditions, since interpinic is
      currently broken for urban.

      Side-note: I actually confirmed bfb behavior for the full yellowstone
      aux_clm test suite, in addition to the above 7 tests

      This extra branch was necessary because I cannot compare 1-d history files
      directly between my main branch and the trunk, because of the extra urban
      columns present in the new code.


      (3) Ran these 7 tests from my main branch, off of clm4_5_04, comparing
      with (2). For this comparison, I only confirmed that the subgrid weights
      were the same within roundoff (up to about 1e-12 differences for the
      transient case; smaller for other cases). Note that greater than
      roundoff-level changes are seen in many other fields, presumably because
      small differences in subgrid pft weights can cause differences in how
      variables are averaged from pft to column. This, in turn, can lead to
      larger changes due to nonlinearities in the system (e.g., snow). The
      following steps were taken to confirm that other differences between my
      branch and the trunk were only due to these small differences in subgrid
      weights.

      That is, I am confirming that:
      (a) the only differences in the branch are subgrid weights
      (b) these subgrid weights only differ by roundoff


      (4) Reran (2), but with extra code to write out subgrid weights (including
      writing these weights at every time step for pftdyn) -- from branch
      allocate_all_urban_cols_writeWeights

      (5) Reran (3), but with extra code to read the subgrid weights written in
      (4). Confirmed that, with this one-off, my branch was bfb with (4).


===============================================================
===============================================================
Tag name:  clm4_5_10
Originator(s):  muszala (Stefan Muszala)
Date: Mon Jun 10 13:10:31 MDT 2013
One-line Summary: refactor clmtype

Purpose of changes: Refactor clmtype so that there is only one level of indirection.

     call hist_addfld1d (fname='SNOOCFRCL', units='W/m^2', &
          avgflag='A', long_name='surface forcing of OC in snow (land) ', &
-         ptr_pft=clm3%g%l%c%p%pef%sfc_frc_oc, set_urb=spval)
+         ptr_pft=pef%sfc_frc_oc, set_urb=spval)

There is a README (with more detailed information) and a script to help with future merges in:

  models/lnd/clm/tools/clm4_5/refactorTools/clmType/{README & renameClmType.pl}

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do:

- script and README for refactoring clmType
A       models/lnd/clm/tools/clm4_5/refactorTools
A       models/lnd/clm/tools/clm4_5/refactorTools/associate
A       models/lnd/clm/tools/clm4_5/refactorTools/clmType
A       models/lnd/clm/tools/clm4_5/refactorTools/clmType/renameClmType.pl
A       models/lnd/clm/tools/clm4_5/refactorTools/clmType/README

List all existing files that have been modified, and describe the changes:

- major refactor in these to flatten clmtype
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90

- change derived type access to match those of clmtype
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNGRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/initch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4RestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNWoodProductsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVLightMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEcosystemDynIniMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/dynlandMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/pft2colMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
M       models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
M       models/lnd/clm/src/clm4_5/main/inicPerpMod.F90
M       models/lnd/clm/src/clm4_5/main/reweightMod.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/FracWetMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SLakeRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/aux_clm     intel    OK    
    yellowstone/aux_clm     pgi      OK
    frankfurt/aux_clm       intel    OK
    frankfurt/aux_clm       pgi      OK
    frankfurt/aux_clm       nag      OK

  CESM history file comparison:

    yellowstone/aux_clm     intel       

CLM tag used for the baseline comparison tests if applicable: clm4_5_09

Changes answers relative to baseline: No.  Everything in this refactor should be BFB.

===============================================================
===============================================================
Tag name:  clm4_5_09
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Jun  4 15:59:07 MDT 2013
One-line Summary: volr and vic fix, update mct and rtm

Purpose of changes: add volr area correction, minor vic fix from maoyi, update mct and
                    rtm externals

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, swenson

List any svn externals directories updated (csm_share, mct, etc.):
-models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_27
+models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_28

-models/utils/mct                https://github.com/MCSclimate/MCT/tags/MCT_2.8.3
+models/utils/mct                https://github.com/quantheory/MCT/tags/compiler_fixes_n01_MCT_2.8.3

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

- fix for VIC hydrology
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
- volr area correction
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
- mct and rtm update
M       SVN_EXTERNAL_DIRECTORIES
- clean up
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK

  CESM test lists:

    yellowstone/aux_clm     intel  OK
    yellowstone/aux_clm     pgi    OK
    frankfurt/aux_clm       intel  OK     
    frankfurt/aux_clm       pgi    OK
    frankfurt/aux_clm       nag    OK

CLM tag used for the baseline comparison tests if applicable: clm4_5_08

Changes answers relative to baseline: only for VIC compsets.  VOLR diagnostic changes.

===============================================================
===============================================================
Tag name:  clm4_5_08
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Mon Jun  3 13:29:30 MDT 2013
One-line Summary: port for NAG compiler

Purpose of changes: Bring in Sean Santos mods, port clm4_5 and test with the NAG compiler on Frankfurt.

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): 1721 - Jim Edwards fixed problem in PIO

Known bugs (include bugzilla ID): 1722 - Error in some VIC tests starting in clm4_5_07
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, Santos

List any svn externals directories updated (csm_share, mct, etc.): PIO - update to pio1_7_2

List all files eliminated: 

D       models/lnd/clm/src/util_share/nanMod.F90

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/unit_testers/xFail/expectedFail.pm
M       models/lnd/clm/src/util_share/clm_time_manager.F90
M       models/lnd/clm/src/util_share/accumulMod.F90
M       models/lnd/clm/src/util_share/ndepStreamMod.F90
M       models/lnd/clm/src/util_share/ncdio_pio.F90
M       models/lnd/clm/src/util_share/spmdMod.F90
M       models/lnd/clm/src/util_share/domainMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
M       models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_5/main/subgridMod.F90
M       models/lnd/clm/src/clm4_5/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/pftvarcon.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CropRestMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/STATICEcosysDynMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CNAllocationMod.F90
M       models/lnd/clm/src/clm4_0/biogeochem/CNDVEstablishmentMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_glclnd.F90
M       models/lnd/clm/src/clm4_0/main/subgridMod.F90
M       models/lnd/clm/src/clm4_0/main/accFldsMod.F90
M       models/lnd/clm/src/clm4_0/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_0/main/pftvarcon.F90
M       models/lnd/clm/src/clm4_0/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_0/main/histFileMod.F90
M       models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90
M       models/lnd/clm/src/clm4_0/biogeophys/SNICARMod.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:            - OK.

    yellowstone/aux_clm     intel        - OK.
    yellowstone/aux_clm     pgi          - OK.
	    One BFAIL for hcru_hcru which should pass next time around.  Bug fixed when upgrading to pio1_7_2.
		 BFAIL ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_pgi.GC.08testPgi.compare_hist.clm4_5_07
    frankfurt/aux_clm       intel        - OK.
    frankfurt/aux_clm       pgi          - OK.
    frankfurt/aux_clm       nag          - OK.  No baselines to compare against.

CLM tag used for the baseline comparison tests if applicable: clm4_5_07

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_07
Originator(s):  erik (Erik Kluzek)
Date: Fri May 31 02:49:45 MDT 2013
One-line Summary: New spinup files for CLM45 AND RTM, work on PTCLM, turn drydep off by default, update externals

Purpose of changes:

    Bring in new spinup finidat files (f09_g16@1850 for SP and BGC). interpinic to 2deg, hcru_hcru and ne30.
    New spinup finidat files for BGCCROP and BGCDV (f19 and f09 respectively)
    New spinup finidat files for 2000 (f09_g16 for SP and BGC)
    Update RTM to bring in finidat_rtm files for either 1850 or 2000.
    Update scripts, Machines, pio
    scripts includes update for CLM40CRU hybrid startup
    Turn drydep namelist off by default
    Do a lot of work on getting PTCLM working and tools working for single-point.

Requirements for tag:
    New spinup files, fix bugs: 1708, 1700

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1715 (rmdups.ncl fails for no-overlap case)
                                 1714 (mkscripgrid.ncl doesn't calculate corners correctly.)
                                 1708 (Need Initial conditions for RTM)
                                 1706 (VIC tests fail)
                                 1700 (Memory leak in MPI layer on yellowstone)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: drydep namelist now OFF by default

List any changes to the defaults for the boundary datasets: New initial conditions
          Native initial conditions for f09 for:
             I1850CLM45SP, I1850CLM45BGC, ICLM45SP, ICLM45BGC
          Interpinic for:
             I1850CLM45 & I1850CLM45BGC: f19, hcru_hcru, ne30
             ICLM45BGCCROP @ f19
             ICLM45BGCDB   @ f09

    ALSO NOTE THAT NOW RTM HAS INITIAL CONDITIONS FOR R05 -- SO RIVERFLOW CHANGES 
    FOR BOTH CLM45 AND CLM40

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): many
   csm_share, pio, scripts, Machines, RTM, cprnc, mapping
      

    scripts   to scripts4_130529 (update PTCLM, send simyr to RTM, new IC for CLM40CRUCN)
    csm_share to share3_130528
    rtm       to rtm1_0_27       (Set startup initial condition files by -simyr flag)
    Machines  to Machines_130529 (Set hcru_hcru PE-layout, and PE-layout on yellowstone for f09 I cases)
    pio       to pio1_7_1
    cprnc     to cprnc_130425
    mapping   to mapping_130509

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

    M  models/lnd/clm/test/tools/TBLCFGtools.sh --- Correctly point to TSMCFGtools rather than TSMtools.sh.

    M  models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl - Add -usr_mapdir option

    M  models/lnd/clm/tools/shared/mkmapdata/rmdups.ncl ------ Exit early if n_s==0
    M  models/lnd/clm/tools/shared/mkmapdata/mkmapdata.sh ---- Skip if file already exists, give 
          directory for rmdups.ncl
    M  models/lnd/clm/tools/shared/mkmapdata/mknoocnmap.pl --- Don't hide NCL output
    M  models/lnd/clm/tools/shared/mkmapgrids/mkscripgrid.ncl  Explicitly calculate corners

    M  models/lnd/clm/bld/build-namelist - Set drydep to off by default, check crop setting for finidat files

    M  models/lnd/clm/bld/clm.buildnml.csh - Add back logic in about ignoring IC year or date

    M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml - New initial conditions for:
          Native initial conditions for f09 for:
             I1850CLM45SP, I1850CLM45BGC, ICLM45SP, ICLM45BGC
          Interpinic for:
             I1850CLM45SP & I1850CLM45BGC: f19, hcru_hcru, ne30
             ICLM45BGCCROP @ f19
             ICLM45BGCDB   @ f09
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Use surfdata_map rather than surfdata
          for CLM_USRDAT_NAME fsurdat files

    M  models/lnd/clm/bld/namelist_files/use_cases/stdurbpt_pd.xml - Remove setting of dtime, adjust hist output

      More work on readme files...

    M  README
    M  models/lnd/clm/doc/IMPORTANT_NOTES
    M  models/lnd/clm/doc/Quickstart.GUIDE
    M  models/lnd/clm/doc/Quickstart.userdatasets

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/aux_clm     intel       yes
    yellowstone/aux_clm     pgi         yes
    frankfurt/aux_clm       intel       yes
    frankfurt/aux_clm       pgi         yes

  CESM history file comparison:
  (ccsm_utils/Tools/component_gen_comp -compare $oldtag -generate $newtag -testid $testid -baselineroot $GLDCSEG/ccsm_baselines/ -model clm2)

    yellowstone/aux_clm     intel       yes

  test_driver.sh tools testing:

    yellowstone interactive:    yes
    frankfurt interactive:      yes

  yellowstone/PTCLM:            yes!

CLM tag used for the baseline comparison tests if applicable: clm4_5_06

Changes answers relative to baseline:  Yes -- due to new initial condition files
     for I1850CLM45SP and I1850CLM45BGC      @ f09, f19, hcru, ne30
         ICLM45SP     and ICLM45BGC          @ f09
         ICLM45BGCCROP @ f19 and ICLM45BGCDB @ f09
     and ICLM40CRUCN   @ f09

   AND new initial conditions for RTM for ALL R05 grids

   And turning drydep namelist off in the driver causes answers to appear to be different
   when comparing coupler history files.

===============================================================
===============================================================
Tag name:  clm4_5_06
Originator(s):  erik (Erik Kluzek)
Date: Wed May 15 13:52:43 MDT 2013
One-line Summary: A few small bug fixes, more updates to README files

Purpose of changes:
   More work on README files and documentation.
   Fix from Danica/Bill for transient simulations.
   Fix from Zack for Lake output variables
   Another multi-instance script fix.
   Fix tropixAtl pftdyn filename.
   Remove models/lnd/clm/bld/config_query as doesn't work with new CESM scripts.

Requirements for tag:
   Requirements: Fix bug: 1697, 1691, 1675, fix tropicAtl fpftdyn file, minimal testing on frankfurt

Test level of tag: critical

Bugs fixed (include bugzilla ID):
                                 1675  (need to relax error tolerance in reweightMod: weightsOkay)
                                 1691  (Scripts issue for multi-instance for CLM/RTM)
                                 1697  (ZLAKE and DZLAKE are NOT set)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Fix 1x1_tropicAtl fpftdyn file

Describe any substantial timing or memory changes: None

Code reviewed by: self, sacks (transient fix), dlawren/subin (lake fix), jedwards (multi-instance scripts)

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: testing namelist files for old CLM standalone

   D   models/lnd/clm/bld/config_query --- no longer works with new CESM scripts

   D   models/lnd/clm/test/tools/nl_files/nl_ch4_set2_ciso
   D   models/lnd/clm/test/tools/nl_files/nl_ch4_set3_pftroot
   D   models/lnd/clm/test/tools/nl_files/nl_rootlit
   D   models/lnd/clm/test/tools/nl_files/nl_ciso
   D   models/lnd/clm/test/tools/nl_files/nl_anoxia_wtsat
   D   models/lnd/clm/test/tools/nl_files/nl_vrtlay
   D   models/lnd/clm/test/tools/nl_files/nl_oldhyd

List all files added and what they do:

   A   models/lnd/clm/tools/clm4_5/interpinic/addmetadata --- Add script to add important meta-data to finidat files.

List all existing files that have been modified, and describe the changes:

---------------- Work on README files documentation
   M   models/lnd/clm/test/tools/config_files/README
   M   models/lnd/clm/test/tools/README
   M   models/lnd/clm/test/tools/README.testnames
   M   models/lnd/clm/tools/README
   M   models/lnd/clm/doc/IMPORTANT_NOTES
   M   models/lnd/clm/doc/Quickstart.GUIDE
   M   models/lnd/clm/doc/README

---------------- 
   M   models/lnd/clm/bld/config_files/config_definition.xml ------------ Document experimental settings / fix syntax error
   M   models/lnd/clm/bld/clm.buildnml.csh ------------------------------ Multi-instance fix
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml --- Fix 1x1_tropicAtl fpftdyn filename
   M   models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml - Document experimental settings

---------------- 
   M   models/lnd/clm/src/clm4_5/main/histFileMod.F90 ---- ZLAKE/DZLAKE fix
   M   models/lnd/clm/src/clm4_5/main/subgridAveMod.F90 -- ZLAKE/DZLAKE fix
   M   models/lnd/clm/src/clm4_5/main/reweightMod.F90 ---- Increase tolerance to 1.e-7 so transient
             simulations can run their full course.

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

  CESM test lists: (limited testing on yellowstone/aux_clm/intel)

    frankfurt/aux_clm       pgi         yes
    frankfurt/aux_clm       intel       yes

CLM tag used for the baseline comparison tests if applicable: clm4_5_04

Changes answers relative to baseline: no (bit-for-bit)

===============================================================
===============================================================
Tag name:  clm4_5_05
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Tue May 14 13:15:12 MDT 2013
One-line Summary: hcru bug fixes

Purpose of changes: update pio tag and nfire init. mod

Requirements for tag: N/A

Test level of tag: Only run hcru_hcru tests

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, Fang and Erik for nfire problem

List any svn externals directories updated (csm_share, mct, etc.): update pio to 1_7_0

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: 

-- nfire init. changed from nan to spval to fix problem with hcru_hcru debug + intel runs
M    models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90

Machines testing ran on:  Only testing hcru_hcru resolutions

Yellowstone Tests:

   The following were run with DEBUG=TRUE and for 1 day initial + 1 day restart
      hcru_hcru_I_2000_CRUFRC_CLM45_CN_yellowstone_gnu_pioFixed/      PASS
      hcru_hcru_I_2000_CRUFRC_CLM45_CN_yellowstone_intel_pioFixed/    PASS
      hcru_hcru_I_2000_CRUFRC_CLM45_CN_yellowstone_pgi_pioFixed/      PASS

   ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_intel.125102    PASS
   ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_pgi.125128      PASS

Frankfurt Tests:

   The following were run with DEBUG=TRUE and for 1 day initial + 1 day restart
      hcru_hcru_I_2000_CRUFRC_CLM45_CN_frankfurt_pgi_pioFixed/        PASS
      hcru_hcru_I_2000_CRUFRC_CLM45_CN_frankfurt_intel_pioFixed/      FAIL initial run (this is
         likely related to other existing MPI problems on Frankfurt).

CLM tag used for the baseline comparison tests if applicable: N/A

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_04
Originator(s):  erik (Erik Kluzek)
Date: Mon May 13 12:25:14 MDT 2013
One-line Summary: Fix the previous broken tag

Purpose of changes:

Fix the problems in the clm4_5_03 untested tag.

Requirements for tag: Fix bug 1692, 1693

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1693 (Misc. issues with clm4_5_03)
                                 1692 (externals screwed up in clm4_5_03)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): externals updated to those in SVN_EXTERNAL_DIRECTORIES

List all files eliminated:  Remove test/system as replaced by CESM testing

  models/lnd/clm/test/system -- Delete the whole directory tree

List all files added and what they do: None

List all existing files that have been modified, and describe the changes: 

   M  models/lnd/clm/src/clm4_0/main/clm_initializeMod.F90 -- fixed screwed up code

Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:           yes

  CESM test lists:

    yellowstone/aux_clm     intel       yes
    yellowstone/aux_clm     pgi         yes
    frankfurt/aux_clm       intel       yes
    frankfurt/aux_clm       pgi         yes

CLM tag used for the baseline comparison tests if applicable: clm4_5_01

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_5_03
Originator(s):  erik (Erik Kluzek)
Date: Fri May 10 17:29:56 MDT 2013
One-line Summary: Several bug fixes for release, urban and test single point surface datasets

Purpose of changes:

  Some work on IMPORTANT_NOTES file.
  Fix PTS_MODE restarts from John Truesdale. (implimented, but there are still issues)
  Fix history change number of tapes on startup issue.
  Bring in urban single pt surface datasets and single pt test: mexicocityMEX, vancouverCAN , urbanc_alpha, 1x1_tropicAtl, 1x1_smallvilleIA
  Drydep use before defined problem.
  Always bypass first two time-steps for CN/BGC.
  Fix gregorian calendar on history files.
  Remove two fields on clm45 fpftdata file as per Gordon Bonan.
  ncd_pio fix from Jim Edwards/Mariana V.
  set nsegspc=20 for HOMME and high resolution grids.
  Change documentation on CLM build-namelist -drydep, but keep it default on (will change to off in next tag)
  Remove a bunch of datm/drv fields in namelist_definition.
  Fix some issues with Crop and DV that Sam found.
  Fix a scripts issue with multi-instance.
  Update RTM (multi-instance fix, allow null grid).
  Update test list so that CLM45/DV/CROP are exercised.
  Update scripts/machines tag because of multiple problems.

Requirements for tag: fix bug 1488, 1673, 1677, 1682, 1653, 1689, 1690, 1687, 1688, 1685, 1691

Test level of tag: limited!

Bugs fixed (include bugzilla ID):

                                 1025  (partial -- implement changes from John Truesdale so SCAM can read global IC files)
                                 1488  (HOMME grids can not use nsegspc=20)
                                 1653  (Calls to PIO are not properly done)
                                 1673  (B compset gregorian calendar not reflected in CLM history)
                                 1677  (Remove bypass_CN_balance_check_on_restart in CLM45)
                                 1682  (Problem starting up CLM with no history files)
                                 1685  (use before define issue in DryDeposition)
                                 1687  (SBN scripts bug)
                                 1688  (misc. issues with new create_test)
                                 1689  (CLM45 dgvm does not build)
                                 1690  (CLM45 CNDV lightning namelist is missing)
                                 1691  (Scripts issue for multi-instance)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Set nsegspc=20 for HOMME and f05/f02 resolutions
   Set stream_fldfilename_lightng for CLM45/CNDV

List any changes to the defaults for the boundary datasets: New single-point test and urban datasets
   New surface datsets for: mexicocityMEX, vancouverCAN, urbanc_alpha, 1x1_tropicAtl, 1x1_smallvilleIA
   New fpftdyn for: 1x1_tropicAtl 1850-2005
   New pft-physiology file for CLM45 with three fields removed that were NOT being read in (qe25, mp, and resist)

Describe any substantial timing or memory changes: None

Code reviewed by: self, jedwards/mvertens (fix for bug 1653), jet (fix for bug 1025), slevis (fixes for DV)

List any svn externals directories updated (csm_share, mct, etc.): Machines, scripts, rtm
   Machines to Machines_130509
   scripts  to scripts4_130510
   rtm      to rtm1_0_25

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/bld/build-namelist ---- Document drydep as if it's off (will actually become off in next tag)
   M  models/lnd/clm/bld/clm.buildnml.csh -- Multi-instance bug fix.

   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml ----- nsegspc for ALL grids is 20
   M  models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml --- Remove datm/drv namelist crap
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml ----- nsegspc for ALL grids is 20
            New pft-physiology file, new surface/fpftdyn datasets for single point test and urban
            Set stream_fldfilename_lightng for CNDV.
   M  models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml --- Remove datm/drv namelist crap

   M  models/lnd/clm/doc/IMPORTANT_NOTES -- updates

   M  models/lnd/clm/src/util_share/clm_time_manager.F90 - Set parameters for calendar type.
   M  models/lnd/clm/src/util_share/ncdio_pio.F90 -------- Fix so that type of data output on read is based
            on the variable type of the data rather than the type of data on the input file. (from mvertens/jedwards)

   M  models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90 ------ Fix so CNDV can build.
   M  models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90 ------ Remove bypass_CN_balance_check_on_restart
   M  models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90 - Fix use before define error.
   M  models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90 ---- On restart set fieldlist and later compare to make sure 
                                                                not screwed up.
   M  models/lnd/clm/src/clm4_5/main/histFileMod.F90 ---------- Make htapes_fieldlist public, check calendar for output files, 
                check that namelist didn't change number of tapes or fields on restart
   M  models/lnd/clm/src/clm4_5/main/clm_driver.F90 ----------- Remove bypass_CN_balance_check_on_restart, NEVER do balance check
                on first time-step

   M  models/lnd/clm/src/clm4_0/biogeochem/DryDepVelocity.F90 - Fix use before define error.
   M  models/lnd/clm/src/clm4_0/main/histFileMod.F90 ---------- Make htapes_fieldlist public, check calendar for output files, 
                check that namelist didn't change number of tapes or fields on restart
   M  models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90 ---- On restart set fieldlist and later compare to make sure 
                                                                not screwed up.

Machines testing ran on:  Limited! (watch out for this tag!)

  I ran preliminary testing, with versions on the cbugfixclm450 ranch. We will fix other issues with the entire
  package as we find them.

CLM tag used for the baseline comparison tests if applicable: clm4_5_02

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_5_02
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Tue May  7 21:04:35 MDT 2013
One-line Summary: make 'shared' tools directory, and other minor tools fixes

Purpose of changes:

- Make separate 'shared' tools directory, move some tools from the clm4_5
  directory into there.

- Change interpinic so that htop and hbot are skipped

- Change Makefile.common files in tools to use ifort by default on yellowstone,
  so users can just type 'gmake' without needing to do 'gmake USER_FC=ifort'. 
  For simplicity, this has been implemented by defaulting to ifort for ALL Linux
  machines. 

- Fix minor mksurfdata.pl bugs (1669, 1681).

Requirements for tag:
- fix bug 1669, 1681*
- only tools testing needed

Test level of tag: tools only

Bugs fixed (include bugzilla ID):
- 1669: change needed for mksurfdata.pl for smallville (or crop PFT override anyway)
- Changes to get mksurfdata.pl working with urban single point datasets

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None for CLM; tools builds changed to
use ifort by default on Linux machines

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

========= Moved to 'shared' directory
D       models/lnd/clm/tools/clm4_5/mkmapdata
D       models/lnd/clm/tools/clm4_5/mkprocdata_map
D       models/lnd/clm/tools/clm4_5/ncl_scripts
D       models/lnd/clm/tools/clm4_5/mkmapgrids

List all files added and what they do:

========= Tools moved from clm4_5 directory to shared directory
A       models/lnd/clm/tools/shared
A       models/lnd/clm/tools/shared/mkmapdata/mvNimport.sh
A       models/lnd/clm/tools/shared/mkmapdata/rmdups.ncl
A       models/lnd/clm/tools/shared/mkmapdata/regridbatch.sh
A       models/lnd/clm/tools/shared/mkmapdata/createXMLEntries.pl
A       models/lnd/clm/tools/shared/mkmapdata/mkmapdata.sh
A       models/lnd/clm/tools/shared/mkmapdata/mkunitymap.ncl
A       models/lnd/clm/tools/shared/mkmapdata/mknoocnmap.pl
A       models/lnd/clm/tools/shared/mkmapdata/README
A       models/lnd/clm/tools/shared/mkmapdata
A       models/lnd/clm/tools/shared/mkprocdata_map/clm4054_ne30g16_I2000.clm2.h0.2000-01_c121107.nc
A       models/lnd/clm/tools/shared/mkprocdata_map/map_ne30np4_nomask_to_fv1.9x2.5_nomask_aave_da_c121107.nc
A       models/lnd/clm/tools/shared/mkprocdata_map/mkprocdata_map_functions.bash
A       models/lnd/clm/tools/shared/mkprocdata_map/src/mkprocdata_map.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/gridmapMod.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/constMod.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/Makefile.common
A       models/lnd/clm/tools/shared/mkprocdata_map/src/fmain.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/shr_file_mod.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/nanMod.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/Mkdepends
A       models/lnd/clm/tools/shared/mkprocdata_map/src/Srcfiles
A       models/lnd/clm/tools/shared/mkprocdata_map/src/Filepath
A       models/lnd/clm/tools/shared/mkprocdata_map/src/Makefile
A       models/lnd/clm/tools/shared/mkprocdata_map/src/fileutils.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src/shr_kind_mod.F90
A       models/lnd/clm/tools/shared/mkprocdata_map/src
A       models/lnd/clm/tools/shared/mkprocdata_map/mkprocdata_map_in
A       models/lnd/clm/tools/shared/mkprocdata_map/mkprocdata_map_all
A       models/lnd/clm/tools/shared/mkprocdata_map/clm
A       models/lnd/clm/tools/shared/mkprocdata_map/mkprocdata_map_wrap
A       models/lnd/clm/tools/shared/mkprocdata_map/clm4054_f19g16_I2000.clm2.h0.2000-01_c121107.nc
A       models/lnd/clm/tools/shared/mkprocdata_map/README
A       models/lnd/clm/tools/shared/mkprocdata_map
A       models/lnd/clm/tools/shared/ncl_scripts/cprnc.pl
A       models/lnd/clm/tools/shared/ncl_scripts/getco2_historical.ncl
A       models/lnd/clm/tools/shared/ncl_scripts/cprnc.ncl
A       models/lnd/clm/tools/shared/ncl_scripts/getregional_datasets.pl
A       models/lnd/clm/tools/shared/ncl_scripts/getregional_datasets.ncl
A       models/lnd/clm/tools/shared/ncl_scripts/README
A       models/lnd/clm/tools/shared/ncl_scripts
A       models/lnd/clm/tools/shared/mkmapgrids/src/Makefile.common
A       models/lnd/clm/tools/shared/mkmapgrids/src/domainMod.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src/shr_sys_mod.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src/shr_file_mod.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src/nanMod.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src/shr_log_mod.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src/Mkdepends
A       models/lnd/clm/tools/shared/mkmapgrids/src/Srcfiles
A       models/lnd/clm/tools/shared/mkmapgrids/src/mkmapgrids.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src/Filepath
A       models/lnd/clm/tools/shared/mkmapgrids/src/Makefile
A       models/lnd/clm/tools/shared/mkmapgrids/src/shr_kind_mod.F90
A       models/lnd/clm/tools/shared/mkmapgrids/src
A       models/lnd/clm/tools/shared/mkmapgrids/mkmapgrids.namelist
A       models/lnd/clm/tools/shared/mkmapgrids/mkscripgrid.ncl
A       models/lnd/clm/tools/shared/mkmapgrids/mkmapgrids.csh
A       models/lnd/clm/tools/shared/mkmapgrids/README
A       models/lnd/clm/tools/shared/mkmapgrids

========= Add test for mkmapdata using '-p clm4_0'
A       models/lnd/clm/test/tools/nl_files/mkmapdata_ne30np4_clm4_0

List all existing files that have been modified, and describe the changes:

========= Point to new 'shared' tools directory where appropriate
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl
          - also fix mksurfdata.pl for crop PFT override (bug 1669)
          - also changes to get mksurfdata.pl working with urban single point datasets (bug 1681)
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl
          - also fix mksurfdata.pl for crop PFT override (bug 1669)
M       models/lnd/clm/test/tools/TBLCFGtools.sh
M       models/lnd/clm/test/tools/TOPtools.sh
M       models/lnd/clm/test/tools/TBLscript_tools.sh
M       models/lnd/clm/test/tools/TBLtools.sh
M       models/lnd/clm/test/tools/input_tests_master
          - also add test for mkmapdata using '-p clm4_0'
M       models/lnd/clm/tools/README
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/README.developers

========= Put gen_domain in 'shared' tools directory
M       SVN_EXTERNAL_DIRECTORIES

========= Use ifort by default on yellowstone (and other Linux machines)
M       models/lnd/clm/tools/clm4_5/interpinic/src/Makefile.common
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Makefile.common
M       models/lnd/clm/tools/clm4_0/interpinic/src/Makefile.common
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Makefile.common

========= Change interpinic so that htop and hbot are skipped
M       models/lnd/clm/tools/clm4_5/interpinic/src/interpinic.F90


Machines testing ran on:  (Tests in priority order)
  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/aux_clm     intel       no
    frankfurt/aux_clm_int   intel       no
    yellowstone/aux_clm     pgi         no
    frankfurt/aux_clm       intel       no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    yes
    
      All PASS except for the following expected failures (note that 006 & 008
      baselines are expected to always fail):

         006 ble14 TBLCFGtools.sh shared gen_domain CFGtools__ds T31.runoptions .......................... rc=4 FAIL
         008 ble@4 TBLCFGtools.sh shared gen_domain CFGtools__ds ne30.runoptions ......................... rc=4 FAIL
         027 smiS4 TSMscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional ............. rc=6 FAIL
         028 bliS4 TBLscript_tools.sh shared ncl_scripts getregional_datasets.pl getregional ............. rc=4 FAIL


  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_5_01

Changes answers relative to baseline: NO

===============================================================
===============================================================
Tag name:  clm4_5_01
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Mon May  6 16:52:27 MDT 2013
One-line Summary: update externals

Purpose of changes: update externals to alpha08b

Requirements for tag: N/A

Test level of tag: std-test

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

< scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130502
< scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130502
< models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_33
---
> scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130422
> scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130412
> models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_29
13c13
< models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130502
---
> models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130405
16c16
< models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_130423
---
> models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_130226
18c18
< models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_130417
---
> models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_130214
20c20
< models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_9/pio
---
> models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_7/pio
23,25c23,25
< tools/cprnc                            https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_130425
< tools/mapping                          https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130426a
< models/lnd/clm/tools/clm4_5/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130426a/gen_domain_files
---
> tools/cprnc                            https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_130411 
> tools/mapping                          https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130403
> models/lnd/clm/tools/clm4_5/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130403/gen_domain_files

List all files eliminated:N/A

List all files added and what they do:N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
- clean up test list

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK

  CESM test lists:

    yellowstone/aux_clm     intel       OK (detail of fails that should pass next time)

BFAIL ERI_D.f10_f10.I20TRCN.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
FAIL  ERS.f19_g16_r01.I1850CLM45CN4Me.nldir_rtmOnFloodOnEffvelOff.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- No matching time found in cprnc? should pass next time.  
FAIL  ERS_D.f19_g16.ICLM45GLCMEC.nldir_glcMEC.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
FAIL ERS_D.f19_g16.ICLM45GLCMEC.nldir_glcMEC.yellowstone_intel.GC.170226.nlcomp
 -- changes in cism namelist and cism config
FAIL  ERS_D.f19_g16.IGRCP26CLM45CN.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
FAIL ERS_D.f19_g16.IGRCP26CLM45CN.yellowstone_intel.GC.170226.nlcomp
 -- changes in cism namelist and cism config
FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
FAIL ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.170226.nlcomp
 -- changes in cism namelist and cism config
BFAIL ERS_Ld3_D_P64x1.ne30_g16.ICLM45CN.nldir_default.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
BFAIL ERS_Ld3_D_P64x16.ne30_g16.ICN.nldir_default.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
FAIL ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.170226.nlcomp
 -- changes in cism namelist and cism config
BFAIL PET_D_P1x30.ne30_g16.ICN.nldir_default.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
BFAIL SMS_RLA.f45_f45.I.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
BFAIL SMS_RLA.f45_f45.ICLM45.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
BFAIL SMS_ROA.f45_f45.I.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
BFAIL SMS_ROA.f45_f45.ICLM45.yellowstone_intel.GC.170226.compare_hist.clm4_0_81 
 -- no baseline, should pass next round

    yellowstone/aux_clm     pgi         OK (detail of fails that should pass next time)

FAIL  ERI.f19_g16.IG1850.yellowstone_pgi.GC.170137.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
FAIL ERI.f19_g16.IG1850.yellowstone_pgi.GC.170137.nlcomp
 -- changes in cism namelist and cism_config
FAIL  ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.170137.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
FAIL ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.170137.nlcomp
 -- changes in cism namelist and cism config
BFAIL ERI_D.f10_f10.I20TRCN.yellowstone_pgi.GC.170137.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
FAIL  SMS.T31_g37.IG4804.yellowstone_pgi.GC.170137.compare_hist.clm4_0_81 
FAIL SMS.T31_g37.IG4804.yellowstone_pgi.GC.170137.nlcomp
 -- changes in cism namelist and cism config
 -- changes in drv_in (ocn_ntreades=2) 
FAIL  SMS.T31_g37.IG4804CLM45.yellowstone_pgi.GC.170137.compare_hist.clm4_0_81 
 -- changes in g2x_Sg_frac01 and g2x_Sg_topo01
BFAIL SMS_RLB.f45_f45.I.yellowstone_pgi.GC.170137.compare_hist.clm4_0_81 
 -- no baseline, should pass next round
BFAIL SMS_RLB.f45_f45.ICLM45.yellowstone_pgi.GC.170137.compare_hist.clm4_0_8
 -- no baseline, should pass next round

    frankfurt/aux_clm       intel       OK 

CLM tag used for the baseline comparison tests if applicable: clm4_0_81

Changes answers relative to baseline: yes 

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: only changes in g2x_Sg_frac01 and g2x_Sg_topo01
    - what platforms/compilers: all

===============================================================
===============================================================
Tag name:  clm4_5_00
Originator(s):  erik (Erik Kluzek)
Date: Thu May  2 00:20:17 MDT 2013
One-line Summary: Official end to CLM4.5 development for CLM offline

Purpose of changes: Changes from clm4_0_54 to now...

Compsets and Scripts Changes:

Remove ability to set compset file on command line, and use a new expanded compset file definition that
allows user to create many compsets on the fly by defining a long name with the "-user_compset" option
to "create_newcase". "-user_compset" is in the form of...

TIME_DATM[%phys]_CLM[40|45][%phys]_SICE_SOCN_RTM[%phys]_GLC[%phys]_SWAV[_BGC%phys]

Where
   TIME = Time period (e.g. 2000, 20TR, RCP8...)
   GLC  = [CISM1, SGLC]
   BGC  = optional BGC scenario
The OPTIONAL %phys attributes specify submodes of the given system

So for example 

./create_newcase -user_compset 1850_DATM%CRU_CLM45%BGC_SICE_SOCN_RTM_SGLC_SWAV -case cru1850 -res f19_g16 -mach yellowstone -compiler intel

will setup a 1850 case at f19 resolution with CRUNCEP forcing with CLM4.5-BGC.

Changes for both clm4.0 and clm4.5:

* Bug fixes in MEGAN VOC emission fluxes and dry deposition velocities
* CRUNCEP is now an option for atmospheric forcing
* Change from Sam Levis for CROP to pft-physiology file so that CROP parameter is in Kelvin rather than Celsius.
* Don't re-weight pftdyn if weights are essentially identical.

CLM4.5 includes the following:

* Bring in flood capability to RTM.
* Bring LBNL-merge branch on with: vertical soil, Methane, CENTURY, split nitrification, new-lake model.
* Modifications to GPP, on gppdev branch, multilayer canopy and then single-layer version that reproduces it.
* Crop model updates. Irrigation included with crop model as an option. Fix CNDV-CROP.
* Urban model updates, multi-density, urban depth seperate from soil depth, wasteheat to zero.
* Bring in permafrostsims09 branch with Sean Swensons's flooding changes.
* Update pft-physiology file, change some CN defaults, change min flow slightly in RTM.
* Set ponding to zero, acclimation mods from Keith Oleson, a hydrology change from Sean Swenson.
* Add active flags, change subgrid weighting convention.
* Turn off subgrid topography snow parameterization for glc_mec landunits.
* Jinyun photosynthesis change impacting arid regions.
* Keith Oleson's photosynthesis change, changes canopy top: triose phosphate util. rate to be dependent on vcmax.
* VIC hydrology is an option.
* Update mksurfdata_map for CLM4.5 (also add support for glc_nec=36 although we have no datasets for this).
* Snow depth averaged over grid-cell (SNOWDP) on history file changed in favor of SNOW_DEPTH (averaged only over snow covered area).
* Spinup changes from Charlie Koven from build-time to run-time (spinup now option added to CLM_BLDNML_OPTS as "-spinup on|off").
* Bring the F. Li and S. Levis Fire model for CLMCN and CLMBGC based on Li et al. (2012a,b; 2013).
* BSW calculation changed affecting drought phenology and frozen temperature sensitivity (SP, CN, and BGC as well as DV)

Test level of tag: doc

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
   Changes to CLM configure:
     -phys option to specify clm4_0 or clm4_5
     -pergro and -c13 option removed 
     -spinup option removed for CLM4_0
     New options for clm4_5: -clm4me, -vichydro, -exlaklayers, -vsoilc_centbgc

Describe any changes made to the namelist:
   For CLM4.0: WRF and 360x720cru resolutions added
   For CLM4.5: new namelists: popd_streams light_streams clm_hydrology1_inparm clm_soilhydrology_inparm
               irrigate is a namelist option rather than using different surface datasets
       New namelist items for clm_inparm:
           anoxia			no_frozen_nitrif_denitrif
           atm_c14_filename		override_bgc_restart_mismatch_dump
           cryoturb_diffusion_k		perchroot
           decomp_depth_efolding	perchroot_altk
           deepmixing_depthcrit		pftspecific_rootingprofile
           deepmixing_mixfact		rootprof_exp
           exponential_rooting_profile	rootprof_exp
           froz_q10			som_adv_flux
           hist_wrtch4diag		som_diffus
           lake_melt_icealb		spinup_state
           max_altdepth_cryoturbation	surfprof_exp
           max_depth_cryoturb		use_c13
           more_vertlayers		use_c14
           nfix_timeconst		use_c14_bombspike


List any changes to the defaults for the boundary datasets: 
   All CLM4.5 datasets are new.
   For CLM4.0, new ne120, ne240, and 360x720cru surface datasets (ne120 ne120 finidat files)
   new pft-physiology file

New history fields:
  Dozens of new fields for clm4_5.
  Three new fields for clm4_0:
+ <field name='QICE_FORC' units='mm/s' long_name='qice forcing sent to GLC'
+ <field name='TSRF_FORC' units='K'    long_name='surface temperature sent to GLC'
+ <field name='TOPO_FORC' units='m'    long_name='topographic height sent to GLC'

List any svn externals directories updated (csm_share, mct, etc.):
 Most of the externals are the same as in the cesm1_2_alpha08a tag:

   scripts     to scripts4_130422  (same as in cesm1_2_alpha07a)
   Machines    to Machines_130412  (same as in cesm1_2_beta06)
   datm        to datm8_130424
   stubs       to stubs1_4_02
   rtm         to rtm1_0_22
   cism        to cism1_130405      (same as in cesm1_2_beta06)
   csm_share   to share3_130226     (same as in cesm1_2_beta06)
   esmf_wrf    to esmf_wrf_timemgr_130213
   timing      to timing_130214     (same as in cesm1_2_beta06)
   MCT         to MCT_2.8.3
   pio         to pio_1_6_7         (older than in cesm1_2_alpha07b)
   cprnc       to cprnc_130411      (same as cesm1_2_beta07)
   mapping     to mapping_130403    (same as in cesm1_2_beta06)

CLM tag used for the baseline comparison tests if applicable: clm4_0_54 (in cesm1_1_1)

Changes answers relative to baseline:  Yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change CLM4.0 are similar climate, CLM4.5 is of course new climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)

     /glade/scratch/erik/archive/clm4079_NewFire10f19_CRU_20TR_CN4Me

===============================================================
===============================================================
Tag name:  clm4_0_81
Originator(s):  bandre (Benjamin Andre)
Date: Mon Apr 29 12:12:42 MDT 2013
One-line Summary: Charlie Koven's variable consolidation, cryoturbation and BSW CPP changes

Purpose of changes:
    1) variable consolidation -- these are all things like adding up
    the leafc_to_litr1c, stemc_tolitr1c, frootc_to_litr1c, etc. into a
    single set of fluxes, e.g. phenology_c_to_litr_met_c. this
    introduces roundoff-level differences in every calculation of C
    and N from plants to litter, so it will propagate quickly to
    everywhere in the CN and CN4Me code.

    2) cryoturbation - the changes to the active layer profiles.  This
    should have a real but minor effect everywhere where there is
    permafrost, because it will change the mixing rates of all soil
    material into and out of the permafrost.  However, this is so slow
    that it should only really matter during spinup.

    3) BSW bugfix - Remove the STNDRD_BSW_FOR_SOILPSI_CALC CPP
    token. This had already been set in the CN4Me code, but will cause
    real changes to both the drought phenology and frozen temperature
    sensitivity of the CN code.


Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
    remove the CPP flag for STNDRD_BSW_FOR_SOILPSI_CALC

Describe any changes made to the namelist:
    remove: shape_fluxprof, max_altmultiplier_cryoturb, max_altdepth_cryoturbation
    add: max_altdepth_cryoturbation, max_depth_cryoturb

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: variable consolidation should decrease runtime

Code reviewed by: Charlie Koven

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:
    - remove configure option for BSW
        M  models/lnd/clm/bld/configure
        M  models/lnd/clm/bld/config_files/config_definition.xml
    - remove of BSW ifdef
        M  models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
        M  models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
        M  models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
        M  models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
        M  models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90

    - add/remove nl options for cryoturbation
        M  models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml

    - cryoturbation
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
        M  models/lnd/clm/src/clm4_5/main/controlMod.F90

    - variable consolidation
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
        M  models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
        M  models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
        M  models/lnd/clm/src/clm4_5/main/pftdynMod.F90
        M  models/lnd/clm/src/clm4_5/main/clmtype.F90
        M  models/lnd/clm/src/clm4_5/main/histFldsMod.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes, two unexpected fails on comparison, should pass next time.

  CESM test lists:

    yellowstone/aux_clm     intel       yes
      New expected failures:
        all compare_hist tests with CLM45CN test should fail, but be ok next time (answer changes)
        ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set2_ciso - CFAIL - test needs to be updated to remove shape_fluxprof from namelist
        ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set3_pftroot - CFAIL - test needs to be updated to remove shape_fluxprof from namelist
        PET_D_P1x30.ne30_g16.ICN - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_RLA.f45_f45.I - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_RLA.f45_f45.ICLM45 - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_ROA.f45_f45.I - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_ROA.f45_f45.ICLM45 - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?

    yellowstone/aux_clm     pgi         yes
      New expected failures:
        all compare_hist tests with CLM45CN test should fail, but be ok next time (answer changes)
        SMS_RLB.f45_f45.I - FAIL- runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_RLB.f45_f45.ICLM45 - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?

    frankfurt/aux_clm_int   intel       no
    frankfurt/aux_clm       intel       no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_80

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45, all CN and CN4Me compsets
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate):
        variable consolidation - roundoff
        cryoturbation - larger than roundoff/same climate
        BSW - climate changing

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database):

    This will change climate only in CN (not CN4Me mode), because of
    the changed BSW (removal of incorrect second BSW formulation)
    leading to slight differences in phenology.  This has been fixed
    in CN4Me for some time, and has not been observed to detrimentally
    effect the climate in that configuration.

    I (Charlie Koven) ran trunk tag 80 and the branch synced to tag 80 for
    30 years at f19 resolution in I1850CLM45CN4Me compset, with AD spinup
    turned on.  I did not find sytematic differences in GPP or NEE.  The
    difference is that there was somewhat less passive pool carbon
    mixed to the ~3m soil layer, and somewhat more accumulatin gin the
    ~2m layer; this is consistent with the changes to the
    crypoturbation code, which sets a fixed depth of cryoturbation
    throughout the permafrost region, instead of making it
    proportional to active layer thickness.

   URL for LMWG diagnostics output used to validate new climate: N/A

===============================================================
===============================================================
Tag name:  clm4_0_80
Originator(s):  erik (Erik Kluzek)
Date: Fri Apr 26 02:28:39 MDT 2013
One-line Summary: Bring Fang Li. Fire model into CLM4.5 science, update ALL CLM4.5 surface datasets, 
                  provide a working initial condition file for CLM45BGC@f19_g16-1850

Purpose of changes: Bring the F. Li and S. Levis Fire model for CLMCN and CLMBGC based on 
Li et al. (2012a,b; 2013). New data streams are added to bring in lightning frequency 
(NASA-LIS climatology of 1995-2011 interpolated to T62) and human population density at half-degree
(currently from 1850 to 2010, no rcp data is available yet). Annual 1850–2010 population 
density that is obtained by temporal linear interpolation of the data from HYDEv3.1 
(prior to 1990) and GPWv3 (since 1990) at 0.5 degree resolution. GDP (Gross Domestic Product), 
peat fraction, and maximum month for agricultural fires are also included on the 
surface datasets. Fang Li tuned the fire model based on a branch version 
(newfire05_clm45sci15_clm4_0_58) at f19_g16 resolution with CLMBGC for transient 1850-2000
with Qian atmosphere forcing.  New fire fields are read in from the pft-physiology file.

ALL CLM4.5 surface datasets and pftdyn datasets were updated. ALL standard datasets 
now have glc_nec=10 data on them and CAN be used for IG simulations with CISM for 
10 glacier elevation classes. The standard way of running is still 
with glc_nec=0. Surface datasets include data used by previous parameterizations added in CLM4.5:

   ZWT0, F0, and P3 for the CLM4Me methane model
   (PH can be read in on the surface dataset, but is NOT included on the current datasets)
   LAKEDEPTH for the Subin variable depth lake model
   (ETALAKE and LAKEFETCH can be read in, but are NOT included on the current datasets)
   SLOPE, STD_ELEV for the Swenson dynamic wetlands parameterization
   binfl, Ds, Dsmax, Ws for the optional VIC hydrology scheme (only read in when VIC active)
   gdp, peatf, and abm for the new fire model above	      
         (always read in although it wouldn't HAVE to be for CLMSP)

Also provide one working initial condition file for CLM45BGC at 1.9x2.5_gx1v6 resolution for 1850. This
will work for CLM45BGC (-vsoil_centbgc on) as long as the vertical carbon profiles are active. No other
initial condition files are provided at this time. This was from year 51 of a CLMBGC spinup simulation
by Fang Li with Qian forcing for 1850 (case qian_1850).
   
Bug fix, from Sam Levis so that non-irrigated prognostic crop for CLM4.5 works correctly. Previously
irrigated and non-irrigated crop for CLM4_5 gave the same results (with irrigation active even when
you told it NOT to be).

Also transient simulations are now allowed to be done with a cold start -- YOU SHOULD NEVER DO THIS FOR SCIENCE!
It does help facilitate testing however.

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID): 
             1670 (irrigated crop and non-irrigated crop for CLM45 give same answers)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: New light_streams and popd_streams namelists for CLM
    By default the light_stremas namelist runs over the NASA_LIS climatology data (3-hourly).
    The population density namelist runs over the applicable years for the use_case given for the compset.
    This can be customized with:
        stream_year_first_popdens, stream_year_last_popdens, model_year_align_popdens
        (and the filename and map-algorithm can be changed as well)

List any changes to the defaults for the boundary datasets: All surfdata, finidat, and pftdyn
   datasets for clm4_5 were updated

Code reviewed by: self, slevis, fangli

List any svn externals directories updated (csm_share, mct, etc.): pio
  pio to pio_1_6_7

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M models/lnd/clm/bld/listDefaultNamelist.pl -- Get working for clm4_5.
  M models/lnd/clm/bld/build-namelist ---------- check vsoilc_centbgc for finidat files, new light_streams and
         popd_streams namelists for clm4_5
  M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml --- all new fsurdat, fpftdyn datasets, settings
         for new popd_streams and light_streams namelists
  M models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml - Add new light_streams and popd_streams namelists

>>>>>>>>>>>> Set first and last pop-dens year, and do "arb_ic" rather than "startup"
>>>>>>>>>>>> type for all transient cases (allow transient cases to do a cold-start)
>>>>>>>>>>>> ALTHOUGH YOU SHOULD NEVER DO A COLD START FOR A TRANSIENT CASE!
  M models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml

>>>>>>>>>>>> Some small changes to documentation about irrigation.
  M models/lnd/clm/doc/UsersGuide/preface.xml
  M models/lnd/clm/doc/UsersGuide/custom.xml

  M models/lnd/clm/src/util_share/ndepStreamMod.F90 -- make default private, namelist data private, and clm_domain_mct public

  M models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90 --- add number of individuals
  M models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90 -- handle more impacts of fire
  M models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90 ----------- Fire module -- almost entirely replaced. Two new public
         methods added:
+  public :: CNFireInit    ! Initialization of CNFire
+  public :: CNFireInterp  ! Interpolate fire data
  M models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90 -------- Handle more impacts of fire
  M models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90 -- Handle more impacts of fire
  M models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90 ----------- burndate, lfc, wf, btran2, col_ctrunc, totsomc added to restart
      old fire fields removed, _vr fields required if expected.,
  M models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90 --- Add CNFireInit, and update CNFireArea call.
  M models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90 ------- Set fire variables.
  M models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90  farea_burned impacts SAI for stubble after harvest
  M models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90 -------------- Initialize new fire variables
  M models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90 --------- Update CNEcosystemDynInit call
  M models/lnd/clm/src/clm4_5/main/accFldsMod.F90 ---------------- Add prec10 and prec60 (10 and 60 day total precipitation)
  M models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90 ------------ Initialize new fire variables.
  M models/lnd/clm/src/clm4_5/main/pftdynMod.F90 ----------------- Update lf_conv_cflux, make PFT weight check same as for surfrdMod.F90
  M models/lnd/clm/src/clm4_5/main/iniTimeConst.F90 -------------- Read in new fire data, abort if data needed NOT found on the
             surface dataset.
  M models/lnd/clm/src/clm4_5/main/findHistFields.pl ------------- Also read in CNFireMod for history fields.
  M models/lnd/clm/src/clm4_5/main/clm_driver.F90 ---------------- Add CNFireInterp call.
  M models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90 -------------- Initialize lf_conv_cflux to zero.
  M models/lnd/clm/src/clm4_5/main/pftvarcon.F90 ----------------- Read in new fire parameters 
        (no longer need "resist" on the pft-physiology file)
  M models/lnd/clm/src/clm4_5/main/surfrdMod.F90 ----------------- Fix tolerances to match mksurdata_map
        bug fix for non-irrigated crop.
  M models/lnd/clm/src/clm4_5/main/clmtype.F90 ------------------- New fire fields
  M models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90 -------------- Initialize some new fire fields: tsoi17, fsat
  M models/lnd/clm/src/clm4_5/main/histFldsMod.F90 --------------- New fire history fields
  M models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90 ----- Save btran2, smp_node_lf for fire
  M models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90 ------- Save wf2, tsoi17, h2osoi_liqice_10cm

  M models/lnd/clm/src/clm4_0/main/surfrdMod.F90 ----------------- Fix tolerances to match mksurdata_map

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/aux_clm     intel       yes
    yellowstone/aux_clm     pgi         yes
    frankfurt/aux_clm_int   intel       yes
    frankfurt/aux_clm       intel       yes

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_79

Changes answers relative to baseline: YES!

  Summarize any changes to answers:
    - what code configurations: All with CLM45
    - what platforms/compilers: All
    - nature of change: new climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
     /glade/p/cesm/lmwg/cases/cesm1/C20new -- on yellowstone
     /glade/scratch/erik/archive/clm4079_NewFire10f19_CRU_20TR_CN4Me
     /glade/scratch/erik/archive/clm4077_I1850CLM45CN4Me
     /glade/scratch/erik/archive/clm4077_NewFire10f19_QIAN_20TR_CN4Me
    hsi:/home/fangli/qian20

===============================================================
===============================================================
Tag name:  clm4_0_79
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Wed Apr 24 20:27:01 MDT 2013
One-line Summary: pftdyn, pft-phys*.nc and datm8 update

Purpose of changes: From Erik:: -  update Don't re-weight pftdyn if weights are essentially identical (Both CLM40 AND CLM45).
   - Turn wasteheat to "ON" in CLM45. (namelist change) (done)
   - Change from Sam Levis for CROP to pft-physiology file so that CROP parameter is in Kelvin rather than Celsius (both CLM40 and CLM45).
   - Change datm so that LWDN is NOT read from files for CRUNCEP (datm8_130424).

Requirements for tag: fix bug 1621

Test level of tag: std-test

Bugs fixed (include bugzilla ID): fixed 1621

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: turn waste heat on in clm4_5

List any changes to the defaults for the boundary datasets: change pft-phys files for 4_0 and 4_5

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, Erik, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.):

< models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_130424
---
> models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_130325

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M SVN_EXTERNAL_DIRECTORIES
    update to datm8_130424

M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
  - $CSMDATA/lnd/clm2/pftdata/pft-physiology.clm40.c130424.nc
M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
  - change <urban_hac>ON_WASTEHEAT</urban_hac> to <urban_hac>ON</urban_hac>
  - use $CSMDATA/lnd/clm2/pftdata/pft-physiology.c130424.nc

M models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M models/lnd/clm/src/clm4_0/main/pftdynMod.F90
  - change wtpfttot2 check

M models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
  - syntax clean up - caught by Ben Andre

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.  many expected failures due to new pft-physiology files.  Should pass next time.

  CESM test lists:
    Many nlcomp failures:
    clm4_5:
       NEW:         fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.c130424.nc'
       BASELINE:  fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.c121025.nc'
       NEW:         urban_hac = 'ON'
       BASELINE:  urban_hac = 'ON_WASTEHEAT'
    clm4_0:
       NEW:         fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.clm40.c130424.nc'
       BASELINE:  fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.c110425.nc'

    component_gen_comp: all PASS or BFAIL1
    summarize_cprnc_diffs: differences in CLM files

    yellowstone/CESM:
      intel: OK.  Expected failures for compare_hist (should pass next time)
         FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  ERS_E.f19_g16.I1850CRUCLM45CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  NCK.f10_f10.ICRUCLM45.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  PET_PT.f10_f10.I20TRCN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  SMS.f19_g16.IRCP45CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
      pgi  : OK.  Expected failures for compare_hist (should pass next time)
         FAIL  ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_pgi.GC.111079.compare_hist.clm4_0_78 
         FAIL  ERS_D.hcru_hcru.I_2000_CRUFRC_CN.yellowstone_pgi.GC.111079.compare_hist.clm4_0_78 
         FAIL  PET_PT.f10_f10.I20TRCN.yellowstone_pgi.GC.111079.compare_hist.clm4_0_78 

    frankfurt/CESM: 
      intel: OK.  Expected failures for compare_hist (should pass next time)
        FAIL  SMS.f10_f10.IRCP26CN.frankfurt_intel.GC.pft79.compare_hist.clm4_0_78 

CLM tag used for the baseline comparison tests if applicable: clm4_0_78

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate):  same climate
      -in coupler history files: l2x_Sl_*, l2x_Fall,  x2l_Slrr* and some r2x_* fields change
      -in clm history files: for these tests only differences seen in IGRCP60CN
	
===============================================================
===============================================================
Tag name:  clm4_0_78
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Apr 23 19:25:18 MDT 2013
One-line Summary: MEGAN fixes

Purpose of changes:

 - Bug fixes in MEGAN VOC emission fluxes and dry deposition velocities
 - Remove the land fraction weighting from MEGAN history fields 
 - Added XPAN capability to dry deposition parametrization

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:  N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, starting branch from Erik.

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
M      models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
  - maximum string length of megan_specifier increased to 1024 characters

 M      models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
 M      models/lnd/clm/src/clm4_0/biogeochem/VOCEmissionMod.F90
  - land fraction weighting has been removed from the MEGAN diagnostics
  - added initialization of the vocflx_meg array to zero to prevent 
    erroneous values from contributing to the MEGAN emissions

 M      models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
 M      models/lnd/clm/src/clm4_0/biogeochem/DryDepVelocity.F90
  - corrected surface pressure
  - added XPAN specification

Machines testing ran on:  (Tests in priority order)

    build-namelist unit tester: OK

    yellowstone/CESM:            
      -intel: OK
        -component_gen_comp fails on a number of tests, but it is all expected.  summarize_cprnc_diffs verifies that all fails in the 
          CLM history files is consistent.
        -compare_hist failures are expected due to new dry deposition values going through coupler.
      -pgi  : OK
        -compare_hist failures are expected

    frankfurt/CESM:            
      -intel: OK.
        -compare_hist failures are expected

CLM tag used for the baseline comparison tests if applicable: clm4_0_77

Changes answers relative to baseline: Yes.  Changes in l2x_Sl_dd{001-035},l2x_Sl_dd{040,041,043} in coupler hist file.
   Possible changes in *_voc fields in coupler hist files for certain configurations.  Changes in 10 MEG_* fields and VOCFLXT in CLM history files.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): same climate.  changes in CLM fields range from 1.e-9 
       (VOCFLXT) to 1.e-17 (MEG_thujene_a) 

===============================================================
===============================================================
Tag name:  clm4_0_77
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Tue Apr 23 11:38:45 MDT 2013
One-line Summary: fix carbon balance bug in transient runs with VERTSOI, and fix Soil Hydrology bug

Purpose of changes:

Fix two bugs:

(1) In transient CLM45 runs with VERTSOI, a carbon balance error
    occurred due to two routines being called with updated filters
    when they should have been called with filters set at their values
    from the previous time step. This bug has existed since clm4_0_62.

(2) A potential for an array out-of-bounds error (which could show up
    as garbage results if array bounds checking was off) which showed
    up in rare circumstances (e.g., a single grid cell in Greenland in
    a 1-year test run)

Requirements for tag: Fix bugs 1663, 1664

Test level of tag: standard

Bugs fixed (include bugzilla ID):

    1663 (array bounds error in SoilHydrologyMod)
    1664 (carbon balance errors)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Fix for bug 1664
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

========= Fix for bug 1663
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/CESM:              yes

      All PASS or xFAIL; all component_gen_comp comparisons pass or BFAIL1

    yellowstone/CESM/allIcompsets: no

    frankfurt/CESM:            yes

      All PASS or xFAIL

  test_system testing:

    yellowstone batch:          no
    frankfurt interactive:      no
    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_76

Changes answers relative to baseline: YES, potentially (though none
observed in standard testing)

  Answer changes are possible in any CLM45 case due to the SoilHydrology
  bug fix (1663). This changes answers only in rare situations where the
  water table comes near the surface (e.g., in a 1-year test run, this only
  happened in one grid cell in Greenland)

  In addition, the following answer changes are expected due to the fix for
  bug 1664:

  (1) CLM45 transient with VERTSOI (i.e., BGC). Implementing this change in
      clm4_0_62 (the first tag that exhibited bug 1664), clm4_0_62-withFix
      was identical to clm4_0_61 for this configuration. But clm4_0_77 will
      differ from clm4_0_76 for this configuration.

  (2) Answers are changed for CLM45 CNDV with VERTSOI (i.e., BGCDV). It
      appears that this configuration was buggy before this tag (e.g.,
      restarts weren't exact), so this tag changes answers in a way that
      seems to fix this configuration.


   If bitwise differences were observed, how did you show they were no worse
   than roundoff? NOT DONE 

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_76
Originator(s):  muszala (Stefan Muszala)
Date: Mon Apr 22 13:36:26 MDT 2013
One-line Summary: spinup changes from Charlie Koven (part 1)

Purpose of changes:

Remove SPINUP CPP tokens, in favor of a run-time namelist item that can be set to
change the spinup mode on the fly. The state is stored on the restart file, and 
if the user changes the mode on the namelist -- the model will automatically do 
the "ENTER-SPINUP" or "EXIT-SPINUP" step as needed on the first time-step. The 
spinup options were thus removed from the CLM configure for CLM45 and moved to 
the build-namelist as option "-spinup" with values either "on" or "off".


Add new history fields: TOTLITC_1m, TOTSOMC_1m, TOTLITN_1m, and TOTSOMN_1m. 
Remove the namelist item: reset_permafrost_c_n_pools. Removed default history 
output for decomposing C pool changes due to vertical transport, and for vertical
 profiles for N Deposition and fixation.


Answer Changes for C13: C13 and C13 Carbon isotopes are handled a bit differently
 when they are NOT on the restart file. For C13 prior timestep's downregulation 
is used in calculating ci used for photosynthetic discrimination.  This changes
 answers when use_c13 is turned on.

Requirements for tag: N/A

Test level of tag: std-tag

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Change the way spin up is handled

Describe any changes made to the namelist:  spinup now controlled in build-namelist

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Dave L. checked spinup test comparing old and new method.  Erik, Charlie Koven

List any svn externals directories updated (csm_share, mct, etc.): 

-scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130416a
+scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130419a

List all files eliminated: N/A

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/config_files/config_definition.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.
  some new failures that should be gone when compared to the next tag.  This is due to the new namelist variable 

 <  spinup_state = 0

  418/444 < FAIL> <Test Id: 418> <Desc: lnd_in file the same as expected for phys45>  
  423/444 < FAIL> <Test Id: 423> <Desc: lnd_in file the same as expected for phys45>  
  428/444 < FAIL> <Test Id: 428> <Desc: lnd_in file the same as expected for phys45>  
  433/444 < FAIL> <Test Id: 433> <Desc: lnd_in file the same as expected for phys45>  
  438/444 < FAIL> <Test Id: 438> <Desc: lnd_in file the same as expected for phys45>  
  443/444 < FAIL> <Test Id: 443> <Desc: lnd_in file the same as expected for phys45-crop>

  CESM test lists:

    yellowstone/CESM: SPM - tracking tputcomp failures 
      cesm intel: OK
          FAIL  ERS.f09_g16.ICLM45VIC.nldir_vic_vrtlay.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set2_ciso.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set3_pftroot.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45CN4MeNoVS.nldir_rootlit.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_E.f19_g16.I1850.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
      cesm pgi  : OK
          FAIL  SMS.1x1_numaIA.ICNCROP.yellowstone_pgi.GC.111075.tputcomp.clm4_0_74

    frankfurt/CESM:
	 cesm intel: OK
          FAIL  ERS.f45_g37.I1850CN.frankfurt_intel.GC.00075.tputcomp.clm4_0_74 
          FAIL  SMS.f10_f10.IRCP26CN.frankfurt_intel.GC.00075.tputcomp.clm4_0_74 
          FAIL  SMS_D.1x1_mexicocityMEX.I.frankfurt_intel.GC.00075.tputcomp.clm4_0_74 


CLM tag used for the baseline comparison tests if applicable: clm4_0_75

Changes answers relative to baseline: some changes

IF tag changes answers relative to baseline comparison the
following should be filled in:

Answer Changes for C13: C13 and C13 Carbon isotopes are handled a bit differently
 when they are NOT on the restart file. For C13 prior timestep's downregulation 
is used in calculating ci used for photosynthetic discrimination.  This changes
 answers when use_c13 is turned on.

===============================================================
===============================================================
Tag name:  clm4_0_75
Originator(s):  muszala (Stefan Muszala)
Date:  Fri Apr 19 16:13:42 MDT 2013
One-line Summary: run propset

Purpose of changes: run propset so externals are updated

Requirements for tag:N/A

Test level of tag: critical

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:N/A

Machines testing ran on:  no testing run
===============================================================
===============================================================
Tag name:  clm4_0_74
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Wed Apr 17 15:58:50 MDT 2013
One-line Summary: snow_depth changes, major scripts overhaul, small fix for tools

Purpose of changes: bring in snow_depth changes (bfb except for one field in clm hist files, SNOWDP)
   update external to alpha06e and bring in scripts refactoring by mvertens.  Bug fix for mksurfdata_map
   by sacks.  Some minor code cleanup by muszala.

Requirements for tag: N/A

Test level of tag: doc, std-test + tools

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): Bug in pio1_6_6 which kills mpi-serial runs, jedwards is working on fix.
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens, swensoc

List any svn externals directories updated (csm_share, mct, etc.):

< scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130416a
> scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_02_scripts4_130405a
< scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130412
> scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130403
< models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_29
> models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_26
< models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_6/pio
> models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_5/pio
< tools/cprnc                            https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_130411 
< tools/mapping                          https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130403
> mapping                                https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308
< models/lnd/clm/tools/clm4_5/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130403/gen_domain_files
> models/lnd/clm/tools/clm4_5/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308/gen_domain_files

List all files eliminated: models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES (moved cprnc to common location).

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

SVN_EXTERNAL_DIRECTORIES 

--small fix from sacks.
models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkglcmecMod.F90

--update xFail list since we now run test_system tests out of cesm and scripts
--test_system now uses create_test
models/lnd/clm/test/system/test_system
models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

--minor clean up
models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
models/lnd/clm/src/util_share/organicFileMod.F90
models/lnd/clm/src/util_share/decompInitMod.F90

--snow depth changes
models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
models/lnd/clm/src/clm4_5/main/clm_driver.F90
models/lnd/clm/src/clm4_5/main/inicPerpMod.F90
models/lnd/clm/src/clm4_5/main/clmtype.F90
models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
models/lnd/clm/src/clm4_5/main/histFldsMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.

  CESM test lists: (this now includes tests from test_system batch from yellowstone).

yellowstone::
   CESM intel:  OK
   CESM pgi:    OK
frankfurt:
   CESM intel: OK. just ran generate.  run these instead of test_system interactive tests from now on.

Tool testing: OK.  This was to double check my merge since the branch I started with was in clm4_0_68.

CLM tag used for the baseline comparison tests if applicable: clm4_0_73

Changes answers relative to baseline: Only change is in the clm history field, SNOWDP.  Everything else is bfb.

	
===============================================================
===============================================================
Tag name:  clm4_0_73
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Mon Apr 15 09:48:03 MDT 2013
One-line Summary: update mksurfdata_map for CLM4.5, and other misc. updates, mainly to tools

Purpose of changes:

Main purpose is to add a bunch of new fields to the CLM4.5 mksurfdata_map:
- SLOPE, STD_ELEV
- LAKEDEPTH
- peatf, abm, gdp (for fire)
- binfl, Ws, Dsmax, Ds (for VIC)
- F0, P3, ZWT0 (for methane)

Also, other miscellaneous changes:

- some refactoring of mksurfdata_map, and get more routines under unit test

- for CLM4.5 mksurfdata_map, always use hires datasets, except for pft

- add support for 36 glc_mec elevation classes (though there are currently
  no surface datasets for this option)

- add support for 1-d domain files in mksurfdata_map

- add createXMLEntries.pl for creating xml entries for new mapping files

- change default behavior of new_woodharv for clm4.0 (default is true now),
  and only support new_woodharv=true for clm4.5

- allow global & regional map generation in a single submission of
  mkmapdata/regridbatch.sh

- handle clm4_0 vs clm4_5 distinction in mkmapdata.sh

- handle large file support more robustly in mkmapdata.sh

- refactored mkscripgrid.ncl to use built-in ESMF utility

- remove 0.47x0.63 support for CLM4.5, since we don't have a good scrip
  grid file for that resolution

- in some files in bld/namelist_files, fix some resolutions listed as
  360x720 to be 360x720cru

- a few other minor changes, as noted below


Requirements for tag: Requirements: tools tests, and build-namelist
test (to catch any accidental changes to CLM's namelist), fix bug:
1641. Also ran standard tests to cover all bases.

Test level of tag: standard + tools

Bugs fixed (include bugzilla ID): 
    - 1641 (RCP6 and RCP8.5 used old bad wood harvest for 2006 and 2007)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None to CLM namelist, but many
changes to mksurfdata_map namelist.

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

========= Move to new inputs directory
D       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc

List all files added and what they do:

========= Create xml entries and commands to move files to inputdata for
          a bunch of mapping files
A       models/lnd/clm/tools/clm4_5/mkmapdata/createXMLEntries.pl

========= Guide for how to add new fields to mksurfdata_map
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/README.developers

========= Pull out shared mksurfdata_map code into new, shared modules
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkdiagnosticsMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkchecksMod.F90

========= Regrid new fields for mksurfdata_map
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mktopostatsMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgdpMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkagfirepkmonthMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpeatMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkVICparamsMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkCH4inversionMod.F90

========= Get more of mksurfdata_map code under unit tests
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkchecksMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkgridmapMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkdomainMod.F90

========= Add inputs for new mksurfdata_map unit tests
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lsmlon.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lon.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lon_and_num_pixels.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lon_and_ni.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__num_pixels.nc

========= Move to inputs directory
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_lookup_2d_netcdf.nc


List all existing files that have been modified, and describe the changes:

========= Add new mksurfdata_map variables and mapping files
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarctl.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90
           - also add no_inlandwet option
           - also handle the case where special landunits sum to a
             tiny bit more than 100% and thus give negative pct_pft
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklanwatMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkfileMod.F90
           - also add some other global attributes
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Srcfiles
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl
           - also add merge_gis and inlandwet options, remove ngwh
             option, remove hires option (instead use hirespft)
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata_map.namelist
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
           - also add support for 36 glc_mec columns, and remove 0.47x0.63
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
           - also remove 0.47x0.63, remove coarse-res lake, change logic for
             determining glacier dataset, remove ngwh=off rcp6 and rcp8.5 datasets
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
           - also add support for 36 glc_mec columns, no_inlandwet option,
             remove a duplicate section, remove 0.47x0.63
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/checkmapfiles.ncl
M       models/lnd/clm/doc/UsersGuide/tools.xml

========= Add nodata argument to gridmap_areaave
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgridmapMod.F90
           - also add gridmap_areastddev and gridmap_check routines
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklaiMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksoilMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkharvestMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkurbanparCommonMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvocefMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpftMod.F90

========= Add support for 36 glc_mec elevation classes
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkglcmecMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0_tools.xml
           - also fix ngwh default for rcp6 for 2006 and 2007
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml

========= Change default behavior of new_woodharv for clm4.0
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl

========= Add new test routines
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Srcfiles

========= Change location of input files for unit testing
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkncdio.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkindexmapMod.F90

========= Add support for 1-d domain files; allow larger diffs in
          domain_checksame
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkdomainMod.F90

========= Allow global & regional map generation in a single submission
M       models/lnd/clm/tools/clm4_5/mkmapdata/regridbatch.sh

========= Fix yellowstone ESMF path, add new grids, remove bluefire,
          no longer make atm-ocn and RTM mapping files, handle large
          file support and other grid-specific flags in a more robust
          way, add option to differentiate between clm4_0 vs 4_5
M       models/lnd/clm/tools/clm4_5/mkmapdata/mkmapdata.sh

========= Refactored to use built-in ESMF utility
M       models/lnd/clm/tools/clm4_5/mkmapgrids/mkscripgrid.ncl

========= Remove 0.47x0.63 for CLM4.5, since we don't have a good scrip grid
          file for that resolution
M       models/lnd/clm/tools/clm4_5/mkmapgrids/mkmapgrids.csh

========= Renumber build-namelist unit tests due to removing a
          resolution. Also cleaned up expectedFails list, mostly removing
          tests that now pass, changing failure types, and adding
          ERB.ne30_g16.I_1948-2004, which failed in clm4_0_72, too
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

========= Fix some paths in tools test scripts
M       models/lnd/clm/test/tools/TBLCFGtools.sh
M       models/lnd/clm/test/tools/TBLscript_tools.sh
M       models/lnd/clm/test/tools/test_driver.sh
M       models/lnd/clm/test/tools/TBLtools.sh
M       models/lnd/clm/test/tools/TOPtools.sh


Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes
    All PASS or xFAIL

  CESM test lists:

    yellowstone/CESM:              yes
      All PASS or xFAIL except:

        ***** Not listed in xFAIL list, but failed in clm4_0_72, so I'm
              adding it to the xFAIL list
        FAIL  ERB.ne30_g16.I_1948-2004.yellowstone_intel

    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          yes
      All PASS or xFAIL except:

        ***** No baselines
        BFAIL ERS_D.f10_f10.I_2000_CLM45_CN4MeNoVSoil.yellowstone_intel_rootlit.GC.142502.compare_hist.clm4_0_72 

      From component_gen_comp, all PASS or BFAIL1 except:

        ****** No baselines
        BFAIL2 ERS_D.f10_f10.I_2000_CLM45_CN4MeNoVSoil.yellowstone_intel_rootlit.compare_hist.clm4_0_72.clm2.h0 (baseline history file does not exist)
        BFAIL2 ERS_D.f10_f10.I_2000_CLM45_CN4MeNoVSoil.yellowstone_intel_rootlit.compare_hist.clm4_0_72.clm2.h1 (baseline history file does not exist)


    frankfurt interactive:      yes
      All PASS or xFAIL (including component_gen_comp)


    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    frankfurt interactive:      no
      Couldn't get tools to build on frankfurt, from either my branch or
      the clm4_0_72 trunk tag

    yellowstone interactive:    yes
      All PASS except:

        ********* These seem to be expected failures, based on the fact that they fail in clm4_0_72. Note that the
        ********* gen_domain tests themselves pass, but the baseline comparisons fail, even if I compare clm4_0_72
        ********* against itself
        006 ble14 TBLCFGtools.sh clm4_5 gen_domain CFGtools__ds T31.runoptions ..........................rc=4 FAIL
        008 ble@4 TBLCFGtools.sh clm4_5 gen_domain CFGtools__ds ne30.runoptions .........................rc=4 FAIL
        027 smiS4 TSMscript_tools.sh clm4_5 ncl_scripts getregional_datasets.pl getregional .............rc=6 FAIL
        028 bliS4 TBLscript_tools.sh clm4_5 ncl_scripts getregional_datasets.pl getregional .............rc=4 FAIL

        ********* Expected baseline failures due to changes in default behavior of CLM4_5 mksurfdata_map
        ********* (see notes on answer changes, below, for what changed; I have rerun these tests with some
        ********* changes on my branch and in the trunk tag to confirm that baseline comparisons pass when I
        ********* revert the differences noted there)
        012 blg54 TBLtools.sh clm4_5 mksurfdata_map tools__s namelist ...................................rc=7 FAIL
        020 bli24 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds rc=7 FAIL
        022 bli53 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__o ....rc=7 FAIL
        024 bli54 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__ds ...rc=7 FAIL
        026 bli57 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__do ...rc=7 FAIL
        030 bli74 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools_ rc=7 FAIL
        032 bliT4 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp24_2000^tools_ rc=7 FAIL


  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_72

Changes answers relative to baseline: NO. However, changes behavior of
these offline tools:

mksurfdata_map for clm4.5: changes the following defaults:
- use hires raw datasets (where available) for everything except pctpft
- zeroes out inland wetland areas
- changes default glacier dataset for glc_mec surface datasets
- uses correct ngwh dataset for rcp6.0 2006 & 2007

mksurfdata_map for clm4.0: changes the following defaults:
- uses correct ngwh dataset for rcp6.0 2006 & 2007

mkmapdata.sh:
- no longer generates ocean-atmosphere and RTM mapping files

mkscripgrid.ncl:
- roundoff-level changes in coordinates
- grid_dims is fixed (now correctly nx by ny, rather than ntot by ntot)

===============================================================
===============================================================
Tag name:  clm4_0_72
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Thu Apr 11 15:13:40 MDT 2013
One-line Summary: maoyi bug fix for vic hydro

Purpose of changes:  Bring in changes from Maoyi that fix a few bugs in the VIC hydrology code.  Make a small change in 
   scripts that fixes NoVS runs.

Requirements for tag: N/A

Test level of tag: std-test

Bugs fixed (include bugzilla ID): 1648

Known bugs (include bugzilla ID): 1658 - ERB problem with clm4_0.
                                  1659 - RTM restart problem when under a day boundary
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: changed NoVSBGC to NoVS in scripts branch_tag

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): changed scripts branch tag to 

-scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_01_scripts4_130405a
+scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_02_scripts4_130405a

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

from Maoyi Huang:

The variable cps%ws in my original codes overlaps with another variable in the SLAKE option. So I renamed it to cps$Wsvic.
wtsub in SoilHydrologyMod.F90 when VICHYDRO was on was not initialized. To avoid any potential conflicts, I renamed it to wtsub_vic and initialized it to 0._r8.
cleaned up the codes a little bit by taking out all variables that were not used.

M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)

- updated xFail list and slightly modified test_system yellowstone.batch to reflect ERS_D and ERS_Ln48_D changes. 
- tracking tputcomp and memcomp changes in advance of refactoring modifications.

  build-namelist unit tester: All OK.  All Failures in clm4_0_71 now pass.

  CESM test lists:

   cesm intel: PID: 163148:  OK.  a number of tputcomp failures:
      FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  SMS_RLA.f45_f45.ICLM45.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.GC.163148.tputcomp.clm4_0_71

   cesm pgi: PID: 163101 OK.  one memcomp failure 
      FAIL  ERS.f19_g16.ICNCROP.yellowstone_pgi.GC.163101

  test_system testing:

    yellowstone batch: OK.  Fixed a problem with NoVS, found bug in 
      FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.yellowstone_intel_user_nl_dirs.GC.162650.tputcomp.clm4_0_71
      FAIL  ERS_D.f10_f10.I_2000_CLM45_CN4Me.yellowstone_intel_ch4_set2_ciso.GC.162650.memcomp.clm4_0_71
      FAIL  ERS_D.f10_f10.I_2000_CLM45_CN4Me.yellowstone_intel_ch4_set2_ciso.GC.162650.tputcomp.clm4_0_71
      FAIL  ERS_D.f10_f10.I_2000_CLM45_CN4Me.yellowstone_intel_ch4_set3_pftroot.GC.162650.tputcomp.clm4_0_71

    frankfurt interactive: OK.  generate and tputcomp sub-tests failed.
      FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.generate.clm4_0_72
      FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.tputcomp.clm4_0_71
      FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.generate.clm4_0_72
      FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.tputcomp.clm4_0_71

CLM tag used for the baseline comparison tests if applicable: clm4_0_72

Changes answers relative to baseline: only for VIC.  Original implementation broken.  Consider this tag the new baseline against which to test for VIC.

IF tag changes answers relative to baseline comparison the
following should be filled in: N/A

===============================================================
===============================================================
Tag name:  clm4_0_71
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Wed Apr 10 08:43:00 MDT 2013
One-line Summary: compsets refactoring by mvertens

Purpose of changes:   Bring in externals that refactor the compset handling.  Update CLM to 
                      work with the new compsets.  Compsets are now extensible and easier to
                      modify and work with.

Requirements for tag: N/A

Test level of tag: std-test

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: modify CLM to work with new compset refactor

Describe any changes made to the namelist: modify CLM to work with new compset refactor

List any changes to the defaults for the boundary datasets: N/A  Levy's new files will come in later.

Describe any substantial timing or memory changes: N/A

Code reviewed by: mvertens, erik

List any svn externals directories updated (csm_share, mct, etc.):

https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_01_scripts4_130405a
https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130403
https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_26
https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_130325
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/socn
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/sice
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/sglc
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/swav
https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130405
http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_5/pio
https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308
https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308/gen_domain_files

List all files eliminated:

D       models/lnd/clm/test/system/tests_posttag_lynx_nompi
D       models/lnd/clm/test/system/mirage.interactive
D       models/lnd/clm/test/system/TCBCFGtools.sh
D       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
D       models/lnd/clm/test/system/config_files
D       models/lnd/clm/test/system/config_files/gen_domain
D       models/lnd/clm/test/system/config_files/tools__do
D       models/lnd/clm/test/system/config_files/tools__s
D       models/lnd/clm/test/system/config_files/CFGtools__ds
D       models/lnd/clm/test/system/config_files/tools__ds
D       models/lnd/clm/test/system/config_files/README
D       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
D       models/lnd/clm/test/system/config_files/tools__o
D       models/lnd/clm/test/system/get_cprnc_diffs.sh
D       models/lnd/clm/test/system/TSMncl_tools.sh
D       models/lnd/clm/test/system/CLM_compare.sh
D       models/lnd/clm/test/system/TBLCFGtools.sh
D       models/lnd/clm/test/system/README.testnames
D       models/lnd/clm/test/system/tests_posttag_yong
D       models/lnd/clm/test/system/TCBtools.sh
D       models/lnd/clm/test/system/test_driver.sh
D       models/lnd/clm/test/system/lynx.interactive
D       models/lnd/clm/test/system/tests_pretag_yellowstone_nompi
D       models/lnd/clm/test/system/bluefire.batch
D       models/lnd/clm/test/system/Makefile
D       models/lnd/clm/test/system/TSMscript_tools.sh
D       models/lnd/clm/test/system/tests_posttag_mirage
D       models/lnd/clm/test/system/tests_posttag_frankfurt_nompi
D       models/lnd/clm/test/system/gen_test_table.sh
D       models/lnd/clm/test/system/TOPtools.sh
D       models/lnd/clm/test/system/input_tests_master
D       models/lnd/clm/test/system/TSMtools.sh
D       models/lnd/clm/test/system/TBLscript_tools.sh
D       models/lnd/clm/test/system/tests_posttag_nompi_regression
D       models/lnd/clm/test/system/TBLtools.sh
D       models/lnd/clm/test/system/show_var_diffs.sh
D       models/lnd/clm/test/system/TSMCFGtools.sh

List all files added and what they do:

A  +    models/lnd/clm/test/tools
A  +    models/lnd/clm/test/tools/TSMscript_tools.sh
A  +    models/lnd/clm/test/tools/TCBCFGtools.sh
A  +    models/lnd/clm/test/tools/tests_posttag_frankfurt_nompi
A  +    models/lnd/clm/test/tools/config_files
A  +    models/lnd/clm/test/tools/config_files/gen_domain
A  +    models/lnd/clm/test/tools/config_files/tools__do
A  +    models/lnd/clm/test/tools/config_files/tools__s
A  +    models/lnd/clm/test/tools/config_files/CFGtools__ds
A  +    models/lnd/clm/test/tools/config_files/tools__ds
A  +    models/lnd/clm/test/tools/config_files/README
A  +    models/lnd/clm/test/tools/config_files/tools__o
A  +    models/lnd/clm/test/tools/get_cprnc_diffs.sh
A  +    models/lnd/clm/test/tools/gen_test_table.sh
A  +    models/lnd/clm/test/tools/TSMncl_tools.sh
A  +    models/lnd/clm/test/tools/CLM_compare.sh
A  +    models/lnd/clm/test/tools/nl_files
A  +    models/lnd/clm/test/tools/nl_files/nl_ch4_set2_ciso
A  +    models/lnd/clm/test/tools/nl_files/nl_ch4_set3_pftroot
A  +    models/lnd/clm/test/tools/nl_files/gen_domain.ne30.runoptions
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_brazil_1850
A  +    models/lnd/clm/test/tools/nl_files/nl_rootlit
A  +    models/lnd/clm/test/tools/nl_files/gen_domain.T31.runoptions
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_10x15_1850
A  +    models/lnd/clm/test/tools/nl_files/nl_ciso
A  +    models/lnd/clm/test/tools/nl_files/nl_anoxia_wtsat
A  +    models/lnd/clm/test/tools/nl_files/clm4_0_mksrfdt_1x1_numaIA_mp20irrcr_2000
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_T31_crpglc_2000
A  +    models/lnd/clm/test/tools/nl_files/clm4_0_mksrfdt_10x15_irr_1850
A  +    models/lnd/clm/test/tools/nl_files/getregional
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_numaIA_mp24_2000
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_brazil_1850-2000
A  +    models/lnd/clm/test/tools/nl_files/mkprocdata_ne30_to_f19_I2000
A  +    models/lnd/clm/test/tools/nl_files/mkmapdata_ne30np4
A  +    models/lnd/clm/test/tools/nl_files/nl_vrtlay
A  +    models/lnd/clm/test/tools/nl_files/nl_oldhyd
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_vancouverCAN_2000
A  +    models/lnd/clm/test/tools/nl_files/mkmapdata_if10
A  +    models/lnd/clm/test/tools/TBLCFGtools.sh
A  +    models/lnd/clm/test/tools/input_tests_master
A  +    models/lnd/clm/test/tools/TOPtools.sh
A  +    models/lnd/clm/test/tools/README
A  +    models/lnd/clm/test/tools/TSMtools.sh
A  +    models/lnd/clm/test/tools/README.testnames
A  +    models/lnd/clm/test/tools/TBLscript_tools.sh
A  +    models/lnd/clm/test/tools/tests_posttag_yong
A  +    models/lnd/clm/test/tools/TCBtools.sh
A  +    models/lnd/clm/test/tools/test_driver.sh
A  +    models/lnd/clm/test/tools/tests_posttag_nompi_regression
A  +    models/lnd/clm/test/tools/tests_pretag_yellowstone_nompi
A  +    models/lnd/clm/test/tools/TBLtools.sh
A  +    models/lnd/clm/test/tools/show_var_diffs.sh
A  +    models/lnd/clm/test/tools/TSMCFGtools.sh
A  +    models/lnd/clm/test/tools/Makefile
A  +    models/lnd/clm/test/system/yellowstone.namelist

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/test_system
M       models/lnd/clm/test/system/yellowstone.interactive
M       models/lnd/clm/test/system/frankfurt.interactive
M       models/lnd/clm/test/system/README
M       models/lnd/clm/test/system/yellowstone.batch
M       models/lnd/clm/bld/user_nl_clm
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/clm.buildnml.csh
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
MM      models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
MM      models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
MM      models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:

These should pass next time around:
-these two are due to megan now being on by default:
  030/449 < FAIL> <Test Id: 30> <Desc: drv_flds_in file the same as expected for standard>
  037/449 < FAIL> <Test Id: 37> <Desc: drv_flds_in file the same as expected for standard>
-these four should pass next time...no baselines in clm4_0_70
  108/449 < FAIL> <Test Id: 108> <Desc: compare file lnd_in DNE for CN and -res+360x720cru>
  109/449 < FAIL> <Test Id: 109> <Desc: compare file temp_file.txt DNE for CN and -res+360x720cru>
  443/449 < FAIL> <Test Id: 443> <Desc: compare file lnd_in DNE for phys45 and -res+360x720cru>
  444/449 < FAIL> <Test Id: 444> <Desc: compare file temp_file.txt DNE for phys45 and -res+360x720cru>

  CESM test lists:

    yellowstone/CESM:
intel: other than our expected fail list, current failures should pass during the next round of testing 
pgi  : see intel 

note for intel and pgi:  nlcomp fails should not be considered truth or otherwise.  There is a bug compare_namelist.
lots of BFAILS when comparing to clm4_0_70 and some differences in coupler hist. vars.
These are expected due to a new CISM and DATM.
 
  test_system testing:

    yellowstone batch:         OK.  See explanation for yellowstone/CESM tests above.
    frankfurt interactive:     OK.  After modifying the frankfurt compset for 1PT.

CLM tag used for the baseline comparison tests if applicable: clm4_0_70

Changes answers relative to baseline: yes, due to CISM, but not due to any science changes in CLM itself.  There will be
changes in some coupler history files.

===============================================================
===============================================================
Tag name:  clm4_0_70
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Mon Apr  1 15:58:23 MDT 2013
One-line Summary: bring in vic hydrology

Purpose of changes: Merge in VIC hydrology.  This is an isolated option that stands on it's 
own and does not effect existing code.  Added tests with and without vrtlay = .true..  

Requirements for tag: Add vic tests for CLM45 and CLM45-vrtlay, normal testing protocol

Test level of tag: standard + I_compsets + yellowstone_rtm batch

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):VIC crashes when run in debug mode-1648
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Add namelist option for vichydro

Describe any changes made to the namelist: Add namelist option for vichydro

List any changes to the defaults for the boundary datasets: Using temporary surface data sets.  New datasets
   will come in at a later tag.  The temporary data sets do not effect normal CLM runs.

Describe any substantial timing or memory changes: N/A

Code reviewed by: Erik,Maoyi Huang

List any svn externals directories updated (csm_share, mct, etc.):N/A

List all files eliminated:N/A

List all files added and what they do:

- For new VIC tests:
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f09/user_nl_clm
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f09
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f19/user_nl_clm
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f19
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay/user_nl_clm
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay
A       models/lnd/clm/test/system/user_nl_dirs/vic
- For VIC implementation:
A       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
A       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90

List all existing files that have been modified, and describe the changes:

- For VIC namelist fucntionality
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/config_files/config_definition.xml
- For new VIC tests
M       models/lnd/clm/test/system/yellowstone.batch
- VIC implementation
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK

  CESM test lists:

    yellowstone/CESM:             
        cesm intel: OK.  some tputcomp FAILs, but main tests pass
        cesm pgi:   OK.  one tputcomp FAIL, main tests pass
    yellowstone/CESM/allIcompsets: OK.

  test_system testing:
    yellowstone rtm batch: OK.
    yellowstone batch:     OK.

	    new VIC tests:
    ERS.f09_g16.I_2000_CLM45_VIC              -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_f09
    SMS.f19_g16.I_2000_CLM45_VIC              -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_f19
    ERS.f09_g16.I_2000_CLM45_VIC              -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay
    ERS_D.f09_g16.I_2000_CLM45_VIC            -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay
      this last one expected to Fail.

    frankfurt interactive: OK.

CLM tag used for the baseline comparison tests if applicable: clm4_0_69

Changes answers relative to baseline: No.  The VIC hydro option, if turned on 
    does change answers, but the use of this code is isolated from the rest of CLM.
	
===============================================================
===============================================================
Tag name:  clm4_0_69
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Mar 26 16:24:54 MDT 2013
One-line Summary: remove hydro reorder, volr and esmf mods

Purpose of changes: fix volrlnd init. from SPVAL to 0.0 so TWS in CLM looks correct.
    modify esmf interfaces for volr.  remove hydrology reordering due to nasty bug in
    restart.

Requirements for tag: fix bug 1644

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1644

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Dave L. and Jinyn Tang.  Minor review by Erik and Bill.

List any svn externals directories updated (csm_share, mct, etc.): update RTM to 1_0_22

List all files eliminated: N/A

List all files added and what they do:N/A

List all existing files that have been modified, and describe the changes:
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  only run CESM tests:

=== CESM Yellowstone PGI tests:  OK.  All BFAILS occur in cmopare_hist which is expected due to the removal of the hydro. reordering.
Status with expected failures removed:
./cs.status.114300.yellowstone | grep -v PET_PT.f19_g16.I1850 | grep -v SMS.1x1_numaIA.ICN_CROP | grep -v PET_PT.f10_f10.I20TRCN | grep -v PET_PT.f19_g16.ICLM451850 | grep -v SMS.T31_g37.IG4804CLM45 | grep -v SMS.1x1_numaIA.ICLM45CNCROP | grep -v PET_PT.f10_f10.I20TRCLM45CN | grep -v PASS
Possible test result outcomes:
...
BFAIL SMS_RLB.f45_f45.I.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS_D.hcru_hcru.I_2000_CRUFRC_CN.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS.f19_g16.ICNCROP.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERI.f19_g16.IG1850.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL SMS.T31_g37.IG4804.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL SMS.1x1_numaIA.ICNCROP.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL SMS_RLB.f45_f45.ICLM45.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS.f19_g16.ICLM45CNCROP.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68

=== CESM Yellowstone INTEL tests:  OK.  All BFAILS occur in cmopare_hist which is expected due to the removal of the hydro. reordering.
Status with expected failures removed:
>>./cs.status.114247.yellowstone | grep -v ERH_D.f19_g16.I1850CLM45CN | grep -v ERB.ne30_g16.I_1948-2004_CLM45 | grep -v ERS_E.f19_g16.I1850CRUCLM45CN | grep -v CME.f10_f10.ICN | grep -v ERS_D.f10_f10.ICLM45 | grep -v PET_PT.f19_g16.I1850CN | grep -v ERB.ne30_g16.I_1948-2004 | grep -v PET_PT.f10_f10.I20TRCN | grep -v PET_PT.f19_g16.I1850CLM45CN | grep -v ERS_E.f19_g16.ICLM451850 | grep -v ERS_D.f19_g16.IGRCP26CLM45CN | grep -v ERS_Lm3.f19_g16.IGRCP60CLM45CN | grep -v PET_PT.f10_f10.I20TRCLM45CN | grep -v SMS.f19_g16.IRCP45CLM45CN | grep -v ERS_D.f19_g16.IRCP85CLM45CN | grep -v PASS | grep -v COMMENT
...
FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.114247.tputcomp.clm4_0_68 
FAIL  NCK.f10_f10.I.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_E.f19_g16.I1850.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERH_D.f19_g16.I1850CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.114247.tputcomp.clm4_0_68 
FAIL  SMS.f19_g16.IRCP45CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.114247.memcomp.clm4_0_68 
FAIL  SMS_ROA.f45_f45.ICLM45.yellowstone_intel.GC.114247.tputcomp.clm4_0_68 
FAIL  NCK.f10_f10.ICRUCLM45.yellowstone_intel.GC.114247.compare_hist.clm4_0_68

=== test_system  yellowstone.rtm.batch:  OK. All compare_hist failures are expected due changes in photosynthesis

CLM tag used for the baseline comparison tests if applicable: For Cesm intel and pgi tests- clme_0_68
  for rtm tests, against clm4_0_66.
  for science validation, clm4_0_66

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    obvious changes in GPP,FPSN and FCTR.  Other fields changed as well.
       ran the following and had Dave L. and Jinyun Tang look at output.
       f19_g16_I_1850_CLM45_CN_yellowstone_intel_photo_clm4_0_66/
       f19_g16_I_1850_CLM45_CN_yellowstone_intel_photo_clm4_0_68/
       f19_g16_I_1850_CLM45_CN_yellowstone_intel_photo_clm4_0_69/
       f19_g16_ICLM45_yellowstone_intel_photo_clm4_0_66/
       f19_g16_ICLM45_yellowstone_intel_photo_clm4_0_68/
       f19_g16_ICLM45_yellowstone_intel_photo_clm4_0_69/
	
===============================================================
===============================================================
Tag name:  clm4_0_68
Originator(s):  erik (Erik Kluzek)
Date: Sat Mar 16 16:03:14 MDT 2013
One-line Summary:  Fix mksurfdata_map for ne120np. Error out if SUM(weights)/=100. Photosynthesis change for CLM45.

Purpose of changes:

Bring in ne120fix branch to trunk. This fixes some issues in mksurfdata_map for generation 
of ne120np surface data file. Put error back in CLM if weights don't sum to 100. Add in 
Keith Oleson's photosynthesis change. This changes canopy top: triose phosphate utilization rate at 25C to
be dependent on vcmax25top ( maximum rate of carboxylation) rather than jmax25top (maximum electron 
transport rate). Update getco2_historical.ncl script to be able to handle rcp files as well.

Update scripts so that I1PT settings for urban single-point files will be used, and IRCP
will properly do a hybrid startup. And seperate out intel/pgi test lists.

Update datasets for ne120np4 and ne240np4 (CLM40), with updated mksurfdata_map.

Requirements for tag:
   Tools test, yellowstone batch, fix bug 1632/1643

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1632 (ne120np4 mksurfdata problem)
                                  1643 (Fix RES_COMPSET_MATCH for I1PT, IRCP*)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   New surfdata and pftdyn files for ne120np4 (CLM40)
   New surfdata            files for ne240np4 (CLM40)

Describe any substantial timing or memory changes: None

Code reviewed by: self, sacks (mksrfdata changes)

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts updated to scripts4_130315c

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/yellowstone.batch --- Fix some compset names

   M  models/lnd/clm/tools/clm4_5/ncl_scripts/getco2_historical.ncl - Handle rcp CO2 files
   M  models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90 -- Clean out small PFT values
   M  models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mksurfdat.F90 -- Clean out small PFT values

   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml ------- Update ne120/ne240 surfdata/pftdyn datasets
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml ------- Delete ALL finidat files as none compatible
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml - Add rcp CO2 datasets: rcp2.6/4.5/6/8.5

   M  models/lnd/clm/src/clm4_5/main/surfrdMod.F90 - Add back abort if surfdata weights don't sum to 100%
   M  models/lnd/clm/src/clm4_0/main/surfrdMod.F90 - Add back abort if surfdata weights don't sum to 100%
   M  models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90 - change in photosynthesis

Changes in expected fails for testing:

  build-namelist unit-test: Following fail because of new datasets will pass next tag
     203 ne120
     208 ne240
     306 ne120 20th Century
     428 48x96 for CLM45 (remove finidat)
		    failType="FAIL">answers change on restart</entry>


  Changes to expected fail:

   <test_system_batch>
        <yellowstone>
            <INTEL>
+               <entry testId="ERS.f19_g16.I_1850_CLM45_CN4Me"                     failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_D.f19_g16.I_1850_CLM45_CNCENTNoMe"              failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS.f19_g16.I_2000_CLM45_CN4Me_CROP"                failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211.f10_f10.ICLM45CNADSPIN"                   failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP"            failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP"            failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN"              failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_D.f19_g16.ICLM45GLCMEC"                         failType="FAIL">answers change on restart</entry>

   <auxTests>
     <yellowstone>
	<INTEL>
	+<entry testId="ERH_D.f19_g16.I1850CLM45CN" failType="FAIL" >Restart difference</entry>
        +<entry testId="ERB.ne30_g16.I_1948-2004_CLM45" failType="FAIL" >Restart difference</entry>
        +<entry testId="ERS_E.f19_g16.I1850CRUCLM45CN" failType="FAIL" >Restart difference</entry>
        +<entry testId="CME.f10_f10.ICN" failType="FAIL" >Restart difference</entry>
        +<entry testId="ERS_D.f10_f10.ICLM45" failType="FAIL" >Restart difference</entry>

Machines testing ran on:  (Tests in priority order)
  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/CESM:              yes
    yellowstone/CESM/allIcompsets: yes

  test_system testing:

    yellowstone batch:          yes
    frankfurt interactive:      yes

  test_driver.sh tools testing:

    yellowstone interactive:    yes
    frankfurt   interactive:    yes

CLM tag used for the baseline comparison tests if applicable: clm4_0_68

Changes answers relative to baseline: Yes!

    - what code configurations:
       All CLM45 change because of change in photosynthisis
       I1PT compsets change because of scripts bug
       IRCP compsets now startup with new initial conditions
    - what platforms/compilers: All
    - nature of change: similar climate

===============================================================
===============================================================
Tag name:  clm4_0_67
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Mar 12 11:14:59 MDT 2013
One-line Summary: Jinyun photosynthesis and hydrology reorder

Purpose of changes: Bring in mods that reorder hydrology code and modes that
                    address photosynthesis CN code.  This tag is F90 code only.

Requirements for tag: N/A

Test level of tag: std-test + ICompset tests + yellowstone interactive

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets:N/A

Describe any substantial timing or memory changes:N/A

Code reviewed by: Dave L, S. Swenson, self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated:N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

Major changes in CNEcosystemDynMod, SoilHydrologyMod and Hydrology2Mod.  Also did some deadCode removal (unused pointer 
assignments, unused modules and local variables.

   M biogeochem/CNEcosystemDynMod.F90   - effects CN.  Split out CNEcosystemDynA and CNEcosystemDynB

   M main/CNiniTimeVar.F90              - removed some commented out code
   M main/clmtypeInitMod.F90            - removed commented out init_gridcell_pstate_type 
   M main/pftdynMod.F90                 
   M main/initSurfAlbMod.F90            - effects CN.  For photosynthesis.
   M main/clm_driver.F90            
   M main/CNiniSpecial.F90           
   M ain/clmtype.F90                 
   M main/histFldsMod.F90             

   M biogeophys/Hydrology2Mod.F90 - split out 2A and 2B subroutines 
   M biogeophys/SoilHydrologyMod.F90    - split out new WaterTable routine from existing Drainage routine
   M biogeophys/BareGroundFluxesMod.F90  
   M biogeophys/CanopyFluxesMod.F90     - For photosynthesis. 


Machines testing ran on:  (Tests in priority order)

Dave Lawrence looked at 1 year runs to make sure behavior looked OK before and after mods.
S. Swenson looked at short simulations to make sure reordering worked correctly in the hydrology code.
Expect changes in the following fields (depending on compset and test type)

roff Flrl_rofliq
roff Flrl_rofliq
lnd Flrl_rofliq
lnd Flrl_rofliq
roff Forr_roff
roff Forr_roff
roff Flrl_rofliq
roff Flrl_rofliq
lnd Fall_lat
lnd Fall_lat
lnd Fall_sen
lnd Fall_sen
lnd Fall_evap
lnd Fall_evap
lnd Flrl_rofliq
lnd Flrl_rofliq
roff Forr_roff
roff Forr_roff
roff Flrl_rofliq
roff Flrl_rofliq
lnd Sl_fv
lnd Sl_f

l2x_Sl_avsdr
l2x_Sl_anidr
l2x_Sl_avsdf
l2x_Sl_anidf
l2x_Sl_tref
l2x_Sl_qref
l2x_Sl_t
l2x_Sl_fv
l2x_Sl_ram1
l2x_Sl_snowh
l2x_Sl_u10
l2x_Fall_swnet
l2x_Fall_taux
l2x_Fall_tauy
l2x_Fall_lat
l2x_Fall_sen
l2x_Fall_lwup
l2x_Fall_evap
l2x_Fall_flxdst1
l2x_Fall_flxdst2
l2x_Fall_flxdst3
l2x_Fall_flxdst4
l2x_Flrl_rofliq
x2l_Slrr_volr
r2x_Slrr_volr
r2x_Forr_roff
r2x_Forr_ioff
x2r_Flrl_rofliq
 
  build-namelist unit tester:   yes - OK

  CESM test lists:

    yellowstone/CESM:              yes - OK.  Fails are due to new code.  These should pass next tag.

   FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.yellowstone_intel_user_nl_dirGC.113407  
   oAIL  ERS_D.fol_g16.I_1850_CLM45_CNCENTNoMe.yellowstone_intel_user_nl_dirs.GC.113407  
   FAIL  ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.113407 
   FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.113407.compare_hist.clm4_0_66  
   FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.GC.113407.compare_hist.clm4_0_66 
   FAIL  ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP.yellowstone_intel_crop.GC.113407  
   FAIL  ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP.yellowstone_intel_crop.GC.113407 
   FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.yellowstone_intel_voc.GC.113407 
   FAIL  ERS_Ln48_D.f10_f10.I_2000_CLM45_CN.yellowstone_intel_ciso.GC.113407.compare_hist.clm4_0_66  
   FAIL  ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel_glcMEC.GC.113407 

    yellowstone/CESM/allIcompsets: yes - OK

  test_system testing:

    yellowstone batch:          yes - OK. Fails are due to new code.  These should pass next tag.
   
   FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS_D.f19_g16.I_1850_CLM45_CNCENTNoMe.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.113407 
   FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.GC.113407.compare_hist.clm4_0_66 
   FAIL  ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP.yellowstone_intel_crop.GC.113407 
   FAIL  ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP.yellowstone_intel_crop.GC.113407 
   FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.yellowstone_intel_voc.GC.113407 
   FAIL  ERS_Ln48_D.f10_f10.I_2000_CLM45_CN.yellowstone_intel_ciso.GC.113407.compare_hist.clm4_0_66 
   FAIL  ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel_glcMEC.GC.113407  

    frankfurt interactive:      yes - OK
    yellowstone interactive:    yes - reasonably OK.  Added a few tests to xFail list that need new
                                surface data sets.
                                The following fail due to new code and should pass next round:

   FAIL  ERS_D_Mmpi-serial.CLM_USRDAT.ICLM45USUMB.yellowstone_intel_user_nl_dirs.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_D_P1x1_Mmpi-serial.f19_g16.I20TR_CLM45VSCN.yellowstone_intel_voc.GC.075359 
   FAIL  ERS_D_P1x1_Mmpi-serial.f19_g16.I20TR_CLM45VSCN.yellowstone_intel_voc.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45.yellowstone_intel_monthly.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_CLM45_CN.yellowstone_intel_monthly.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45_CNDV.yellowstone_intel_monthly.GC.075359.compare_hist.clm4_0_66b

CLM tag used for the baseline comparison tests if applicable: clm4_0_66

Changes answers relative to baseline: Photosynthesis mods and reordering will change answers

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate):  hydrology reordering will introducce very small changes due to the process of moving around, but not changing code.
	     photosysthesis mods are major changes that effect science

	
===============================================================
===============================================================
Tag name:  clm4_0_66
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Thu Mar  7 11:54:05 MST 2013
One-line Summary: turn off subgrid topography snow parameterization for glc_mec landunits

Purpose of changes:

Change from Sean Swenson to turn off subgrid topography snow
parameterization over glc_mec landunits: ice_mec columns already account
for subgrid topographic variability through their use of multiple elevation
classes; thus, to avoid double-accounting for topographic variability in
these columns, we ignore topo_std and use a value of n_melt that assumes
little topographic variability within the column.

Requirements for tag: yellowstone cesm tests, make sure GLC test goes

Test level of tag: critical

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/CESM:              yes
      All PASS or xFail (ignoring tput failures); only baseline failure is,
      the following, which is an expected failure:
        FAIL  ERI.f19_g16.IG1850CLM45.yellowstone_pgi.C.113330.compare_hist.clm4_0_65 
    
    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          no
    frankfurt interactive:      no
    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_65

Changes answers relative to baseline: Yes, just for CLM4.5 with glc_mec

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM4.5 with glc_mec
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): new climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_65
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Thu Mar  7 09:53:31 MST 2013
One-line Summary: back out Machines external to get more tests to pass, especially IG

Purpose of changes:

Some tests - particularly IG - became broken in clm4_0_64. This tag rolls
back the Machines external so that GLC compiles properly.

Requirements for tag:

Test level of tag: only yellowstone CESM tests

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
-scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130304b
+scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130301

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

Difference in expected fails: this brings the xfail list back to what it
was in clm4_0_63, with the exception of some SBN IcompsetTests that were
added to xFail in clm4_0_64:
@@ -154,12 +154,6 @@
                <entry testId="PET_PT.f10_f10.I20TRCLM45CN"    failType="TFAIL">scripts issue component not threaded</entry>
                <entry testId="SMS.f19_g16.IRCP45CLM45CN"      failType="SFAIL">missing finidat file</entry>
                <entry testId="ERS_D.f19_g16.IRCP85CLM45CN"    failType="SFAIL">missing finidat file</entry>
-
-               <entry testId="ERS_D.f19_g16.IGRCP26CN"        failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-               <entry testId="ERS_Lm3.f19_g16.IGRCP60CN"      failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-
-               <entry testId="NCK.f10_f10.I"                  failType="FAIL">ERROR: lnd_prognostic but num_inst_lnd not num_inst_max</entry>
-               <entry testId="NCK.f10_f10.ICRUCLM45"          failType="FAIL">ERROR: lnd_prognostic but num_inst_lnd not num_inst_max</entry>
             </INTEL>
             <PGI>
                <entry testId="PET_PT.f19_g16.I1850"           failType="TFAIL">scripts issue with ocean not threaded</entry>
@@ -170,10 +164,6 @@
                <entry testId="SMS.T31_g37.IG4804CLM45"        failType="FAIL" >checkWeights error, probably due to old-format urban on surface dataset</entry>
                <entry testId="SMS.1x1_numaIA.ICLM45CN_CROP"   failType="TFAIL">Bad compset name: ICNCROP</entry>
                <entry testId="PET_PT.f10_f10.I20TRCLM45CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
-
-               <entry testId="ERI.f19_g16.IG1850.yellowstone_pgi"          failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-               <entry testId="SMS.T31_g37.IG4804.yellowstone_pgi"          failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-               <entry testId="ERI.f19_g16.IG1850CLM45.yellowstone_pgi"     failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry>
             </PGI>
          </yellowstone>
       </auxTests>


Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/CESM:              yes
      All PASS or xFail (ignoring tput failures)
      (note that baselines didn't exist in clm4_0_64 for some tests,
      particularly IG)    

    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          no
    frankfurt interactive:      no
    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_64

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_0_64
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Wed Mar  6 12:41:26 MST 2013
One-line Summary: update externals.  fixes 40/45 intial condition problem

Purpose of changes:  Main purpose is to bring in scripts4_130227b so that
                     CLM45 compsets do not use CLM40 initial conditions.  Put in
                     PTCLM fix.  Secondary purpose is to update other externals.
                     NOTE:  This tag only changes externals.  No clm 
                     code, scripts or xml files were touched.

Requirements for tag: N/A

Test level of tag: critical (only yellowstone, Icompset and aux 40/45 aux tests)

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Changes in processor count for certain resolutions.

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: the 40/45 fix in scripts4_130227b will fix initial condition problems.

Describe any substantial timing or memory changes: N/A

Code reviewed by: muszala, Erik

List any svn externals directories updated (csm_share, mct, etc.):

   cprnc_120828 -> cprnc_130301
   scripts4_130207 -> scripts4_130304
   Machines_130214 -> Machines_130304b
   rtm1_0_19 -> rtm1_0_20
   share3_130220 -> share3_130226
   esmf_wrf_timemgr_120427 -> esmf_wrf_timemgr_130213
   timing_120731 -> timing_130214
   mapping_121113b -> mapping_130222

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: N/A

   M   models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES
   M   models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
   M   SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)
    yellowstone/CESM:              yes - looks decent, but not great.  There are no new test failures and new tests that do fail are
                                         most likely due to new testlists that weren't tested in a clm tag.
                                         A few nl comp failures since number of pes changed (expected).
                                         Many comparisons failed due to baselines not existing.
                                         5 IG compsets fail due to a linking error.
                                         2 NCK.F10_f10 tests die with "ERROR: lnd_prognostic but num_inst_lnd not num_inst_max"
																	  
    yellowstone/CESM/allIcompsets: yes  - looks OK.  Transient runs added to xFail list as well as SBN.1x1_smallvilleIA.ICLM45CNCROP
	                                       and SBN.f09_g16.IGCLM45IS2 

CLM tag used for the baseline comparison tests if applicable: clm4_0_63

Changes answers relative to baseline: Yes. PE counts change plus the initial condition fixes will change answers compared
                                      to existing baselines

IF tag changes answers relative to baseline comparison the
following should be filled in:

   The 40/45 fix should bring this back to being correct (ie. the state before clm4_0_60).

===============================================================
===============================================================
Tag name:  clm4_0_63
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Mon Mar  4 13:50:15 MST 2013
One-line Summary: bug 1635 fix - 4_0 CN bug

Purpose of changes:  Put back some removed code.  This allows CN to run with 4_0
                     beyond one year

Requirements for tag:

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1635

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Dave Lawrence, Sam Levis

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90
--- models/lnd/clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90  (revision 44311)
+++ models/lnd/clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90  (working copy)
@@ -183,6 +183,12 @@
       call p2c(num_soilc, filter_soilc, annavg_t2m, cannavg_t2m)
    end if
			   
      +   ! column loop
      +   do fc = 1,num_soilc
      +      c = filter_soilc(fc)
      +      if (annsum_counter(c) >= get_days_per_year() * secspday) annsum_counter(c) = 0._r8
      +   end do
      +
      end subroutine CNAnnualUpdate
      !-----------------------------------------------------------------------


Machines testing ran on:  (Tests in priority order)
    yellowstone/CESM:              yes only 40 list - OK. Matches xFail list
    yellowstone/CESM/allIcompsets: yes              - OK. Matches xFail list

   Also had D. Lawrence look at one 45 run and a 40 run from this tag compared to one from
   clm4_0_58 (the tag just before this bug was introduced).  All three runs were 2 years long.

CLM tag used for the baseline comparison tests if applicable: clm4_0_62

Changes answers relative to baseline: No

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: 

   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm4_0_62
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Sun Feb 24 15:27:09 MST 2013
One-line Summary: add active flags, change subgrid weighting convention, other misc fixes

Purpose of changes:

Main set of changes involves adding 'active' flags at the pft, column & landunit
levels, saying whether computations should be run over a given point. This
change involved many changes throughout the code, changing conditionals like 'if
(pwtgcell(p) > 0)' to 'if (pactive(p))'. The purpose of this change was
two-fold: (1) make these conditionals less error-prone and more robust to future
changes in the code: currently, the 'active' condition is: weight > 0 OR type =
glc_mec -- but sometimes people forgot to include the latter condition, and it
could get worse moving forwards; (2) make it easy to change the 'active'
condition in the future -- this now just has to be done in one place, in
reweightMod.

In changing these conditionals to use the new 'active' flags, I also added or
removed conditionals in a few places -- see notes below on the individual file
modifications.

Also, changed subgrid weighting convention, so that the sum of weights always
adds to 1 at all levels. Previously, there was no fixed convention for the
weights of, e.g., pfts on a 0-weight column. Now, even on a 0-weight column, the
sum of pft weights on the column will still add to 1.

Also a number of other miscellaneous fixes:
- bug-fix in handling of unstructured grids in determining new vs old urban format
- add some new surface datasets with new urban format
- other misc. fixes noted below

Requirements for tag:
    Testing: build-namelist unit tests, yellowstone cesm, yellowstone
    test_system batch, frankfurt test_system interactive; include
    component_gen_comp for test_system tests

Test level of tag: standard

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: A few new surface datasets (see below)

Describe any substantial timing or memory changes: None

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.):
Main purpose is to update cism (along with necessary scripts & machines
updates), but also updated other externals to their cesm1_2_beta02 versions:
- scripts
- machines
- cism
- mct
- pio
- csm_share (includes scam update from Erik)

List all files eliminated:

List all files added and what they do:

======= Handles modifications and error-checks related to changing subgrid weights
======= (note that direct calls to setFilters should no longer be made --
======= instead, call reweightWrapup in this new module). This adds a routine that confirms
======= that all subgrid weights add to 1 (from Zack Subin).
A       models/lnd/clm/src/clm4_5/main/reweightMod.F90

List all existing files that have been modified, and describe the changes:

======= add 'active' flags; replace use of things like 'if (pwtgcell(p) > 0)'
======= with 'if (pactive(p))'
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90 ---------- also removed unnecessary conditional
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90 ------------ also added a pactive check
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/main/dynlandMod.F90 --------------- also added a new conditional
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90 ------------ also added a new conditional in p2c_2d_filter
           (similar to existing conditional in p2c_1d_filter)
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90 --- also remove ^M line endings accidentally added in clm4_0_61
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90

======= replace calls to setFilters with calls to reweightWrapup; in driver,
======= moved these calls based on an analysis of where they are needed
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

======= change subgrid weighting convention; remove duplicated code in setting
======= up urban landunits. Note that, in a few places (marked by "TODO WJS") I
======= assumed an arbitrary weighting for, e.g., pft weights in a 0-weight
======= landunit. This can be changed in the future once we change how weights
======= are defined on the surface dataset (using weights on the landunit rather
======= than on the grid cell).
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

======= declare some parameters as 'parameter' (needed in order to use them in
======= select case statements)
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90

======= make check for new vs old format more robust; in particular, fix
======= handling of unstructured grids (before, these were deemed to be
======= old-format urban files by accident)
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90

======= use nlevurb=5 even for more_vertlayers (based on suggestion from Keith
======= and Erik)
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90

======= use new surface datasets for glcmec 1.9x2.5 1850&2000, and  f10 1850, in
======= order to have valid urban data for some tests to pass
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

======= use cism rather than sglc for test_system tests, because sglc means no
======= sno fields are sent to the coupler, which leads to ERS test failures and
======= generally weaker tests
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml

======= add cism1 distinction in compset name
M       models/lnd/clm/test/system/yellowstone.interactive
M       models/lnd/clm/test/system/bluefire.interactive
M       models/lnd/clm/test/system/lynx.batch

======= add call to component_gen_comp
M       models/lnd/clm/test/system/test_system

======= Removed some now-passing tests, including some that were passing earlier
======= but still remained in this file
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
xFAIL differences:
Index: models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
===================================================================
--- models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml	(revision 44092)
+++ models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml	(working copy)
@@ -113,8 +113,7 @@
               <entry testId="ERS_D.f10_f10.I_2000_CLM45CN4MeNoVSoil.rootlit"     failType="TFAIL"></entry>
               <entry testId="ERI_D.f10_f10.I_2000_CLM45CN4Me.vrtlay"             failType="TFAIL"></entry>
               <entry testId="PET_D_P1x32.ne30_g16.ICN"                           failType="SFAIL"></entry>
-              <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                 failType="TFAIL"></entry>
-              <entry testId="ERS_D.f19_g16.ICLM45GLCMEC.glcMEC"                  failType="TFAIL"></entry>
+              <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                 failType="FAIL"></entry>
           </INTEL>
       </yellowstone>
    </test_system_batch> 
@@ -137,7 +136,6 @@
             <INTEL>
                <entry testId="PET_PT.f19_g16.I1850CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
                <entry testId="ERB.ne30_g16.I_1948-2004"  failType="FAIL" >Restart difference</entry>
-               <entry testId="ERS_Lm3.f19_g16.IGRCP60CN" failType="FAIL" >Soil balance error on restart</entry>
                <entry testId="PET_PT.f10_f10.I20TRCN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
 
                <entry testId="PET_PT.f19_g16.I1850CLM45CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
@@ -149,20 +147,12 @@
                <entry testId="ERS_D.f19_g16.IRCP85CLM45CN"    failType="SFAIL">missing finidat file</entry>
             </INTEL>
             <PGI>
-               <entry testId="SMS_RLB.f45_f45.I"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
-               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"  failType="cFAIL">missing LAPACK symbol dgbsv</entry>
                <entry testId="PET_PT.f19_g16.I1850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
-               <entry testId="ERI.f19_g16.IG1850"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
-               <entry testId="SMS.T31_g37.IG4804"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
                <entry testId="SMS.1x1_numaIA.ICN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
                <entry testId="PET_PT.f10_f10.I20TRCN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
 
-               <entry testId="SMS_RLB.f45_f45.ICLM45"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
-               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN" failType="cFAIL">missing LAPACK symbol dgbsv</entry>
-               <entry testId="ERS.f19_g16.ICLM45CNCROP"               failType="cFAIL">missing LAPACK symbol dgbsv</entry>
                <entry testId="PET_PT.f19_g16.ICLM451850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
-               <entry testId="ERI.f19_g16.IG1850CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
-               <entry testId="SMS.T31_g37.IG4804CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.T31_g37.IG4804CLM45"                failType="FAIL" >checkWeights error, probably due to old-format urban on surface dataset</entry>
                <entry testId="SMS.1x1_numaIA.ICLM45CN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
                <entry testId="PET_PT.f10_f10.I20TRCLM45CN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
             </PGI>


Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

NOTE: Ignoring throughput fails


  build-namelist unit tester:   yes
     All PASS or xFAIL

  CESM test lists:

    Note: the following change was made after running the CESM test list (just
    reran the one affected case: ERI.f19_g16.IG1850CLM45.yellowstone_pgi):
      In bld/namelist_files/namelist_defaults_clm4_5.xml:
      -lnd/clm2/surfdata_map/surfdata_1.9x2.5_simyr1850_glcmec10_c120927.nc</fsurdat>
      +lnd/clm2/surfdata_map/surfdata_1.9x2.5_simyr1850_glcmec10_c130221.nc</fsurdat>

    yellowstone/CESM:              yes
      All PASS or xFAIL except:

      ***** Expected failure due to urban bug-fix for unstructured grids
      FAIL  ERB.ne30_g16.I_1948-2004_CLM45.yellowstone_intel.GC.051632.compare_hist.clm4_0_61 

      ***** memcomp failures probably due to using cism2 code
      FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.051626.memcomp.clm4_0_61 
      FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.051626.memcomp.clm4_0_61 

      ***** memcomp failures with unknown cause
      FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.051626.memcomp.clm4_0_61 
      COMMENT  pesmaxmem_incr = 28.2

    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          yes, including component_gen_comp
      All PASS or xFAIL except:

      ***** Expected failure due to new surface dataset
      FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.051756.compare_hist.clm4_0_61_test_system 
      
      ***** Expected failure due to urban bug-fix for unstructured grids
      FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.GC.051756.compare_hist.clm4_0_61_test_system 

      ***** memcomp failures with unknown cause
      FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.yellowstone_intel_voc.GC.051756.memcomp.clm4_0_61_test_system 
      FAIL  ERS_Ln48_D_P64x16.ne30_g16.ICN.yellowstone_intel_user_nl_dirs.GC.051756.memcomp.clm4_0_61_test_system 


      ----- COMPONENT_GEN_COMP RESULTS ---
      All comparisons PASS except:

      ****** Expected failures due to new surface dataset and fix in urban for
      ****** ne30 These failures all go away when I compare against one-offs
      ****** from clm4_0_61 with fixes in surface datasets and the urban ne30
      ****** bug. However, there is then a diff in the h1 file for the GLCMEC
      ****** test: diffs just in cols1d_wtlunit & pfts1d_wtlunit, and this is
      ****** just over glc_mec columns -- this is expected due to changes in
      ****** subgrid weighting convention
      FAIL   ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel_glcMEC.compare_hist.clm4_0_61.clm2.h0 
      FAIL   ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.compare_hist.clm4_0_61.clm2.h0 
      FAIL   ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.compare_hist.clm4_0_61.clm2.h1 
      FAIL   ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.compare_hist.clm4_0_61.clm2.h0 
      FAIL   ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.compare_hist.clm4_0_61.clm2.h1 

      ****** Differences just over crop landunits: RMS diffs in pft weights on
      ****** col and landunit, and col weights on landunit; and FILLDIFFs in 12
      ****** column-level variables (now _FillValue in 0-weight places). These
      ****** differences aren't surprising given the changes in subgrid weight
      ****** convention and the fact that inactive points are now given spval in
      ****** 1-d output
      FAIL   ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.yellowstone_intel_user_nl_dirs.compare_hist.clm4_0_61.clm2.h1


    frankfurt interactive:      yes, including component_gen_comp
      All PASS or xFAIL

    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_61

Changes answers relative to baseline: yes, in limited cases - see below

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM4.5 with the following:
      - unstructured grids, due to urban bug fix
      - glcmec @ 1.9x2.5, due to new surface datasets with new urban
      - 1850 @ f10, due to new surface dataset
    - what platforms/compilers: ALL
    - nature of change: larger than roundoff/same climate OR new climate (not
      investigated carefully)

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: NOT DONE

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_61
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Wed Feb 20 15:53:38 MST 2013
One-line Summary: rtm, drv and clm mods: tws, Volr, r01 rdric file and SoilHydroMod

Purpose of changes: Bring Volr from RTM to CLM.
                    New ne120 files.  
						  New SoidHydrologyMod file for 45 (not bit-for-bit)
						  Bring tws in.
						  Sacks test list change and test_system change.
						  Add yellowstone to xFail options.
						  Added RTM test list for test_system tests (yellowstone.rtm.batch)
						  DEPRECATE WT in 4_5 code.  WT and the variable wt are left in since they are used in other 
						     portions of the code, but they are marked as deprecated since we now have TWS.

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: muszala, swenseon, mvertens

List any svn externals directories updated (csm_share, mct, etc.):
   drv:       update from drvseq4_2_20 to drvseq4_2_22
   rtm:       update from rtm1_0_18 to rtm1_0_19
   csm_share: update from share3_130213 to share3_130131

List all files eliminated:
D       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOn
D       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmR01

List all files added and what they do:
   Added RTM rtm test_system tests
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOff/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOff
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOn/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOn
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOff/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOff
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOn/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOn
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/yellowstone.rtm.batch

List all existing files that have been modified, and describe the changes:
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/test_system
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/yellowstone.interactive
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOff/user_nl_rtm
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/README
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/yellowstone.batch
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/bld/unit_testers/xFail/expectedFail.pm
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/doc/ChangeLog
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/doc/ChangeSum
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/cpl_share/clm_cpl_indices.F90
MM      https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
MM      https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/clmtype.F90
MM      https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/SVN_EXTERNAL_DIRECTORIES
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/ChangeLog
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/ChangeSum


Machines testing ran on:  (Tests in priority order)
  NOTE:  Lots of throughput, NLComp and memcomp fails.  Also ran rtm test_system tests  

  build-namelist unit tester:   OK (yellowstone) - added two tests that were missing from xFail list

  CESM test lists:

    yellowstone/CESM:             
       -> 4_0 testing:  OK.  Removed tests in xFail file and ignoring NLComp tests.  Remaining Fails (tputcomp and memcomp) will be ignored since test tolerences are too narrow.

       -> 4_5 testing:  OK.  There will be B4B differences due to a new SoilHydrologyMod which are listed below

      FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  SMS_RLA.f45_f45.ICLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERS_D.f10_f10.ICLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  NCK.f10_f10.ICLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERB.ne30_g16.I_1948-2004_CLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERH_D.f19_g16.I1850CLM45CN.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERS_Lm3.1x1_vancouverCAN.I1PTCLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 

    yellowstone/CESM/allIcompsets:  OK

  test_system testing:

    yellowstone batch:          
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_D.f19_g16.I_1850_CLM45_CNCENTNoMe.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.monthly.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP.crop.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP.crop.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.voc.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ln48_D.f10_f10.I_2000_CLM45_CN.ciso.GC.114029.compare_hist.clm4_0_60 

    frankfurt interactive:      
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.ICLM451PT.frankfurt_intel_user_nl_dirs.GC.104908.compare_hist.clm4_0_60 
      FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.ICLM451PT.frankfurt_intel_user_nl_dirs.GC.104908.compare_hist.clm4_0_60 

    yellowstone interactive:
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  ERS_D_Mmpi-serial.CLM_USRDAT.ICLM45alaskaCN.yellowstone_intel_user_nl_dirs.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_D_Mmpi-serial.CLM_USRDAT.ICLM45USUMB.yellowstone_intel_user_nl_dirs.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_D_P1x1_Mmpi-serial.f19_g16.I20TR_CLM45VSCN.yellowstone_intel_voc.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_D_P1x1_Mmpi-serial.5x5_amazon.I_2000_CLM45.yellowstone_intel_user_nl_dirs.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ln48_D_P1x1_Mmpi-serial.f45_g37.ICLM45VOC.yellowstone_intel_voc.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45.yellowstone_intel_monthly.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_CLM45_CN.yellowstone_intel_monthly.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45_CNDV.yellowstone_intel_monthly.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_Mmpi-serial.1x1_brazil.IVSCN.yellowstone_intel_voc.GC.114053.compare_hist.clm4_0_60

    frankfurt batch:            
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  ERS_D_P16x1.f19_g16.I_1850_CLM45_CN4Me.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERI_P16x1.f19_g16.I_1850_CLM45_CNCENTNoMe.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_P16x1.f10_f10.ICLM45CNADSPIN.frankfurt_intel_monthly.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERS_P16x1.f19_g16.I_1850_CLM45_CN4Me_LessSPIN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  SMS_D_P16x1.f19_g16.I_1850_CLM45_CN4Me_EXLessSPIN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  SMS_D_P16x1.f10_f10.I_2000_CLM45_CN4Me.frankfurt_intel_vrtlay.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERS_D_P16x1.f19_g16.I_2000_CLM45_CN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERI_P16x1.f19_g16.I_2000_CLM45_CN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  SMS_D_P16x1.f19_g16.ICLM45CNEXSPIN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 

CLM tag used for the baseline comparison tests if applicable: CLM4_0_60

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: 4_5 code 
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
			1) SoilHydrologyMod.F90 mods from Swenson effect soil moisture which are effecting certain l2x coupler fields
			2) bringing VOLR from RTM through the coupler adds one more field to coupler history files.

===============================================================
===============================================================
Tag name:  clm4_0_60
Originator(s):  erik (Erik Kluzek)
Date: Mon Feb 11 03:55:56 MST 2013
One-line Summary: Bring CLM4.5 code from clm45sci branch to trunk as an option set at configure time

Purpose of changes:

Bring in CLM4.5 branch as additional directories. Change directory structure, so there are shared files 
and utilities for both CLM4.0 and CLM4.5 and files that are different for each. Update compsets in 
scripts in order to work in this paradigm. Move clm45sci15_clm4_0_58 code to trunk under clm4_5 phys.

clm4.5 includes the following:

* Bring LBNL-merge branch on with: vertical soil, Methane, CENTURY, split nitrification, new-lake model.
* Modifications to GPP, on gppdev branch, multilayer canopy and then single-layer version that reproduces it.
* Crop model updates. Irrigation included with crop model as an option. Fix CNDV-CROP.
* Urban model updates, multi-density, urban depth seperate from soil depth, wasteheat to zero
* Bring in permafrostsims09 branch with Sean Swensons's flooding changes.
* Update pft-physiology file, change some CN defaults, change min flow slightly in RTM
* Set ponding to zero, acclimation mods from Keith Oleson, a hydrology change from Sean Swenson.

Requirements for tag: clm40/clm45 code/tools work/tested, answers same, complete move from bluefire to yellowstone

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1621 (normalization issue in mksurfdata_map and clm -- partial)
                                 1604 (The -co2_type flag in the CLM namelist is not set correct.)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

  Compsets to run CLM4.5 added.

I_2000_CLM45 (ICLM45)
I_2000_1PTFRC_CLM45 (I1PTCLM45)
I_2000_GLC_CLM45_CISM1 (IGCLM45)
I_2000_GLC_CLM45_CISM2P (IGCLM45IS2)
I_2000_CLM45_CN (ICLM45CN) 
I_2000_CLM45_CN_CROP (ICLM45CNCROP)
I_2000_CLM45_CN_4Me (ICLM45CN4Me)
I_2000_CRUFRC_CLM45 (ICRUCLM45)
I_2000_CRUFRC_CLM45_CN (ICRUCLM45CN)
I_2000_CRUFRC_CLM45_CN_4Me (ICRUCLM45CN4Me)
I_2000_CLM45_CN_GLC_CISM1 (IGCLM45CN)
I_1850_CLM45 (I1850CLM45)
I_1850_CLM45_CN_4Me (I1850CLM45CN4Me)
I_1850_CRUFRC_CLM45 (I1850CRUCLM45)
I_1850_CRUFRC_CLM45_CN (I1850CRUCLM45CN)
I_1850_CRUFRC_CLM45_CN_4Me (I1850CRUCLM45CN4Me)
I_1850_CLM45_GLC_CISM1 (IG1850CLM45)
I_1850_CLM45_CN (I1850CLM45CN)
I_1850-2000_CLM45 (I20TRCLM45)
I_1850-2000_CLM45_CN (I20TRCLM45CN) 
I_1850-2000_CRUFRCCLM45 (I20TRCRUCLM45)	
I_1850-2000_CRUFRC_CLM45_CN (I20TRCRUCLM45CN)
I_1850-2000_CRUFRC_CLM45_CN_4Me (I20TRCRU4MeCLM45)
I_1850-2000_CLM45_GLC_CISM1 (IG20TRCLM45) 
I_1850-2000_CLM45_CN_GLC_CISM1 (IG20TRCLM45CN)	
I_1948-2004_CLM45 (I4804CLM45)
I_1948-2004_CLM45_GLC_CISM1 (IG4804CLM45) 
I_1948-2004_CLM45_CN_GLC_CISM1 (IG4804CLM45CN)	
I_RCP8.5_CLM45_CN_GLC_CISM1 (IGRCP85CLM45CN) 
I_RCP6.0_CLM45_CN (IRCP60CLM45CN) 
I_RCP6.0_CLM45_CN_GLC_CISM1 (IGRCP60CLM45CN) 
I_RCP4.5_CLM45_CN (IRCP45CLM45CN) 
I_RCP4.5_CLM45_CN_GLC_CISM1 (IGRCP45CNCLM45) 
I_RCP2.6_CLM45_CN (IRCP26CLM45CN) 
I_RCP2.6_CLM45_CN_GLC_CISM1 (IGRCP26CLM45CN) 
I_RCP8.5_CLM45_CN (IRCP85CLM45CN) 
I_1850_SPINUP_3HrWx_CLM45_CN_4Me

  CLM configure changes:

     Add physics option to determine if CLM4.0 or CLM4.5 physics is used:
+     -phys <name>           Value of clm4_0 or clm4_5 (default is clm4_0) 

   Options removed

    -pergro
    -c13

   Options added for CLM4.5 physics:

+     -clm4me <name>         Turn Methane model: [on | off]
+                              Requires bgc=cn/cndv (Carbon Nitrogen model)
+                            (ONLY valid for CLM4.5!)
+     -exlaklayers <name>    Turn on extra lake layers (25 layers instead of 10) [on | off]
+                            (ONLY valid for CLM4.5!)
+     -vsoilc_centbgc <name> Turn on vertical soil Carbon profile, CENTURY model decomposition,
+                            split Nitrification/de-Nitrification into two mineral 
+                            pools for NO3 and NH4 (requires clm4me Methane model), and
+                            eliminate inconsistent duplicate soil hydraulic 
+                            parameters used in soil biogeochem.
+                            (requires either CN or CNDV)
+                            (ONLY valid for CLM4.5!)
+                            [on,off or colen delimited list of no options] (default off)
+                              no-vert     Turn vertical soil Carbon profile off
+                              no-cent     Turn CENTURY off
+                              no-nitrif   Turn the Nitrification/denitrification off
+                              no-stnd-bsw Turn the standard BSW for soil psi off
+                            [no-vert,no-cent,no-nitrif,no-stnd-bsw,
+                             no-vert:no-cent,no-nitrif:no-stnd-bsw,
+                             no-vert:no-cent:no-stnd-bsw]

    New spinup options added for CLM4.5 physics (but are now deprecated and NOT recommended for use)

+                              Enter-AD      Turn on Accelerated Decomposition from           (6)
+                                            existing initial conditions (optional) (deprecated)
+                                            (ONLY valid for CLM4.5!)
+                              AD2Lesser     Jump from full AD to lesser AD spinup (optional)  (4)
+                                            (deprecated) (ONLY valid for CLM4.5!)
+                              LesserAD      Lesser Accelerated Decomposition mode            (3)
+                                            (deprecated) (ONLY valid for CLM4.5!)
+                              LesserAD-exit Jump from lesser AD to normal mode               (1)
+                                            (deprecated) (ONLY valid for CLM4.5!)
+                            Two sequences are valid: 6-5-4-3-1-0 or 6-5-2-0 (where 6 and 4 are optional)
+                            The recommended sequence is 5-2-0

  

Describe any changes made to the namelist:
    Extensive list of new namelist options for CLM4.5 physics

List any changes to the defaults for the boundary datasets:
    Extensive list of new datasets for CLM4.5
    Add 360x720 grid (hcru_hcru) for CLM4.0 physics

Describe any substantial timing or memory changes: CLM4.0 -- identical to clm4_0_59
                                                   CLM4.5 -- identical to clm45sci15_clm4_0_58

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): to cesm1_2_alpha02a versions

   scripts            to scripts4_130204
   Machines           to Machines_130204
   drv                to drvseq4_2_18
   datm               to datm8_130130
   rtm                to rtm1_0_18
   cism               to 45merge_02_cism1_121114
   csm_share          to share3_130131
   pio                to pio1_6_1
   mapping/gen_domain to mapping_121113b

List all files eliminated:

============== Eliminate PERGRO option, remove duplicated tools from clm4_0, change names to include clm4_0
D       models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000
D       models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850
D       models/lnd/clm/tools/mkmapdata/* ---------> remove
D       models/lnd/clm/tools/mkprocdata_map/* ----> remove
D       models/lnd/clm/tools/ncl_scripts/* -------> remove
D       models/lnd/clm/tools/interpinic/* --------> move to under clm4_0
D       models/lnd/clm/tools/mkmapgrids/* --------> remove
D       models/lnd/clm/tools/mksurfdata_map/* ----> move to under clm4_0
D       models/lnd/clm/bld/namelist_files/namelist_definition.xml ---> use clm4_5 version
D       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -> move to name with clm4_0
D       models/lnd/clm/bld/namelist_files/use_cases/pergro_pd.xml ---> Remove PERGRO option
D       models/lnd/clm/bld/namelist_files/use_cases/pergro0_pd.xml --> Remove PERGRO option
D       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml -> move to name with clm4_0

List all files added and what they do:

============== testing for clm4_5 and change name of some tests to include clm4_0
A  +    models/lnd/clm/test/system/config_files/gen_domain
A  +    models/lnd/clm/test/system/tests_posttag_frankfurt_nompi
A  +    models/lnd/clm/test/system/user_nl_dirs/anoxia_wtsat
A  +    models/lnd/clm/test/system/user_nl_dirs/anoxia_wtsat/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/vrtlay
A  +    models/lnd/clm/test/system/user_nl_dirs/vrtlay/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/oldhyd
A  +    models/lnd/clm/test/system/user_nl_dirs/oldhyd/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set2_ciso
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set2_ciso/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set3_pftroot
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set3_pftroot/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/rootlit
A  +    models/lnd/clm/test/system/user_nl_dirs/rootlit/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/ciso
A  +    models/lnd/clm/test/system/user_nl_dirs/ciso/user_nl_clm
A  +    models/lnd/clm/test/system/nl_files/nl_ch4_set2_ciso
A  +    models/lnd/clm/test/system/nl_files/nl_ch4_set3_pftroot
A  +    models/lnd/clm/test/system/nl_files/mksrfdt_10x15_1850
A  +    models/lnd/clm/test/system/nl_files/nl_rootlit
A  +    models/lnd/clm/test/system/nl_files/nl_ciso
A  +    models/lnd/clm/test/system/nl_files/nl_anoxia_wtsat
A  +    models/lnd/clm/test/system/nl_files/clm4_0_mksrfdt_1x1_numaIA_mp20irrcr_2000
A  +    models/lnd/clm/test/system/nl_files/clm4_0_mksrfdt_10x15_irr_1850
A  +    models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp24_2000
A  +    models/lnd/clm/test/system/nl_files/nl_vrtlay
A  +    models/lnd/clm/test/system/nl_files/nl_oldhyd
============== clm4_5 version of tools (from clm45sci15_clm4_0_58)
A  +    models/lnd/clm/tools/clm4_5
A  +    models/lnd/clm/tools/clm4_5/mkmapdata
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mvNimport.sh
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/rmdups.ncl
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/regridbatch.sh
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mkmapdata.sh
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mkunitymap.ncl
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mknoocnmap.pl
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/README
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/clm4054_ne30g16_I2000.clm2.h0.2000-01_c121107.nc
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/map_ne30np4_nomask_to_fv1.9x2.5_nomask_aave_da_c121107.nc
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_functions.bash
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/mkprocdata_map.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/gridmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/constMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/fmain.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/fileutils.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_in
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_all
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/clm
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_wrap
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/clm4054_f19g16_I2000.clm2.h0.2000-01_c121107.nc
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/README
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/cprnc.pl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/getco2_historical.ncl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/cprnc.ncl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/getregional_datasets.pl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/getregional_datasets.ncl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/README
A  +    models/lnd/clm/tools/clm4_5/interpinic
A  +    models/lnd/clm/tools/clm4_5/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c121113.nc
A  +    models/lnd/clm/tools/clm4_5/interpinic/interpinic.runoptions
A  +    models/lnd/clm/tools/clm4_5/interpinic/src
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/interpinic.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_infnan_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_isnan.c
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/fmain.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_isnan.h
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/README
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/domainMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/mkmapgrids.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/mkmapgrids.namelist
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/mkscripgrid.ncl
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/mkmapgrids.csh
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/README
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarctl.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkncdio.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/clm_varpar.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_timer_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklaiMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksoilMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/fileutils.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkharvestMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkfileMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkurbanparCommonMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_string_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarpar.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/clm_varctl.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvocefMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkdomainMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkurbanparMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgridmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklanwatMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpftMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkncdio.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Filepath
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Makefile
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/README
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkurbanparMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata_map.namelist
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/README
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
============== clm4_0 version of tools
A  +    models/lnd/clm/tools/clm4_0
A  +    models/lnd/clm/tools/clm4_0/interpinic
A  +    models/lnd/clm/tools/clm4_0/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c100322.nc
A  +    models/lnd/clm/tools/clm4_0/interpinic/interpinic.runoptions
A  +    models/lnd/clm/tools/clm4_0/interpinic/src
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/interpinic.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/fmain.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Filepath
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Makefile
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/README
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkvarctl.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkncdio.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/clm_varpar.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_timer_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mklaiMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mksoilMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/fileutils.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkurbanparDomMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkharvestMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkfileMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkurbanparCommonMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Makefile
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_string_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkglcmecMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkvarpar.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/clm_varctl.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkvocefMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkdomainMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Filepath
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mksurfdat.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkurbanparAvgMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkgridmapMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mklanwatMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkpftMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkncdio.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/Srcfiles
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/Filepath
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/Makefile
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/README
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkurbanparDomMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata_map.namelist
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/README
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0_tools.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
============== clm4_5 version of source (from clm45sci15_clm4_0_58)
A  +    models/lnd/clm/src/clm4_5
A  +    models/lnd/clm/src/clm4_5/biogeochem
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNGRespMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/initch4Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/MEGANFactorsMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/ch4RestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNWoodProductsMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVLightMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVEcosystemDynIniMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
A  +    models/lnd/clm/src/clm4_5/main
A  +    models/lnd/clm/src/clm4_5/main/clm_varcon.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_varpar.F90
A  +    models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
A  +    models/lnd/clm/src/clm4_5/main/dynlandMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
A  +    models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
A  +    models/lnd/clm/src/clm4_5/main/subgridMod.F90
A  +    models/lnd/clm/src/clm4_5/main/accFldsMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
A  +    models/lnd/clm/src/clm4_5/main/pftdynMod.F90
A  +    models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
A  +    models/lnd/clm/src/clm4_5/main/histFileMod.F90
A  +    models/lnd/clm/src/clm4_5/main/pft2colMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
A  +    models/lnd/clm/src/clm4_5/main/findHistFields.pl
A  +    models/lnd/clm/src/clm4_5/main/restFileMod.F90
A  +    models/lnd/clm/src/clm4_5/main/controlMod.F90
A  +    models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
A  +    models/lnd/clm/src/clm4_5/main/filterMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_varctl.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_driver.F90
A  +    models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
A  +    models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
A  +    models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
A  +    models/lnd/clm/src/clm4_5/main/pftvarcon.F90
A  +    models/lnd/clm/src/clm4_5/main/surfrdMod.F90
A  +    models/lnd/clm/src/clm4_5/main/inicPerpMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clmtype.F90
A  +    models/lnd/clm/src/clm4_5/main/histFldsMod.F90
A  +    models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys
A  +    models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/QSatMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/FracWetMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeRestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeCon.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/BandDiagonalMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/TCBCFGtools.sh
M       models/lnd/clm/test/system/frankfurt.batch
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       models/lnd/clm/test/system/TSMncl_tools.sh
M       models/lnd/clm/test/system/TBLCFGtools.sh
M       models/lnd/clm/test/system/README.testnames
M       models/lnd/clm/test/system/tests_posttag_yong
M       models/lnd/clm/test/system/yellowstone.interactive
M       models/lnd/clm/test/system/TCBtools.sh
M       models/lnd/clm/test/system/test_driver.sh
M       models/lnd/clm/test/system/shortlist.interactive
M       models/lnd/clm/test/system/tests_pretag_yellowstone_nompi
M       models/lnd/clm/test/system/bluefire.batch
M       models/lnd/clm/test/system/frankfurt.interactive
M       models/lnd/clm/test/system/TSMscript_tools.sh
M       models/lnd/clm/test/system/tests_posttag_mirage
M       models/lnd/clm/test/system/gen_test_table.sh
M       models/lnd/clm/test/system/nl_files/gen_domain.ne30.runoptions
M       models/lnd/clm/test/system/nl_files/gen_domain.T31.runoptions
M       models/lnd/clm/test/system/TOPtools.sh
M       models/lnd/clm/test/system/input_tests_master
M       models/lnd/clm/test/system/TSMtools.sh
M       models/lnd/clm/test/system/TBLscript_tools.sh
M       models/lnd/clm/test/system/yellowstone.batch
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/lynx.batch
M       models/lnd/clm/test/system/TBLtools.sh
M       models/lnd/clm/test/system/shortlist.batch
M       models/lnd/clm/test/system/TSMCFGtools.sh

M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/queryDefaultNamelist.pl
M       models/lnd/clm/bld/config_files/config_definition.xml
M       models/lnd/clm/bld/listDefaultNamelist.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/clm.buildnml.csh
M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl

MM      models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
MM      models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90

Difference in expected Fails:

 <expectedFails>
    <namelistTest> 
-      <bluefire>
-         <IBM>
-            <compare>
-            </compare>
-            <generate>
-               <entry testId="138" failType="xFail"> missing datasets for us20 </entry>
-               <entry testId="189" failType="xFail"> ne16 missing finidat file for 1850</entry>
-               <entry testId="192" failType="xFail"> ne60 missing finidat file for 1850</entry>
-               <entry testId="201" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
-            </generate>
-         </IBM>
-      </bluefire>
       <mirage>
       </mirage>
       <lynx>
@@ -25,10 +13,17 @@
          </IBM>
       </janus>
       <yellowstone>
+         <intel>
             <compare>
+               <entry testId="216" failType="xFail"> missing datasets for us20 </entry>
+               <entry testId="296" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="298" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="301" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="303" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="316" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
+               <entry testId="318" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
             </compare>
             <generate>
-               <entry testId="138" failType="xFail"> missing datasets for wus12 </entry>
                <entry testId="141" failType="xFail"> missing datasets for us20 </entry>
                <entry testId="189" failType="xFail"> ne16 missing finidat file for 1850</entry>
                <entry testId="192" failType="xFail"> ne60 missing finidat file for 1850</entry>
@@ -38,17 +33,6 @@
    </namelistTest>
 
    <clmInteractive> 
-      <bluefire>
-         <IBM>
-            <compare>
-               <entry testId="bl9C4" failType="xFail"> cprnc showing diffs are not b4b </entry>
-               <entry testId="sm514" failType="xFail"> problem configuring </entry>
-               <entry testId="bl514" failType="xFail"> problem configuring </entry>
-               <entry testId="sm8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
-               <entry testId="bl8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
-            </compare>
-         </IBM>
-      </bluefire>
       <mirage>
       </mirage>
       <lynx>
@@ -62,24 +46,6 @@
    </clmInteractive>
 
    <clmBatch> 
-      <bluefire>
-         <IBM>
-            <compare>
-               <entry testId="smW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="erW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="brW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="blW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="smU61" failType="xFail"> Failing for long time.  endrun initiated from  CNBalanceCheckMod.F90. </entry>
-               <entry testId="erU61" failType="xFail"> Failing for long time.  __cnbalancecheckmod_NMOD_cbalancecheck. </entry>
-               <entry testId="brU61" failType="xFail"> Failing for long time.  Fail because erU61 fails. </entry>
-               <entry testId="blU61" failType="xFail"> Failing for long time.  Fail because erU61 fails. </entry>
-               <entry testId="smCI1" failType="xFail"> Have been failing for a long time . </entry>
-               <entry testId="erCI1" failType="xFail"> Have been failing for a long time. </entry>
-               <entry testId="brCI1" failType="xFail"> Have been failing for a long time. </entry>
-               <entry testId="blCI1" failType="xFail"> Have been failing for a long time. </entry>
-            </compare>
-         </IBM>
-      </bluefire>
       <mirage>
       </mirage>
       <lynx>
@@ -93,91 +59,108 @@
    </clmBatch>
 
    <test_system_interactive> 
-      <bluefire>
-         <IBM>
-              <entry testId="ERS_D_P1x64_Mmpi-serial.f19_g16.I_1850-2000_VOC_SNCRFRC_CN" failType="RUN">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64_Mmpi-serial.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64_Mmpi-serial.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different</entry>
-              <entry testId="PET_D_P1x64_Mmpi-serial.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart (known problem
               restarting mid-day with _GLC: bug 1557)</entry>
-              <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
-              <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
-         </IBM>
-      </bluefire>
       <lynx>
          <pgi>
-              <entry testId="ERS_Ld211.1x1_camdenNJ.I_2000_VOC"              failType="CFAIL">????</entry>
          </pgi>
          <intel>
          </intel>
       </lynx>
       <frankfurt>
          <intel>
-              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f10_f10.ICNCROP"   failType="FAIL">????</entry>
          </intel>
       </frankfurt>
       <yellowstone>
           <intel>
-              <entry testId="ERS_D_P1x16_Mmpi-serial.f19_g16.I_1850-2000_VOC_SNCRFRC_CN"   failType="RUN" >Initial simulation fails</entry>
-              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN"       failType="RUN" >Initial simulation fails case name too
               long</entry>
-              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f19_g16.I_2000_GLCMECPD"         failType="FAIL">History files are different on restart (known
               problem restarting mid-day with _GLC: bug 1557)</entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_camdenNJ.ICLM45VOC"                 failType="RUN" ></entry>
+              <entry testId="ERS_D_P1x1_Mmpi-serial.f19_g16.ICLM45GLCMEC"                  failType="FAIL" ></entry>
+              <entry testId="PET_D_P1x1_Mmpi-serial.f45_g37.ICLM45VOC"                     failType="TFAIL" ></entry>
+              <entry testId="ERS_D_Mmpi-serial.1x1_asphaltjungleNJ.ICLM45VOC"              failType="RUN"   ></entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazilICLM45VSCN"                   failType="TFAIL" ></entry>
+              <entry testId="ERS_Ln48_D_Mmpi-serial.f10_f10.I_2000_CLM45_CN"               failType="RUN"   ></entry>
+              <entry testId="ERI_Mmpi-serial.f10_f10.I_2000_CLM45_CN4Me"                   failType="FAIL"  ></entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN"       failType="RUN" ></entry>
+              <entry testId="ERS_D_P1x16_Mmpi-serial.f19_g16.I_2000_GLCMECP"               failType="RUN" ></entry>
           </intel>
       </yellowstone>
    </test_system_interactive> 
 
    <test_system_batch> 
-      <bluefire>
-         <IBM>
-              <entry testId="ERS_D_P96x32.T62_g37.I_2000"             failType="SFAIL">T62 not working</entry>
-              <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN">Dies early with a floating point trap</entry>
-              <!-- SPM work out a way to get xFail for a specific compare test -->
-              <entry testId="ERS_Ld211_P192x2.f19_g16.I_2000_CNDV_CROP.*.compare_hist"      failType="RUN">Baseline comp. test will always fail</entry>
-              <entry testId="ERS_Ln48_D.f09_g16.ICNEXSPIN"            failType="CFAIL">build error?</entry>
-         </IBM>
-      </bluefire>
       <lynx>
          <pgi>
               <entry testId="ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD" failType="FAIL">History files are different on restart (known problem
restarting mid-day with _GLC: bug 1557)</entry>
          </pgi>
       </lynx>
+      <frankfurt>
+         <intel>
+         </intel>
+      </frankfurt>
       <yellowstone>
           <intel>
               <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN" >History files are different on restart (known problem restarting
mid-day with _GLC: bug 1557)</entry>
+              <entry testId="SMS_Ln48_D.f09_g16.ICLM45CNEXSPIN"                  failType="FAIL"></entry>
+              <entry testId="ERS_D.f19_g16.I_1850_CLM45_CN4Me_EADSPIN"           failType="FAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.oldhyd"        failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.anoxia_wtsat"  failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.ch4_set2_ciso" failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.ch4_set2_pftr" failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.ch4_set2_pftr" failType="TFAIL"></entry>
+              <entry testId="ERS_D.f10_f10.I_2000_CLM45CN4MeNoVSoil.rootlit"     failType="TFAIL"></entry>
+              <entry testId="ERI_D.f10_f10.I_2000_CLM45CN4M.vrtlay"              failType="TFAIL"></entry>
+              <entry testId="PET_D_P1x32.ne30_g16.ICN"                           failType="SFAIL"></entry>
+              <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                 failType="TFAIL"></entry>
           </intel>
       </yellowstone>
-   <test_system_batch> 
+   </test_system_batch> 
   
    <cesm> 
-      <bluefire>
-         <IBM>
+      <IcompsetTests>
+         <yellowstone>
+            <intel>
               <entry testId="SBN.1x1_tropicAtl.I20TR"        failType="SFAIL">missing datasets</entry>
               <entry testId="SBN.ne16_g16.I20TR"             failType="TFAIL">missing datasets</entry>
-              <entry testId="SBN.ne60_g16.I20TR"             failType="TFAIL">missing datasets</entry>
-         </IBM>
-      </bluefire>
+               <entry testId="SBN.ne60_g16.I20TR"       failType="SFAIL">missing datasets</entry>
+               <entry testId="SBN.ne240_g16.I1850"      failType="FAIL" >missing 0.1 mapping dataset (for RTM at R01)</entry>
+            </intel>
+            <pgi>
+            </pgi>
+         </yellowstone>
+      </IcompsetTests>
+      <auxTests>
       <yellowstone>
+            <intel>
+               <entry testId="PET_PT.f19_g16.I1850CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERB.ne30_g16.I_1948-2004"  failType="FAIL" >Restart difference</entry>
+               <entry testId="ERS_Lm3.f19_g16.IGRCP60CN" failType="FAIL" >Soil balance error on restart</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
+
+               <entry testId="PET_PT.f19_g16.I1850CLM45CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERS_E.f19_g16.ICLM451850"       failType="TFAIL">bad compset name</entry>
+               <entry testId="ERS_D.f19_g16.IGRCP26CLM45CN"   failType="RUN"  >surfdata and pftdyn file mismatched</entry>
+               <entry testId="ERS_Lm3.f19_g16.IGRCP60CLM45CN" failType="RUN"  >Soil balance error on restart</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCLM45CN"    failType="TFAIL">scripts issue component not threaded</entry>
+               <entry testId="SMS.f19_g16.IRCP45CLM45CN"      failType="SFAIL">missing finidat file</entry>
+               <entry testId="ERS_D.f19_g16.IRCP85CLM45CN"    failType="SFAIL">missing finidat file</entry>
+            </intel>
          <pgi>
-              <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"    failType="CFAIL">????</entry>
-              <entry testId="SMS.1x1_numaIA.ICN_CROP"             failType="TFAIL">????</entry>
+               <entry testId="SMS_RLB.f45_f45.I"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
+               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"  failType="cFAIL">missing LAPACK symbol dgbsv</entry>
+               <entry testId="PET_PT.f19_g16.I1850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERI.f19_g16.IG1850"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.T31_g37.IG4804"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.1x1_numaIA.ICN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
+
+               <entry testId="SMS_RLB.f45_f45.ICLM45"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
+               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN" failType="cFAIL">missing LAPACK symbol dgbsv</entry>
+               <entry testId="ERS.f19_g16.ICLM45CNCROP"               failType="cFAIL">missing LAPACK symbol dgbsv</entry>
+               <entry testId="PET_PT.f19_g16.ICLM451850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERI.f19_g16.IG1850CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.T31_g37.IG4804CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.1x1_numaIA.ICLM45CN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCLM45CN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
          </pgi>
       </yellowstone>

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/CESM:              yes
    yellowstone/CESM/allIcompsets: yes

  test_system testing:

    yellowstone batch:          yes
    frankfurt interactive:      yes
    yellowstone interactive:    yes
    frankfurt batch:            yes

  test_driver.sh tools testing:

    yellowstone interactive:    yes
    frankfurt interactive:      yes

  yellowstone/PTCLM:            no (PTCLM still doesn't quite work)

CLM tag used for the baseline comparison tests if applicable: clm4_0 to clm4_0_59 clm4_5 to clm45sci15_clm4_0_58

Changes answers relative to baseline: Yes, for some resolutions for clm4_0 -- because of new default initial condition files in compsets

IF tag changes answers relative to baseline comparison the
following should be filled in:

    For clm4_0...
    New initial conditions for: f09/f19-I_2000, f09/f19-I_1850, f09/f19-I_1850-2000
                                f09/f19-I_1948-2004, f09/f19-I_1850_SPINUP_3HrWx
                                f09/f19-I_RCP

===============================================================
===============================================================
Tag name:  clm4_0_59
Originator(s):  mvertens (Mariana Vertenstein) / erik
Date: Thu Dec 20 09:24:16 MST 2012
One-line Summary: restructure clmtype and all pointer references, new directory structure
	   
Purpose of changes: 
	Reststucture trunk directory tree to prepare for incorporation of clm4_5
	Move all cpp-ifdefs to clm_varctl and introduce new logical variables in their place
	Restructure clmtype to remove nesting - and also redo all the pointer references 
	All together the code can then move to having no cpp-ifdefs

Test level of tag: 
	std-test

Bugs fixed (include bugzilla ID): 
	None

Known bugs (include bugzilla ID):
	http://bugs.cgd.ucar.edu/

Known Limitations:
        147 (mkgriddata can't straddle over Greenwich)
        025 (SCM mode can NOT use a global finidat file)
        017 (SCM mode can NOT restart)
        896 (T62 mode does not work)
        701 (svn keyword)
        452 (Problem with support of soil-colors != 8 or 20)
	1598 (non-repeatable results when running with CNDV and/or CROP)   

	Threading seems to work for all cases where CROP and/or CNDV 
	is not on
	
Describe any changes made to build system: 
	New directory structure

Describe any changes made to the namelist: 
	variables use_c13 and use_c14 added to namelist_definition.xml file

List any changes to the defaults for the boundary datasets: 
	No

Describe any substantial timing or memory changes: 
	Currently more memory for compsets without CN, etc - less memory 
	when CN, CNDV, etc are activated. This will be fixed in clm4_0_59.

Code reviewed by: 
	self (proposed changes reviewed by Erik, Bill and Stefan)

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: 
	src/biogeochem -> src/clm4_0/biogeochem
	src/biogeophys -> src/clm4_0/biogeophys
	src/main       -> src/clm4_0/main
	

List all files added and what they do: 
	None
	
List all existing files that have been modified, and describe the changes:

	All files in src/clm4_0 have been modified relative to their
	original versions to remove the cpp-ifdefs and to adjust pointer
	references to new names
	
	M       src/cpl_share/clm_cpl_indices.F90
	M       src/cpl_mct/lnd_comp_mct.F90
	M       src/cpl_esmf/lnd_comp_esmf.F90
	
	M       bld/configure
	M       bld/namelist_files/namelist_definition.xml
	M       test/system/yellowstone.interactive
	M       test/system/yellowstone.batch

        Add in 360x720_cruncep datasets (from Erik).

        M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl --- correct number of tests
        M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
        M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
        M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
        M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

Machines testing ran on:

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/CESM:              yes
    yellowstone/CESM/allIcompsets: no

  PTCLM	
     yellowstone:               no

  test_system testing:

    yellowstone batch:          yes
    yellowstone interactive:    no
    frankfurt batch:            no
    frankfurt interactive:      yes

  test_driver.sh tools testing:

    yellowstone interactive:    no
    frankfurt interactive:      no

Difference in expected fails from testing:
	
+ Numbers change for build-namelist unit tests
       <frankfurt>
          <intel>
-              <entry testId="ERS_Mmpi-serial.1x1_mexicocityMEX.I1PT"         failType="FAIL">????</entry>
          </intel>
       </frankfurt>
       <yellowstone>
          <pgi>
-              <entry testId="SMS_RLB.f45_f45.I"                   failType="CFAIL">????</entry>
-              <entry testId="PST.f19_g16.ICNCROP"                 failType="TFAIL">????</entry>
-              <entry testId="PST.f10_f10.I20TRCN"                 failType="TFAIL">????</entry>
          </pgi>
-         <intel>
-              <entry testId="PST.f19_g16.I1850CN"                 failType="TFAIL">????</entry>
-         </intel>
       </yellowstone>
	
CLM tag used for the baseline comparison tests if applicable: 
	clm4_0_58

Changes answers relative to baseline: 
	no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_58
Originator(s):  erik (Erik Kluzek)
Date: Fri Dec 14 05:13:33 MST 2012
One-line Summary: Uncomment us20 and wus12 datasets, more testing to: bluefire, yellowstone, frankfurt

Purpose of changes:

Uncomment WRF grids in namelist xml files. Fix mkprocdata bug on lynx.

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                1601 (mkprocdata seg faults on lynx)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: No

Describe any changes made to the namelist: No

List any changes to the defaults for the boundary datasets: Yes
   uncomment out wus12 and us20 WRF datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines, csm_share

   scripts    to: scripts4_121207b
   Machines   to: Machines_121207
   csm_share  to: share3_121204a

List all files eliminated: None

List all files added and what they do: Add frankfurt test lists

>>>>>>>>>>>>>>>> Tests for frankfurt
   A  models/lnd/clm/test/system/frankfurt.interactive
   A  models/lnd/clm/test/system/frankfurt.batch

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/test_system
   M  models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml

   M  models/lnd/clm/test/system/bluefire.batch
   M  models/lnd/clm/test/system/yellowstone.batch
   M  models/lnd/clm/test/system/nl_files/mkprocdata_ne30_to_f19_I2000

>>>>>>>>>>>>>>>> Fix mkprocdata and allow it to run from a different exe directory for testing
   M  models/lnd/clm/tools/mkprocdata_map/src/mkprocdata_map.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/gridmapMod.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/fmain.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/shr_file_mod.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/fileutils.F90
   M  models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_all
   M  models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_wrap

>>>>>>>>>>>>>>>> Fix bug in unit-tester
   M  models/lnd/clm/bld/unit_testers/build-namelist_test.pl

>>>>>>>>>>>>>>>> Uncomment WRF files
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

Machines testing ran on:

  build-namelist unit tester:   yes

  CESM test lists:

    bluefire/CESM:              yes
    bluefire/CESM/allIcompsets: yes
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             yes
    bluefire interactive:       yes
    yellowstone batch:          yes
    yellowstone interactive:    yes
    frankfurt batch:            yes
    frankfurt interactive:      yes

  test_driver.sh tools testing:

    bluefire interactive:       yes
    lynx interactive:           yes
    yellowstone interactive:    yes
    frankfurt interactive:      yes

Difference in expected fails from testing:

Index: expectedClmTestFails.xml
===================================================================
--- expectedClmTestFails.xml  (revision 42691)
+++ expectedClmTestFails.xml  (working copy)
@@ -5,12 +5,12 @@
       <bluefire>
          <IBM>
             <compare>
-               <!--N/A.  All current FAILs from relase tags should pass next round   -->
             </compare>
             <generate>
-               <entry testId="180" failType="xFail"> ne16 missing finidat file for 1850</entry>
-               <entry testId="183" failType="xFail"> ne60 missing finidat file for 1850</entry>
-               <entry testId="192" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
+               <entry testId="138" failType="xFail"> missing datasets for us20 </entry>
+               <entry testId="186" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="189" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="198" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
             </generate>
          </IBM>
       </bluefire>
@@ -24,6 +24,17 @@
             </compare>
          </IBM>
       </janus>
+      <yellowstone>
+            <compare>
+            </compare>
+            <generate>
+               <entry testId="134" failType="xFail"> missing datasets for wus12 </entry>
+               <entry testId="137" failType="xFail"> missing datasets for us20 </entry>
+               <entry testId="186" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="189" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="198" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
+            </generate>
+      </yellowstone>
    </namelistTest>
 
    <clmInteractive> 
@@ -101,6 +112,19 @@
          <intel>
          </intel>
       </lynx>
+      <frankfurt>
+         <intel>
+              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f10_f10.ICNCROP"   failType="FAIL">????</entry>
+              <entry testId="ERS_Mmpi-serial.1x1_mexicocityMEX.I1PT"         failType="FAIL">????</entry>
+         </intel>
+      </frankfurt>
+      <yellowstone>
+          <intel>
+              <entry testId="ERS_D_P1x16_Mmpi-serial.f19_g16.I_1850-2000_VOC_SNCRFRC_CN"   failType="RUN" >Initial simulation fails</entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN"       failType="RUN" >Initial simulation fails case name too
long</entry>
+              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f19_g16.I_2000_GLCMECPD"         failType="FAIL">History files are different on restart (known
problem restarting mid-day with _GLC: bug 1557)</entry>
+          </intel>
+      </yellowstone>
    </test_system_interactive> 
 
    <test_system_batch> 
@@ -118,6 +142,11 @@
               <entry testId="ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD" failType="FAIL">History files are different on restart (known problem
restarting mid-day with _GLC: bug 1557)</entry>
          </pgi>
       </lynx>
+      <yellowstone>
+          <intel>
+              <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN" >History files are different on restart (known problem restarting
mid-day with _GLC: bug 1557)</entry>
+          </intel>
+      </yellowstone>
    <test_system_batch> 
   
    <cesm> 
@@ -128,6 +157,18 @@
               <entry testId="SBN.ne60_g16.I20TR"             failType="TFAIL">missing datasets</entry>
          </IBM>
       </bluefire>
+      <yellowstone>
+         <pgi>
+              <entry testId="SMS_RLB.f45_f45.I"                   failType="CFAIL">????</entry>
+              <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"    failType="CFAIL">????</entry>
+              <entry testId="PST.f19_g16.ICNCROP"                 failType="TFAIL">????</entry>
+              <entry testId="SMS.1x1_numaIA.ICN_CROP"             failType="TFAIL">????</entry>
+              <entry testId="PST.f10_f10.I20TRCN"                 failType="TFAIL">????</entry>
+         </pgi>
+         <intel>
+              <entry testId="PST.f19_g16.I1850CN"                 failType="TFAIL">????</entry>
+         </intel>
+      </yellowstone>
    </cesm>
    <cesm> 
       <bluefire>

CLM tag used for the baseline comparison tests if applicable: clm4_0_58

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
===============================================================
Tag name:  clm4_0_57
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Fri Nov 30 14:20:13 MST 2012
One-line Summary: update trunk with release mods, some rtm fixes

Purpose of changes:

CLM:  Merge the changes Erik made in the release branch tags to trunk.    
RTM:  Add effective velocity as a namelist variable.
		Change rdirc file.
		Add RTM tests to test_system batch CLM tests.
		Clean up logic in RtmFloodInit so R01 works without SLOPE and MAX_VOLR.
		Change rdirc file to rdirc_0.5x0.5_simyr2000_slpmxvl_c120717.nc which is 
			correct and contains FLOOD and MAX_VOLR.  This fixes an error in choice
			of rdirc file from clm4_0_55 / rtm1_0_10

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets:  Changed RTM rdirc file.

Describe any substantial timing or memory changes: None Known

Code reviewed by:  Erik, Tony, Mariana (in progress)

List any svn externals directories updated (csm_share, mct, etc.):
	- rtm1_0_13
	- scripts4_121127
	- Machines_121126
	- drvseq4_2_13
	- datm8_121123
	- cism1_121114

List all files eliminated:

	- Deleted during release tag cleanup
D       models/lnd/clm/test/system/TCB.sh
D       models/lnd/clm/test/system/tests_pretag_bluefire
D       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
D       models/lnd/clm/test/system/config_files/17p_cndvsc_m
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_m
D       models/lnd/clm/test/system/config_files/17p_cndvsc_o
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_o
D       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
D       models/lnd/clm/test/system/config_files/_persc_dh
D       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
D       models/lnd/clm/test/system/config_files/17p_cndvsc_s
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_s
D       models/lnd/clm/test/system/config_files/_persc_dm
D       models/lnd/clm/test/system/config_files/_persc_do
D       models/lnd/clm/test/system/config_files/_scnv_ds
D       models/lnd/clm/test/system/config_files/_persc_ds
D       models/lnd/clm/test/system/config_files/17p_sc_dh
D       models/lnd/clm/test/system/config_files/17p_sc_dm
D       models/lnd/clm/test/system/config_files/17p_sc_do
D       models/lnd/clm/test/system/config_files/_sc_dh
D       models/lnd/clm/test/system/config_files/17p_sc_ds
D       models/lnd/clm/test/system/config_files/_sc_dm
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_h
D       models/lnd/clm/test/system/config_files/17p_cnsc_h
D       models/lnd/clm/test/system/config_files/_sc_do
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_dh
D       models/lnd/clm/test/system/config_files/17p_cnsc_dh
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_m
D       models/lnd/clm/test/system/config_files/17p_cnsc_m
D       models/lnd/clm/test/system/config_files/_sc_ds
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_o
D       models/lnd/clm/test/system/config_files/17p_cnsc_o
D       models/lnd/clm/test/system/config_files/17p_cnsc_dm
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_dm
D       models/lnd/clm/test/system/config_files/17p_cnsc_do
D       models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_do
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_s
D       models/lnd/clm/test/system/config_files/17p_sc_h
D       models/lnd/clm/test/system/config_files/17p_cnsc_ds
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_ds
D       models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
D       models/lnd/clm/test/system/config_files/_mexsc_ds
D       models/lnd/clm/test/system/config_files/17p_cnc13sc_do
D       models/lnd/clm/test/system/config_files/17p_sc_m
D       models/lnd/clm/test/system/config_files/17p_sc_o
D       models/lnd/clm/test/system/config_files/_sc_h
D       models/lnd/clm/test/system/config_files/17p_cnnfsc_dh
D       models/lnd/clm/test/system/config_files/_sc_m
D       models/lnd/clm/test/system/config_files/17p_cnnfsc_dm
D       models/lnd/clm/test/system/config_files/_sc_o
D       models/lnd/clm/test/system/config_files/17p_cndvsc_dh
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dh
D       models/lnd/clm/test/system/config_files/17p_cnnfsc_do
D       models/lnd/clm/test/system/config_files/_sc_s
D       models/lnd/clm/test/system/config_files/17p_cndvsc_dm
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dm
D       models/lnd/clm/test/system/config_files/17p_cndvsc_do
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_do
D       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_ds
D       models/lnd/clm/test/system/config_files/_vansc_ds
D       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
D       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
D       models/lnd/clm/test/system/config_files/_nil3sc_dh
D       models/lnd/clm/test/system/config_files/_nil3sc_dm
D       models/lnd/clm/test/system/config_files/_scsnf_dh
D       models/lnd/clm/test/system/config_files/_scsnf_dm
D       models/lnd/clm/test/system/config_files/_scsnf_do
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_h
D       models/lnd/clm/test/system/config_files/17p_cndvsc_h
D       models/lnd/clm/test/system/TBL.sh
D       models/lnd/clm/test/system/tests_pretag_edinburgh
D       models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
D       models/lnd/clm/test/system/TBR.sh
D       models/lnd/clm/test/system/TER.sh
D       models/lnd/clm/test/system/mknamelist
D       models/lnd/clm/test/system/tests_posttag_hybrid_regression
D       models/lnd/clm/test/system/tests_posttag_purempi_regression
D       models/lnd/clm/test/system/TRP.sh
D       models/lnd/clm/test/system/tests_pretag_jaguarpf
D       models/lnd/clm/test/system/TSMrst_tools.sh
D       models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
D       models/lnd/clm/test/system/nl_files/nl_per
D       models/lnd/clm/test/system/nl_files/nl_voc
D       models/lnd/clm/test/system/nl_files/clm_std
D       models/lnd/clm/test/system/nl_files/multi_inst
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_1
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_2
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_3
D       models/lnd/clm/test/system/nl_files/clm_nortm
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp2.6
D       models/lnd/clm/test/system/nl_files/clm_ndepdyn
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp4.5
D       models/lnd/clm/test/system/nl_files/clm_pftdyn
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp8.5
D       models/lnd/clm/test/system/nl_files/clm_per0
D       models/lnd/clm/test/system/nl_files/nl_ptsmode_ocn
D       models/lnd/clm/test/system/nl_files/nl_urb_br
D       models/lnd/clm/test/system/nl_files/clm_spin
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp6
D       models/lnd/clm/test/system/nl_files/clm_urb1pt
D       models/lnd/clm/test/system/nl_files/nl_urb
D       models/lnd/clm/test/system/nl_files/nl_crcrop
D       models/lnd/clm/test/system/nl_files/clm_per
D       models/lnd/clm/test/system/nl_files/clm_drydep
D       models/lnd/clm/test/system/nl_files/nl_std
D       models/lnd/clm/test/system/nl_files/clm_glcmec
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp6
D       models/lnd/clm/test/system/nl_files/nl_crop
D       models/lnd/clm/test/system/nl_files/clm_usrdat
D       models/lnd/clm/test/system/nl_files/nl_cn_conly
D       models/lnd/clm/test/system/nl_files/clm_stdIgnYr
D       models/lnd/clm/test/system/nl_files/clm_transient_20thC
D       models/lnd/clm/test/system/nl_files/nl_ptsmode
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp2.6
D       models/lnd/clm/test/system/nl_files/clm_irrig
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp4.5
D       models/lnd/clm/test/system/nl_files/nl_lfiles
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp8.5
D       models/lnd/clm/test/system/TSMpergro.sh
D       models/lnd/clm/test/system/TSMcnspinup.sh
D       models/lnd/clm/test/system/TBLrst_tools.sh
D       models/lnd/clm/test/system/CLM_runcmnd.sh
D       models/lnd/clm/test/system/TSM.sh
D       models/lnd/clm/test/system/tests_posttag_lynx
D       models/lnd/clm/tools/mkprocdata_map/camhomme
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/mkprocdata_map.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/gridmapMod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Depends
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/domainMod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_file_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/nanMod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Srcfiles
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Filepath
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Makefile
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/fileutils.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_kind_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/mkprocdata_map_in
D       models/lnd/clm/tools/mkprocdata_map/clm/src
D       models/lnd/clm/tools/mkprocdata_map/clm/src/mkprocdata_map.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/gridmapMod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/constMod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/fmain.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/shr_file_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/nanMod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Mkdepends
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Srcfiles
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Filepath
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Makefile
D       models/lnd/clm/tools/mkprocdata_map/clm/src/fileutils.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/shr_kind_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_in
D       models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_all
D       models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_wrap
D       models/lnd/clm/tools/mkprocdata_map/clm/README
D       models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat
D       models/lnd/clm/tools/ncl_scripts/RMSlahey.dat
D       models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl
D       models/lnd/clm/tools/ncl_scripts/RMSjaguar.dat
D       models/lnd/clm/tools/ncl_scripts/RMSintel.dat
D       models/lnd/clm/tools/ncl_scripts/RMSintrepid.dat
D       models/lnd/clm/tools/ncl_scripts/pergroPlot.ncl
D       models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl
D       models/lnd/clm/tools/ncl_scripts/runDepositionRegrid.pl
D       models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl
D       models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl
D       models/lnd/clm/bld/config_files/config_sys_defaults.xml
D       models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl
D       models/lnd/clm/bld/namelist_files/datm-build-namelist
D       models/lnd/clm/bld/namelist_files/checklatsfiles.ncl
D       models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
D       models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml

List all files added and what they do:

	- Added for RTM testing
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOn/user_nl_rtm
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOn
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmR01/user_nl_rtm
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmR01
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOff/user_nl_rtm
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOff
A       models/lnd/clm/test/system/user_nl_dirs/rtm
	- Added from release tags
A       models/lnd/clm/test/system/yellowstone.interactive
A       models/lnd/clm/test/system/tests_pretag_yellowstone_nompi
A       models/lnd/clm/test/system/nl_files/mkprocdata_ne30_to_f19_I2000
A       models/lnd/clm/test/system/yellowstone.batch
A       models/lnd/clm/tools/mkprocdata_map/clm4054_ne30g16_I2000.clm2.h0.2000-01_c121107.nc
A       models/lnd/clm/tools/mkprocdata_map/map_ne30np4_nomask_to_fv1.9x2.5_nomask_aave_da_c121107.nc
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_functions.bash
A       models/lnd/clm/tools/mkprocdata_map/src/mkprocdata_map.F90
A       models/lnd/clm/tools/mkprocdata_map/src/gridmapMod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/constMod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/Makefile.common
A       models/lnd/clm/tools/mkprocdata_map/src/fmain.F90
A       models/lnd/clm/tools/mkprocdata_map/src/shr_file_mod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/nanMod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/Mkdepends
A       models/lnd/clm/tools/mkprocdata_map/src/Srcfiles
A       models/lnd/clm/tools/mkprocdata_map/src/Filepath
A       models/lnd/clm/tools/mkprocdata_map/src/Makefile
A       models/lnd/clm/tools/mkprocdata_map/src/fileutils.F90
A       models/lnd/clm/tools/mkprocdata_map/src/shr_kind_mod.F90
A       models/lnd/clm/tools/mkprocdata_map/src
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_in
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_all
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_wrap
A       models/lnd/clm/tools/mkprocdata_map/clm4054_f19g16_I2000.clm2.h0.2000-01_c121107.nc
A       models/lnd/clm/tools/mkprocdata_map/README
A       models/lnd/clm/bld/config_query
A       models/lnd/clm/doc/UsersGuide/modelnl/xmldef2html_compsets
A       models/lnd/clm/doc/UsersGuide/modelnl/showinfo.js
A       models/lnd/clm/doc/UsersGuide/modelnl/index.cpp
A       models/lnd/clm/doc/UsersGuide/modelnl/Makefile
A       models/lnd/clm/doc/UsersGuide/modelnl

List all existing files that have been modified, and describe the changes:

 	- put back qflx_snomelt for consistency with older models.  clm4_0_55 mods to the snow
	  balance check otherwise only effect the diagnostic fields errh2osno, snow_source and snow_sinks
M       models/lnd/clm/src/main/histFldsMod.F90
 	- modified for RTM testing
M       config_files/config_CLMtestCompsets.xml
M       bluefire.batch
	- modified during release tag modification
M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/mirage.interactive
M       models/lnd/clm/test/system/test_system
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       models/lnd/clm/test/system/config_files/README
M       models/lnd/clm/test/system/README.testnames
M       models/lnd/clm/test/system/tests_posttag_yong
M       models/lnd/clm/test/system/TCBtools.sh
M       models/lnd/clm/test/system/test_driver.sh
M       models/lnd/clm/test/system/lynx.interactive
M       models/lnd/clm/test/system/shortlist.interactive
M       models/lnd/clm/test/system/TSMscript_tools.sh
M       models/lnd/clm/test/system/tests_posttag_mirage
M       models/lnd/clm/test/system/gen_test_table.sh
M       models/lnd/clm/test/system/input_tests_master
M       models/lnd/clm/test/system/README
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/bluefire.interactive
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
M       models/lnd/clm/tools/ncl_scripts
M       models/lnd/clm/tools/ncl_scripts/README
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl
M       models/lnd/clm/tools/interpinic
M       models/lnd/clm/tools/mksurfdata_map/src
M       models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mkutilsMod.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90
M       models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist
M       models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
M       models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
M       models/lnd/clm/bld
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/queryDefaultNamelist.pl
M       models/lnd/clm/bld/user_nl_clm
M       models/lnd/clm/bld/config_files/config_definition.xsl
M       models/lnd/clm/bld/config_files/config_definition.xml
M       models/lnd/clm/bld/listDefaultNamelist.pl
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/clm.cpl7.template
M       models/lnd/clm/bld/clm.buildnml.csh
M       models/lnd/clm/bld/README
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
M       models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/glacierMEC_pd.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml
M       models/lnd/clm/doc/UsersGuide/clm_ug.xml
M       models/lnd/clm/doc/UsersGuide/appendix.xml
M       models/lnd/clm/doc/UsersGuide/ptclm.xml
M       models/lnd/clm/doc/Quickstart.userdatasets
M       models/lnd/clm/doc/IMPORTANT_NOTES
M       models/lnd/clm/doc/Quickstart.GUIDE
M       models/lnd/clm/doc/ChangeLog
M       models/lnd/clm/doc/CodeReference/Filepath
M       models/lnd/clm/doc/KnownLimitations
M       models/lnd/clm/doc/ChangeSum
M       models/lnd/clm/doc/KnownBugs
M       models/lnd/clm/doc/README
M       models/lnd/clm/src/biogeochem/DryDepVelocity.F90
M       ChangeLog
M       ChangeSum
M       READM

Machines testing ran on: (in progress)

  build-namelist unit tester:   yes

		- OK.  All FAILs (~78 of them) should pass during the next round.

  CESM test lists:

    bluefire/CESM:              yes

    -Fail due to throuput comparison problems:

		FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.GC.164220.tputcomp.clm4_0_56 
		FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.164220.tputcomp.clm4_0_56 

	 -Fail due to new and correct rdirc file.  diffs in r2x_Forr_roff & r2x_Forr_ioff
	   These should pass next time around:

		FAIL  ERS_D.f45_g37.I.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  NCK.T31_g37.I.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  PET_PT.f45_g37.I1850.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERI.T31_g37.IG1850.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  SMS.T31_g37.IG4804.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  SMS.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  PET_PT.f10_f10.I20TRCN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56

    bluefire/CESM/allIcompsets: yes

		Error in SBN script handling in generate of namelist files so all compare tests are BFAILs.

    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             yes

      4 xFAIL.  The rest that fail now, but should pass the next time around.
	 
	 - Fail due to new and correct rdirc file.  diffs in r2x_Forr_roff & r2x_Forr_ioff
	   These should pass next time around:

		FAIL  ERS_Ld211.f10_f10.ICNADSPIN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		FAIL  ERS_Ln48_D_P64x16.ne30_g16.ICN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		FAIL  PET_D_P1x64.ne30_g16.ICN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		FAIL  ERS_Ld211.f10_f10.I_2000_VOC_CN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 

	 - Fail due to throughput comparison

		FAIL  ERS_Ld211.f10_f10.ICNADSPIN.bluefire_ibm.GC.164759.tputcomp.clm4_0_56 
		FAIL  ERS_Ld211_P192x2.f19_g16.I_2000_CNDV_CROP.bluefire_ibm.GC.164759.tputcomp.clm4_0_56 

	 - Will pass next time, these tests just introduced

		BFAIL ERS.f19_g16.I_2000_CN_rtmR01.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		BFAIL ERS.f19_g16.I_2000_CN_rtmOff.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		BFAIL ERS.f19_g16.I_2000_CN_rtmOn.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 

    bluefire interactive:       yes

		- xFAIL or new tests that will pass next time (missing baselines):

		BFAIL ERS_D_Mmpi-serial.CLM_USRDAT.IalaskaCN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_D_Mmpi-serial.CLM_USRDAT.I_2000_1PTFRC_US-UMB.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_P1x64_Mmpi-serial.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_camdenNJ.I_2000_VOC.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_D_P1x25_Mmpi-serial.5x5_amazon.I_2000.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_D_Mmpi-serial.1x1_asphaltjungleNJ.I_2000_VOC.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_CN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ln48_D_P1x64_Mmpi-serial.f19_g16.I_2000_GLCMECPD.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CNDV.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 

    lynx/pgi batch:             yes

   - xFAIL or will pass next time (new rdirc file effecting r2x_Forr_roff & r2x_Forr_ioff)

		FAIL  ERS_Ln48_D.f45_g37.I_2000_VOC.lynx_pgi.GC.170117.compare_hist.clm4_0_56 
		FAIL  ERS_Ln48_D.f10_f10.I_2000_CN.lynx_pgi.GC.170117.compare_hist.clm4_0_56 

    lynx/pgi interactive:       yes

		- OK except for new test that will pass next time (missing baselines):

		BFAIL SMS_RLA_Mmpi-serial.f45_f45.I.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL SMS_Mmpi-serial.CLM_USRDAT.I_2000_1PTFRC_US-UMB.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Ln48_D_P1x12_Mmpi-serial.f10_f10.ICNCROP.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_camdenNJ.I_2000_VOC.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PT.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Mmpi-serial.1x1_mexicocityMEX.I1PT.lynx_pgi.GC.170039.compare_hist.clm4_0_56 

    lyn/intel mirage testlist:  yes

		- OK except for new tests will pass next time (missing baselines):

		BFAIL ERS_Mmpi-serial.1x1_brazil.I_2000.lynx_intel.GC.095009.compare_hist.clm4_0_56 
		BFAIL ERI_D_Mmpi-serial.1x1_camdenNJ.I_2000_VOC.lynx_intel.GC.095009.compare_hist.clm4_0_56 
		BFAIL ERS_D_Mmpi-serial.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel.GC.095009.compare_hist.clm4_0_56 
		BFAIL ERS_Ln48_D_P1x12_Mmpi-serial.f10_f10.I_2000_CN.lynx_intel.GC.095009.compare_hist.clm4_0_56 

  test_driver.sh tools testing:

    bluefire interactive:       yes

		test 001 fails due to a bug in mkprocdata_map_wrap 
		test 002 fails due to 001
		test 008 will pass next time

    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable:

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: modification to default value for effvel in RtmMod.F90
	   changes the values of r2x_Forr_roff & r2x_Forr_ioff.  This causes cprnc to fail.
		This should pass in the next round and matches the value found in CLM4.5.

		-    real(r8),parameter :: effvel(nt_rtm) = 0.7_r8   ! downstream velocity (m/s)
		+    real(r8),parameter :: effvel(nt_rtm) = 1.0_r8   ! downstream velocity (m/s)

    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
		
		with flooding on and new rdirc file, climate may be different.
		with flooding off we have b4b

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: 

   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm4_0_56
Originator(s):  sacks (Sacks Bill 303-497-1762 CGD)
Date: Tue Nov 27 14:12:42 MST 2012
One-line Summary: fix s2x tsrf, add s2x diagnostics

Purpose of changes:

The s2x tsrf field was not being time-averaged; this is fixed now.

Also, add history fields giving per-column diagnostics of the fields sent
from CLM to GLC.

Requirements for tag: 
  fix bug 1590
  test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage-test for lynx_intel

Test level of tag: std-test

Bugs fixed (include bugzilla ID): 1590 (surface temperature sent from CLM to GLC not averaged properly)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>> Do time-averaging of tsrf field; remove calls to create_clm_s2x
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90

>>>>>>> Call to create_clm_s2x now done here instead of lnd_comp_mct /
>>>>>>> lnd_comp_esmf, so that clm_s2x can be used for hist file writes
>>>>>>> (this is needed so that the fields are updated before the history
>>>>>>> updates happen in the driver)
M       models/lnd/clm/src/main/clm_initializeMod.F90
M       models/lnd/clm/src/main/clm_driver.F90

>>>>>>> Clean up interface to create_clm_s2x
M       models/lnd/clm/src/main/clm_glclnd.F90

>>>>>>> Add capability to output fields sent from CLM to GLC
M       models/lnd/clm/src/main/histFileMod.F90
M       models/lnd/clm/src/main/histFldsMod.F90

>>>>>>> Remove non-existent PMT test
M       models/lnd/clm/test/system/lynx.batch

>>>>>>> Add ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD to xFail
>>>>>>> list; add comment
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

Machines testing ran on:

  build-namelist unit tester:   no

  CESM test lists:

    bluefire/CESM:              yes
        All PASS except:
        FAIL  ERI.T31_g37.IG1850.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 
        FAIL  SMS.T31_g37.IG4804.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 
        FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 
        FAIL  ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 

        These are expected failures: diffs in topo and tsrf fields
        sent to coupler, and topo diffs are small (RMS ~ 1e-13)

    bluefire/CESM/allIcompsets: no
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             yes
        All PASS or xFAIL except:
        FAIL  ERS_Ld211_P192x2.f19_g16.I_2000_CNDV_CROP.bluefire_ibm.GC.101753.compare_hist.clm4_0_55

        I believe this is an old problem, not due to the changes here: see bug 1598

    bluefire interactive:       yes
        All PASS or xFAIL

    lynx/pgi batch:             yes
        All PASS or xFAIL

    lynx/pgi interactive:       yes
        All PASS

    lyn/intel mirage testlist:  yes
        All PASS

  test_driver.sh tools testing:

    bluefire interactive:       no
    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable: clm4_0_55

Difference in expected fails from testing:

    Note: the additional expected fail is NOT a new failure, it is just newly
    documented

  --- models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml      (.../trunk_tags/clm4_0_55)      (revision 42229)
  +++ models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml      (.../branches/fix_glc_tsrf)     (revision 42229)
  @@ -90,7 +90,7 @@
         <bluefire>
            <IBM>
                 <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
  -              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart</entry>
  +              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart (known problem restarting mid-day with _GLC: bug 1557)</entry>
                 <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
                 <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
            </IBM>
  @@ -113,6 +113,9 @@
            </IBM>
         </bluefire>
         <lynx>
  +         <pgi>
  +              <entry testId="ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD" failType="FAIL">History files are different on restart (known problem restarting mid-day with _GLC: bug 1557)</entry>
  +         </pgi>
         </lynx>
      <test_system_batch> 
   

Changes answers relative to baseline: YES: changes tsrf and topo fields
sent to GLC (everything else bfb)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: glc_mec
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate):
  new climate for tsrf; roundoff-level for topo field sent to GLC. Note that these
  fields are limited to GLC, and don't feed back to the atmosphere at all.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? For topo: examined differences in cprnc output

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: None done

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_55
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Thu Nov 15 10:17:23 MST 2012
One-line Summary: bring in flooding capability

Purpose of changes:

	Test driver mods from Tony that allows flooding from rof to lnd.  Also
	brought in code from the rtmflood branch to handle the new flooding values.
	Fthresh calculed by reading SLOPE and MAX_VOLR from the rdirc file.  Merged
	in qflx_snow_melt from Swensons perfmafrost sims branch to fix snow
	balance problems in BalanceCheckMod.F90.

Requirements for tag:	

	Test flooding code in CLM by varying fthresh.  Test coupler mods by
	plotting coupler fields.  Look at differences in overall energy balance
	with and without flooding.

Test level of tag: doc, critical, standard, std-test, reg-test

	Critical.  Bluefire CESM/CLM tests and namelist tests only

Bugs fixed (include bugzilla ID):

	N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

	N/A

Describe any changes made to the namelist:

	N/A

List any changes to the defaults for the boundary datasets:

	N/A

Describe any substantial timing or memory changes:

	N/A

Code reviewed by:

	Tony Craig, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.):

 Updated all of the following (in relation to clm4_0_54)
	scripts4_121105	
	Machines_121106
	drvseq4_2_11
	rtm1_0_10
	cism1_121012
	share3_121025
	pio1_5_7
	mapping_121106

List all files eliminated:

	N/A

List all files added and what they do:

	N/A

List all existing files that have been modified, and describe the changes:

 -the following all for bringing in qflx_snow_melt for new
 -balance check calculation with flooding
 M models/lnd/clm/src/main/clmtypeInitMod.F90
 M models/lnd/clm/src/main/histFldsMod.F90
 M models/lnd/clm/src/main/mkarbinitMod.F90
 M models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
 M models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
 M models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
 M models/lnd/clm/src/biogeophys/Hydrology1Mod.F90
 M models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90
 M models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90

 - mods to bring in flooding from rtmflood
 M main/clm_driver.F90
 M main/cmlmtype.F90
 M main/clmtypeInitMod.F90
 M main/histFldsMod.F90
 M main/mkarbinitMod.F90
 M main/clm_varcon.F90

 - fixes for some test problems
 M build-namelist_test.pl
 M clm/bld/configure

Machines testing ran on:

  build-namelist unit tester:   yes

    6 xFails - all OK.

  CESM test lists:

    bluefire/CESM:              yes

		Fail due to new coupler fields:

		new field r2x_Forr_roff
		
		NCK.T31_g37.I.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_E.T31_g37.I1850.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERI.T31_g37.IG1850.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERH_D.T31_g37.I1850CN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54
		SMS.T31_g37.IG4804.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54

		new fields r2x_Forr_roff & r2x_Forr_ioff

		ERS_D.f45_g37.I.bluefire_ibm.GC.165350.compare_hist.clm4_0_54
		PET_PT.f45_g37.I1850.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERB.ne30_g16.I_1948-2004.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		PET_PT.f10_f10.I20TRCN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54
		SMS.f10_f10.IRCP45CN.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_D.f19_g16.IRCP85CN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54

		Fail due to throughput differences:

		FAIL  ERS_D.f45_g37.I.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERI.T31_g37.IG1850.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  SMS.T31_g37.IG4804.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54

    bluefire/CESM/allIcompsets: no
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             no
    bluefire interactive:       no
    lynx/pgi batch:             no
    lynx/pgi interactive:       no
    lyn/intel mirage testlist:  no

  test_driver.sh tools testing:

    bluefire interactive:       no
    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable:

	clm4_0_54

Changes answers relative to baseline:

   new coupler fields.  Since flooding is currently off in testing, these
	fields are r2x_Forr_roff & r2x_Forr_ioff

If tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,

		when flooding is turned on, this feature does change climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)

	   we ran one month with flood on and with flood off.

		f19_g16_I_2000_CN_checkNoFlood
		f19_g16_I_2000_CN_checkFlood

===============================================================
===============================================================
Tag name:  clm4_0_54
Originator(s):  erik (Erik Kluzek)
Date:  Tue Oct  9 10:25:33 MDT 2012
One-line Summary: Fix esmf for carma field, fix some CLM_USRDAT issues

Purpose of changes:

Fix _E problem with carma mod. Fix a couple CLM_USRDAT issues.

Requirements for tag: test on bluefire

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1561 (Compile bug in alpha18g for clm _E tests)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines, driver

scripts  updated to  scripts4_121008b
Machines updated to Machines_121004
driver   updated to drvseq4_2_07

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/bld/build-namelist --- expandXMLVar for lnd_frac
   M  models/lnd/clm/bld/clm.buildnml.csh - Set -clm_usrname if CLM_USRDAT_NAME set...
   M  models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - Fix soilw for carma

Machines testing ran on:

  build-namelist unit tester:   no

  CESM test lists:

    bluefire/CESM:              yes
    bluefire/CESM/allIcompsets: no
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             no
    bluefire interactive:       yes
    lynx/pgi batch:             no
    lynx/pgi interactive:       no
    lyn/intel mirage testlist:  no

  test_driver.sh tools testing:

    bluefire interactive:       no
    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable: clm4_0_53

Difference in expected fails from testing:

   Got some interactive tests working

Index: models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
===================================================================
--- models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml      (.../trunk_tags/clm4_0_53)      (revision 40874)
+++ models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml      (.../trunk)     (revision 40874)
@@ -83,9 +83,6 @@
    <test_system_interactive>
       <bluefire>
          <IBM>
-              <entry testId="ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm"        failType="RUN">CESM script issue</entry>
-              <entry testId="ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN" failType="FAIL">Restart length different</entry>
-              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC"           failType="FAIL">Restart length different</entry>
               <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
               <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart</entry>
               <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_53
Originator(s):  erik (Erik Kluzek) / sacks (Bill Sacks)`
Date: Wed Oct  3 14:01:15 MDT 2012
One-line Summary: Update to fsurdat, fpftdyn, finidat datasets, new high resolution organic/fmax/glacier raw datasets

Purpose of changes:

Add in new datasets for half-degree (finidat,fpftdyn). Add in new datasets for T31 (finidat, fsurdat). 
finidat for ne30. New datasets for ne120 (finidat, fsurdat). New 20th C transient datasets for ne30, ne120.
Add in new high resolution organic soil and 1/8th degree fmax datasets for mksurfdata.  Fix test_system 
testlists for Tony's changes. (sacks) New surface datasets for all glc_mec runs. New default glc grid 
option (gland5UM) (changes answers for glc_mec runs; BG1850CN compset will be broken due to incompatibility 
with initial conditions file) 

Requirements for tag:
   test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage-test for lynx_intel

Test level of tag: standard

Bugs fixed (include bugzilla ID): 
                                 1555 (SourceMods/src.clm does NOT work for clm4_0_50-clm4_0_52)
                                 1550 (Problem running I1PT compset in datm)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: 
    variables in clm_rtm_inparm namelist moved back into clm_inparm: finidat, nrevsn, fatmlndfrc

List any changes to the defaults for the boundary datasets: Yes!
   Add f05 finidat, new T31/ne30/ne120 finidat, comment out wus12 files that don't exist, 
   T31/f19/f09 GLC fsurdat/fpftdyn files, 
   new T31 fsurdat, T31/ne30/ne120 fpftdyn rcp2.6/4.5/6/8.5
   maps for 3x3min_USGS

Describe any substantial timing or memory changes: None

Code reviewed by: self, sacks

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines, drv, datm, cism, rtm, pio, mapping

   (these are cesm1_1_alpha18g externals)
   scripts  updated to scripts4_121002
   Machines updated to Machines_121001
   drv      updated to drvseq4_2_06
   cism     updated to cism1_121002
   rtm      updated to rtm1_0_08
   pio      updated to pio1_5_4
   mappping updated to mapping_120929

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Update ERS tests to new version with _L (some new fails with this)
   M       models/lnd/clm/test/system/mirage.interactive
   M       models/lnd/clm/test/system/lynx.interactive
   M       models/lnd/clm/test/system/bluefire.batch
   M       models/lnd/clm/test/system/bluefire.interactive
   M       models/lnd/clm/test/system/lynx.batch

>>>>>>>>> Handle regional better, add 3x3min_USGS, remove grids that shouldn't be in.
   M       models/lnd/clm/tools/mkmapdata/mvNimport.sh ---- Don't drop out single-point resolutions
   M       models/lnd/clm/tools/mkmapdata/regridbatch.sh -- Drop out regional resolutions add comment for them
   M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh ---- Add 3x3min_USGS, remove ne240/ne120_nomask, 0.1/0.3_nomask grids
                 add error check if 1x1_ resolution being run as global
>>>>>>>>> Allow longer file names for dynpft
   M       models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90
   MM      models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl

   M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl -------- Remove testing of rtm options removed, add transient tests

   M       models/lnd/clm/bld/build-namelist ---- Just change documentation of default value, remove clm_rtm_inparm namelist
   M       models/lnd/clm/bld/clm.buildnml.csh -- Fix so SoureMods will work

>>>>>>>>> New datasets, remove clm_rtm_inparm, add gland5UM as default glc_grid
   M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ------- Move finidat/nrevsn/fatmlndfrc out of clm_rtm_inparm., add gland5UM
               option to glc_grid, remove us20,wus12 resolutions (don't have files available for them)
   M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Default is gland5UM
   M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- add f05 finidat, new T31/ne30/ne120 finidat, comment out 
                   wus12 files that don't exist, T31/f19/f09 GLC fsurdat/fpftdyn files, new T31 fsurdat, T31/ne30/ne120 fpftdyn rcp2.6/4.5/6/8.5
                   maps for 3x3min_USGS
   M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - fmax at 3x3min_USGS, new ISRIC-WISE-NCSCD organic dataset for -hires

>>>>>>>>> Add soilw for CARMA, bugfix from Sam for CNDV/CROP, remove clm_rtm_inparm, increase tolerance for checking pftglc_mec
   M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - soilw for CARMA
   M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 ------ soilw for CARMA
   M       models/lnd/clm/src/main/pftdynMod.F90 ------------ bugfix from Sam for CNDV/CROP
   M       models/lnd/clm/src/main/clm_atmlnd.F90 ----------- h2osoi_vol for CARMA
   M       models/lnd/clm/src/main/controlMod.F90 ----------- Remove clm_rtm_inparm namelist, put variables in clm_inparm
   M       models/lnd/clm/src/main/surfrdMod.F90 --------- Increase tolerance for checking equality of pctglc_mec and pctgla;
                                                           then rescale pctglc_mec so it is more in line with pctgla
   M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - Soilw for CARMA

Machines testing ran on:

  build-namelist unit tester: yes (all namelists are different than previous ones)

  CESM test lists:

    bluefire/CESM:              yes
    bluefire/CESM-allIcompsets: yes

  test_system testing:

    bluefire batch:         yes
    bluefire interactive:   yes
    lynx/pgi batch:         yes
    lynx/pgi interactive:   yes
    lynx/intel interactive: yes

  test_driver.sh tools testing:
    bluefire interactive:   yes
    lynx interactive:       yes

Difference in expected fails from testing:

    us20/wus12 tests were removed so removed from expected fail
    ne16/ne60/1x1_tropicAtl 20thC transient tests fails -- need finidat files 
    New bug: ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD (bugzilla 1557)
    New testname: ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC (was ERS48s_...)
    New fail: ERS_Ld211.1x1_camdenNJ.I_2000_VOC, ERS_Ld211_D_P112x2.f10_f10.ICNCROP
    Some ERS_L tests now pass that failed previously
    I1PT tests pass now
    Most SBN tests pass now
    Intel single point tests pass now
@@ -5,14 +5,11 @@
       <bluefire>
          <IBM>
             <compare>
-               <entry testId="214" failType="xFail"> us20 not fully implmented </entry>
-               <entry testId="216" failType="xFail"> us20 not fully implmented </entry>
-               <entry testId="221" failType="xFail"> wus12 not fully implmented </entry>
-               <entry testId="222" failType="xFail"> wus12 not fully implmented </entry>
             </compare>
             <generate>
-               <entry testId="141" failType="xFail"> us20  not fully implemented </entry>
-               <entry testId="144" failType="xFail"> wus12 not fully implemented </entry>
+               <entry testId="184" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="187" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="196" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
             </generate>
          </IBM>
       </bluefire>
@@ -89,19 +86,17 @@
               <entry testId="ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm"        failType="RUN">CESM script issue</entry>
               <entry testId="ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN" failType="FAIL">Restart length different</entry>
               <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC"           failType="FAIL">Restart length different</entry>
-              <entry testId="ERS48s_D_P1x64.f45_g37.I_2000_VOC"              failType="RUN">Initial simulation fails</entry>
+              <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
+              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart</entry>
               <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
               <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
          </IBM>
       </bluefire>
       <lynx>
          <pgi>
-              <entry testId="SMS_D.1x1_vancouverCAN.I1PT.lynx_pgi"           failType="SFAIL">datm namelist problem for single-point forcing</entry>
-              <entry testId="ERS.1x1_mexicocityMEX.I1PT.lynx_pg"             failType="SFAIL">datm namelist problem for single-point forcing</entry>
+              <entry testId="ERS_Ld211.1x1_camdenNJ.I_2000_VOC"              failType="CFAIL">????</entry>
          </pgi>
          <intel>
-              <entry testId="ERS.1x1_brazil.I_2000.lynx_intel"                failType="FAIL">CESM script issue</entry>
-              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel" failType="FAIL">CESM script issue</entry>
          </intel>
       </lynx>
    </test_system_interactive> 
@@ -110,10 +105,8 @@
       <bluefire>
          <IBM>
               <entry testId="ERS_D_P96x32.T62_g37.I_2000"             failType="SFAIL">T62 not working</entry>
-              <entry testId="ERS211d_P192x2.f19_g16.I_2000_CNDV_CROP" failType="SFAIL">ignore_ic_date is incompatable with crop!</entry>
-              <entry testId="ERS48s_D_P64x16.ne30_g16.ICN"            failType="SFAIL">CESM script problem didn't see both files</entry>
-              <entry testId="ERS211d.f10_f10.I_2000_VOC_CN"           failType="SFAIL">CESM script problem didn't see both files</entry>
-              <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
+              <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN">Dies early with a floating point trap</entry>
+              <entry testId="ERS_Ln48_D.f09_g16.ICNEXSPIN"            failType="CFAIL">build error?</entry>
          </IBM>
       </bluefire>
       <lynx>
@@ -123,22 +116,9 @@
    <cesm> 
       <bluefire>
          <IBM>
-              <entry testId="SBN.1x1_mexicocityMEX.I1PT"     failType="SFAIL">datm namelist issue</entry>
-              <entry testId="SBN.1x1_vancouverCAN.I1PT"      failType="SFAIL">datm namelist issue</entry>
-              <entry testId="SBN.1x1_urbanc_alpha.I1PT"      failType="SFAIL">datm namelist issue</entry>
-              <entry testId="SBN.1x1_asphalt_jungle.ICNTEST" failType="TFAIL">datm namelist issue</entry>
-              <entry testId="SBN.T42_g16.I1850"              failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.T31_g16.I1850"              failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.f05_g16.I20TR"              failType="SFAIL">missing datasets</entry>
               <entry testId="SBN.1x1_tropicAtl.I20TR"        failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.ne30_g16.I20TR"             failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.ne120_g16.I20TRCN"          failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.f05_g16.IRCP26CN"           failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.f05_g16.IRCP45CN"           failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.f05_g16.IRCP60CN"           failType="SFAIL">missing datasets</entry>
-              <entry testId="SBN.f05_g16.IRCP85CN"           failType="SFAIL">missing datasets</entry>
-              <entry testId="SMS.1x1_mexicocityMEX.I1PT"     failType="SFAIL">missing datasets</entry>
-              <entry testId="ERP.1x1_vancouverCAN.I1PT"      failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.ne16_g16.I20TR"             failType="TFAIL">missing datasets</entry>
+              <entry testId="SBN.ne60_g16.I20TR"             failType="TFAIL">missing datasets</entry>
          </IBM>
       </bluefire>
    </cesm>


CLM tag used for the baseline comparison tests if applicable: clm4_0_51

Changes answers relative to baseline:  Yes, for resolutions with new datasets
   All T31 cases are different
   T31/f19/f09 cases with GLC are different
   f05/T31/ne30/ne120 now have initial condition files (or different from before)

===============================================================
===============================================================
Tag name:  clm4_0_52
Originator(s):  sacks (sacks)
Date: Thu Sep 27 21:30:15 MDT 2012
One-line Summary: new pct_glacier raw data file

Purpose of changes:

Add new pct_glacier raw data file. Update mksurfdata_map to support this
file, and to change some of the glc_mec-related fields on the surface
dataset (these fields currently are not used by CLM).

Rename fglctopo -> furbtopo, to denote its current use

Delete Ross ice shelf correction from mksurfdata_map, since this seems
unnecessary (because this area is already called glacier by the
glacier raw data files) and has the potential to break things with the
new pct_glacier raw data file (because the raw data file has a few
points south of -79 N with 0% glacier, which means there is no
information about the separation into elevation classes at those
points). One possible problem with deleting this correction is the
deletion of the code that sets various parameters specially over this
area (in the 'if (.not. dynpft)' block of the deleted code) - but it
looks like those settings are unnecessary, too.

Fix typo in name of scrip grid file for 1x1_urbanc_alpha

Requirements for tag: Only need to test tools (test_driver.sh -i on
bluefire & lynx)

Test level of tag: critical (tools only)

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

    Use new pct_glacier raw data file; now use same raw topo file for urban
    screen in mksurfdata_map regardless of glc_nec

Describe any substantial timing or memory changes:

    mksurfdata_map takes longer now for glc_mec; increase of 1-2 minutes
    for f09

Code reviewed by: Self

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

List all files added and what they do:

>>>>>>> unit tester for new get_dim_lengths routine
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkncdio.F90

List all existing files that have been modified, and describe the changes:

>>>>>>> Changes to mksurfdata_map for new format of input pct_glacier file
>>>>>>> and reworking of glc_mec-related output fields.
M       models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90
        - Also remove Ross ice shelf correction
        - Also rename mksrf_fglctopo -> mksrf_furbtopo
M       models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90
        - Substantially reworked
M       models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90
        - New get_dim_lengths routine
M       models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90

>>>>>>> Rename mksrf_fglctopo -> mksrf_furbtopo
M       models/lnd/clm/tools/mksurfdata_map/src/mkvarctl.F90
M       models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
M       models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist

>>>>>>> Add tests of mkncdio
M       models/lnd/clm/tools/mksurfdata_map/unit_testers/Srcfiles
M       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mksurfdata_map.F90

>>>>>>> Remove scrip grid file for 10x10min_IGBPmergeICESatGIS, add grid
>>>>>>> files for 3x3min_GLOBE-Gardner and 3x3min_GLOBE-Gardner-mergeGIS;
>>>>>>> point to new raw datasets; rename mksrf_fglctopo -> mksrf_furbtopo
>>>>>>> (same file now used for this regardless of glc_nec); fix grid file
>>>>>>> for 1x1_urbanc_alpha
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>> Remove mapping files for 10x10min_IGBPmergeICESatGIS, add mapping
>>>>>>> files for 3x3min_GLOBE-Gardner and 3x3min_GLOBE-Gardner-mergeGIS
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>> Remove references to 10x10min_IGBPmergeICESatGIS, add references to
>>>>>>> 2 new grids
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
M       models/lnd/clm/bld/namelist_files/checkmapfiles.ncl
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
        - Also rename mksrf_fglctopo -> mksrf_furbtopo

Machines testing ran on:

  build-namelist unit tester: YES, all PASS or xFAIL

  CESM test lists: NOT RUN!

    bluefire/CESM
    lynx/CESM

  bluefire/PTCLM: NOT RUN!

  test_system testing: NOT RUN!

    bluefire batch:
    bluefire interactive:
    lynx/pgi batch:
    lynx/pgi interactive:
    mirage,storm/ifort interactive:

  test_driver -i testing:

    bluefire interactive: all PASS or xFAIL except:

>>> These are all mksurfdata_map baseline tests that were expected to fail
>>> due to new pct_glacier raw dataset
015/031 < FAIL> <Test Id: bl924> <Desc: TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds ..... rc=7>  
017/031 < FAIL> <Test Id: bl953> <Desc: TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__o ....... rc=7>  
019/031 < FAIL> <Test Id: bl954> <Desc: TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ...... rc=7>  
021/031 < FAIL> <Test Id: bl957> <Desc: TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__do ...... rc=7>  

    lynx interactive: all PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_51

Difference in expected fails from testing:

    No change in expected failures in testing

Changes answers relative to baseline: No, bfb

===============================================================
===============================================================
Tag name:  clm4_0_51
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Wed Sep 26 15:37:41 MDT 2012
One-line Summary: bug fixes, pio performance and SCRIP files

Purpose of changes:

Add 3x3min_USGS and 3x3min_LandScan2004 back in for mkmapdata.sh.  Namelist
mods for F05 SCRIP file bug. Changes from Jim for PIO performance issue.
Bills clm.buildnml.csh fix.

Requirements for tag:

Test level of tag: doc, critical, standard, std-test, reg-test

critical: build namelist unit tests and cesm/clm tests out of scripts

Bugs fixed (include bugzilla ID):

1506,1518

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describ changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

myself and Erik

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M SVN_EXTERNAL_DIRECTORIES
	update externals to
	https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_120924a
	https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_120921
M models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
  report cesm/clm expected failures even though not hooked up
M models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90
  put LandScan back in
M models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90
  change tolerance for checking map bounds
M models/lnd/clm/bld/unit_testers/build-namelist_test.pl
  take out -rtm and -rtm_tstep options 
M models/lnd/clm/bld/clm.buildnml.csh
  puts back gls options
M models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
  new f05 mapping files and some cleanup of maps files in general
M models/lnd/clm/bld/namelist_files/createMapEntry.pl
  output for this script is not consistent so modified to get
  valid output
M models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml
  new scrip grid entries
M models/lnd/clm/src/main/histFileMod.F90
  modification from J. Edwards for io performance

Machines testing ran on:

%%%%%% testing reporting start

%%build namelist tests

	OK

  >>tail out_unit_092212.lg
  274/277 < PASS> <Test Id: 274> <Desc: lnd_in file exists>  
  275/277 < PASS> <Test Id: 275> <Desc: temp_file.txt file exists>  
  276/277 < PASS> <Test Id: 276> <Desc: lnd_in file the same as expected for crop>  
  277/277 < PASS> <Test Id: 277> <Desc: temp_file.txt different as expected for crop>  
  Successully ran all testing for build-namelist

  Cleanup files created
  rm: lnd_in.default: A file or directory in the path name does not exist.
  rm: temp_file.txt: A file or directory in the path name does not exist.
  # Looks like you failed 4 tests of 277.

%%cesm/clm tests

	mostly OK

  generate : ./cs.status.164019.bluefire

  nohup create_test_suite -input_list bluefire.clm.auxtest -compare clm4_0_50 -baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines -generate clm4_0_51 -testroot /glade/scratch/muszala/tests > & ! bf_out_`date +"%m%d%y"`.lg &
  ID: 203212

  ## Reason: throughput measure off
    FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_50 
    FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_50 
    FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_50 
    FAIL  SMS.T31_g37.IG4804.bluefire_ibm.tputcomp.clm4_0_50 
  ## baseline diretory already existed, error copying over nc files
    FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERS_D.f45_g37.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  NCK.T31_g37.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  PST.f45_g37.I1850CN.bluefire_ibm.generate.clm4_0_51 
    FAIL  PET_PT.f45_g37.I1850.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERI.T31_g37.IG1850.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS.T31_g37.IG4804.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.generate.clm4_0_51 
  ## fails due to cprnc time check.  new runs are 11 ts.  in 50 these were 10, I expect these to pass next time around
    FAIL  ERS_D.f45_g37.I.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERI.T31_g37.IG1850.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.compare_hist.clm4_0_50 
  ## No Lm3 directories created during clm4_0_50 generate...new case, should pass next time around
    SFAIL ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.203212 
      ERROR: datm.buildnml.csh failed
    BFAIL ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.compare_hist.clm4_0_50 
      No dir to compare to in tag 50
  ## problems in generate due to scripts for single point 
    SFAIL SMS.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.203212 
      ERROR: datm.buildnml.csh failed also failed during generate
    BFAIL SMS.1x1_numaIA.ICN.bluefire_ibm.compare_hist.clm4_0_50 
      No dir to compare to in tag 50 - failed during generate

  ## these were failing but passed when rerun - keep an eye on these
    BFAIL ERB.ne30_g16.I_1948-2004.bluefire_ibm.compare_hist.clm4_0_50 
    BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_50 
    BFAIL ERH_D.T31_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_50 

    went to generated ref case
      ./setup -clean
      ./setup
      then build and rerun

    went to generate case
      ./setup -clean
      ./setup 
      clean-build, then build then reurn

   did the same in the CG case for ref and normal case

    After hand running
    ./cs.status.203212.bluefire | grep ERB.f09_g16.I1850SPINUPCN
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm 
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.memleak
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_50 
      see cprnc ts  error above
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.memcomp.clm4_0_50 
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.tputcomp.clm4_0_50

    This test was rerun with a new testlist
    ./cs.status.203212.bluefire | grep ERB.ne30_g16.I_1948-2004
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm 
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm.memleak
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.compare_hist.clm4_0_50 
      see cprnc ts  error above
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm.memcomp.clm4_0_50 
    FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.tputcomp.clm4_0_50 
      throughput tol. error

    ./cs.status.141307.bluefire
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm 
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.memleak
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_50 
      see cprnc ts  error above
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.memcomp.clm4_0_50 
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.tputcomp.clm4_0_50 

%%cesm/clm rof tests
  nohup create_test_suite -input_list bluefire.clmRof.auxtest -compare clm4_0_50 -baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines -generate clm4_0_51 -testroot /glade/scratch/muszala/tests > & ! bf_out_`date +"%m%d%y"`.lg &

	These don't exist anymore, but will be replaced once Tony works out default grid resolutions for r01 and r05

  ID:  091144

  BFAIL SMR.f19_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
    nothing to compare to in clm4_0_50
  BFAIL SMR.f09_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
    nothing to compare to in clm4_0_50
  FAIL  SMR.f05_g16.I_2000_CN.bluefire_ibm 
    larger scipt errors in rof - kills the following two tests outright
      BFAIL SMR.f05_g16.I_2000_CN.bluefire_ibm.generate.clm4_0_51 
      BFAIL SMR.f05_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
  FAIL  SMR.ne120_g16.I_2000_CN.bluefire_ibm.generate.clm4_0_51 
    can't copy in, clm4_0_51 baseline already exists
  BFAIL SMR.ne120_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
    nothing to compare to in clm4_0_50
  RUN   SMR.ne240_g16.I_2000_CN.bluefire_ibm.GC.091144 


%%%%%% testing reporting end

CLM tag used for the baseline comparison tests if applicable:

	clm4_0_50

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_50
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date:  Fri Sep 21 15:13:52 MDT 2012
One-line Summary: testing of clm and new rof component

Purpose of changes:

Run tests on clm for new ROF component.  CLM mods by tcraig to support ROF.

Requirements for tag:

Test level of tag: doc, critical, standard, std-test, reg-test

std-test

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

	Not needed since ROF is now a CLM external
		D       models/lnd/clm/src/main/clm_mct_mod.F90
		D       models/lnd/clm/src/riverroute
		D       models/lnd/clm/src/riverroute/RtmMod.F90
		D       models/lnd/clm/src/riverroute/RunoffMod.F90

List all files added and what they do:

	Fix for some of Erik's new tests
		A       models/lnd/clm/test/system/user_nl_dirs/monthly
		A       models/lnd/clm/test/system/user_nl_dirs/monthly/user_nl_clm
		A       models/lnd/clm/test/system/user_nl_dirs/monthly/user_nl_cpl

List all existing files that have been modified, and describe the changes:

	M      models/lnd/clm/test/system/tests_pretag_jaguarpf
	M      models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
	M      models/lnd/clm/tools/ncl_scripts
	M      models/lnd/clm/tools/interpinic
	M      models/lnd/clm/tools/mksurfdata_map/src
	M      models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
	M      models/lnd/clm/bld
	M       models/lnd/clm/bld/configure
	M       models/lnd/clm/bld/user_nl_clm
	M       models/lnd/clm/bld/listDefaultNamelist.pl
	M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
	M       models/lnd/clm/bld/build-namelist
	M       models/lnd/clm/bld/clm.buildnml.csh
	M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
	M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
	M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
	M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
	M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90
	M       models/lnd/clm/src/biogeochem/CNDVMod.F90
	M      models/lnd/clm/src/biogeochem/DryDepVelocity.F90
	M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
	M       models/lnd/clm/src/main/spmdGathScatMod.F90
	M       models/lnd/clm/src/main/clm_varpar.F90
	M       models/lnd/clm/src/main/decompInitMod.F90
	M       models/lnd/clm/src/main/clm_initializeMod.F90
	M       models/lnd/clm/src/main/clmtypeInitMod.F90
	M       models/lnd/clm/src/main/histFileMod.F90
	M       models/lnd/clm/src/main/clm_atmlnd.F90
	M       models/lnd/clm/src/main/findHistFields.pl
	M       models/lnd/clm/src/main/restFileMod.F90
	M       models/lnd/clm/src/main/controlMod.F90
	M       models/lnd/clm/src/main/clm_varctl.F90
	M       models/lnd/clm/src/main/clm_driver.F90
	M       models/lnd/clm/src/main/ncdio_pio.F90
	M       models/lnd/clm/src/main/domainMod.F90
	M       models/lnd/clm/src/main/decompMod.F90
	M       models/lnd/clm/src/main/clmtype.F90
	M       models/lnd/clm/src/main/histFldsMod.F90
	M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
	M       models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90
	M       SVN_EXTERNAL_DIRECTORIES
	M       ChangeLog
	M       ChangeSum
	M       scripts/ccsm_utils/Case.template/config_definition.xml


Machines testing ran on:

%%%%%%%% Test reporting START %%%%%%%%

	Test system is currently in flux so I will simply list all tests that have
	failed and the 8 tests that we need to keep an eye on.  I've included bluefire
	and lynx and pointers to where tests live.

* tests that will pass in next tag due to new features
** denotes an expected fail.
*** any tputcomp tests that fail I'm inclined to ignore also.  These change from test to test.
? or cd a test that will need fixing

BLUEFIRE:

OK ############ run build-namelist tests
>>cd models/lnd/clm/bld/unit_testers
>>./build-namelist_test.pl -compare /glade/scratch/muszala/svn/clm4_0_49/models/lnd/clm/bld/unit_testers -generate -test -csmdata /glade/proj3/cseg/inputdata >&!  out_unit_`date +"%m%d%y"`.lg

 OK...failed tests will pass in next tag

OK ############# run new I case tests
[be1105en /glade/scratch/muszala/svn/clm_trunk/scripts  ]$
create_test_suite -mach bluefire_ibm -input_list allIcompsetsRes.clm.auxtest -nobatch on -nobuild on -compare clm4_0_49 -baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines -generate clm4_0_50 -testroot /glade/scratch/muszala/tests > & ! bf_out_allI_`date +"%m%d%y"`.lg

    165507 - /glade/scratch/muszala/tests
        >>./cs.status.165507.bluefire | grep FAIL
...
** SFAIL SBN.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.165507
** SFAIL SBN.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.165507
** SFAIL SBN.1x1_urbanc_alpha.I1PT.bluefire_ibm.GC.165507
** TFAIL SBN.1x1_asphalt_jungle.ICNTEST.bluefire_ibm.GC.165507
** TFAIL SBN.T42_g16.I1850.bluefire_ibm.GC.165507
** TFAIL SBN.T31_g16.I1850.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.I20TR.bluefire_ibm.GC.165507
** SFAIL SBN.1x1_tropicAtl.I20TR.bluefire_ibm.GC.165507
** SFAIL SBN.ne30_g16.I20TR.bluefire_ibm.GC.165507
** SFAIL SBN.ne120_g16.I20TRCN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP26CN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP45CN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP60CN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP85CN.bluefire_ibm.GC.165507


OK ############ run clm interactive tools tests
[be1105en /glade/scratch/muszala/svn/clm_trunk/models/lnd/clm/test/system  ]$                                                                   
>>nohup env CLM_SOFF=FALSE ./test_driver.sh -i >&!  bluefire_i_`date +"%m%d%y"`.lg &

    OK:  looking at /glade/scratch/muszala/svn/clm_trunk/models/lnd/clm/test/system/td.951030.status.xFail  - rerun
    clmTests/test-driver.533240 - /glade/scratch/muszala/svn/clm_trunk/models/lnd/clm/test/system/td.533240.status.xFail

############# run old cesm/clm tests out of scripts


[be1105en /glade/scratch/muszala/svn/clm_trunk/scripts  ]$                                                                                                                                                          
>>create_test_suite -input_list bluefire.clm.auxtest -compare clm4_0_49 \
-baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines \
-generate clm4_0_50 \
-testroot /glade/scratch/muszala/tests >&! bf_out_`date +"%m%d%y"`.lg &

    143258
>>cs.status.143258.bluefire | grep -v PASS
...

*** FAIL  SMS.T31_g37.IG4804.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERI.T31_g37.IG1850.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f45_g37.I.bluefire_ibm.compare_hist.clm4_0_49

* FAIL  NCK.T31_g37.I.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERI.T31_g37.IG1850.bluefire_ibm.compare_hist.clm4_0_49
? FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm
   
    Failing in Generate:
    "/glade/scratch/muszala/svn/clm4_0_49/models/drv/shr/seq_infodata_mod.F90", line 620: 1525-006 The STATUS= specifier in the OPEN          
    statement for
     unit 98 cannot be set to OLD because the file rpointer.drv does not exist.  The program will stop.

    BFAIL ERB.ne30_g16.I_1948-2004.bluefire_ibm.generate.clm4_0_50
    BFAIL ERB.ne30_g16.I_1948-2004.bluefire_ibm.compare_hist.clm4_0_49
? FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm

    Failing in Generate:
     0:"/glade/scratch/muszala/svn/clm4_0_49/models/drv/shr/seq_infodata_mod.F90", line 620: 1525-006 The STATUS= specifier in the OPEN
    statemen     t for unit 98 cannot be set to OLD because the file rpointer.drv does not exist.  The program will stop.

    BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.generate.clm4_0_50
    BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_49
? FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm

       Failing in Generate:
    "/glade/scratch/muszala/svn/clm4_0_49/models/drv/shr/seq_infodata_mod.F90", line 620: 1525-006 The STATUS= specifier in the OPEN          
    statement for
     unit 98 cannot be set to OLD because the file rpointer.drv does not exist.  The program will stop.

    BFAIL ERH_D.T31_g37.I1850CN.bluefire_ibm.generate.clm4_0_50
    BFAIL ERH_D.T31_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_49

* FAIL  SMS.T31_g37.IG4804.bluefire_ibm.compare_hist.clm4_0_49
** SFAIL SMS.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.143258
    should be xFAIL : ERROR(build-namelist::new): Required input variable yearfirst was not found
** SFAIL ERP.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.143258
    should be xFAIL : ERROR(build-namelist::new): Required input variable yearfirst was not found
* FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERP.f19_g16.IGRCP60CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.compare_hist.clm4_0_49
   



############# run new test_system tests

## interactive
>> test_system -i -c clm4_0_49 -g clm4_0_50 >&! bluefire_tsi_`date +"%m%d%y"`.lg &

    161038
>>cs.status.161038.bluefire | grep -v PASS
...
SFAIL ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm.GC.161038
* FAIL  ERS_P1x64.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
* FAIL  ERS_P1x64.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.memcomp.clm4_0_49
    max memory values differ
*** FAIL  ERS_P1x64.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.tputcomp.clm4_0_49
** FAIL  ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN.bluefire_ibm
** BFAIL ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN.bluefire_ibm.generate.clm4_0_50
** BFAIL ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN.bluefire_ibm.compare_hist.clm4_0_49
cd RUN   ERS_D_P1x25.5x5_amazon.I_2000.bluefire_ibm.GC.161038
** RUN   ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.bluefire_ibm.GC.161038
** RUN   ERS48s_D_P1x64.f45_g37.I_2000_VOC.bluefire_ibm.GC.161038
* FAIL  ERS48s_D_P1x64.f19_g16.I_2000_GLCMECPD.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
*** FAIL  ERS48s_D_P1x64.f19_g16.I_2000_GLCMECPD.bluefire_ibm.tputcomp.clm4_0_49
** FAIL  PET_D_P1x64.f45_g37.I_2000_VOC.bluefire_ibm


  
## batch
>>test_system -c clm4_0_49 -g clm4_0_50 > & ! bluefire_ts_`date +"%m%d%y"`.lg &

    143420 -- cs.status.143420.bluefire
cs.status.143420.bluefire | grep -v PASS
...
* FAIL  ERS211d.f10_f10.ICNADSPIN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
*** FAIL  ERS211d.f10_f10.ICNADSPIN.bluefire_ibm.tputcomp.clm4_0_49
** CFAIL ERS48s_D.f09_g16.ICNEXSPIN.bluefire_ibm.GC.143420
    this is xFAIL for interactive, should also be listed here
* FAIL  ERS48s_D_P64x16.ne30_g16.ICN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
*** FAIL  ERS48s_D_P64x16.ne30_g16.ICN.bluefire_ibm.tputcomp.clm4_0_49
* FAIL  PET_D_P1x64.ne30_g16.ICN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
? RUN   ERS211d_D_P112x2.f10_f10.ICNCROP.bluefire_ibm.GC.143420
    run failed
** FAIL  ERS211d.f10_f10.I_2000_VOC_CN.bluefire_ibm.compare_hist.clm4_0_49
*** FAIL  ERS211d.f10_f10.I_2000_VOC_CN.bluefire_ibm.tputcomp.clm4_0_49
** RUN   ERS211d_P192x2.f19_g16.I_2000_CNDV_CROP.bluefire_ibm.GC.143420
** SFAIL ERS_D_P96x32.T62_g37.I_2000.bluefire_ibm.GC.143420



#############

LYNX:

############# run new test_system tests

## interactive
>> test_system -i -c clm4_0_49_lynx_pgi -g clm4_0_50_lynx_pgi >&! lynx_i_`date +"%m%d%y"`.lg &

    144558

cs.status.144558.lynx | grep -v PASS
...
*** FAIL  ERS211d.1x1_brazil.I_2000.lynx_pgi.tputcomp.clm4_0_49_lynx_pgi
* FAIL  ERS48s_D_P1x12.f10_f10.ICNCROP.lynx_pgi.compare_hist.clm4_0_49_lynx_pgi
    new fields in cpl history files
** SFAIL SMS_D.1x1_vancouverCAN.I1PT.lynx_pgi.GC.144558
** SFAIL ERS.1x1_mexicocityMEX.I1PT.lynx_pgi.GC.144558


## batch
>> test_system -c clm4_0_49_lynx_pgi -g clm4_0_50_lynx_pgi >&! lynx_`date +"%m%d%y"`.lg &

  160925
./cs.status.160925.lynx | grep -v PASS
...
? BFAIL PMT_D.f45_g37.I_2000.lynx_pgi.compare_hist.clm4_0_49_lynx_pgi
  
    problem in generate case not copying over file
     PASS
    Initial Test log is /glade/scratch/muszala/PMT_D.f45_g37.I_2000.lynx_pgi.G.114232/run/cpl.log.120920-152048
    /var/spool/torque/mom_priv/jobs/102008.nid00003.SC:  Storing new baseline in /glade/proj2/cgd/tss/clm_cesm_baselines/clm4_0_49_ly
    nx_pgi/PMT_D.f45_g37.I_2000.lynx_pgi
    ERROR in /var/spool/torque/mom_priv/jobs/102008.nid00003.SC:  could not copy /glade/scratch/muszala/archive/PMT_D.f45_g37.I_2000.
    lynx_pgi.G.114232/cpl/hist/ to /glade/proj2/cgd/tss/clm_cesm_baselines/clm4_0_49_lynx_pgi/PMT_D.f45_g37.I_2000.lynx_pgi/cpl.hi.nc

? RUN   ERS48s_D.f45_g37.I_2000_VOC.lynx_pgi.GC.160925
    run didn't finish?
? RUN   ERS48s_D.f10_f10.I_2000_CN.lynx_pgi.GC.160925
    PBS: job killed: walltime 9021 exceeded limit 9000
? RUN   ERS48s_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD.lynx_pgi.GC.160925
     PBS: job killed: walltime 9041 exceeded limit 9000

## interactive, with mirage test list and intel compiler
>>test_system -i -p intel -l mirage.interactive -o "-mach lynx" -c clm4_0_49_lynx_intel -g clm4_0_50_lynx_intel > & ! lynx_mi_intel_`date +"%m%d%y"`.lg &

  143620  cs.status.143620.lynx
>>cs.status.143620.lynx  | grep -v PASS
...
** FAIL  ERS.1x1_brazil.I_2000.lynx_intel
** BFAIL ERS.1x1_brazil.I_2000.lynx_intel.generate.clm4_0_50_lynx_intel
** BFAIL ERS.1x1_brazil.I_2000.lynx_intel.compare_hist.clm4_0_49_lynx_intel
? FAIL  ERI_D.1x1_camdenNJ.I_2000_VOC.lynx_intel
    forrtl: error (73): floating divide by zero - rtmmod_mp_rtmini_         303  RtmMod.F90
** RUN   ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel.GC.143620
    forrtl: error (73): floating divide by zero - rtmmod_mp_rtmini_         303  RtmMod.F90
* FAIL  ERS48s_D_P1x12.f10_f10.I_2000_CN.lynx_intel.compare_hist.clm4_0_49_lynx_intel
    new fields in cpl history files
*** FAIL  ERS48s_D_P1x12.f10_f10.I_2000_CN.lynx_intel.tputcomp.clm4_0_49_lynx_intel
   
%%%%%%%% Test reporting END %%%%%%%%


  build-namelist unit tester:

  CESM test lists:

    bluefire/CESM
    lynx/CESM

  bluefire/PTCLM

  test_system testing:

    bluefire batch:
    bluefire interactive:
    lynx/pgi batch:
    lynx/pgi interactive:
    mirage,storm/ifort interactive:

CLM tag used for the baseline comparison tests if applicable:

	clm4_0_49

Changes answers relative to baseline: Yes, runoff is different (similar climate)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all with RTM
    - what platforms/compilers: all
    - nature of change (similar climate) I compsets only have runoff change

   MSS location of control simulations used to validate new climate:

    https://wiki.ucar.edu/display/ccsm/CCSM4+-+Track5+experiments

     /CCSM/csm/b.e11.B1850CN.f19_g16.004
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm4_0_49
Originator(s):  erik (Kluzek Erik 303-497-1326 CGD)
Date: Sun Sep 16 01:05:04 MDT 2012
One-line Summary: Move clm testing to use CESM test framework

Purpose of changes:

Move testing for CLM from CLM stand-alone test_driver.sh to one based on
the CESM testing framework. Create CLM specific tests-lists, user_nl_dir, 
and compset files to handle most CLM testing.

Requirements for tag:

 Move major testing from test_driver.sh to one based on CESM framework. Try
 to get most of it to work.

Test level of tag: standard

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   Update to cesm1_1_beta18b

    scripts updated to: scripts4_120915
    scripts updated to: Machines_120915
    mapping updated to: mapping_120816
    stubs   updated to: stubs1_3_05
    drv     updated to: drvseq1_4_26

List all files eliminated: None

List all files added and what they do:

A  +    models/lnd/clm/test/system/test_system ---- New main testing script for CLM.
            wrapper script to CESM scripts/create_test_suite with behavior
            similar to test_driver.sh

  -b directory [or --baseline]  baseline directory
  -c version   [or --compare]   version to compare to 
                                (generate must already have been run to create these)
  -d                            debug usage -- display tests that will run -- but 
                                do NOT actually execute them
  -g version   [or --generate]  name of this version to generate version as
  -h           [or --help]      displays help
  -i                            interactive usage
  -l list      [or --list]      input test list to use instead of default 
                                (path relative to this directory)
  -o options   [or --options]   options to pass to create_test_suite
  -p compiler  [or --compiler]  compiler to use instead of default
  -s           [or --shortlist] use the short test list

 Typical use:

        cd models/lnd/clm/test/system
	test_system -i -c clm4_0_48 -g clm4_0_49
	test_system    -c clm4_0_48 -g clm4_0_49


>>>>>>>>>>>>> Test lists
A  +    models/lnd/clm/test/system/mirage.interactive
A  +    models/lnd/clm/test/system/lynx.interactive
A  +    models/lnd/clm/test/system/shortlist.interactive
A  +    models/lnd/clm/test/system/bluefire.batch
A  +    models/lnd/clm/test/system/bluefire.interactive
A  +    models/lnd/clm/test/system/lynx.batch
A  +    models/lnd/clm/test/system/shortlist.batch

>>>>>>>>>>>>> compset file and user_nl_* files for testing
A  +    models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
A  +    models/lnd/clm/test/system/user_nl_dirs
A  +    models/lnd/clm/test/system/user_nl_dirs/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/crop
A  +    models/lnd/clm/test/system/user_nl_dirs/crop/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/cn_conly
A  +    models/lnd/clm/test/system/user_nl_dirs/cn_conly/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/voc
A  +    models/lnd/clm/test/system/user_nl_dirs/voc/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/voc/user_nl_cpl
A  +    models/lnd/clm/test/system/user_nl_dirs/glcMEC
A  +    models/lnd/clm/test/system/user_nl_dirs/glcMEC/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/glcMEC/user_nl_cpl

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/bld/listDefaultNamelist.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml - New failed
           tests from new test framework
M       models/lnd/clm/bld/clm.buildnml.csh - Copy drv_flds_in if clm creates it
           and if it doesn't already exist.
M       UpDateChangeLog.pl -- Add some support for xFail. Not fully working.

Machines testing ran on:

  build-namelist unit tester: yes

  test_system testing:

     bluefire batch:             yes
     bluefire interactive:       yes
     bluefire/CESM:              yes
     lynx/pgi batch:             yes
     lynx/pgi interactive:       yes

CLM tag used for the baseline comparison tests if applicable: clm4_0_48

Difference in expected fails from testing:

Index: expectedClmTestFails.xml
===================================================================
--- expectedClmTestFails.xml	(.../trunk_tags/clm4_0_48/models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml)	(revision 40288)
+++ expectedClmTestFails.xml	(.../trunk/models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml)	(revision 40288)
@@ -34,6 +34,10 @@
          <IBM>
             <compare>
                <entry testId="bl9C4" failType="xFail"> cprnc showing diffs are not b4b </entry>
+               <entry testId="sm514" failType="xFail"> problem configuring </entry>
+               <entry testId="bl514" failType="xFail"> problem configuring </entry>
+               <entry testId="sm8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
+               <entry testId="bl8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
             </compare>
          </IBM>
       </bluefire>
@@ -71,14 +75,70 @@
       <mirage>
       </mirage>
       <lynx>
+         <intel>
+              <entry testId="ERS.1x1_brazil.I_2000.lynx_intel"                failType="FAIL">CESM script issue</entry>
+              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel" failType="FAIL">CESM script issue</entry>
+         </intel>
       </lynx>
       <janus>
       </janus>
    </clmBatch>
 
+   <test_system_interactive> 
+      <bluefire>
+         <IBM>
+              <entry testId="ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm"        failType="RUN">CESM script issue</entry>
+              <entry testId="" failType="FAIL">Restart length different</entry>
+              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC"           failType="FAIL">Restart length different</entry>
+              <entry testId="ERS48s_D_P1x64.f45_g37.I_2000_VOC"              failType="RUN">Initial simulation fails</entry>
+              <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
+         </IBM>
+      </bluefire>
+      <lynx>
+         <pgi>
+              <entry testId="SMS_D.1x1_vancouverCAN.I1PT.lynx_pgi"           failType="SFAIL">datm namelist problem for single-point forcing</entry>
+              <entry testId="ERS.1x1_mexicocityMEX.I1PT.lynx_pg"             failType="SFAIL">datm namelist problem for single-point forcing</entry>
+         </pgi>
+      </lynx>
+   </test_system_interactive> 
+
+   <test_system_batch> 
+      <bluefire>
+         <IBM>
+              <entry testId="ERS_D_P96x32.T62_g37.I_2000"             failType="SFAIL">T62 not working</entry>
+              <entry testId="ERS211d_P192x2.f19_g16.I_2000_CNDV_CROP" failType="SFAIL">ignore_ic_date is incompatable with crop!</entry>
+              <entry testId="ERS48s_D_P64x16.ne30_g16.ICN"            failType="SFAIL">CESM script problem didn't see both files</entry>
+              <entry testId="ERS211d.f10_f10.I_2000_VOC_CN"           failType="SFAIL">CESM script problem didn't see both files</entry>
+         </IBM>
+      </bluefire>
+      <lynx>
+      </lynx>
+   <test_system_batch> 
+  
    <cesm> 
       <bluefire>
          <IBM>
+              <entry testId="SBN.1x1_mexicocityMEX.I1PT"     failType="SFAIL">datm namelist issue</entry>
+              <entry testId="SBN.1x1_vancouverCAN.I1PT"      failType="SFAIL">datm namelist issue</entry>
+              <entry testId="SBN.1x1_urbanc_alpha.I1PT"      failType="SFAIL">datm namelist issue</entry>
+              <entry testId="SBN.1x1_asphalt_jungle.ICNTEST" failType="TFAIL">datm namelist issue</entry>
+              <entry testId="SBN.wus12_wus12.I"              failType="SFAIL">missing wus12 datasets</entry>
+              <entry testId="SBN.T42_g16.I1850"              failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.T31_g16.I1850"              failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.I20TR"              failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.1x1_tropicAtl.I20TR"        failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.ne30_g16.I20TR"             failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.ne120_g16.I20TRCN"          failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP26CN"           failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP45CN"           failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP60CN"           failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP85CN"           failType="SFAIL">missing datasets</entry>
+         </IBM>
+      </bluefire>
+   </cesm>
+   <cesm> 
+      <bluefire>
+         <IBM>
             <compare>
             </compare>
             <generate>

Changes answers relative to baseline: No bit-for-bit 

===============================================================
===============================================================
Tag name:  clm4_0_48
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Tue Sep 11 09:14:40 MDT 2012
One-line Summary: bug fixes, xFail to tests and normalize test output for CLM

Purpose of changes:  Bug Fixes.  Add xFail capability to CLM batch,
interactive and namelist tests.  Make test output the same for CLM
tests.

Requirements for tag: Test on bluefire (CESM, int, bat), lynx/pgi (int,bat)
Fix bugs: 1436,1500,1521,1537

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

	1436,1500,1521,1537

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

	1545 - on lynx clm-batch doesn't call our new xFAIL module.

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:  

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by: xFail module Bill, Erik.  Rest of code Erik.

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

List a files added and what they do:

A       models/lnd/clm/bld/unit_testers/xFail
A       models/lnd/clm/bld/unit_testers/xFail/expectedFail.pm
A       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
A       models/lnd/clm/bld/unit_testers/xFail/wrapClmTests.pl

	- xFAIL module that implements expected fail reporting.  wrapClmTests.pl is used
as a wrapper and called by test_driver.sh.  The XML file holds test cases.
Documentation is in POD in expectedFail.pm

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/TBL.sh
	- fix so that mct and pio are built out of the baseline directory
M       models/lnd/clm/bld/configure
	- fix path to mct/.../mpi-serial
M       models/lnd/clm/src/main/getdatetime.F90
	- fix to broadcast correct time stamp
M       models/lnd/clm/test/system/test_driver.sh
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
	- both of these files modified to support xFAIL functionality
M      models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
	- remove wrf mapping entry that isn't in inputdata.  fix entries per bug
	1521
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
	- remove wrf mapping entry that isn't in inputdata.  fix entry per bug 1521

Summary of testing:

Note that tests that used to fail are now being reported as xFAIL.  The file
to look at is models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml.

There are no tests that used to FAIL that now PASS.

  build-namelist unit testing: all pass
  bluefire: all pass
  bluefire interactive testing: all pass
  bluefire/CESM testing: a few throughput failures

	FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 2.945 tput_percent_decr = 21.3

	FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 65.6 tput_percent_decr = 41.9

	FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 1.8039999 tput_percent_decr = 2.07

	FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 2.325 tput_percent_decr = 9.80

	FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 7.0280000 tput_percent_decr = 3.69

  bluefire/PTCLM testing: N/A
  lynx/pgi testing: all pass
  lynx/pgi interactive testing: all pass
  lynx/CESM testing: 
  mirage,storm/ifort interactive testing: all pass

CLM tag used for the baseline comparison tests if applicable: clm4_0_47

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_47
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Thu Aug 23 11:09:27 MDT 2012
One-line Summary: bug fixes

Purpose of changes:

  Fix some bugs and tag early since CAM needs fix of bug 1538 asap.

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

	1534,1533,1507,1444,1538

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/configure
-- Passes FLAGS down to cesm_lib build and for pio (only for CLM testing)

M       models/lnd/clm/tools/mkmapdata/regridbatch.sh
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
-- Fixes as per bug 1507.  Logic clean up for interactive and using mpi 

M       models/lnd/clm/bld/build-namelist
-- Fix as per bug 1538 

M       models/lnd/clm/src/main/controlMod.F90
-- Fix as per bug 1444.  remove call to  "mpi_bcast (glc_topomax," and logic
		controlling it.

M       models/lnd/clm/src/main/ncdio_pio.F90
-- Fix as per bug 1533 and 1534

M       SVN_EXTERNAL_DIRECTORIES
-- Mistake from last tag.  Replaced two repos with correct trunk-tag urls.


Summary of testing:

  build-namelist unit testing:
    All PASS except:
		fails involve us20 and wus12 
		not ok 141 - lnd_in file the same as expected for CN - 94x192 - fixed.  Should pass in next tag.
		not ok 214 - lnd_in file exists - us20 - no tests in place
      not ok 219 - lnd_in file exists - wus12 - no tests in place
      not ok 221 - compare file lnd_in DNE for CN and -res+wus12 - wus12 - no tests in place
      not ok 222 - compare file temp_file.txt DNE for CN and -res+wus12 - wus12 - no tests in place
  bluefire:

		016-019 will be removed and put in CESM/CLM tests
		016 smW51 TSM.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 10
		017 erW51 TER.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -3+-2 cold ..............FAIL! rc= 5
		018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 5
		019 blW51 TBL.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 4
		
		036-039 Failed in the past, see prior versions		 
		036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
		037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
		038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
		039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4

		049-052 Failed in the past, see prior versions		 
		049 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
		050 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
		051 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
		052 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4

  bluefire interactive testing:
	All PASS execpt:
		004 blC74 TBL.sh _sc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		008 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 5
		012 blHS3 TBL.sh 17p_cnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .....FAIL! rc= 5
		016 blCA4 TBL.sh _sc_ds clm_drydep^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ............FAIL! rc= 5
		020 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ....FAIL! rc= 5
		024 blCA8 TBL.sh _sc_ds clm_drydep^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic .....FAIL! rc= 5
		026 blCK4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 5
		028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -10 cold ...........FAIL! rc= 5
		030 blC78 TBL.sh _sc_s clm_std^nl_urb 20021231:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		034 blF93 TBL.sh 17p_sc_do clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 5
		038 blC83 TBL.sh _sc_do clm_std^nl_urb 20020115:3600 5x5_amazon navy -10 arb_ic .................FAIL! rc= 5
		042 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -670 arb_ic .................FAIL! rc= 5
		046 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 5
		050 blHQ4 TBL.sh 17p_cnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold ............FAIL! rc= 5
		054 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 5
		067 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
		Reason:  changed configure, but configure in previous tag not updated.
		These will pass when a new tag is compared to clm4_0_47
  bluefire/CESM testing:
	All PASS except:
		FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_46 
		FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_46 
		FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_46 
		Reason:  the throughput tolerance is likely still not large enough.
  bluefire/PTCLM testing: N/A
  lynx/pgi testing:
  lynx/pgi interactive testing:
		004 blC74 TBL.sh _sc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 5
		010 blCL4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
		014 blCA4 TBL.sh _sc_ds clm_drydep^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ............FAIL! rc= 5
		Reason:  changed configure, but configure in previous tag not updated.
		These will pass when a new tag is compared to clm4_0_47
  lynx/CESM testing:
	N/A
  mirage,storm/ifort interactive testing:
   All PASS except:
		70 004 blC74 TBL.sh _sc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		71 007 blD94 TBL.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 5
		72 011 blCA4 TBL.sh _sc_ds clm_drydep^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ............FAIL! rc= 5
		73 015 blCA8 TBL.sh _sc_ds clm_drydep^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic .....FAIL! rc= 5
		74 019 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 5
		75 023 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 48 cold ............FAIL! rc= 5
		Reason:  changed configure, but configure in previous tag not updated.
		These will pass when a new tag is compared to clm4_0_47

CLM tag used for the baseline comparison tests if applicable: clm4_0_46

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_46
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Wed Aug  8 11:53:44 MDT 2012
One-line Summary: R01 support and update externals

Purpose of changes:

  Add support for r01 rtm.  Add mapping files for ne120 and ne240.  Update all svn
  externals to what is in cesm_alpha16e and modify and update our test system as
  necessary.

Requirements for tag: test on bluefire (CESM, int, bat, build-namelist), lynx/pgi (int,bat), mirage.

Test level of tag: std-test

Bugs fixed (include bugzilla ID):N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets:N/A

Describe any substantial timing or memory changes:N/A

Code reviewed by: self, Erik

List any svn externals directories updated (csm_share, mct, etc.):
  Created the following tags:
	https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_120808
	https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_1_23
	https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_120807 

List all files eliminated:N/A

List all files added and what they do:N/A

List all existing files that have been modified, and describe the changes:

== modifications to update externals ==
 M       models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES
 M       SVN_EXTERNAL_DIRECTORIES

== modifications to get cesm/clm, interactive tests to pass ==
 
 M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
 -- added more output for easier test reading
 M       models/lnd/clm/test/system/TCB.sh
 -- fix some indentation
 M       models/lnd/clm/test/system/TCBtools.sh
 -- add support for gen_domain configure on bluefire
 M       models/lnd/clm/test/system/test_driver.sh
 -- move tests to clmTest directory on /glade/scratch
 M       models/lnd/clm/test/system/CLM_runcmnd.sh
 -- just indent diffs
 M       models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90
 -- handle all files as large files (from ne240 runs)
 M       models/lnd/clm/bld/configure
 -- add dependency for pio piovdf.o: pio_kinds.o
 -- remove -lgptl from cesm Makefile
 
== added r01 maps to namelist_defaults_clm.xml ==
 
 M       clm.buildnml.csh
 M       namelist_files/namelist_defaults_overall.xml
 -- modified namelist_defaults_overall.xml to take wus12 and us20 with rmt off
 -- also added ne240 and default gx1v6 ocean mask
 -- modes to bld/clm.buildnml.csh so that rtm is off for wus12
 -- added path and script name to xml generated by createMapEntry.pl
 -- checked wus12_wus12 run.  Configures and runs.  Error message to look for is:
 
 "Do not run the River Transport Model (RTM)" which is correct since wus12_wus12 is
 a regional grid
 
==  modify scripts and drv to get new r01 to gx1v6 mapping files == 
 M       scripts/ccsm_utils/Case.template/config_grid.xml
 M       scripts/ccsm_utils/Case.template/config_definition.xml
 M       models/drv/bld/namelist_files/namelist_defaults_drv.xml
 -- namelist_defaults_drv.xml - added rof_grid for r01 and gx1v6
 
== modify xml so that 1/10 degree runs work ==
 M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
 M       models/lnd/clm/tools/mkmapgrids/mkmapgrids.namelist
 M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
 M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
 M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml
 M       models/lnd/clm/src/riverroute/RtmMod.F90

Summary of testing:

  build-namelist unit testing:
    All PASS except:
	fails involve us20 and wus12 
      	not ok 141 - lnd_in file the same as expected for CN - 94x192 - fixed.  Should pass in next tag.
      	not ok 214 - lnd_in file exists - us20 - no tests in place
      	not ok 219 - lnd_in file exists - wus12 - no tests in place
      	not ok 221 - compare file lnd_in DNE for CN and -res+wus12 - wus12 - no tests in place
      	not ok 222 - compare file temp_file.txt DNE for CN and -res+wus12 - wus12 - no tests in place
  bluefire:
    All PASS except:
  	018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
      		modified to -3+-3 -- still FAIL
   	036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
   	037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
   	038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
   	039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
      		036-039 needs major work

   	and why they fail...

   	018 - cprnc differences in comparison
   	036 - endrun initiated from  CNBalanceCheckMod.F90
   	037 - __cnbalancecheckmod_NMOD_cbalancecheck
   	038, 039 - fail since 037 didn't run

  bluefire interactive testing:
   All PASS except:
   	bl514 - will fail because tag 45 has a broken gen_domain build
   	bl954 - no ne240 in tag 45
   	bl9C4 - 8 bit difference in file size due to using large file write in mkfileMod.F90
      		These should pass in next tag
  bluefire/CESM testing:
    All PASS except:
	FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERI.T31_g37.IG1850.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_45 

    There is tolerance check built into the tests that may be too tight.  Jay will look at this in the future.
    Throughputs are reported and a sampling looks reasonable:

	CHECK SMS_RLA.f45_f45.I.bluefire_ibm.perf npes=1 tput=16.026 memh=259.677 memr=-0.001 tag=clm4_0_45 baseline
	CHECK SMS_RLA.f45_f45.I.bluefire_ibm.perf npes=1 tput=9.392 memh=259.856 memr=-0.001 tag=
	
	CHECK SMS.f10_f10.IRCP45CN.bluefire_ibm.perf npes=16 tput=200.866 memh=265.074 memr=-0.001 tag=clm4_0_45 baseline
	CHECK SMS.f10_f10.IRCP45CN.bluefire_ibm.perf npes=16 tput=187.881 memh=267.630 memr=-0.001 tag=
	
	CHECK ERS_D.f19_g16.IRCP85CN.bluefire_ibm.perf npes=64 tput=29.741 memh=292.035 memr=-0.001 tag=clm4_0_45 baseline
	CHECK ERS_D.f19_g16.IRCP85CN.bluefire_ibm.perf npes=64 tput=28.368 memh=294.879 memr=-0.001 tag=

  bluefire/PTCLM testing:
  lynx/pgi testing:
  lynx/pgi interactive testing:All PASS
  lynx/CESM testing:All PASS
  mirage,storm/ifort interactive testing:All PASS

CLM tag used for the baseline comparison tests if applicable: CLM4_0_45

Changes answers relative to baseline:No

===============================================================
===============================================================
Tag name:  clm4_0_45
Originator(s):  sacks (Sacks Bill 303-497-1762 CGD)
Date: Fri Jul 20 11:41:14 MDT 2012
One-line Summary: fix virtual columns; new urban mksurfdata_map

Purpose of changes:

GLC-related: Fix places where glc virtual columns were not being treated
correctly (major bug!). Change albice default to 0.6,0.4 for glc_mec
cases, based on suggestion from Bill Lipscomb. Fix dust calculation for
glc_mec.

Other CLM changes: Add an instance of istcrop. Fix landunit-level output
for dov2xy=false.

Tools changes: Update mksurfdata_map to handle new urban raw data format
(use dominant density class, together with lookup tables; currently used
for mksurfdata_map with hires). Minor fixes to mksurfdata_map. Add unit
tests to mksurfdata_map. Change tools build to support addition of unit
tests. Minor fixes to mkscripgrid.ncl, mkunitymap.ncl and mknoocnmap.pl.

Namelist-related: Refer to correct scrip grid files for f09, f19; and
a few fixed mapping files for those resolutions, including clm->rtm mapping
files for those resolutions (changes answers for RTM). (The old scrip grid
files had a displaced pole, which is not what we want for CLM. Note that I
did NOT replace the f05 scrip grid file, because the only alternative I can
find has bad values in the corner arrays -- see bug 1518.)

SPM--Mostly changes to get more tests to pass.  Added 1x1_* mapping files to
inputdata.  Created script that auto-generates XML for new mapping files for
easier inclusion into existing XML files.  Modify build-namelist_test.pl to
pass CSMDATA to build-namelist.  Tests were failing if a user didn't have
CSMDATA env set.  Touched CFGtools__ds to get a CLM interactive test to pass.
Added openMP and debug openMP tests for bluefire interactive tests for 10x15.
--SPM

Requirements for tag: test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage.
Fix bug 1492

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1492 (missing istcrop)
											1515 (nedd mapping files for
											single-point)-SPM

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

    Makefiles reorganized for tools (mksurfdata_map, interpinic, mkmapgrids)

Describe any changes made to the namelist:

    albice changed to 0.6,0.4 for glc_mec cases

List any changes to the defaults for the boundary datasets:

    Use corrected mapping files for CLM->RTM for f09,f19, and for some
    mapping files used to create surface datasets. Use correct scrip grids
    for f09,f19. Add new urban raw data file for hires mksurfdata_map, and
    associated scrip grid file & mapping files.

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

>>>>>>> Split into mkurbanparCommonMod, mkurbanparAvgMod and mkurbanparDomMod
D       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparMod.F90

>>>>>>> Modify build system to make it easier to add unit testers
D       models/lnd/clm/tools/mksurfdata_map/src/Macros.custom
D       models/lnd/clm/tools/interpinic/src/Macros.custom
D       models/lnd/clm/tools/mkmapgrids/src/Macros.custom


List all files added and what they do:

>>>>>>> SPM-- Dump XML of mappings for a specified resolution
A       namelist_files/createMapEntry.pl
>>>>>>> --SPM


>>>>>>> Pull out routines from mkurbanparMod that are common to different
>>>>>>> ways of creating urban parameter data
A       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparCommonMod.F90

>>>>>>> Modules to handle old (area-average) and new (dominant-type) urban
>>>>>>> input files
A       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparAvgMod.F90 - mostly from mkurbanparMod
A       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparDomMod.F90 - new code, to handle new format

>>>>>>> New modules with general-purpose utilities for mksurfdata_map
A       models/lnd/clm/tools/mksurfdata_map/src/mkutilsMod.F90
A       models/lnd/clm/tools/mksurfdata_map/src/mkindexmapMod.F90

>>>>>>> New unit testers for mksurfdata_map
A       models/lnd/clm/tools/mksurfdata_map/unit_testers
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkutilsMod.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkindexmapMod.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/Srcfiles
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mod.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/Filepath
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/Makefile
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/README
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkurbanparDomMod.F90

>>>>>>> Modify build system to make it easier to add unit testers
A       models/lnd/clm/tools/mksurfdata_map/src/Makefile.common
A       models/lnd/clm/tools/mkmapgrids/src/Makefile.common
A       models/lnd/clm/tools/interpinic/src/Makefile.common


List all existing files that have been modified, and describe the changes:

>>>>>>> SPM--
>>>>>>> Pass csmdata down to build-namelist and add logic so CSMDATA is set
>>>>>>> even if user does not
M       unit_testers/build-namelist_test.pl
>>>>>>> Add support for 1x1_* single point mapping files
M       namelist_files/namelist_defaults_clm.xml
M       namelist_files/namelist_defaults_clm_tools.xml
>>>>>>> Add support for a few openMP 10x15 tests, modify test list 
>>>>>>> and remove some old single point tests
M       test/system/tests_pretag_bluefire_nompi
M       test/system/input_tests_master
M       test/system/tests_posttag_nompi_regression

>>>>>>> --SPM

>>>>>>> Fix glc virtual column bugs: change checks of (wt > 0)
>>>>>>> to (wt > 0 .or. ityplun(l)==istice_mec)
M       models/lnd/clm/src/main/histFileMod.F90 ---------- also fix landunit-level fields
              with dov2xy=.false.
M       models/lnd/clm/src/main/subgridAveMod.F90
M       models/lnd/clm/src/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - also change
              'if (itypelun==istice)' to 'if (itypelun==istice .or. itypelun==istice_mec)'
              in setting parameters
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90

>>>>>>> Add istcrop (fix bug 1492)
M       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90

>>>>>>> Remove unnecessary 'use'
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90

>>>>>>> Change albice to 0.6,0.4 for glc_mec cases; add mapping files for
>>>>>>> 3x3min_LandScan2004; use corrected mapping files for 5x5min_ISRIC-WISE_to_0.9x1.25,
>>>>>>> 3x3min_MODIS_to_0.9x1.25 and 5x5min_nomask_to_1.9x2.5, as well as for CLM->RTM
>>>>>>> for f09 and f19
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>> Point to correct files for f09,f19 scrip grids; add new urban raw data file
>>>>>>> for hires mksurfdata_map
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>> Add support for new 3x3min_LandScan2004 grid
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
M       models/lnd/clm/bld/namelist_files/checkmapfiles.ncl
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml

>>>>>>> Changes to mksurfdata_map to support new input urban format
M       models/lnd/clm/tools/mksurfdata_map/src/Srcfiles ------ add new source files
M       models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90 - use new urban interfaces;
              also, substantially increase tolerance for roundoff error fix in
              normalizencheck_landuse (the latter change is unrelated to the new urban
              format; this change makes it so more points have 100% special rather than
              nearly-100% special, which was required to avoid CLM termination due to
              rounding errors in some cases)
M       models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90 - add URBAN_DENSITY_CLASS
              and URBAN_REGION_ID fields
M       models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90 --- public declarations of
              routines that are now needed

>>>>>>> Other, incidental changes to mksurfdata_map
M       models/lnd/clm/tools/mksurfdata_map/src/mkpftMod.F90 ---- fix zero_out
M       models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90 - correct rounding errors
              in topoglcmec_o; change a warning to a fatal error
M       models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90 - add tolerance in
              checking for lat/lon equality

>>>>>>> Add src_grid_dims & dst_grid_dims
M       models/lnd/clm/tools/mkmapdata/mkunitymap.ncl

>>>>>>> Fix direction of ocn->atm mapping file
M       models/lnd/clm/tools/mkmapdata/mknoocnmap.pl
M       models/lnd/clm/tools/README ------------------ also fix typos

>>>>>>> Fix ordering of corners
M       models/lnd/clm/tools/mkmapgrids/mkscripgrid.ncl

>>>>>>> Modify build system to make it easier to add unit testers
M       models/lnd/clm/tools/mksurfdata_map/src/Makefile
M       models/lnd/clm/tools/interpinic/src/Makefile
M       models/lnd/clm/tools/mkmapgrids/src/Makefile
M       models/lnd/clm/test/system/TCBtools.sh ----------- copy correct file

>>>>>>> Document copy of test_mod
M       models/lnd/clm/tools/README.filecopies


Summary of testing:

--SPM.  New tests run after update to clm4_0_44 and after tests modifications. 

==== bluefire build-namelist tests: ====

 * expected fail due to new mapping file
 <  fmapinp_rtm = '/glade/proj3/CESM/cseg/inputdata//lnd/clm2/mappingdata/maps/1.9x2.5/map_1.9x2.5_nomask_to_0.5x0.5_nomask_aave_da_c120522.nc'
 ---
 >  fmapinp_rtm = '/glade/proj3/CESM/cseg/inputdata//lnd/clm2/mappingdata/maps/1.9x2.5/map_1.9x2.5_nomask_to_0.5x0.5_nomask_aave_da_c120221.nc'

 * not ok 6 - lnd_in file the same as expected for standard
 not ok 23 - lnd_in file the same as expected for standard 

This is expected.  Bill states this mod in ChangeLog

 <  albice = 0.60,0.40
     ---
 >  albice = 0.50,0.50

 * not ok 29 - lnd_in file the same as expected for standard
 * not ok 36 - lnd_in file the same as expected for standard
 * not ok 43 - lnd_in file the same as expected for standard
 * not ok 49 - lnd_in file the same as expected for standard
 * not ok 54 - lnd_in file the same as expected for standard
 * not ok 59 - lnd_in file the same as expected for standard
 * not ok 64 - lnd_in file the same as expected for standard
 * not ok 69 - lnd_in file the same as expected for standard
 * not ok 74 - lnd_in file the same as expected for standard
 * not ok 80 - lnd_in file the same as expected for standard
 * not ok 85 - lnd_in file the same as expected for standard
 * not ok 91 - lnd_in file the same as expected for standard
 * not ok 156 - lnd_in file the same as expected for CN
 * not ok 161 - lnd_in file the same as expected for CN

 221 and 222 are for new WRF tests, ignoring for now since tests not complete
 not ok 221 - compare file lnd_in DNE for CN and -res+wus12
     #   in NMLTest/CompFiles.pm at line 103.
     WARNING(NMLTest::CompFiles::comparefiles):: File /glade/scratch/muszala/svn/clm4_0_44/models/lnd/clm/bld/unit_testers/temp_file.txt.CN.-res+wus12
      does NOT exist!

 not ok 222 - compare file temp_file.txt DNE for CN and -res+wus12

WARNING(NMLTest::CompFiles::comparefiles):: File /glade/scratch/muszala/svn/clm4_0_44/models/lnd/clm/bld/unit_testers/temp_file.txt.CN.-res+wus12
   2349  does NOT exist!

     #   Failed test 'compare file temp_file.txt DNE for CN and -res+wus12
     # '
     #   in NMLTest/CompFiles.pm at line 103.

 * not ok 276 - lnd_in file the same as expected for crop 

==== bluefire interactive ====
	now pass due to new mapping files (ignore numbering, use test descriptor)
001 sm514 TSMCFGtools.sh gen_domain CFGtools__ds T31.runoptions .................................PASS
002 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds PASS
003 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dPASS
004 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds PASS

	new tests and test descriptors for 10x15 openMP tests
001 sm953 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__o .......PASS
002 bl953 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__o .......SKIPPED*
003 sm954 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......PASS
004 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......SKIPPED*
005 sm957 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__do ......PASS
006 bl957 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__do ......SKIPPED*
007 sm959 TSMscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................PASS
008 bl959 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................SKIPPED*

--SPM

NOTE: UNLESS OTHERWISE NOTED, THE BELOW TESTS WERE RUN FROM TAG
virtual_column_fix_03_clm4_0_43. This means that they were run before
reverting the scrip grid file & rtm mapping file for f05. However, that
shouldn't change any test results, since as far as I can tell, nothing in
the CLM test suite tests f05 resolution. THESE TESTS SHOULD BE RERUN ON THE
FINAL VERSION OF THE TAG BEFORE MERGING IT TO THE TRUNK.

  bluefire build-namelist unit testing (run with -test): ALL PASS EXCEPT:
not ok 42 - rtm tstep inconsistent
  bluefire mksurfdata_map unit testing: ALL PASS
  bluefire: All PASS except:
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
043 blCn1 TBL.sh _sc_dh clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arb_ic FAIL! rc= 7
049 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except:
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
046 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 7
054 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
069 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
076 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
077 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
078 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
079 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
080 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
081 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except:
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERI.T31_g37.IG1850.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERP.f19_g16.IGRCP60CN.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.compare_hist.clm4_0_43 
  bluefire/PTCLM testing: NOT DONE!
  lynx/pgi testing: All PASS
  lynx/pgi interactive testing: All PASS except:
023 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
024 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
025 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  lynx/CESM testing: All PASS except:
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.C.123047 
BFAIL PST.f19_g16.I.lynx_pgi.compare_hist.clm4_0_43 
FAIL  ERS.f19_g16.IRCP26CN.lynx_gnu.compare_hist.clm4_0_43 
FAIL  ERS.f19_g16.IG1850.lynx_pgi.compare_hist.clm4_0_43 
  mirage,storm/ifort interactive testing: All PASS

  Additional testing: Additional CESM B compset tests to test new RTM
  mapping files.  Ran these from cesm1_1_alpha13e; for most tests, switched
  clm to virtual_column_fix_03_clm4_0_43; for the lynx f05 test, switched
  clm to virtual_column_fix_04_clm4_0_43. Note that the baseline
  comparisons are expected to fail, except for the f05 test.
PASS  ERI.f19_g16.BRCP45WCN.bluefire_ibm 
FAIL  ERI.f19_g16.BRCP45WCN.bluefire_ibm.compare_hist.cesm1_1_alpha13e 
PASS  ERS.f19_g16.B2000CNCHM.bluefire_ibm 
FAIL  ERS.f19_g16.B2000CNCHM.bluefire_ibm.compare_hist.cesm1_1_alpha13e 
PASS  SMS_D.f19_g16.B20TRC5.bluefire_ibm 
FAIL  SMS_D.f19_g16.B20TRC5.bluefire_ibm.compare_hist.cesm1_1_alpha13e 
PASS  ERS.f09_g16.B1850BPRP.bluefire_ibm 
FAIL  ERS.f09_g16.B1850BPRP.bluefire_ibm.compare_hist.cesm1_1_alpha13e
PASS  SMS_D.f19_g16.B20TRC5.lynx_pgi 
FAIL  SMS_D.f19_g16.B20TRC5.lynx_pgi.compare_hist.cesm1_1_alpha13e 
PASS  SMS.f05_g16.B.lynx_pgi 
PASS  SMS.f05_g16.B.lynx_pgi.compare_hist.cesm1_1_alpha13e 


CLM tag used for the baseline comparison tests if applicable: clm4_0_43;
for my additional CESM tests, compared against cesm1_1_alpha13e

Changes answers relative to baseline: YES, for GLC configurations and all
f09 & f19 configurations with RTM

  Baseline failures that are not because of GLC or RTM mapping file changes
  are:

>>> also failed in clm4_0_43; fails with "build-namelist ERROR:: bad input to drv_runlength option"
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
>>> I think the problem here is that the baseline test is trying to build interpinic from the current directory,
>>> rather than from BL_ROOT. This is a problem because of changes in the tools' build.
069 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5


IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: - all GLC configurations (albice change & virtual column bug fix)
                                - all f09 & f19 configurations with RTM (due to change in RTM mapping file)
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      
      For GLC: climate-changing

      For f09/f19 due to RTM mapping file change: Larger than roundoff, but
      expected to have same climate. The new scrip grid files have
      roundoff-level differences globally, plus differ substantially at the
      poles because the old (incorrect) files had poles displaced from
      -90/90.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - compset (and additional configure options):
   - build-namelist options (or complete namelist):
   - MSS location of output:

   EVALUATION OF NEW CLIMATE NOT PERFORMED
	
===============================================================
===============================================================
Tag name:  clm4_0_44
Originator(s):  erik (Erik Kluzek)
Date: Mon Jul  9 11:14:11 MDT 2012
One-line Summary: Add wrf resolutions, update externals to cesm1_1_beta15, all components use build-namelist now

Purpose of changes:

set nsegspc=1 for all ne grids. Update to latest externals and new datm. Latest externals
have ALL components using a build-namelist, and user_nl.$COMP files are created for you.
Env files changed most fields in env_conf moved to env_run and secondly env_build.
env_mach_pes moved to env_configure. env_conf removed. Add ne4, ne16, ne60 datasets. Add
in ne16, ne30, ne120 20th Century datasets.   Change of templates to have
clm.buildnml.csh and clm.buildexe.csh copied to Buildconf. Have -chk_res option to
build-namelist to check for resolution/mask, -note option to include (or not) note on the
bottom of the namelist. Expand build-namelist unit test.

Requirements for tag:
    Requirements: test on bluefire (CESM, int, bat)

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1513 (mksurfdata.pl doesn't work with -crop flag)
                                 1514 (inconsistancy in char variable fexcl)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (PTS_MODE can NOT use a global finidat file)
                                 1017 (PTS_MODE can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1485 (Performance issue with esmf_wrf_timemgr)
                                 1488 (Problem reading restarts@ne30_g16 for some layouts)
                                 1517 (Performance of datm in clm4_0_44 is even worse)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Yes!
   env*.xml files changed as follows:

      env_conf.xml ------> removed!
         Most variables moved to env_run.xml. Some variables moved to env_build.xml
      env_mach_pes.xml --> Renamed to env_configure.xml

     Buildconf directory ---> think of it as readonly!
Describe any changes made to the namelist: Yes!

    user_nl_* files for ALL components created for you. Put, your changes to namelists
    files here.

   New options to clm build-namelist: 
      (all but -chk_res and -note are already exercised when running CESM)
      -chk_res ------- Check resolution and land mask first.
      -clm_startfile - Input file to use to startup for branch or startup cases.
      -co2_type ------ CO2 type
      -inst_string --- Instance string to use for clm_startfile for multi-instance cases.
      -l_ncpl -------- Number of coupling time-steps to take per day.
      -lnd_frac ------ Land fraction file to use (domain file)
      -note ---------- Write out note about build-namelist usage to end of file.

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: Yes!
   Most of the throughput tests fail, and single-point performance looks horrible.
   Although this may be a sporatic problem due to file systems. See bug  1517.

Code reviewed by: self, mvertens, tcraig

List any svn externals directories updated (csm_share, mct, etc.):
    Update to cesm1_1_beta15 external versions (other than timing)
    scripts          to scripts4_120604
    Machines         to Machines_120529
    drv              to drvseq4_1_15
    datm             to datm8_120528
    csm_share        to share3_120509
    mct              to MCT2_8_0_120503
    pio              to pio_1_4_5
    stubs            to cism1_120529
    esmf_wrf_timemgr to esmf_wrf_timemgr_120427
    mapping          to mapping_120525

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Add tools testers for directories that use CESM configure
   A  models/lnd/clm/test/system/TCBCFGtools.sh
   A  models/lnd/clm/test/system/TSMCFGtools.sh
   A  models/lnd/clm/test/system/TBLCFGtools.sh

   A  models/lnd/clm/bld/unit_testers/NMLTest/CompFiles.pm - New test module

   A  models/lnd/clm/test/system/nl_files/mksrfdt_T31_crpglc_2000 - mksurfdata crop test

>>>>>>>>>>>> Split out buildexe/buildnml from template so that editing templates
>>>>>>>>>>>> isn't a nightmare
   A  models/lnd/clm/bld/clm.buildexe.csh
   A  models/lnd/clm/bld/clm.buildnml.csh

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Change tests a bit add a global crop test, get working on mirage
   M  models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression
   M  models/lnd/clm/test/system/CLM_runcmnd.sh --- Allow hostname==vpn* for yong
   M  models/lnd/clm/test/system/test_driver.sh ---- Add TOOLSLIBS TOOLS_CONF_STRING
          if hostname=vpn* use setup for yong
   M  models/lnd/clm/test/system/input_tests_master  Fix test blCK8, add global 
          crop test case for mksurfdata, add cfg-tool tests
   M  models/lnd/clm/test/system/TSM.sh ------------ Add cpl.log file
   M  models/lnd/clm/test/system/TCBtools.sh ------- Set SLIBS needed on generic machines

   M  models/lnd/clm/tools/mkmapdata/mkmapdata.sh ------- Use different version of ESMF
          for regional, don't do RTM maps for regional
   M  models/lnd/clm/tools/interpinic/src/Makefile ------ Use NETCDF4 link
   M  models/lnd/clm/tools/mkmapgrids/src/Makefile ------ Use NETCDF4 link
   M  models/lnd/clm/tools/mksurfdata_map/src/Makefile -- Use NETCDF4 link
   M  models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl - Send crop setting for
          determining LAI file

>>>>>>>>>>>> Add CESM options to build-namelist, add handling of SLIBS for generic
>>>>>>>>>>>> machines. Add new grids: wrf, ne4, ne16, ne60. Set nsegspv=1 for hi-res/ne
>>>>>>>>>>>> grids. Use drv/datm namelist definition/defaults files. Extend
>>>>>>>>>>>> build-namelist unit tester test ALL resolutions/use-cases.
   M  models/lnd/clm/bld/configure ---- Add ability to handle slibs
   M  models/lnd/clm/bld/user_nl_clm -- Format change
   M  models/lnd/clm/bld/config_files/config_definition.xml - slibs, wrf grids
   M  models/lnd/clm/bld/build-namelist ---------- Add a bunch of options needed for CESM
      (all but -chk_res and -note are already exercised when running CESM)
      -chk_res ------- Check resolution and land mask first.
      -clm_startfile - Input file to use to startup for branch or startup cases.
      -co2_type ------ CO2 type
      -inst_string --- Instance string to use for clm_startfile for multi-instance cases.
      -l_ncpl -------- Number of coupling time-steps to take per day.
      -lnd_frac ------ Land fraction file to use (domain file)
      -note ---------- Write out note about build-namelist usage to end of file.
      namelist definition/defaults files also come from drv/bld and datm/bld, get working
      with latest externals
   M  models/lnd/clm/bld/clm.cpl7.template ------- Use new
         clm.buildnml.csh/clm.buildexe.csh scripts which save us from the "\" nightmare
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - namelist_defaults/definition files
           are now split out in datm/drv directories
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ definition files are an array now
   M  models/lnd/clm/bld/unit_testers/build-namelist_test.pl - Test a ton more
         things. Add -compare, -test, -generate options. Test all use_cases and all
         resolutions
   M  models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl ------ Add some more resolutions
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml - Get rid of drv/datm
         namelist items
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl - Get rid of drv/datm
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Add chk_res, note
         and default masks for WRF grids
   M  models/lnd/clm/bld/namelist_files/datm-build-namelist ----- Use datm namelist 
         defaults/definition files.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Set do_rtm for
         regional grids to .false. Add wrf grids: us20, wus12. Add ne4, ne16, ne60 
         files. Add 20th transient PFT for: ne16, ne30, ne60, ne120. Set nsegspc to 1
         for hi-res and ne grids.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Domain files
         for 512x1024, ne4, ne16, ne60, ne240, and us20, wus12.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Set crop
         for LAI and vegtyp files
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml - Remove settings
         already in drv/bld file

>>>>>>>>>>>> Remove write(6 for write to iulog, remove unneeded writes
>>>>>>>>>>>> use shr_pio over seq_pio. Allow -180-180 form.
   M  models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - remove write
   M  models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 - write to iulog
   M  models/lnd/clm/src/biogeochem/CNrestMod.F90 ------ use endrun not write(6
   M  models/lnd/clm/src/main/ndepStreamMod.F90 -------- use shr_pio_getiotype
   M  models/lnd/clm/src/main/pftdynMod.F90 ------------ use endrun not write(6
   M  models/lnd/clm/src/main/histFileMod.F90 ---------- use shr_pio_getiotype
          dimension hist_excl* as max_namlen+2
   M  models/lnd/clm/src/main/ncdio_pio.F90 ------------ use
          shr_pio_getiotype/shr_pio_getiosys
   M  models/lnd/clm/src/main/surfrdMod.F90 ------------ remove write(6 statements
          put write in "if ( masterproc )", if longitudes off by more than 300
          see if -180-180 form works

Summary of testing:

  build-namelist unit testing: All PASS except...
    us20
  bluefire: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
049 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
058 bl514 TBLCFGtools.sh gen_domain CFGtools__ds T31.runoptions .................................FAIL! rc= 4
060 bl754 TBLtools.sh mksurfdata_map tools__s namelist ..........................................FAIL! rc= 5
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
071 bl924 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds .....FAIL! rc= 5
073 bl953 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................FAIL! rc= 7
075 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 5
078 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
079 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
080 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
081 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
082 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
083 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except..
FAIL  ERI.T31_g37.IG1850.bluefire_ibm.tputcomp.clm4_0_43
FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_43
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL ERI.T31_g37.IG1850.bluefire_ibm.generate.clm4_0_44 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
  lynx/pgi testing: All PASS
  lynx/pgi interactive testing: All PASS except...
024 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
025 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
026 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  mirage,storm/ifort interactive testing: All PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_43

Changes answers relative to baseline: No, bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_43
Originator(s):  sacks (Bill Sacks); erik (Erik Kluzek)
Date: Fri Apr  6 11:36:21 MDT 2012
One-line Summary: Add diagnostic fields, modify some existing history fields

Purpose of changes:

Add new diagnostic fields to track snow and ice fluxes. Modify some soil-related fields to
only be averaged over vegetated landunits (from Dave Lawrence). Fix some diagnostic fields
that were incorrect, especially over lakes and urban areas.  Change QICE to spval rather
than 0 over non-ice_mec landunits. Rename QMELT to QSNOMELT. Delete redundant QICEYR. Add
snow balance check from Keith Oleson. Add flexible handling of l2g_scale_type in
subgridAveMod, replacing 'urbanh' c2l_scale_type and adding new functionality. Modify
create_clm_s2x to only reference qflx_glcice in the run loop, not in initialization,
because it is now NaN in initialization. Update scripts and esmf_wrf_timemgr. Changes in
clm.cpl7.template from Tony. Add in unit_testers for build-namelist. Update to nsegspc
branch. New qtr-degree RTM file, updates to mkmapdata.sh so requires -r if -f set,
build-namelist changes to ensure rtm and glc options consistent, and updates of
documentation to the latest cesm1_0_4 release tag. Sets nsegspc in the namelist and for
ne30_g16 sets it to 5. Enhancements to baseline tests.

Requirements for tag: test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage.
Fix perf bug 1485, Fix ne30 issue 1488, Fix history dimension issue 1489

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1485 (Performance issue with esmf_wrf_timemgr)
                                 1488 (partial -- now works with nsegspc=5)
				 1489 (history dimension issue)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (PTS_MODE can NOT use a global finidat file)
                                 1017 (PTS_MODE can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1485 (Performance issue with esmf_wrf_timemgr)
                                 1488 (Problem reading restarts@ne30_g16 for some layouts)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: 

    Modified clm.cpl7.template to no longer copy lnd_in to the case directory

Describe any changes made to the namelist:

    For glacierMEC, use QICE rather than QICEYR for annual history files
    Set nsegspc to 5 for ne30np4 and the default of 20 otherwise

List any changes to the defaults for the boundary datasets:

   Fix qtr-degree RTM mapping file name

Describe any substantial timing or memory changes:

    Fixes bug 1485 (performance issue with esmf_wrf_timemgr)

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines,
     esmf_wrf_timemgr, cprnc

     scripts          to scripts4_120329d
     Machines         to Machines_120406
     esmf_wrf_timemgr to esmf_wrf_timemgr_120327
     cprnc            to cprnc_120405

List all files eliminated: None

List all files added and what they do:

>>>>>>> Enhancements to baseline tests, and post-processor for test results
A       models/lnd/clm/test/system/get_cprnc_diffs.sh - Script used by TBL.sh and
           TBLrst_tools.sh
A       models/lnd/clm/test/system/show_var_diffs.sh -- Post-processor for baseline test
           results

>>>>>>> Add build-namelist unit_tester
A       models/lnd/clm/bld/unit_testers
A       models/lnd/clm/bld/unit_testers/build-namelist_test.pl

List all existing files that have been modified, and describe the changes:

>>>>>>> Use CSMDATA rather than HOME
M       models/lnd/clm/test/system/nl_files/getregional

>>>>>>> Require -res to be set if -f option used
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh

>>>>>>> Fix qtr-degree RTM map, set nsegspc, work on usability
M       models/lnd/clm/bld/user_nl_clm ---- Add notes about setting some things
            with build-namelist options
M       models/lnd/clm/bld/build-namelist - Set nsegspc, make sure glc_grid, glc_smb
            do_rtm, and maxpatch_glcmec aren't set inconsistently between user_nl_clm
            and build-namelist options
M       models/lnd/clm/bld/README --------- Add notes about new unit_testers
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- qtr-degree RTM
           mapping file, and set nsegspc

>>>>>>> Bring in documentation updates from cesm1_0_4_n05_clm4_0_32, notes on setting
>>>>>>> finidat, adding history fields list
M       models/lnd/clm/doc/UsersGuide/special_cases.xml
M       models/lnd/clm/doc/UsersGuide/preface.xml
M       models/lnd/clm/doc/UsersGuide/clm_ug.xml
M       models/lnd/clm/doc/UsersGuide/custom.xml
M       models/lnd/clm/doc/UsersGuide/Makefile

>>>>>>> Remove duplicate line
M       models/lnd/clm/test/system/tests_pretag_bluefire

>>>>>>> Use get_cprnc_diffs.sh; truly print diffs from last file with a failed comparison
>>>>>>> rather than just printing diffs if last comparison failed
M       models/lnd/clm/test/system/TBL.sh
M       models/lnd/clm/test/system/TBLrst_tools.sh

>>>>>>> Use QICE rather than QICEYR for annual history files
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/glacierMEC_pd.xml

>>>>>>> no longer copy lnd_in to the case directory
M       models/lnd/clm/bld/clm.cpl7.template

>>>>>>> Add new variables for tracking snow and ice fluxes
M       models/lnd/clm/src/main/clmtype.F90
M       models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- Also changed init of btran
           and fpsn to spval
M       models/lnd/clm/src/main/histFldsMod.F90 -------------- Add some fields, add
           c2l_scale_type or l2g_scale_type for others; rename QMELT to QSNOMELT; delete
           QICEYR
M       models/lnd/clm/src/main/histFileMod.F90 -------------- Time-constant fields just
           averaged over certain land units; add handling of set_noglcmec for pft-level
           variables. Also, use lon & lat rather than lonatm & latatm
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------ Compute qflx_glcice_frz
M       models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 - Compute qflx_glcice_melt
           and qflx_snofrz_col
M       models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 --- To get proper grid cell
           averages, turn some locals into globals, and add calculation of additional
           fields

>>>>>>> Change QICE to spval rather than 0 over non-ice_mec landunits
M       models/lnd/clm/src/biogeophys/clm_driverInitMod.F90

>>>>>>> Add snow balance check, fix water balance check for glc_dyntopo
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 
M       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 - Add calculation of
           qflx_sl_top_soil, needed for snow balance check
M       models/lnd/clm/src/main/pft2colMod.F90 ------------- Column-level averages of some
           variables needed for snow balance check; also fixed average of qflx_evap_tot
           for lakes

>>>>>>> Only reference qflx_glcice in the run loop, not in initialization
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 - pass init argument
M       models/lnd/clm/src/main/clm_glclnd.F90 ------ in init, qice remains 0

>>>>>>> Flexible handling of l2g_scale_type
M       models/lnd/clm/src/main/clm_varcon.F90 ---- max_lunit parameter
M       models/lnd/clm/src/main/subgridAveMod.F90 - new subroutines for concise handling
           of l2g_scale_type; add checks for l2g_scale_type==spval; remove urbanh
           c2l_scale_type



Summary of testing:

  bluefire: All PASS except:
004 blC91 TBL.sh _sc_dh clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
008 blTZ1 TBL.sh 21p_cncrpsc_dh clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
011 blD91 TBL.sh _persc_dh clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
019 blW51 TBL.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 7
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 7
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 7
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 7
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 7
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
043 blCn1 TBL.sh _sc_dh clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arb_ic FAIL! rc= 7
044 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 2
045 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 2
046 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 2
047 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 2
051 blH#2 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 ne30np4 gx1v6@2000 48 startup .........FAIL! rc= 7
053 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
054 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
055 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
056 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except:
008 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 7
012 blHS3 TBL.sh 17p_cnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .....FAIL! rc= 7
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
034 blF93 TBL.sh 17p_sc_do clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
038 blC83 TBL.sh _sc_do clm_std^nl_urb 20020115:3600 5x5_amazon navy -10 arb_ic .................FAIL! rc= 7
046 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 7
054 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
069 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 7
075 bl9S4 TBLscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 5
076 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
077 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
078 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
079 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
080 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
081 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except:
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_42 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_42 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_42 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_42
  bluefire/PTCLM testing: Not done
  lynx/pgi testing: All PASS except:
004 blC92 TBL.sh _sc_dm clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
007 blD92 TBL.sh _persc_dm clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
011 blF92 TBL.sh 17p_sc_dm clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
015 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 7
019 blL52 TBL.sh _sc_dm clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
  lynx/pgi interactive testing: All PASS except:
008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
023 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
024 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
025 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  lynx/CESM testing: All PASS except:
FAIL  ERS_D.T31_g37.I1850.lynx_pgi.compare_hist.clm4_0_42 
FAIL  ERS_D.T31_g37.I1850.lynx_pgi.compare_hist.clm4_0_42 
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.C.124327 
BFAIL PST.f19_g16.I.lynx_pgi.compare_hist.clm4_0_42 
  mirage,storm/ifort interactive testing: All PASS except:
007 blD94 TBL.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
019 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
023 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 48 cold ............FAIL! rc= 7

CLM tag used for the baseline comparison tests if applicable: clm4_0_42

Changes answers relative to baseline: Just changes some diagnostic fields

    Changes the following default history fields: TSOI, HCSOI, ZWT, WA, WT, H2OSOI,
    SOILLIQ, SOILICE, SOILWATER_10CM, QICE, QSNWCPICE_NODYNLNDUSE, QSNWCPLIQ

    Renames QMELT to QSNOMELT

    Also changes some fields not output by default

    Also changes cpl avghist files due to changes in qflx_glcice in initialization, but
    this doesn't affect the simulation

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change: diagnostic fields only
	
===============================================================
===============================================================
Tag name:  clm4_0_42
Originator(s):  erik (Erik Kluzek)
Date: Tue Mar 27 21:14:59 MDT 2012
One-line Summary: Bring in Francis Vitt's MEGAN changes.

Purpose of changes:

Bring Francis Vitt's MEGAN branch to the trunk. Replace the five VOC 
compounds with the MEGAN model that allows up to 150 compounds to be 
generated and passed to the driver. The mechanism allows the fields to 
be choosen by a driver namelist which CLM responds to.

Requirements for tag: test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1459 (PTSMODE fails)
                                 1480 (Darwin_intel build)
                                 1482 (Problems running 1x1 resolutions for CLM)
                                 1484 (re-configure removes the user_nl_clm)
                                 1486 (bad irrigation maps)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (PTS_MODE can NOT use a global finidat file)
                                 1017 (PTS_MODE can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1485 (Performance issue with esmf_wrf_timemgr)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist:

    Add new -megan option to CLM build-namelist to add a megan namelist to
      the drv_flds_in file.
    Rename -drv_drydep option to -drydep.

    New namelist items for MEGAN: megan_factors_file, megan_specifier, and
       megan_mapped_emisfctrs go into the megan_emis_nl namelist in drv_flds_in

    History fields removed: BIOGENCO, ISOPRENE (replaced by MEG_isoprene), 
                            MONOTERP, ORVOC, ORVOC, OVOC

    Units of VOCFLXT changed from uGC/M2/H to moles/m2/sec

    New history fields:

+ GAMMAC               = gamma C for VOC calc (0-1)
+ MEG_2met_2s          = MEGAN flux (kg/m2/sec)
+ MEG_2met_nonatriene  = MEGAN flux (kg/m2/sec)
+ MEG_2met_s           = MEGAN flux (kg/m2/sec)
+ MEG_2met_styrene     = MEGAN flux (kg/m2/sec)
+ MEG_3met_3DCTT       = MEGAN flux (kg/m2/sec)
+ MEG_Ehsalate         = MEGAN flux (kg/m2/sec)
+ MEG_MBO_2m3e2ol      = MEGAN flux (kg/m2/sec)
+ MEG_MBO_3m2e1ol      = MEGAN flux (kg/m2/sec)
+ MEG_MBO_3m3e1ol      = MEGAN flux (kg/m2/sec)
+ MEG_Napthalene       = MEGAN flux (kg/m2/sec)
+ MEG_PPPP_2s          = MEGAN flux (kg/m2/sec)
+ MEG_acetaldehyde     = MEGAN flux (kg/m2/sec)
+ MEG_acetic_acid      = MEGAN flux (kg/m2/sec)
+ MEG_acetone          = MEGAN flux (kg/m2/sec)
+ MEG_acoradiene       = MEGAN flux (kg/m2/sec)
+ MEG_ammonia          = MEGAN flux (kg/m2/sec)
+ MEG_anisole          = MEGAN flux (kg/m2/sec)
+ MEG_aromadendrene    = MEGAN flux (kg/m2/sec)
+ MEG_benzaldehyde     = MEGAN flux (kg/m2/sec)
+ MEG_benzyl-acetate   = MEGAN flux (kg/m2/sec)
+ MEG_benzyl-alcohol   = MEGAN flux (kg/m2/sec)
+ MEG_bergamotene_a    = MEGAN flux (kg/m2/sec)
+ MEG_bergamotene_b    = MEGAN flux (kg/m2/sec)
+ MEG_bisabolene_a     = MEGAN flux (kg/m2/sec)
+ MEG_bisabolene_b     = MEGAN flux (kg/m2/sec)
+ MEG_bornene          = MEGAN flux (kg/m2/sec)
+ MEG_borneol          = MEGAN flux (kg/m2/sec)
+ MEG_bornyl_ACT       = MEGAN flux (kg/m2/sec)
+ MEG_bourbonene_b     = MEGAN flux (kg/m2/sec)
+ MEG_butanone_2       = MEGAN flux (kg/m2/sec)
+ MEG_butene           = MEGAN flux (kg/m2/sec)
+ MEG_cadinene_d       = MEGAN flux (kg/m2/sec)
+ MEG_cadinene_g       = MEGAN flux (kg/m2/sec)
+ MEG_camphene         = MEGAN flux (kg/m2/sec)
+ MEG_camphor          = MEGAN flux (kg/m2/sec)
+ MEG_carbon_2s        = MEGAN flux (kg/m2/sec)
+ MEG_carbon_monoxide  = MEGAN flux (kg/m2/sec)
+ MEG_carbonyl_s       = MEGAN flux (kg/m2/sec)
+ MEG_carene_3         = MEGAN flux (kg/m2/sec)
+ MEG_caryophyllene_b  = MEGAN flux (kg/m2/sec)
+ MEG_cedrene_a        = MEGAN flux (kg/m2/sec)
+ MEG_cedrol           = MEGAN flux (kg/m2/sec)
+ MEG_cineole_1_8      = MEGAN flux (kg/m2/sec)
+ MEG_copaene_a        = MEGAN flux (kg/m2/sec)
+ MEG_cubebene_a       = MEGAN flux (kg/m2/sec)
+ MEG_cubebene_b       = MEGAN flux (kg/m2/sec)
+ MEG_cymene_o         = MEGAN flux (kg/m2/sec)
+ MEG_cymene_p         = MEGAN flux (kg/m2/sec)
+ MEG_decanal          = MEGAN flux (kg/m2/sec)
+ MEG_diallyl_2s       = MEGAN flux (kg/m2/sec)
+ MEG_dodecene_1       = MEGAN flux (kg/m2/sec)
+ MEG_elemene_b        = MEGAN flux (kg/m2/sec)
+ MEG_estragole        = MEGAN flux (kg/m2/sec)
+ MEG_ethane           = MEGAN flux (kg/m2/sec)
+ MEG_ethanol          = MEGAN flux (kg/m2/sec)
+ MEG_ethene           = MEGAN flux (kg/m2/sec)
+ MEG_farnescene_a     = MEGAN flux (kg/m2/sec)
+ MEG_farnescene_b     = MEGAN flux (kg/m2/sec)
+ MEG_fenchene_a       = MEGAN flux (kg/m2/sec)
+ MEG_fenchone         = MEGAN flux (kg/m2/sec)
+ MEG_formaldehyde     = MEGAN flux (kg/m2/sec)
+ MEG_formic_acid      = MEGAN flux (kg/m2/sec)
+ MEG_geranyl_acetone  = MEGAN flux (kg/m2/sec)
+ MEG_germacrene_B     = MEGAN flux (kg/m2/sec)
+ MEG_germacrene_D     = MEGAN flux (kg/m2/sec)
+ MEG_gurjunene_b      = MEGAN flux (kg/m2/sec)
+ MEG_heptanal         = MEGAN flux (kg/m2/sec)
+ MEG_heptane          = MEGAN flux (kg/m2/sec)
+ MEG_heptanone        = MEGAN flux (kg/m2/sec)
+ MEG_hexanal          = MEGAN flux (kg/m2/sec)
+ MEG_hexane           = MEGAN flux (kg/m2/sec)
+ MEG_hexanol_1        = MEGAN flux (kg/m2/sec)
+ MEG_hexenal_c3       = MEGAN flux (kg/m2/sec)
+ MEG_hexenal_t2       = MEGAN flux (kg/m2/sec)
+ MEG_hexenol_c3       = MEGAN flux (kg/m2/sec)
+ MEG_hexenyl_ACT_c3   = MEGAN flux (kg/m2/sec)
+ MEG_homosalate       = MEGAN flux (kg/m2/sec)
+ MEG_humulene_a       = MEGAN flux (kg/m2/sec)
+ MEG_humulene_g       = MEGAN flux (kg/m2/sec)
+ MEG_hydrogen_cyanide = MEGAN flux (kg/m2/sec)
+ MEG_hydrogen_s       = MEGAN flux (kg/m2/sec)
+ MEG_indole           = MEGAN flux (kg/m2/sec)
+ MEG_ionone_b         = MEGAN flux (kg/m2/sec)
+ MEG_ipsenol          = MEGAN flux (kg/m2/sec)
+ MEG_isolongifolene   = MEGAN flux (kg/m2/sec)
+ MEG_isoprene         = MEGAN flux (kg/m2/sec)
+ MEG_jasmone          = MEGAN flux (kg/m2/sec)
+ MEG_limonene         = MEGAN flux (kg/m2/sec)
+ MEG_linalool         = MEGAN flux (kg/m2/sec)
+ MEG_linalool_OXD_c   = MEGAN flux (kg/m2/sec)
+ MEG_linalool_OXD_t   = MEGAN flux (kg/m2/sec)
+ MEG_longifolene      = MEGAN flux (kg/m2/sec)
+ MEG_longipinene      = MEGAN flux (kg/m2/sec)
+ MEG_met_benzoate     = MEGAN flux (kg/m2/sec)
+ MEG_met_bromide      = MEGAN flux (kg/m2/sec)
+ MEG_met_chloride     = MEGAN flux (kg/m2/sec)
+ MEG_met_heptenone    = MEGAN flux (kg/m2/sec)
+ MEG_met_iodide       = MEGAN flux (kg/m2/sec)
+ MEG_met_jasmonate    = MEGAN flux (kg/m2/sec)
+ MEG_met_mercaptan    = MEGAN flux (kg/m2/sec)
+ MEG_met_propenyl_2s  = MEGAN flux (kg/m2/sec)
+ MEG_met_salicylate   = MEGAN flux (kg/m2/sec)
+ MEG_meta-cymenene    = MEGAN flux (kg/m2/sec)
+ MEG_methane          = MEGAN flux (kg/m2/sec)
+ MEG_methanol         = MEGAN flux (kg/m2/sec)
+ MEG_muurolene_a      = MEGAN flux (kg/m2/sec)
+ MEG_muurolene_g      = MEGAN flux (kg/m2/sec)
+ MEG_myrcene          = MEGAN flux (kg/m2/sec)
+ MEG_myrtenal         = MEGAN flux (kg/m2/sec)
+ MEG_nerolidol_c      = MEGAN flux (kg/m2/sec)
+ MEG_nerolidol_t      = MEGAN flux (kg/m2/sec)
+ MEG_neryl_acetone    = MEGAN flux (kg/m2/sec)
+ MEG_nitric_OXD       = MEGAN flux (kg/m2/sec)
+ MEG_nitrous_OXD      = MEGAN flux (kg/m2/sec)
+ MEG_nonanal          = MEGAN flux (kg/m2/sec)
+ MEG_nonenal          = MEGAN flux (kg/m2/sec)
+ MEG_ocimene_al       = MEGAN flux (kg/m2/sec)
+ MEG_ocimene_c_b      = MEGAN flux (kg/m2/sec)
+ MEG_ocimene_t_b      = MEGAN flux (kg/m2/sec)
+ MEG_octanal          = MEGAN flux (kg/m2/sec)
+ MEG_octanol          = MEGAN flux (kg/m2/sec)
+ MEG_octenol_1e3ol    = MEGAN flux (kg/m2/sec)
+ MEG_oxopentanal      = MEGAN flux (kg/m2/sec)
+ MEG_pentanal         = MEGAN flux (kg/m2/sec)
+ MEG_pentane          = MEGAN flux (kg/m2/sec)
+ MEG_phellandrene_a   = MEGAN flux (kg/m2/sec)
+ MEG_phellandrene_b   = MEGAN flux (kg/m2/sec)
+ MEG_phenyl_CCO       = MEGAN flux (kg/m2/sec)
+ MEG_pinene_a         = MEGAN flux (kg/m2/sec)
+ MEG_pinene_b         = MEGAN flux (kg/m2/sec)
+ MEG_piperitone       = MEGAN flux (kg/m2/sec)
+ MEG_propane          = MEGAN flux (kg/m2/sec)
+ MEG_propene          = MEGAN flux (kg/m2/sec)
+ MEG_pyruvic_acid     = MEGAN flux (kg/m2/sec)
+ MEG_sabinene         = MEGAN flux (kg/m2/sec)
+ MEG_selinene_b       = MEGAN flux (kg/m2/sec)
+ MEG_selinene_d       = MEGAN flux (kg/m2/sec)
+ MEG_terpinene_a      = MEGAN flux (kg/m2/sec)
+ MEG_terpinene_g      = MEGAN flux (kg/m2/sec)
+ MEG_terpineol_4      = MEGAN flux (kg/m2/sec)
+ MEG_terpineol_a      = MEGAN flux (kg/m2/sec)
+ MEG_terpinolene      = MEGAN flux (kg/m2/sec)
+ MEG_terpinyl_ACT_a   = MEGAN flux (kg/m2/sec)
+ MEG_tetradecene_1    = MEGAN flux (kg/m2/sec)
+ MEG_thujene_a        = MEGAN flux (kg/m2/sec)
+ MEG_thujone_a        = MEGAN flux (kg/m2/sec)
+ MEG_thujone_b        = MEGAN flux (kg/m2/sec)
+ MEG_toluene          = MEGAN flux (kg/m2/sec)
+ MEG_tricyclene       = MEGAN flux (kg/m2/sec)
+ MEG_verbenene        = MEGAN flux (kg/m2/sec)

List any changes to the defaults for the boundary datasets:
   Correct fpftdyn historical f05 dataset, and add rcp datasets
   Fix irrig map for f19 and f10

Describe any substantial timing or memory changes: None
   Although bug 1485 is NOT fixed! (4X performance hit due to updated esmf_wrf_timemgr!)

Code reviewed by: self,fvitt

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines,
     drv, pio, cprnc, and cism

     scripts      to scripts4_120323
     Machines     to Machines_120323a
     drv          to drvseq4_1_04
     pio          to pio_1_4_2
     cprnc        to cprnc_120322
     cism         to cism1_120322

List all files eliminated: None

List all files added and what they do:

A       models/lnd/clm/bld/namelist_files/history_fields.xsl - Style sheet to view history_fields XML file
A  +    models/lnd/clm/src/biogeochem/MEGANFactorsMod.F90 ---- MEGAN factors file

List all existing files that have been modified, and describe the changes:

>>>>>>>> Remove PTS-MODE restart tests
M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
M       models/lnd/clm/test/system/tests_posttag_yong
MM      models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/test_driver.sh ----- Correct machine name for lynx
M       models/lnd/clm/test/system/nl_files/nl_voc ---- Add megan namelist
M       models/lnd/clm/test/system/nl_files/clm_drydep  Add -megan option rename drydep
to drydep
M       models/lnd/clm/test/system/input_tests_master - Tests with VOC must use 
               clm_drydep, make CA8 tests use drydep

M       models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES - update cprnc

M       models/lnd/clm/bld/configure --------- Change top level model from cesm to driver
M       models/lnd/clm/bld/build-namelist ---- Add -megan option/namelist, rename
           -drv_drydep to drydep, add checking for megan namelist items
M       models/lnd/clm/bld/clm.cpl7.template - Fix multi-instance issues, and
           don't overwrite user_nl_clm file if it already exists

M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ----- Update driver
           namelist items, add megan namelist, more fields to drydep_list, list
           megan compounds
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- Add commented
           out finidat file for f05, update f05 fpftdyn and add fpftdyn for f05 rcp's
           update irrig 10x15 mapping file
M       models/lnd/clm/bld/namelist_files/namelist_defaults_drydep.xml - Add defaults
           for megan namelist

M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - Change VOC fields to megan
           fields
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 ------ Change VOC fields to megan
           fields
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 ---- Change VOC fiels to megan
M       models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 - Use Megan_factors_mod,
           add VOCEmission_init, megan namelist determines the fields that will be
           output rather than the 5 VOC fields
MM      models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - More fields that can be
           "mapped": 'SOAM', 'SOAI', 'SOAT', 'SOAB', 'SOAX'
M       models/lnd/clm/src/main/clm_varpar.F90 ----------- Remove nvoc
M       models/lnd/clm/src/main/clm_initializeMod.F90 ---- Add call to VOCEmission_init
M       models/lnd/clm/src/main/clmtypeInitMod.F90 ------- Remove averaged voc fields
M       models/lnd/clm/src/main/clm_atmlnd.F90 ----------- Remove voc add megan fields
M       models/lnd/clm/src/main/findHistFields.pl -------- Add ability to handle new
           megan fields
M       models/lnd/clm/src/main/clm_driver.F90 ----------- Initialize cisun/cisha
           to -999. each time-step for VOCEmission
M       models/lnd/clm/src/main/ncdio_pio.F90 ------------ Changes from John Truesdale
           so that PTS_MODE will work
M       models/lnd/clm/src/main/clmtype.F90 -------------- VOC fields have extra
           dimension remove averaged field
M       models/lnd/clm/src/main/histFldsMod.F90 ---------- Remove specific VOC fields
           add MEG_<compound_name> fields

Summary of testing:

  bluefire: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 7
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 7
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
044 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 2
045 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 2
046 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 2
047 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 2
  bluefire interactive testing: All PASS except
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
034 blF93 TBL.sh 17p_sc_do clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
050 blHQ4 TBL.sh 17p_cnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold ............FAIL! rc= 7
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
073 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 6
076 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
077 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
078 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
079 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
080 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
081 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except..
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL SMS.1x1_numaIA.ICN.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL ERP.1x1_mexicocityMEX.I.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_41 
  bluefire/PTCLM testing: All FAIL
  lynx interactive testing: ALL PASS up to...
023 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
  lynx/CESM testing: All PASS except..
FAIL  ERS_D.T31_g37.I1850.lynx_pgi.generate.clm4_0_42 
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.GC.121827 
BFAIL PST.f19_g16.I.lynx_pgi.compare_hist.clm4_0_41 
BFAIL ERS.1x1_vancouverCAN.I.lynx_pgi.compare_hist.clm4_0_41
  mirage,storm/ifort interactive testing: All PASS!
  yong/darwin/ifort interactive testing: All PASS up to...
005 smCL4 TSM.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_41

Changes answers relative to baseline: bit-for-bit (except cases with MEGAN or VOC)

===============================================================
===============================================================
Tag name:  clm4_0_41
Originator(s):  erik (Erik Kluzek)
Date: Tue Mar 13 23:43:45 MDT 2012
One-line Summary: Bring rmfmesh/rtmmap branches to trunk

Purpose of changes:

Get working with latest scripts and have clm template call build-namelist directly.  Move
rmfmesh/rtmmap branch to trunk. Remove CASA completely. Start using RTM mapping files.
Allow bigger tolerance for mksurfdata_map frac up to 1.e-5 so can work for f4x5. New
half-degree mapping files. Remove code to calculate RTM mapping. Remove ability to set
maxpatch_pft to something different than numpft in CLM configure. Remove
-ad_spinup/-exit_spinup options in configure make generic -spinup option with a few
allowed values (similar to the clm45sci version of configure). New 1850 fsurdat dataset
for ne240np4. Update externals to the latest, get test_driver working.

Requirements for tag: test on bluefire (CESM,int,bat), lynx/pgi (CESM), mirage,
template calls build-namelist. Fix 1477, 1476, 1468, 1467

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1477 (Bad f05 datasets)
                                 1476 (Problem with stand-alone build on bluefire)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1467 (Remove runinit_ibm.csh script)
                                 1449 (Remove fine-mesh)
                                 1448 (Remove CASA)
                                 1432 (Several resolutions fail for new mksurfdata_map)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1459 (PTSMODE fails)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1480 (Darwin_intel build)
                                 1482 (Problems running 1x1 resolutions for CLM)
                                 1485 (Performance issue with esmf_wrf_timemgr)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
    Remove CASA option, don't allow maxpft to be set.
    CESM scripts/Machines updated.

Describe any changes made to the namelist:

  BuildConf/clm.buildnml.csh now becomes a script that simply calls the clm 
  build-namelist script to build your namelist. This means you effectively treat it
  as a READ-only script that you don't put changes into! Instead you use 
  the "user_nl_clm" file to put your custom changes to the namelist into.
  The use of user_nl_clm is documented in the CLM User's Guide at...

  http://www.cesm.ucar.edu/models/cesm1.0/clm/models/lnd/clm/doc/UsersGuide/x1423.html#config_time_nml

  Use preview_namelists to see full namelists that will be created.

List any changes to the defaults for the boundary datasets: Activate RTM mapping files
     New 1840 ne240 fsurdat file, replace all f05 mapping files, replace all f05 mapping
     files, and f05, f09, and f19 SCRIP grid files

Describe any substantial timing or memory changes: Yes!
   Much less global memory needed now! Only one temporary global integer array
   used.

   4X performance hit due to updated esmf_wrf_timemgr! (see bug 1485)

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines,
          drv, csm_share, esmf_wrf_timemgr, datm

     scripts          to datm8_120219
     Machines         to Machines_120309
     drv              to drvseq4_1_02
     csm_share        to share3_120308
     esmf_wrf_timemgr to esmf_wrf_timemgr_120218
     datm             to datm8_120219

List all files eliminated:

>>>>>>> Eliminate stand-alone intrepid/kraken testing files, CASA, fine-mesh, 
>>>>>>> and RTM mapping calc. Elimanate interpinic run script, too hard to support.
D       models/lnd/clm/test/system/tests_posttag_intrepid
D       models/lnd/clm/test/system/tests_posttag_intrepid_nompi
D       models/lnd/clm/test/system/tests_posttag_kraken
D       models/lnd/clm/tools/interpinic/runinit_ibm.csh
D       models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90
D       models/lnd/clm/src/biogeochem/CASAMod.F90
D       models/lnd/clm/src/main/CASAiniTimeVarMod.F90
D       models/lnd/clm/src/main/downscaleMod.F90
D       models/lnd/clm/src/riverroute/RtmMapMod.F90

List all files added and what they do: Add config defaults files for supported
     single point datasets, add empty user_nl_clm file

A  +    models/lnd/clm/bld/user_nl_clm
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_smallvilleIA.xml
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_mexicocityMEX.xml
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_numaIA.xml
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_vancouverCAN.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Changes to config_file for changes to configure
>>>>>>>>>>>>> eliminate use of maxpft, ad_spinup and exit_spinup use spinup option
M       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
M       models/lnd/clm/test/system/config_files/17p_cndvsc_m
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_m
M       models/lnd/clm/test/system/config_files/17p_cndvsc_o
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_o
M       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
M       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_s
M       models/lnd/clm/test/system/config_files/17p_cndvsc_s
M       models/lnd/clm/test/system/config_files/17p_sc_dh
M       models/lnd/clm/test/system/config_files/17p_sc_dm
M       models/lnd/clm/test/system/config_files/17p_sc_do
M       models/lnd/clm/test/system/config_files/17p_sc_ds
M       models/lnd/clm/test/system/config_files/17p_cnsc_h
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_h
M       models/lnd/clm/test/system/config_files/17p_cnsc_dh
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_dh
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_m
M       models/lnd/clm/test/system/config_files/17p_cnsc_m
M       models/lnd/clm/test/system/config_files/17p_cnsc_o
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_o
M       models/lnd/clm/test/system/config_files/17p_cnsc_dm
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_dm
M       models/lnd/clm/test/system/config_files/17p_cnsc_do
M       models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_do
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_s
M       models/lnd/clm/test/system/config_files/17p_sc_h
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_ds
M       models/lnd/clm/test/system/config_files/17p_cnsc_ds
M       models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
M       models/lnd/clm/test/system/config_files/17p_cnc13sc_do
M       models/lnd/clm/test/system/config_files/17p_sc_m
M       models/lnd/clm/test/system/config_files/17p_sc_o
M       models/lnd/clm/test/system/config_files/17p_cnnfsc_dh
M       models/lnd/clm/test/system/config_files/17p_cnnfsc_dm
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dh
M       models/lnd/clm/test/system/config_files/17p_cndvsc_dh
M       models/lnd/clm/test/system/config_files/17p_cnnfsc_do
M       models/lnd/clm/test/system/config_files/17p_cndvsc_dm
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dm
M       models/lnd/clm/test/system/config_files/17p_cndvsc_do
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_do
M       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_ds
M       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
M       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
M       models/lnd/clm/test/system/config_files/README
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_h
M       models/lnd/clm/test/system/config_files/17p_cndvsc_h

>>>>>>>>>>>>> Get working with latest scripts, eliminate intrepid.
M       models/lnd/clm/test/system/TCB.sh --------- Send -comp to configure
M       models/lnd/clm/test/system/test_driver.sh - Eliminate intrepid, get working
           with latest CESM scripts/Machines, update env settings to Machines
M       models/lnd/clm/test/system/CLM_runcmnd.sh - Eliminate intrepid
M       models/lnd/clm/test/system/tests_pretag_bluefire - Correct test name

>>>>>>>>>>>>> Eliminate CASA
M       models/lnd/clm/tools/interpinic/src/interpinic.F90
M       models/lnd/clm/tools/mksurfdata_map/src/clm_varctl.F90

>>>>>>>>>>>>> Eliminate CASA, and maxpft. Read site specific config_defaults
>>>>>>>>>>>>> Change spinup option, get working with latest scripts.
M       models/lnd/clm/bld/configure --------- Use clm45sci API (use -spinup in
             place of ad_spinup/exit_spinup), read site specific config_defaults
             file when sitespf_pt option is used. Eliminate CASA, and maxpft option.
             Get configure working with latest CESM scripts. Add mct/pio subdirectory
             for SMP=on/off so will build on bluefire. Add -comp option required
             for new CESM scripts (for stand-alone test).
M       models/lnd/clm/bld/build-namelist ---- Remove faerdep, use spinup from 
             configure rather than ad/exit_spinup, remove substition of CSMDATA
             in filenames.
M       models/lnd/clm/bld/clm.cpl7.template - Use sitespf_pt for regional case
             when CLM_USRDAT NOT used and don't use clm_root in configure.
M       models/lnd/clm/bld/config_files/config_sys_defaults.xml - Add comp settings
             and change mach settings to NOT include compiler. Remove: dec_osf,
              es, irix, solaris, super-ux, unicosmp as no longer tested on
M       models/lnd/clm/bld/config_files/config_definition.xml --- Remove CASA option
              mxpft can only be 17 or 21. Add comp, remove ad_spinup/exit_spinup
              for spinup option. Change description of sitespf_pt option.

>>>>>>>>>>>>> Eliminate CASA, move ad/exit_spinup to spinup, add 1850 ne240 fsurdat
>>>>>>>>>>>>> Activate all RTM maps, replace all f05 maps.
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml - Rm fget_archdev
              only allow R05 for rtm_res
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - ad_spinup
              to spinup
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
              add 1840 ne240 fsurdat, remove null setting of findat for maxpft=4
              activate RTM maps, replace all 0.47x0.63 mapping files
M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Use
              standard shared SCRIP-grid files for: f05, f09, f19 resolutions
M       models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ------- Change
              ad/exit_spinup to spinup
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Remove
              fatmgrid, flndtopo, fatmtopo, and fatmlndfrc files
M       models/lnd/clm/doc/IMPORTANT_NOTES - Remove CASA, fine-mesh, and fget_archdev

>>>>>>>>>>>>> Eliminate CASA, fine-mesh and atm data, change llatlon for ldomain
>>>>>>>>>>>>> Require RTM map files to be read. Require fatmlndfrc files to be
>>>>>>>>>>>>> in CESM domain file format. Require maxpft=numpft+1. Fix a pnetcdf issue.
M       models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Remove CASA use ldomain
              in place of llatlon
M       models/lnd/clm/src/biogeochem/CNDVMod.F90 ------ ldomain replaces llatlon
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90  --- Get rid of fine-mesh
              downscaling, use ldomain in place of llatlon remove atm, lnd versions
              of everything (adomain, adecomp, get_proc_bounds_atm, begg_a/l, atm_sx for example. 
M       models/lnd/clm/src/main/organicFileMod.F90 ---- llatlon becomes ldomain
M       models/lnd/clm/src/main/decompInitMod.F90 ----- Remove decompInit_atm, acid
              remove atm grid stuff for: decompInit_lnd and decompInit_glcp
M       models/lnd/clm/src/main/clm_initializeMod.F90 - Remove downscaling and atm/lnd
              grid stuff as well as CASA.
M       models/lnd/clm/src/main/clm_glclnd.F90 -------- Remove clm_maps2x and clm_mapx2s
              and atm_s2x and atm_x2s 
M       models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Remove CASA stuff
M       models/lnd/clm/src/main/ndepStreamMod.F90 ----- Replace llatlon with ldomain
M       models/lnd/clm/src/main/histFileMod.F90 ------- Remove atm grid stuff such
              as gratm, namea grids, remove CASA
M       models/lnd/clm/src/main/clm_atmlnd.F90 -------- Remove downscaling/upscaling
              init_adiag_type, clm_downscale_a2l and data: atm_a2l, atm_l2a, adiag_arain
M       models/lnd/clm/src/main/restFileMod.F90 ------- Remove CASA
M       models/lnd/clm/src/main/controlMod.F90 -------- Remove fatmgrid, CASA, fatmtopo
              add write about flndtopo (still needed for glc_nec)
M       models/lnd/clm/src/main/initSurfAlbMod.F90 ---- Remove CASA
M       models/lnd/clm/src/main/clm_varctl.F90 -------- Remove downscale and CASA
M       models/lnd/clm/src/main/clm_driver.F90 -------- Remove CASA
M       models/lnd/clm/src/main/initGridCellsMod.F90 -- Remove setting of _a domain
               info, gindex_a, longdeg_a, latdeg_a, lon_a, lat_a
M       models/lnd/clm/src/main/ncdio_pio.F90 --------- Remove use of gratm, set
               data=' ' needed for pnetcdf
M       models/lnd/clm/src/main/surfrdMod.F90 --------- Remove surfrd_get_latlon, 
               surfrd_get_frac, surfrd_wtxy_veg_rank, surfrd_mkrank, add 
               surfrd_get_globmask in place of surfrd_get_latlon, get rid of
               ability to read in CLM frac datasets and only read in CESM domain file
               format. Abort if allocate_all_vegpfts is NOT true.
M       models/lnd/clm/src/main/domainMod.F90 --------- Remove latlon_type, 
               nara, and ntop add isgrid2d, adomain, alatlon, llatlon, gatm, amask, pftm
               methods: domain_setptrs, latlon_init, latlon_check, latlon_clean,
                        latlon_setsame
M       models/lnd/clm/src/main/decompMod.F90 --------- Remove get_proc_global_atm, 
               get_proc_bounds_atm, and atmosphere decomposition data
M       models/lnd/clm/src/main/clmtype.F90 ----------- Remove CASA, gratm
M       models/lnd/clm/src/main/histFldsMod.F90 ------- Remove use of atm_a2l,
-              adiag_arain, adiag_asnow, adiag_aflux, adiag_lflux, downscale
               remove CASA and downscale if's
M       models/lnd/clm/src/main/mkarbinitMod.F90 ------ Remove CASA
M       models/lnd/clm/src/riverroute/RtmMod.F90 ------ Remove some global RTM
               data.  Replace call's to endrun to shr_sys_abort as intial
               step of the move to having RTM on it's own component.
               Add rtm_celledge. 
M       models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ---- llatlon to ldomain
M       models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 - formatting change
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ---- Remove CASA
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 ------ Remove downscaling

Summary of testing:

  bluefire: TBL tests fail because of use of RTM mapping files and NetCDF issue and
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
044 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 2
045 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 2
046 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 2
  bluefire interactive testing: All PASS except, TBL tests fail because of NetCDF build issue and
026 erCK4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
027 brCK4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
031 brCK8 TBR.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
  bluefire/CESM testing: All PASS except 
                         (and ALL compare tests fail couldn't find base result)
FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm 
FAIL  ERP.1x1_mexicocityMEX.I.bluefire_ibm 
  bluefire/PTCLM testing: All FAIL
  lynx/pgi testing: ALL FAIL
  lynx/pgi interactive testing: ALL FAIL
  lynx CESM testing: ALL PASS except... (don't compare as no baselines for clm4_0_40)
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.162157 
FAIL  PST.f19_g16.I.lynx_pgi 
RUN   ERS.1x1_vancouverCAN.I.lynx_pgi.162157 
  mirage,storm/ifort interactive testing: All PASS!
  jaguarpf CESM testing: All FAIL
RUN   ERS_D.f09_g16.I1850.titan_pgi.182111 
FAIL  ERI.f10_f10.IRCP60CN.titan_pgi 
FAIL  PST.f09_g16.I.titan_pgi 
FAIL  PET_PT.f10_f10.I20TRCN.titan_pgi 
FAIL  ERP.f19_g16.I4804CN.titan_pgi 
RUN   ERS.1x1_mexicocityMEX.I.titan_pgi.182111 
FAIL  ERI_D.ne30_g16.I1850CN.titan_pgi 
TFAIL ERH.ne120_g16.I2000CN.titan_pgi.182111
RUN   ERS.f09_g16.IRCP26CN.titan_pgi.182111 
FAIL  SMS.f10_f10.IRCP45CN.titan_pgi 
RUN   ERS.f19_g16.IRCP60CN.titan_pgi.182111 
FAIL  SMS_D.f10_f10.IRCP85CN.titan_pgi 
RUN   ERS.f09_g16.IG1850.titan_pgi.182111

CLM tag used for the baseline comparison tests if applicable: clm4_0_40

Changes answers relative to baseline: Yes (using RTM mapping files now)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: RTM mapping for f05
    - what platforms/compilers:
    - nature of change larger than roundoff/same climate

===============================================================
===============================================================
Tag name:  clm4_0_40
Originator(s):  erik (Erik Kluzek)
Date: Thu Feb 16 14:19:28 MST 2012
One-line Summary: Back out update to new T31 surface datasets

Purpose of changes:

Back out the new T31 surface datasets so will have initial conditions to use
for T31. Bring in the new surface datasets with initial conditions in the next tag.

Requirements for tag: Run on bluefire

Test level of tag: critical

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1459 (PTSMODE fails)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1476 (Problem with stand-alone build on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Bring back old T31 datasets
   Comment out the new T31 surface datasets and put back the old T31 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

    A   models/lnd/clm/src/main/findHistFields.pl -- Add script to figure out list of 
          history field names, long_names, and units
          Create's a XML file as well as giving you a neatly formatted sorted list.

List all existing files that have been modified, and describe the changes:

    M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Move T31 files
          back to previous version and comment out the new files.

Summary of testing:

  bluefire: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
  bluefire interactive testing: All PASS except...
026 erCK4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
027 brCK4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
031 brCK8 TBR.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
065 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
080 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
082 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
084 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 
  bluefire/CESM testing: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_39

Changes answers relative to baseline: T31

  Answers are identical to clm4_0_38, if fatmgrid=fsurdat in controlMod.F90
    except for ntop for some grids and TREFMXAV and TREFMNAV for others.

===============================================================
===============================================================
Tag name:  clm4_0_39
Originator(s):  erik (Erik Kluzek)
Date: Wed Feb  1 11:40:11 MST 2012
One-line Summary: Bring newgrid branch to trunk

Purpose of changes:

Move newgrid branch from Mariana to trunk. Add ne4np4, ne16np4, ne240np4 surface
datasets. Replace all T31 surface datasets. Start removing CASA and fine-mesh testing
and support. Bring in Tony's updates to ESMF5.2.0.

Requirements for tag:

run on lynx-pgi/bluefire/mirage-intel, fix bugs: 1446, 1444, 1442, 1404, 1430, 1425, 1420

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1458 (Problem using fsurdat for fatmgrid as no verticies)
                                 1444 (attempt to read unallocated variable)
                                 1442 (Make clm-template same as CAM template)
                                 1430 (Remove DIN_LOC_ROOT_CLMQIAN -- add ...CLM_FORC)
                                 1425 (Double quotes causes Namelist.pm to hang)
                                 1420 (Bad history output for TREFMNAV, TREFMXAV)
                                 1404 (Inconsistent domain and fatmlndfrc files)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1459 (PTSMODE fails)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1476 (Problem with stand-alone build on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
   Move rtm, voc, and glc_nec from configure-time to run-time namelist options

   Remove the -rtm -glc_nec and -voc options from "configure"
   (NO longer available to CLM_CONFIG_OPTS)


Describe any changes made to the namelist:

   Add "-glc_nec, -glc_smb, -rtm options to build-namelist
   (now available to CLM_BLDNML_OPTS)

   Remove fine-mesh option to build-namelist "-lnd_res" 
   (NO longer available to CLM_BLDNML_OPTS)

   Add following to clm_inparm namelist:

      do_rtm             => If TRUE, turn on rtm river routing
      maxpatch_glcmec    => Number of  multiple elevation classes over glacier points.
         Normally this is ONLY used when running CESM with the active glacier model.

   Add following to the driver namelist to pass extra fields

      flds_voc
      flds_co2a
      flds_co2a
      flds_co2c
      flds_co2_dmsa
      cplflds_custom
      glc_nec

List any changes to the defaults for the boundary datasets:
    Replace T31 surface datasets, remove T31 finidat datasets
    Add T31 fpftdyn datasets for all cases
    Add ne240np4 datasets, ne4np4, ne16np4 surface datasets

    remove ALL fatmtopo datasets and all but T31, f09, f19 for glc_nec flndtopo

    Remove fatmlndfrc datasets -- use datm domainfiles in their place

Describe any substantial timing or memory changes: None

Code reviewed by: self,mvertens,tcraig (ESMF update)

List any svn externals directories updated (csm_share, mct, etc.): almost all
   scripts        to scripts4_120123
   Machines       to Machines_120123
   drv            to drvseq4_1_01
   datm           to datm8_120123
   socn/sice/sglc to stubs1_3_01
   cism           to cism1_120123
   csm_share      to share3_120123
   esmf_wrf_tmgr  to esmf_wrf_timemgr_120123
   gen_domain     to gen_domain_120117

List all files eliminated:

>>>>>>>>>>>>>> Get rid of mkgriddata as no longer needed
>>>>>>>>>>>>>> Use gen_domain or models/lnd/clm/tools/mkmapdata/mknoocnmap.pl
  D         mkgriddata/mkgriddata.namelist
  D         mkgriddata/mkgriddata.regional
  D         mkgriddata/src/mkvarpar.F90
  D         mkgriddata/src/mkvarctl.F90
  D         mkgriddata/src/clm_varpar.F90
  D         mkgriddata/src/clm_varctl.F90
  D         mkgriddata/src/shr_sys_mod.F90
  D         mkgriddata/src/shr_file_mod.F90
  D         mkgriddata/src/ncdio.F90
  D         mkgriddata/src/shr_log_mod.F90
  D         mkgriddata/src/Filepath
  D         mkgriddata/src/Macros.custom
  D         mkgriddata/src/shr_kind_mod.F90
  D         mkgriddata/src/shr_const_mod.F90
  D         mkgriddata/src/mkgriddata.F90
  D         mkgriddata/src/domainMod.F90
  D         mkgriddata/src/areaMod.F90
  D         mkgriddata/src/creategridMod.F90
  D         mkgriddata/src/nanMod.F90
  D         mkgriddata/src/Srcfiles
  D         mkgriddata/src/Mkdepends
  D         mkgriddata/src/Makefile
  D         mkgriddata/src
  D         mkgriddata/mkgriddata.singlept
  D         mkgriddata/mkgriddata.cesm_dom
  D         mkgriddata/README
  D         mkgriddata

>>>>>>>>>>>>>> Remove config files for CASA or that turn off RTM, or 
>>>>>>>>>>>>>> turn on VOC or glc_mec
  D       models/lnd/clm/test/system/config_files/_nrsc_dh
  D       models/lnd/clm/test/system/config_files/4p_casasc_dh
  D       models/lnd/clm/test/system/config_files/4p_casasc_dm
  D       models/lnd/clm/test/system/config_files/4p_casasc_do
  D       models/lnd/clm/test/system/config_files/4p_casasc_ds
  D       models/lnd/clm/test/system/config_files/4p_casasc_h
  D       models/lnd/clm/test/system/config_files/4p_casasc_m
  D       models/lnd/clm/test/system/config_files/4p_casasc_o
  D       models/lnd/clm/test/system/config_files/17p_nrsc_ds
  D       models/lnd/clm/test/system/config_files/_nrsc_dm
  D       models/lnd/clm/test/system/config_files/_nrsc_do
  D       models/lnd/clm/test/system/config_files/4p_nrcasasc_ds
  D       models/lnd/clm/test/system/config_files/17p_vorsc_h
  D       models/lnd/clm/test/system/config_files/_nrsc_ds
  D       models/lnd/clm/test/system/config_files/17p_vorsc_m
  D       models/lnd/clm/test/system/config_files/17p_nrcnsc_do
  D       models/lnd/clm/test/system/config_files/17p_vorsc_o
  D       models/lnd/clm/test/system/config_files/17p_nrcnsc_ds
  D       models/lnd/clm/test/system/config_files/_nrmexsc_ds
  D       models/lnd/clm/test/system/config_files/_mec10sc_dh
  D       models/lnd/clm/test/system/config_files/_nrcnsc_do
  D       models/lnd/clm/test/system/config_files/_mec10sc_dm
  D       models/lnd/clm/test/system/config_files/_nrcnsc_ds
  D       models/lnd/clm/test/system/config_files/_mec10sc_do
  D       models/lnd/clm/test/system/config_files/_mec10sc_ds
  D       models/lnd/clm/test/system/config_files/_nrsc_s
  D       models/lnd/clm/test/system/config_files/_nrvansc_ds
  D       models/lnd/clm/test/system/config_files/_nrnil3sc_dh
  D       models/lnd/clm/test/system/config_files/_nrnil3sc_dm
  D       models/lnd/clm/test/system/config_files/17p_vorsc_dh
  D       models/lnd/clm/test/system/config_files/21p_nrcncrpsc_s
  D       models/lnd/clm/test/system/config_files/21p_nrcncrpsc_ds
  D       models/lnd/clm/test/system/config_files/17p_vorsc_dm
  D       models/lnd/clm/test/system/config_files/17p_vorsc_do
  D       models/lnd/clm/test/system/config_files/17p_vorsc_ds
  D       models/lnd/clm/test/system/config_files/_mec10sc_h
  D       models/lnd/clm/test/system/config_files/_mec10sc_m
  D       models/lnd/clm/test/system/config_files/_mec10sc_o

>>>>>>>>>>>>>> Remove mkdatadomain always use gen_domain
  D       models/lnd/clm/tools/mkdatadomain
  D       models/lnd/clm/tools/mkdatadomain/mkdatadomain.namelist
  D       models/lnd/clm/tools/mkdatadomain/src
  D       models/lnd/clm/tools/mkdatadomain/src/addglobal.F90
  D       models/lnd/clm/tools/mkdatadomain/src/create_domain.F90
  D       models/lnd/clm/tools/mkdatadomain/src/Mkdepends
  D       models/lnd/clm/tools/mkdatadomain/src/Srcfiles
  D       models/lnd/clm/tools/mkdatadomain/src/Filepath
  D       models/lnd/clm/tools/mkdatadomain/src/Macros.custom
  D       models/lnd/clm/tools/mkdatadomain/src/Makefile
  D       models/lnd/clm/tools/mkdatadomain/src/shr_kind_mod.F90
  D       models/lnd/clm/tools/mkdatadomain/src/shr_const_mod.F90
  D       models/lnd/clm/tools/mkdatadomain/README
>>>>>>>>>>>>>> fine-mesh no longer supported don't worry about topo files anymore
  D       models/lnd/clm/bld/namelist_files/checktopofiles.ncl

List all files added and what they do:

>>>>>>>>>>>>>> Rename without RTM off option
  A  +    models/lnd/clm/test/system/config_files/17p_cnsc_ds
  A  +    models/lnd/clm/test/system/config_files/_mexsc_ds
  A  +    models/lnd/clm/test/system/config_files/_vansc_ds

>>>>>>>>>>>>>> namelist to turn on VOC and RTM off, and gen_domain options
  A  +    models/lnd/clm/test/system/nl_files/nl_voc
  A  +    models/lnd/clm/test/system/nl_files/clm_nortm
  A  +    models/lnd/clm/test/system/nl_files/gen_domain.ne30.runoptions
  A  +    models/lnd/clm/test/system/nl_files/gen_domain.T31.runoptions

>>>>>>>>>>>>>> Add scripts to create SCRIP grid/map files for region/single-point domains
  A  +    models/lnd/clm/tools/mkmapdata/mkunitymap.ncl
  A  +    models/lnd/clm/tools/mkmapdata/mknoocnmap.pl
  A  +    models/lnd/clm/tools/mkmapgrids/mkscripgrid.ncl

     mknoocnmap.pl [options]      Gets map and grid files for a single land-only point.
 REQUIRED OPTIONS
     -centerpoint [or -p] <lat,lon> Center latitude,longitude of the grid to create.
     -name [-or -n] <name>      Name to use to describe point


List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Remove rtm off from config files and update README file
  M       models/lnd/clm/test/system/config_files/_nil3sc_dh
  M       models/lnd/clm/test/system/config_files/_nil3sc_dm
  M       models/lnd/clm/test/system/config_files/README

>>>>>>>>>>>>>> Change tests
  M       models/lnd/clm/test/system/README.testnames --- Update test names
                6, A, J, Q, S, V, X, and Z  configurations are now unused
                resolutions: 3, F, G and H are now unused
  M       models/lnd/clm/test/system/mknamelist --------- Remove fine-mesh option
  M       models/lnd/clm/test/system/test_driver.sh ----- Update paths for
               edinburgh/jaguar
  M       models/lnd/clm/test/system/input_tests_master - Remove nr,vo,mec in configure
               files for tests and move to namelist, remove compile-only test names
  M       models/lnd/clm/test/system/TSMtools.sh -------- Allow run files to
               be in test directory

>>>>>>>>>>>>>> Change testnames
                6, A, J, Q, S, V,  X, and Z  configurations are now unused
                resolutions: 3, F, G and H are now unused
  M       models/lnd/clm/test/system/tests_posttag_purempi_regression
  M       models/lnd/clm/test/system/tests_posttag_hybrid_regression
  M       models/lnd/clm/test/system/tests_posttag_yong
  M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
  M       models/lnd/clm/test/system/tests_pretag_bluefire
  M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
  M       models/lnd/clm/test/system/tests_pretag_edinburgh
  M       models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
  M       models/lnd/clm/test/system/tests_posttag_kraken
  MM      models/lnd/clm/test/system/tests_pretag_jaguarpf
  MM      models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
  M       models/lnd/clm/test/system/tests_posttag_mirage
  M       models/lnd/clm/test/system/tests_posttag_intrepid
  M       models/lnd/clm/test/system/tests_posttag_intrepid_nompi
  M       models/lnd/clm/test/system/tests_posttag_nompi_regression
  M       models/lnd/clm/test/system/tests_posttag_lynx

>>>>>>>>>>>>>> Fix run-time options
  M       models/lnd/clm/test/system/nl_files/clm_usrdat ----- Add rtm off
  M       models/lnd/clm/test/system/nl_files/mkmapdata_if10 - Remove -i option

>>>>>>>>>>>>>> Add option to create datasets NOT entered into XML database
  M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Use domainfile
               rather than fatmgrid file, which changes variable names as well
  M       models/lnd/clm/tools/README.testing --------------- Note that run files
               can be in tool directory or test directory
  M       models/lnd/clm/tools/README ----------------------- Update information on
               process
  MM      models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl - Add usrspc option
  M       models/lnd/clm/tools/mkmapdata/regridbatch.sh ----- Use -b instead of -i
  M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh ------- Replace -i option with
               -b for batch, add option to read input SCRIP grid file (-f) and (-t)
               option for regional or global type, update usage
  M       models/lnd/clm/tools/mksurfdata_map/README -------- Update usage info
  M       models/lnd/clm/tools/mkmapdata/README ------------- Update usage info

 New options for unsupported resolutions to mksurfdata.pl

+     For unsupported, user-specified resolutions:      
+     $ProgName -res usrspec -usr_gname <user_gname> -usr_gdate <user_gdate>  [OPTIONS]
+        -usr_gname "user_gname"    User resolution name to find grid file with 
+                                   (only used if -res is set to 'usrspec')
+        -usr_gdate "user_gdate"    User map date to find mapping files with
+                                   (only used if -res is set to 'usrspec')
+                                   NOTE: all mapping files are assumed to be in mkmapdata
+                                    - and the user needs to have invoked mkmapdata in
+                                      that directory first
+

>>>>>>>>>>>>>> Move rtm, glc_nec, voc from configure to build-namelist
  M       models/lnd/clm/bld/configure -------------- Remove -rtm, -glc_nec, -voc options
  M       models/lnd/clm/bld/listDefaultNamelist.pl - Get datm namelist files as well
  M       models/lnd/clm/bld/build-namelist --------- Add: glc_nec, glc_smb, rtm options
              Remove: lnd_res fine-mesh option
  M       models/lnd/clm/bld/clm.cpl7.template ------ Move rtm, glc_nec settings from
              configure to build-namelist, set fatmlndfrc from domain file set in scripts
              add processing for LND_GRID=reg, set glc_smb, loop over namelists for DART,
  M       models/lnd/clm/bld/README
  M       models/lnd/clm/bld/config_files/config_definition.xml - Remove rtm, glc_nec, voc

>>>>>>>>>>>>>>  Add new namelist items, remove CASA, fine-mesh, update T31
>>>>>>>>>>>>>>  add ne4np4, ne16np4, ne240np4 datasets
  M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ------ 
              Add:    rtm, maxpatch_glcmec, do_rtm, new cpl files, navy lmask
              remove: fatmtopo, CASA namelist items,
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - rtm/glc_nec
  M       models/lnd/clm/bld/namelist_files/namelist_definition.xsl ------- rm CASA
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -----
               Add:    do_rtm, new T31 fsurdat/fpftdyn files, new ne4np4, ne16np4,
                       fsurdat and ne240np4 fsurdat/fatmlndfrc, missing map files (f19,T31)
               Remove: T31 finidat, remove fatmtopo, and most flndtopo
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Change
              paths of domainfiles to share/domains
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml Add 10min
              navy grid file

>>>>>>>>>>>>>> Add glc_nec
  M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
  M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
  M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
  M       models/lnd/clm/bld/namelist_files/use_cases/glacierMEC_pd.xml


>>>>>>>>>>>>>> Remove RTM, GLC_NEC, ESMF5.2.0 updates, don't require extents on fsurdat
  M       models/lnd/clm/src/main/clm_varpar.F90 -- Change for glc_nec
  M       models/lnd/clm/src/main/accumulMod.F90 -- Initialize val to zero if period=1
  M       models/lnd/clm/src/main/clm_initializeMod.F90 - Change order of calls, rm RTM
  M       models/lnd/clm/src/main/clm_glclnd.F90 -- Use maxpatch_glcmec NOT glc_nec
  M       models/lnd/clm/src/main/subgridMod.F90 -- Use maxpatch_glcmec NOT glc_nec
  M       models/lnd/clm/src/main/histFileMod.F90 - Remove RTM add do_rtm
                make sure ninst suffix is in restart history filename
  M       models/lnd/clm/src/main/restFileMod.F90 - Remove RTM add do_rtm
  M       models/lnd/clm/src/main/controlMod.F90 -- Remove RTM add do_rtm,
                maxpatch_glcmec, glc_grid, use fatmlndfrc for fatmgrid if empty
                broadcast glc_topomax if create_glacier_mec_landunit
  M       models/lnd/clm/src/main/clm_time_manager.F90 - Changes from Tony to update
                to ESMF5.2.0
  M       models/lnd/clm/src/main/clm_varctl.F90 ---- Remove RTM, use do_rtm, and remove
                GLC_NEC use arrays for glc_nec variables
  M       models/lnd/clm/src/main/clm_driver.F90 ---- Remove RTM use do_rtm
  M       models/lnd/clm/src/main/initGridCellsMod.F90 - Write more info on error
  M       models/lnd/clm/src/main/pftvarcon.F90 ----- Remove unused MPI vars
  M       models/lnd/clm/src/main/surfrdMod.F90 ----- Don't require LATS/N,LONE/W on
                files set to nan if not used, use maxpatch_glcmec NOT glc_nec
  M       models/lnd/clm/src/main/domainMod.F90 ----- Don't write LATS/N,LONE/W if
                first lonw is nan
  M       models/lnd/clm/src/main/decompMod.F90 ----- Remove RTM use do_rtm
  M       models/lnd/clm/src/main/histFldsMod.F90 --- Remove RTM use do_rtm
  M       models/lnd/clm/src/riverroute/RtmMod.F90 -- Remove RTM use run_rtm NOT do_rtm
  M       models/lnd/clm/src/riverroute/RunoffMod.F90 Remove RTM

>>>>>>>>>>>>>> ESMF5.2.0 updates, remove RTM, GLC_NEC
  M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - ESMF5.2.0 updates, remove RTM
                 use do_rtm, remove GLC_NEC use arrays of glc_nec
  M       models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 -- ESMF5.2.0 updates
  M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 --- ESMF4.2.0 updates
  M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - Updated for new coupler fields spec
                Remove RTM, GLC_NEC CPP tokens, make glc_nec variables arrays
                some updates to ESMF5.2.0

Summary of testing:

  bluefire: All PASS except...
004 blC91 TBL.sh _sc_dh clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
008 blTZ1 TBL.sh 21p_cncrpsc_dh clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
011 blD91 TBL.sh _persc_dh clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
019 blW51 TBL.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 7
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4 (bluefire compiler error)
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5 (bluefire compiler error)
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5 (bluefire compiler error)
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4 (bluefire compiler error)
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 7 (bluefire compiler error)
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4 (bluefire compiler error)
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5 (bluefire compiler error)
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5 (bluefire compiler error)
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4 (bluefire compiler error)
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4 (bluefire compiler error)
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5 (bluefire compiler error)
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5 (bluefire compiler error)
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 4 (bluefire compiler error)
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10 (bluefire compiler error)
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5 (bluefire compiler error)
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5 (bluefire compiler error)
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4 (bluefire compiler error)
  bluefire interactive testing:
008 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 7
012 blHS3 TBL.sh 17p_cnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .....FAIL! rc= 7
016 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ...............FAIL! rc= 7
020 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ....FAIL! rc= 5
024 blJ74 TBL.sh 4p_casasc_ds clm_std^nl_urb 10001230:3600 1x1_tropicAtl test -100 arb_ic .......FAIL! rc= 7
028 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic ........FAIL! rc= 7
029 smCK4 TSM.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 10
030 erCK4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 5
031 brCK4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 5
032 blCK4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 4
033 smCK8 TSM.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -10 cold ...........FAIL! rc= 10
034 erCK8 TER.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 5
035 brCK8 TBR.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 5
036 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
042 blF93 TBL.sh 17p_sc_do clm_std^nl_voc 20021230:1800 4x5 gx3v7 48 cold .......................FAIL! rc= 5
046 blC83 TBL.sh _sc_do clm_std^nl_urb 20020115:3600 5x5_amazon navy -10 arb_ic .................FAIL! rc= 7
054 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 5
058 blHQ4 TBL.sh 17p_cnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold ............FAIL! rc= 5
062 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
066 bl514 TBLtools.sh gen_domain tools__ds T31.runoptions .......................................FAIL! rc= 5
075 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
076 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
083 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 7
085 bl953 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................FAIL! rc= 7
090 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
091 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
092 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
093 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
094 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
095 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except, compare_hist 
FAIL  SMS_RLA.f45_f45.I.bluefire  - bug 1459
FAIL  SMS_RLB.f45_f45.I.bluefire  - bug 1459
FAIL  SMS_ROA.f45_f45.I.bluefire  - bug 1459
  bluefire/PTCLM testing: All FAIL
  lynx/pgi: All PASS except...
004 blC92 TBL.sh _sc_dm clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
007 blD92 TBL.sh _persc_dm clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
011 blF92 TBL.sh 17p_sc_dm clm_std^nl_voc 20021230:1800 4x5 gx3v7 48 cold .......................FAIL! rc= 5
015 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 7
019 blJ92 TBL.sh 4p_casasc_dm clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
023 blL52 TBL.sh _sc_dm clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
  lynx/pgi interactive testing:  All PASS except..
008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
009 smCL4 TSM.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 10
010 erCL4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
011 brCL4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
012 blCL4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 4
016 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ...............FAIL! rc= 7
020 blOC4 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic .....FAIL! rc= 5
024 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ....FAIL! rc= 5
025 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
026 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
027 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  mirage,storm/ifort interactive testing:
007 blD94 TBL.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
011 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ...............FAIL! rc= 7
015 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic ........FAIL! rc= 7
019 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
023 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 48 cold ............FAIL! rc= 7
  jaguarpf:  Currently NOT available:
  edinburgh: Currently not supported

CLM tag used for the baseline comparison tests if applicable: clm4_0_38

===============================================================
===============================================================
Tag name:  clm4_0_38
Originator(s):  erik (Erik Kluzek)
Date: Mon Jan 23 13:56:45 MST 2012
One-line Summary: Fix some minor issues with tools, add high resolution option and
datasets to mksurfdata, remove crap from clmtype so C13 will work on bluefire, convert
nans to FillValue for some cases, fix datasets, update doc

Purpose of changes:

Update externals to new version of scripts/Machines. Fix some bugs. Add in maps for:
ne4np4, ne16np4, ne60np4, and ne240np4 resolutions. Begin adding _FillValue/missing_value
to restart files. Start adding in new high-resolution datasets for mksurfdata. Add an
option to mksurfdata.pl to run at hi-res let default be standard half-degree datasets.
Add in 3x3min PFT dataset for 2000, and 5x5min organic. Add in maps for 3x3min and
5x5min_ISRIC_WISE to output grids. Separate out wetland and lake datasets, add in 3x3min
lake dataset. Get mksurfdata to work with T31, fix maps. Have both mksurfdata_map and clm
check files for consistencies. Add initial version of a script to check that maps in the
XML database are correct. Make sure keywords are set in tools, and OPT correctly added to
meta-data. Update gen_domain. Correct some typo's in filenames. Remove some unused data
in clmtype.F90. Update documentation to cesm1_0_4.

Requirements for tag:
    Testing on bluefire-only, Fix bugs: 1432 (part X), 1424X, 1423X, 1401 (part)X, 1309,
    mksurfdata works at regular and hi-res and for f09, and at regular for: 128x256,
    512x1024, ne4np4, ne16np4, ne30np4, ne60np4, and ne240np4 resolutions, T31 and T31
    mksurfdata rcp's work

Test level of tag: critical

Bugs fixed (include bugzilla ID):
                                 1432 (Several resolutions fail for new mksurfdata_map)
                                 1424 (variables written out as gdir)
                                 1423 (Problem building clmtype on bluefire)
                                 1398 (clm and mksurfdata_map needs to check map files -- partial)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1476 (Problem with stand-alone build on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
     Correct and add new mapping datasets and datasets for mksurfdata_map

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): most

   scripts   to scripts4_111108
   Machines  to Machines_111101
   drv       to drvseq4_0_08
   cism      to cism1_111004
   csm_share to share3_111027
   timing    to timing_111101
   MCT       to MCT2_7_0-111101
   pio       to pio1_3_12

List all files eliminated: None

List all files added and what they do:

   A    models/lnd/clm/test/system/config_files/_scnv_ds - Add serial option
   A    models/lnd/clm/bld/namelist_files/checkmapfiles.ncl - check that map files
          are consistent

List all existing files that have been modified, and describe the changes:

  M    models/lnd/clm/test/system/input_tests_master - Add serial irrig test

  M    models/lnd/clm/test/system/test_driver.sh ----- Fix issues on bluefire,
          update some paths on edinburgh

>>>>>>>>>>>>>> Update documentation
  M    models/lnd/clm/doc/UsersGuide/single_point.xml
  M    models/lnd/clm/doc/UsersGuide/special_cases.xml
  M    models/lnd/clm/doc/UsersGuide/custom.xml
  M    models/lnd/clm/doc/KnownBugs

>>>>>>>>>>>>>> Get svn keywords set on tools, and make sure OPT is set
  M    models/lnd/clm/tools/mkmapdata/mvNimport.sh -------- Fix syntax error
  M    models/lnd/clm/tools/mkmapdata/mkmapdata.sh -------- Add in 3x3 grid and ISRIC-WISE
          mask, add option to build ocean-land mask, and large-file format option,
  M    models/lnd/clm/tools/interpinic/src/interpinic.F90 - Fix svn keywords
  M    models/lnd/clm/tools/interpinic/src/Makefile ------- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mkgriddata/src/Makefile ------- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mkdatadomain/src/Makefile ----- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mkmapgrids/src/mkmapgrids.F90 - Add more meta-data
  M    models/lnd/clm/tools/mkmapgrids/src/Makefile-------- Set OPT CPP if OPT=TRUE

>>>>>>>>>>>>>> Add call to domain_checksame to check if domains are the same,
>>>>>>>>>>>>>> split lake and wetland processing, add write statment for each file
>>>>>>>>>>>>>> opened, add -hires and -allownofile options to mksurfdata.pl
  M    models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90 ---- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mkvarctl.F90 ------- Split lake/wetland
  M    models/lnd/clm/tools/mksurfdata_map/src/mkvocefMod.F90 ----- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mklaiMod.F90 ------- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mksoilMod.F90 ------ Use domain_checksame
          increase kmap_max_min from 50 to 90 (so T31 can be run)
  M    models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90 ---- Add domain_checksame,
          make domain_init private, add metadata if frac/mask set, eliminate
          lats/n,lone/w, use call abort in place of stop, 
  M    models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90 ------ Split lake/wetland
          remove documentation on specific datasets, increase allowed sum of special
          landunits from 120 to 250
  M    models/lnd/clm/tools/mksurfdata_map/src/mkurbanparMod.F90 -- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mkharvestMod.F90 --- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90 ------ Fix meta-data, 
          remove lats/n,lone/w
  M    models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90 --- Add headers, more
          checking, add gridmap_setptrs method private gridmap_checkifset method,
          
  M    models/lnd/clm/tools/mksurfdata_map/src/mklanwatMod.F90 ---- Split mklanwat
          into mklakwat/mkwetlnd subroutines, use domain_checksame, 
  M    models/lnd/clm/tools/mksurfdata_map/src/Makefile ----------- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mksurfdata_map/src/mkpftMod.F90 ------- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl ---------- Add -hires and
          -allownofile options, split lake and wetland

     -allownofile                  Allow the script to run even if one of the input files
                                   does NOT exist.
     -hires                        If you want to use high-resolution input datasets rather than the default
                                   lower resolution datasets (low resolution is typically at half-degree)

  M    models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt Use $CSMDATA
           directory path rather than /cgd/tss path
  M    models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist  Split lake and wetland

>>>>>>>>>>>>>> Minor changes
  M    models/lnd/clm/bld/build-namelist --------- Move groups earlier, start adding
              code to handle lnd_inst_counter
  M    models/lnd/clm/bld/listDefaultNamelist.pl - Get rcp list sooner

>>>>>>>>>>>>>> Fix some filename typos, add new mapping files, add hi-res
>>>>>>>>>>>>>> datasets
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------ Add 
               ne4np4, ne16np4, ne60np4, ne240np4 mapping files
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Correct
               some typo's in filenames (ne4np4 scripgrid, ngwh mksurfdata pftdyn file
               for rcp 6 for year 2006
  M    models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add mksrf_filename,
               correct mksrf_* filenames to mksrf_f*, add ISRIC-WISE lmask
  M    models/lnd/clm/bld/namelist_files/datm-build-namelist ------- Only require
              datm_data_dir for CPLHIST3HrWx
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add ISRIC-WISE,
              3x3min_MODIS mapping datasets, correct some map dataset names,
  M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----- Add more data
              to output table
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml Correct and
              add new scrip grid files, add hires option for some data, add
              mksrf_filename for types of files, add in all mksurfdata raw
              datasets, add new hires datasets, correct mksrf_fvegtyp filenames,

>>>>>>>>>>>>>> Remove initialization of unused data types (allows C13 on bluefire)
>>>>>>>>>>>>>> Add option to convert nan to fillvalue on output files 
>>>>>>>>>>>>>> (and vica-versa on input)
  M    models/lnd/clm/src/main/clmtypeInitMod.F90 - Remove initialization of unused
              data types
  M    models/lnd/clm/src/main/clm_atmlnd.F90 ----- Remove unused pdf variable
  M    models/lnd/clm/src/main/initSurfAlbMod.F90 - Remove unused CNZeroFluxes
  M    models/lnd/clm/src/main/ncdio_pio.F90 ------ Add cnvrtnan2fill option
              to convert from spval to nan on read and from nan to spval on write
  M    models/lnd/clm/src/main/clmtype.F90 -------- Remove unused variables
  M    models/lnd/clm/src/main/histFldsMod.F90 ---- Add some documentation, change
              longname of QSOIL, correct: CISUN, CISHA, ALPHAPSNSUN, ALPHAPSNSHA
  M    models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90


Summary of testing:

  bluefire testing:
018 brX51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 4
  bluefire interactive testing: All PASS except...
031 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
032 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
036 brAK8 TBR.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
037 blAK8 TBL.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
067 bl5@4 TBLtools.sh gen_domain tools__ds namelist .............................................FAIL! rc= 7
003 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
004 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
008 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 6
011 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
012 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
013 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
014 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
015 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
016 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except... (compare tests fail because clm4_0_37 file did not exist)

CLM tag used for the baseline comparison tests if applicable: clm4_0_37

===============================================================
===============================================================
Tag name:  clm4_0_37
Originator(s):  erik (Erik Kluzek)
Date:  Mon Sep 26 10:35:24 MDT 2011
One-line Summary: Fix unstructured grids history files

Purpose of changes:

Comment out code for writing out fine-mesh lat/lon for unstructured grids. This caused
the code to blow up when running for HOMME grids such as ne30np4.

Bugs fixed (include bugzilla ID):
                                 1415 (History files can't be written out for HOMME grids)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1398 (clm and mksurfdata_map needs to check map files for consistency)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1423 (Problem building clmtype on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M   models/lnd/clm/src/main/histFileMod.F90 - Comment out code for fine-mesh
          lat/lon for unstructured grids

Summary of testing: None!

CLM tag used for the baseline comparison tests if applicable: clm4_0_36

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_36
Originator(s):  erik (Erik Kluzek)
Date: Thu Sep 22 11:05:59 MDT 2011
One-line Summary: Comment out RTM mapping files for f09 and f19

Purpose of changes:

Comment out the RTM mapping files for f09/f19 so answers are the same as clm4_0_34 and as the f19 mapping
files cause the fully coupled model to blow up in POP. Add "mv" option to mksurfdata.pl and make -nomv the
default so it doesn't try to copy files by default. Increase length of filename strings for mksurfdata pftdyn
files. Add some metadata for some restart file variables. Add "new good wood harvest" datasets
and option (-new_woodharv) to mksurfdata.pl from Peter Lawrence so can make surface 
datasets with either set of files.  New good wood harvest applies to rcp6 and rcp8.5. 
Also add in some new mapping files for: 512x1024,128x256,64x128,32x64,8x16,0.23x0.31,5x5_amazon. 
Add SCRIP grid files for: ne4np4,ne16np4, ne60np4, ne240np4. Add 3x3min resolution 
and 3x3min SCRIP grid file which will be used for high resolution surface dataset 
creation in the future. Use new surface datasets with old fatmgrid values for f09_g16
for 1850 and 2000 so that answers can be identical to clm4_0_34 without requiring the
fatmgrid file.

Bugs fixed (include bugzilla ID): 
                                 1414 (Answers change @ f09 resolution w/o fatmgrid file)
                                 1413 (re is in incorrect units in mksurfdata_map)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1398 (clm and mksurfdata_map needs to check map files for consistency)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1415 (History files can't be written out for HOMME grids)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
   Comment out RTM mapping files for f09/f19
   Also new mapping files for: 512x1024,128x256,64x128,32x64,8x16,0.23x0.31,5x5_amazon. 
   Add SCRIP grid files for: ne4np4,ne16np4, ne60np4, ne240np4. 
   Add 3x3min SCRIP grid file.
   New surface datasets with old fatmgrid grid coordinate values for f09/1850/2000

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90 -------------- Increase pftdyn file length to 135
   M   models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90 -------------- Increase nchar dim to 256
   M   models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl ------------------ Add "mv" option with "nomv" the default
   M   models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt - Increse length of strings for files

   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add 3x3min,
           ne4np4,ne16np4, ne60np4, ne240np4 as valid resolutions
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Comment out f09/f19 RTM mapping files
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add new 
          good wood harvest pftdyn input files from Peter Lawrence for mksurfdata_map 
          for rcp6 and rcp8.5

   M   models/lnd/clm/src/biogeochem/CNrestMod.F90 --------- Add some FillValue to some fields for restart files
   M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 - Add some FillValue to some fields for restart files

Summary of testing:

  bluefire interactive testing: Following PASS
001 sm754 TSMtools.sh mksurfdata_map tools__s namelist ..........................................PASS
003 sm953 TSMscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................PASS
005 sm954 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......PASS
007 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................PASS
008 bl9S4 TBLscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................PASS
  bluefire/CESM testing: All PASS except (compare to clm4_0_34)
CFAIL ERS_E.T31_g37.I1850.bluefire.GC.125250 (ESMF doesn't work with NetCDF4)
BFAIL ERB.ne30_g16.I_1948-2004.bluefire.compare.clm4_0_34 (ne30 wasn't in clm4_0_34) (answers are identical to clm4_0_35)
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_34 (I1850SPINUPCN wasn't in clm4_0_34 or before)
FAIL  NCK.f10_f10.I.bluefire -- scripts needs to cleannamelist after changing NINST_LND
  bluefire extra CESM testing: Following PASS
PASS  ERS.f09_g16.ICN.bluefire
PASS  ERS.f09_g16.ICN.bluefire.generate.clm4_0_36
PASS  ERS.f09_g16.ICN.bluefire.compare_hist.clm4_0_33
PASS  ERS.f09_g16.ICN.bluefire.compare.clm4_0_33
PASS  ERS.f09_g16.I1850CN.bluefire
PASS  ERS.f09_g16.I1850CN.bluefire.generate.clm4_0_36
PASS  ERS.f09_g16.I1850CN.bluefire.compare_hist.clm4_0_33
PASS  ERS.f09_g16.I1850CN.bluefire.compare.clm4_0_33

CLM tag used for the baseline comparison tests if applicable: clm4_0_35

Changes answers relative to baseline: f09/f19 now same as clm4_0_34

===============================================================
===============================================================
Tag name:  clm4_0_35
Originator(s):  erik (Erik Kluzek), mvertens
Date: Tue Sep 13 22:15:17 MDT 2011
One-line Summary: Bring in Mariana's non2D grid branch to trunk, enabling HOMME grids: ne30np4/ne120np4

Purpose of changes:

Move Mariana's new non-2D branch to trunk. Extensive changes to mksurfdata, allows 1D-vector surface 
datasets. Mariana change mksurfdata to add unstructured grid format using SCRIP weights. Won't work 
with PTCLM and mksurfdata won't be able to create single-pt/regional surface datasets. Fix reverse 
coordinates on VOC/irrig mksurfdata input file. Update scripts and datm with HOMME grids. Add in 
half-degree pftdyn historical dataset. Partial fix to PTSMODE restart problem. Fix the US-UMB data for PTCLM.

NOTE: File creation process is changed substantially! mksurfdata now requires mapping files to be created first
      in order to run the new mksurfdata_map. This means you need to do the following:

	  1.) run mkgriddata
          2.) run mkmapgrid (add files to XML database) (requires 1)
          3.) run mkmapdata (add files to XML database) (requires 2)
          4.) run mksurfdata_map (requires 3)
          5.) run gen_domain (requires 3 needed for datm)

      See the models/lnd/clm/tools/README file for more help on the process.

WARNING: YOU CAN'T CREATE SINGLE-POINT DATASETS WITH THIS VERSION! You can create frac/grid files with this
      version and then use an older verison of clm to use mksurfdata to create surface datasets. The mapping
      for single-point datasets using ESMF does NOT work -- although it does work if you have at least 4 points
      so you can create regional datasets.

      THIS MEANS PTCLM DOES NOT WORK FOR CREATING NEW DATASETS! It will work for datasets already created however.

CAUTION: Mapping files to allow mksurfdata to work are only provided for: f09, f19, f10, T31, f45, f25, ne30 and ne120

Bugs fixed (include bugzilla ID):
                                 1392 (US-UMB site has some incorrect data)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1398 (clm and mksurfdata_map needs to check map files for consistency)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1413 (re is in incorrect units in mksurfdata_map)
                                 1414 (Answers change @ f09 resolution w/o fatmgrid file)
                                 1415 (History files can't be written out for HOMME grids)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Can now read in domain files in place of fatmlndfrac
   fatmgrid no longer required (use fsurdat to get grid)
   fmapinp_rtm new namelist item to give mapping for RTM

List any changes to the defaults for the boundary datasets:

   Add: ne30np4/ne120np4 datasets, add 1850-2000 0.47x0.63 fpftdyn file

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens, sacks

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, datm

    scripts     to scripts4_110906
    csm_share   to share3_110906
    datm        to datm8_110908

List all files eliminated:

>>>>>>>>>>>> Rename mksurfdata to mksurfdata_map
   D   models/lnd/clm/tools/mksurfdata/*

>>>>>>>>>>>> Move source code to src subdirectory
   D   models/lnd/clm/tools/mkdatadomain/Mkdepends/Srcfiles/Filepath/Makefile/*.F90
   D   models/lnd/clm/tools/mkgriddata/Mkdepends/Srcfiles/Filepath/Makefile/*.F90
   D   models/lnd/clm/tools/interpinic/Mkdepends/Srcfiles/Filepath/Makefile/*.F90

List all files added and what they do:

>>>>>>>>>>>> Rename mksurfdata to mksurfdata_map, create src sub-directory
   A   models/lnd/clm/tools/mksurfdata_map
   A   models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
   A   models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist
   A   models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
   A   models/lnd/clm/tools/mksurfdata_map/README
   A   models/lnd/clm/tools/mksurfdata_map/src
   A   models/lnd/clm/tools/mksurfdata_map/src/clm_varctl.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/clm_varpar.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/Filepath
   A   models/lnd/clm/tools/mksurfdata_map/src/fileutils.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/Macros.custom
   A   models/lnd/clm/tools/mksurfdata_map/src/Makefile
   A   models/lnd/clm/tools/mksurfdata_map/src/Mkdepends
   A   models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkharvestMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mklaiMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mklanwatMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkpftMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mksoilMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkurbanparMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkvarctl.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkvarpar.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkvocefMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/nanMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_const_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_log_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_string_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_sys_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_timer_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/Srcfiles

>>>>>>>>>>>> Scripts to use ESMF to create SCRIP mapping files from SCRIP grid files
   A   models/lnd/clm/tools/mkmapdata
   A   models/lnd/clm/tools/mkmapdata/mkmapdata.sh
   A   models/lnd/clm/tools/mkmapdata/mvNimport.sh
   A   models/lnd/clm/tools/mkmapdata/README
   A   models/lnd/clm/tools/mkmapdata/regridbatch.sh
   A   models/lnd/clm/tools/mkmapdata/rmdups.ncl ----- NCL script to remove duplicates

>>>>>>>>>>>> Program to create SCRIP grid files from CLM grid/frac files
   A   models/lnd/clm/tools/mkmapgrids
   A   models/lnd/clm/tools/mkmapgrids/mkmapgrids.csh
   A   models/lnd/clm/tools/mkmapgrids/mkmapgrids.namelist
   A   models/lnd/clm/tools/mkmapgrids/README
   A   models/lnd/clm/tools/mkmapgrids/src
   A   models/lnd/clm/tools/mkmapgrids/src/domainMod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/Filepath
   A   models/lnd/clm/tools/mkmapgrids/src/Macros.custom
   A   models/lnd/clm/tools/mkmapgrids/src/Makefile
   A   models/lnd/clm/tools/mkmapgrids/src/Mkdepends
   A   models/lnd/clm/tools/mkmapgrids/src/mkmapgrids.F90
   A   models/lnd/clm/tools/mkmapgrids/src/nanMod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_log_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_sys_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/Srcfiles

>>>>>>>>>>>> Programs to postprocess 1D vector unstructured grids
   A   models/lnd/clm/tools/mkprocdata_map
   A   models/lnd/clm/tools/mkprocdata_map/camhomme
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/mkprocdata_map_in
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Depends
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/domainMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Filepath
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/fileutils.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/gridmapMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Makefile
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/mkprocdata_map.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/nanMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Srcfiles
   A   models/lnd/clm/tools/mkprocdata_map/clm
   A   models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_all
   A   models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_in
   A   models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_wrap
   A   models/lnd/clm/tools/mkprocdata_map/clm/README
   A   models/lnd/clm/tools/mkprocdata_map/clm/src
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/constMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Filepath
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/fileutils.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/fmain.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/gridmapMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Makefile
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Mkdepends
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/mkprocdata_map.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/nanMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Srcfiles

>>>>>>>>>>>> Make macros files to customize how tools operate (allows all tools to have an identical Makefile)
   A   models/lnd/clm/tools/interpinic/src/Macros.custom
   A   models/lnd/clm/tools/mkgridata/src/Macros.custom
   A   models/lnd/clm/tools/mkdomaindata/src/Macros.custom

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add tests for new grids/tools
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf
   M   models/lnd/clm/test/system/tests_posttag_mirage
   M   models/lnd/clm/test/system/tests_posttag_intrepid
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/README.testnames --------------- 4/5=mkmapgrids/gen_domain config
             I=CN spinup, @=ne120np4, #=ne30np4, *=ne16np4 run options

>>>>>>>>>>>> Change build/run for tools, update netcdf on bluefire, update modules on jaguar, add new tests
   M   models/lnd/clm/test/system/TCB.sh ------------- Remove setting of MACFILE not needed
   M   models/lnd/clm/test/system/TCBtools.sh -------- Add src directory, Mkdepends, Macros.custom
   M   models/lnd/clm/test/system/TBLscript_tools.sh - Set CLM_ROOT
   M   models/lnd/clm/test/system/TBLtools.sh -------- Set CLM_ROOT
   M   models/lnd/clm/test/system/TBL.sh ------------- Allow compile-only mode to work
   M   models/lnd/clm/test/system/TSM.sh ------------- Handle multi-instance rpointer files
   M   models/lnd/clm/test/system/test_driver.sh -- Get netcdf4.1.3 working on bluefire, get mirage build working,
              use glade paths, add ESMFBIN_PATH, update jaguar modules
   M   models/lnd/clm/test/system/input_tests_master - Fill out HM tests, add H#, H@, blJ07, 454, 5@4, 9#2, 953
              tests, mksurfdata=>mksurfdata_map
   M   models/lnd/clm/test/system/nl_files/clm_spin -- Change case to agree with 1850 MOAR case in CESM scripts
   M   models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850 ------------ Remove -nomv option
   M   models/lnd/clm/test/system/nl_files/mksrfdt_1x1_vancouverCAN_2000 ----- Remove -nomv option
   M   models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000 - Remove -nomv option

>>>>>>>>>>>> Run interpinic and checkin the result
   M   models/lnd/clm/tools/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c100322.nc

>>>>>>>>>>>> Update to glade path, add notes on src subdirectory
   M   models/lnd/clm/tools/interpinic/README ------------------ Add notes about src subdirectory
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.namelist ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.regional ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.singlept ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.cesm_dom ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/README ------------------ Update with added src sub-directory
   M   models/lnd/clm/tools/mkdatadomain/mkdatadomain.namelist - Use glade path
   M   models/lnd/clm/tools/mkdatadomain/README ---------------- Add notes about src subdirectory

>>>>>>>>>>>> Update tools README information
   M   models/lnd/clm/tools/README.testing ------ Note about src subdirectory required
   M   models/lnd/clm/tools/README -------------- Updated with notes on new process
   M   models/lnd/clm/tools/README.filecopies --- Notes on list of file copies has changed

>>>>>>>>>>>> Changes to tools source codes moved to src subdirectories, Makefile was standardized
>>>>>>>>>>>> update shr_sys_mod.F90 file to latest csm_share
   M   models/lnd/clm/tools/interpinic/src/interpinic.F90 --- Add metadata on OPT and OMP
   M   models/lnd/clm/tools/interpinic/src/Makefile --------- Standardize
   M   models/lnd/clm/tools/interpinic/src/shr_sys_mod.F90 -- Update
   M   models/lnd/clm/tools/mkdatadomain/src/Makefile ------- Standardize
   M   models/lnd/clm/tools/mkdatadomain/src/Filepath ------- Only use local directory
   M   models/lnd/clm/tools/mkgriddata/src/Makefile --------- Standardize
   M   models/lnd/clm/tools/mkgriddata/src/shr_sys_mod.F90 -- Update
   M   models/lnd/clm/tools/mkgriddata/src/clm_varctl.F90 --- Update

>>>>>>>>>>>> Add RTM mapping file, change some namelist file required logic
   M   models/lnd/clm/bld/listDefaultNamelist.pl - Also get RTM mapping file, and use $CSMDATA if set
   M   models/lnd/clm/bld/build-namelist --------- If can't find a frac file use the datm domain file, only
             get fatmgrid file for fine-mesh, if RTM on get mapping file, if fine-mesh on and fatmgrid not found
             use fsurdat file
   M   models/lnd/clm/bld/clm.cpl7.template ------ Clarify documentation for CLM_RTM_RES

>>>>>>>>>>>> Add new files needed for ne30np4/ne120np4 and processing of them
   M   models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl --------- Add test for more resolutions
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Add: fmapinp_rtm, scripgriddata, mksrf_fglctopo,
              map, lmask, hgrid
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Add: ne30np4/ne120np4 datasets, add
              1850-2000 0.47x0.63 fpftdyn file, remove some of the single-point fatmlndgrd files, add mapping files,
              add lmask/hgrid for different map types
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Add ne30np4/ne120np4 domain files

>>>>>>>>>>>> Use llatlon structure in place of lsmlat/lsmlon, required files a bit different, use fsurdat if
>>>>>>>>>>>> fatmgrid is not given, add RTM mapping file, if fatmlndfrc NOT set set mask/frac to 1.
   M   models/lnd/clm/src/biogeochem/CASAMod.F90 ------------ Use llatlon%ni/nj in place of lsmlon/lat
              don't allow 1D grids for CASA
   M   models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/biogeochem/CNDVMod.F90 ------------ Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 ---------- asca => ascale
   M   models/lnd/clm/src/main/organicFileMod.F90 ----------- Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/main/clm_varpar.F90 --------------- Remove lsmlon/lsmlat parameters
   M   models/lnd/clm/src/main/clm_timemanager.F90 ---------- Add some meta-data to restart file, check restart values
   M   models/lnd/clm/src/main/clm_initializeMod.F90 -------- Remove cellarea, surfrd gets area
   M   models/lnd/clm/src/main/fileutils.F90 ---------------- Make iflag required argument
   M   models/lnd/clm/src/main/ndepStreamMod.F90 ------------ Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/main/iniTimeConst.F90 ------------- Remove start/count lsmlon/lsmlat
   M   models/lnd/clm/src/main/histFileMod.F90 -------------- Add namea grid, replace lsmlon/lat with llatlon
              handle unstructured grids
   M   models/lnd/clm/src/main/controlMod.F90 --------------- If fatmgrid NOT set, use fsurdat, add fmapinp_rtm
              if fatmlndfrc NOT set, set mask/frac to 1.
   M   models/lnd/clm/src/main/clm_varctl.F90 --------------- Add fmapinp_rtm
   M   models/lnd/clm/src/main/ncdio_pio.F90 ---------------- Add ncd_inqfdims, io_type public, clmlevel set 
              earlier, remove switchdim from ncd_io_int_var2, handle switchdim in ncd_io_real_var2 read for
              singlept
   M   models/lnd/clm/src/main/surfrdMod.F90 ---------------- Remove surfrd, add surfrd_get_data hande 1D grids
   M   models/lnd/clm/src/main/domainMod.F90 ---------------- asca=>ascale
   M   models/lnd/clm/src/main/decompMod.F90 ---------------- Add namea remove get_clmlevel_dsize
   M   models/lnd/clm/src/main/clmtype.F90 ------------------ Increase len=8 to len=16
   M   models/lnd/clm/src/riverroute/RtmMod.F90 ------------- Add L2R_Decomp, remove lsmlat/lon for llatlon
              remove river meta-data
   M   models/lnd/clm/src/riverroute/RtmMapMod.F90 ---------- Pass in fracout
   M   models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ------ Use llatlon in place of lsmlat/lon
   M   models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 -------- asca=>ascale

Summary of testing:

  bluefire: All PASS except...
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brX51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 4
  bluefire interactive testing: All PASS except...
009 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 5
031 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
032 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
036 brAK8 TBR.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
037 blAK8 TBL.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
051 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -670 arb_ic .................FAIL! rc= 5
004 blS63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
005 smQQ4 TSM.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold .............FAIL! rc= 4
006 erQQ4 TER.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -3+-7 cold ............FAIL! rc= 5
007 brQQ4 TBR.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -5+-5 cold ............FAIL! rc= 5
008 blQQ4 TBL.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold .............FAIL! rc= 4
012 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
014 bl454 TBLtools.sh mkmapgrids tools__ds namelist .............................................FAIL! rc= 5
016 bl5@4 TBLtools.sh gen_domain tools__ds namelist .............................................FAIL! rc= 5
024 bl754 TBLtools.sh mksurfdata_map tools__s namelist ..........................................FAIL! rc= 5
025 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
026 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
033 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
037 bl953 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................FAIL! rc= 5
039 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 6
043 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
045 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
047 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  bluefire/CESM testing: All PASS except...
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire.compare_hist.clm4_0_34
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire.compare.clm4_0_34
FAIL  ERP.f19_g16.IGRCP60CN.bluefire.compare_hist.clm4_0_34
FAIL  ERP.f19_g16.IGRCP60CN.bluefire.compare.clm4_0_34
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_34
BFAIL ERB.ne30_g16.I_1948-2004.bluefire.compare.clm4_0_34
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_34
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_34
  bluefire/PTCLM testing: All PASS
  lynx/pgi testing: All FAIL (build issues)
  lynx/pgi interactive testing: All PASS except...
010 erAL4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 7
011 brAL4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 6
  lynx/CESM extra testing: ...
PASS  ERS.ne30_g16.I1850CN.lynx_gnu 
PASS  ERS.ne30_g16.I1850CN.lynx_intel
PASS  ERS.ne30_g16.I1850CN.lynx_pathscale
  jaguarpf: All FAIL (system build issue)
  jaguarpf interactive testing: All PASS up to...
14 PTCLM.16750_US-UMB_ICN_exit_spinup.PTCLM                     PASS
  jaguarpf/CESM testing: All PASS except...
FAIL  PST.f09_g16.I.jaguarpf 
FAIL  ERI_D.ne30_g16.I1850CN.jaguarpf 
TFAIL ERH.ne120_g16.I2000CN.jaguarpf.G.235924
  jaguarpf/CESM additional testing: ...
FAIL  ERH.ne120_g16.ICN.jaguarpf 
PASS  SMS.ne120_g16.I.jaguarpf 
FAIL  ERS.ne120_g16.I.jaguarpf
  edinburgh/lf95 interactive testing: All PASS except...
006 erAL4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 7
007 brAL4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 6
008 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
025 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
026 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
027 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  edinburgh/CESM testing: ...
PASS  ERS.ne30_g16.I1850CN.edinburgh_pgi
PASS  ERS.ne30_g16.I1850CN.edinburgh_lahey
  edinburgh/PTCLM testing: All PASS up to...
14 PTCLM.30770_US-UMB_ICN_exit_spinup.PTCLM                     PASS
  mirage,storm/ifort interactive testing: All PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_34

Changes answers relative to baseline:

  f09_gx1v6, f19_gx1v6 are similar climate but different because of new RTM mapping files

===============================================================
===============================================================
Tag name:  clm4_0_34
Originator(s):  erik (Erik Kluzek)
Date: Thu Aug 18 13:14:01 MDT 2011
One-line Summary: Bring tcens branch to trunk, fix a few issues

Purpose of changes:

Remove -pftlc to mksurfdata.pl. Correct units of H2OSNOTOP, HC, and HCSOI history fields.
Remove fget_archdev. Fix single point restarts from Brenden Rogers (although now there
is a PIO issue). Fix pio error when clm is running at same grid as RTM from Mariana. 
Move Tony's "tcens" DART ensemble branch to trunk. Add save statement to ncdio. Have 
chkdatmfiles.ncl check both grid and frac files. 
Update pio/MCT/scripts/datm/PTCLM/csm_share.

Bugs fixed (include bugzilla ID):
                                 1383 (Remove no-VOC and MAXPFT=4 tests)
                                 1381 (Can't change monthly average files to NOT be one per month)
                                 1372 (pio problem writing out RTM hist fields at RTM res)
                                 1361 (Problem with transient compsets for PTCLM)
                                 1358 (incorrect units for a few history fields)
                                 1025 (SCM mode can NOT use a global finidat file) (partial)
                                 1017 (SCM mode can NOT restart) (partial)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1392 (US-UMB site has some incorrect data)
                                 1393 (error when running Gregorian calendar)
                                 1396 (pio problem reading 2D data with 1st dim=1)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system:
   Add -ninst_lnd for multiple ensembles of CLM for data assimulation to configure.
   Build pio and mct as seperate libraries (add -mct_dir/pio_dir to configure).

   Set multiple instances with NINST_LND env variable in env_mach_pes.xml
   (make sure NTASKS_LND is >= NINST_LND)

Describe any changes made to the namelist:
   Remove fget_archdev option (don't try to get input files from archival device).

   Set multiple instances of namelists by creating a "user_nl_clm" directory

   Inside of the directory place

   user_nl_clm ---- namelist changes to make for ALL instances
   user_nl_clm_1 -- namelist changes for first instance
   user_nl_clm_2 -- namelist changes for first instance
   user_nl_clm_3 -- namelist changes for third instance
.
.
.

   build-namelist will create a namelist for each instance of the model being run.

List any changes to the defaults for the boundary datasets: domain files updated

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
    scripts   to scripts4_110812
    drv       to drvseq4_0_04
    datm      to datm8_110811
    csm_share to share3_110803
    mct       to MCT2_7_0_110804a
    pio       to pio1_3_9

List all files eliminated:

>>>>>>>>>> Delete some 4p and non-VOC tests to reduce testing
  D  models/lnd/clm/test/system/config_files/4p_vorsc_dm
  D  models/lnd/clm/test/system/config_files/17p_scnv_dm
  D  models/lnd/clm/test/system/config_files/4p_vorsc_do
  D  models/lnd/clm/test/system/config_files/17p_scnv_do
  D  models/lnd/clm/test/system/config_files/_scnv_dh
  D  models/lnd/clm/test/system/config_files/4p_vorsc_ds
  D  models/lnd/clm/test/system/config_files/17p_scnv_ds
  D  models/lnd/clm/test/system/config_files/_scnv_dm
  D  models/lnd/clm/test/system/config_files/_scnv_do
  D  models/lnd/clm/test/system/config_files/17p_scnv_m
  D  models/lnd/clm/test/system/config_files/17p_scnv_o
  D  models/lnd/clm/test/system/config_files/17p_scnv_s
  D  models/lnd/clm/test/system/config_files/4p_vorsc_h
  D  models/lnd/clm/test/system/config_files/4p_vorsc_o
  D  models/lnd/clm/test/system/config_files/17p_nrscnv_ds
  D  models/lnd/clm/test/system/config_files/4p_vonrsc_ds
  D  models/lnd/clm/test/system/config_files/4p_vorsc_dh
  D  models/lnd/clm/test/system/config_files/17p_scnv_dh

List all files added and what they do:

>>>>>>>>>> Add tests for multi-instance
  A  models/lnd/clm/test/system/config_files/_nrnil3sc_dh
  A  models/lnd/clm/test/system/config_files/_nrnil3sc_dm
  A  models/lnd/clm/test/system/config_files/_nil3sc_dh
  A  models/lnd/clm/test/system/config_files/_nil3sc_dm
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_1
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_2
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_3

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Remove old tests add new multi-instance tests in
  M  models/lnd/clm/test/system/tests_posttag_lynx_nompi
  M  models/lnd/clm/test/system/tests_pretag_bluefire
  M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
  M  models/lnd/clm/test/system/tests_pretag_edinburgh
  M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
  M  models/lnd/clm/test/system/tests_posttag_kraken
  M  models/lnd/clm/test/system/tests_posttag_yong
  M  models/lnd/clm/test/system/tests_posttag_purempi_regression
  M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
  M  models/lnd/clm/test/system/tests_pretag_jaguarpf
  M  models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
  M  models/lnd/clm/test/system/tests_posttag_mirage
  M  models/lnd/clm/test/system/tests_posttag_intrepid_nompi
  M  models/lnd/clm/test/system/tests_posttag_nompi_regression
  M  models/lnd/clm/test/system/tests_posttag_lynx

>>>>>>>>>> Handle clm* for multi-instance files, remove PFTDATA 
  M  models/lnd/clm/test/system/TCB.sh -- Set pio/mct_dir in configure, send MACFILE
           to make, and create clm exec temp for debug mode
  M  models/lnd/clm/test/system/TBL.sh --- compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TBR.sh --- compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TER.sh --- compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TSMrst_tools.sh - compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TSMpergro.sh - compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TSMscript_tools.sh -- Remove PFTDATA setting
  M  models/lnd/clm/test/system/TSM.sh - compare clm* for multi-instance, cat lnd_in_000?  files
  M  models/lnd/clm/test/system/input_tests_master -- add new multi_inst tests remove old
  M  models/lnd/clm/test/system/mknamelist - add quotes
  M  models/lnd/clm/test/system/README - Remove storm
  M  models/lnd/clm/test/system/README.testnames -- Add nil tests remove some 4p no-voc
  M  models/lnd/clm/test/system/TBLrst_tools.sh - compare clm* for multi-instance history
  M  models/lnd/clm/test/system/CLM_runcmnd.sh - remove storm
  M  models/lnd/clm/test/system/test_driver.sh -- use glade paths, add mct/pio_dir
        add gres setting on jaguarpf, remove PFTDATA, remove storm, update cprnc on lynx
  M  models/lnd/clm/test/system/config_files/README - add nil3 config
          change x resolution from T31 to f19 (no datasets at T31 for glc)

>>>>>>>>>> Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850 --------- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000 --- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_vancouverCAN_2000 -- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850 -------- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000 -- Remove PFTDATA

>>>>>>>>>> Remove PFTDATA and -p option, add -nobreak to cprnc.pl, print out more info
  M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl - Remove PFTDATA
  M  models/lnd/clm/tools/ncl_scripts/cprnc.pl ----- Add -nobreak
  M  models/lnd/clm/tools/ncl_scripts/cprnc.ncl ----- Add BREAKONDIFF, print avg/max diffs

>>>>>>>>>> Add NINST_LND and build with new MCT/PIO where need mct_pio_dir
>>>>>>>>>> Handle user_nl_clm directory for multi-instance
  M  models/lnd/clm/bld/configure - Add ninst_lnd/mct_dir/pio_dir options
           change to work with new MCT/PIO
  M  models/lnd/clm/bld/config_files/config_definition.xml - add mct_dir/pio_dir/ninst_lnd/ninst_atm
  M  models/lnd/clm/bld/build-namelist - Add ability to write out multiple ensemble 
           namelist files, handle multiple infiles, and infile directories for multiple
           ensembles
  M  models/lnd/clm/bld/clm.cpl7.template - handle NINST_LND add user_nl_clm directory 
           for multiple ensembles

>>>>>>>>>> Compare grid/frac files, update domain files for datm, handle multiple infiles
  M  models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl - compare grid/frac files
  M  models/lnd/clm/bld/namelist_files/namelist_definition.xml - Add glc_pio stuff
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - New f45, f10, f09,
           f19, T31 domain files
  M  models/lnd/clm/bld/namelist_files/datm-build-namelist - Be able to handle multiple
           infiles
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml - Add glc_pio settings

>>>>>>>>>> Handle multi-instance SPMD and files, remove fget_archdev, fix problem
>>>>>>>>>> of running on RTM grid (mvertens), handle scam restart files (still fails
>>>>>>>>>> because of PIO problem)
  M  models/lnd/clm/src/biogeochem/CNDVMod.F90 - Add inst_suffix to hv files
  M  models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 - Handle multiple instances and
           multiple instances lnd_in and lnd_modelio.nml namelist files
  M  models/lnd/clm/src/main/fileutils.F90 -- Remove set_filename and putfil, simplify
           getfil to NOT do archival retreival
  M  models/lnd/clm/src/main/ndepStreamMod.F90 - Handle multi-instances
  M  models/lnd/clm/src/main/histFileMod.F90 --- Pass mfilt to set_hist_filename, don't
           require mfilt to be one if nhtfrq=0, only use monthly form of filenames if
           nhtfrq=0 AND mfilt=1
  M  models/lnd/clm/src/main/restFileMod.F90 - Handle multi-instance files
  M  models/lnd/clm/src/main/controlMod.F90 -- Remove fget_archdev
  M  models/lnd/clm/src/main/clm_varctl.F90 -- Remove fget_archdev, add inst_* vars
  M  models/lnd/clm/src/main/ncdio_pio.F90 --- Fix problem of running on RTM grid, handle
           multi-instance files, pass vardesc to scam_field_offsets, handle landunit
           in scam_field_offsets, start/count set for all dims, check that dimension
           sizes and names are equal in order to share iodesc
  M  models/lnd/clm/src/main/spmdMod.F90 ---- spmd_init has LNDID passed in
  M  models/lnd/clm/src/main/histFldsMod.F90 - Fix units/long_names
  M  models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - Handle multi-instances and
           multiple instances lnd_in and lnd_modelio.nml namelist files
  M  models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 -- Get LNDID

Summary of testing:

  bluefire: All PASS except TBL tests and...
>>>>>>> rpointer.lnd_* files empty
017 erX51 TER.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -3+-2 cold ..............FAIL! rc= 7
018 brX51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
>>>>>>> Build fails
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
>>>>>>> Build fails
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
>>>>>>> Build fails
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
  bluefire interactive testing: All PASS except... (pio bug 1396)
031 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
032 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
036 brAK8 TBR.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
  bluefire/CESM testing: All PASS except...
FAIL  ERS_RLA.f45_f45.I.bluefire  -- pio bug 1396
>>>>>>> Compare fails because of new domain files/new pftdyn
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_33 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_33 
BFAIL ERS_RLA.f45_f45.I.bluefire.generate.clm4_0_34 
BFAIL ERS_RLA.f45_f45.I.bluefire.compare.clm4_0_33 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_33 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_33 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_33 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_33 
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire.compare_hist.clm4_0_33 -- only glc map area?
FAIL  ERP.f19_g16.IGRCP60CN.bluefire.compare_hist.clm4_0_33 ---- only glc map area?
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_33 
FAIL  PST.f10_f10.I20TRCN.bluefire.compare.clm4_0_33 
FAIL  PET_PT.f10_f10.I20TRCN.bluefire.compare.clm4_0_33 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare_hist.clm4_0_33 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare.clm4_0_33 
  bluefire/PTCLM testing: All PASS
  jaguarpf interactive testing: All PASS except...
014 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
015 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
  edinburgh/lf95 interactive testing: All PASS, except TBL and... (pio bug 1396)
006 erAL4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
007 brAL4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
  mirage,storm/ifort interactive testing: All fail -- problem with pio build
  yong/ifort interactive testing: All fail -- problem with pio build

CLM tag used for the baseline comparison tests if applicable: clm4_0_33

Changes answers relative to baseline: No bit-for-bit, except:

  f10_f10, f45_f45, f09_f09, f19_f19, T31_T31, with new domain files

===============================================================
===============================================================
Tag name:  clm4_0_33
Originator(s):  erik (Erik Kluzek)
Date: Mon Jul 25 14:34:18 MDT 2011
One-line Summary: Move changes on release branch over to trunk

Purpose of changes:

Move changes from release branch over to trunk. Update README files and documentation.
Add new tools testing. Use if masterproc and iulog for output. Move pft mksurfdata into
inputdata. rh files are t-1. All clm tools namelist items in XML database. Fix tools
Makefiles. Survey testlists, move tests around. Remove clm* from path, add quotes in test
scripts, remove CLM_CESMBLD. Remove getfil in mksurfdata, make fdynuse optional. Add
-nomv to getregional. Cleanup help and improve documentation in scripts and XML database.
Update datm8/scripts/drv/cism/csm_share. Update pergro data. Changes answers because of
drv update to cesm1_0_beta22 version (answers are identical to cesm1_0_beta22).

Bugs fixed (include bugzilla ID):
                                 1301 (Add doc on OpenMP fortran tools)
                                 1329 (Add new tool tests)
                                 1338 (Move raw pftdata into inputdata in XML database)
                                 1341 (Error running with crop for a single-point)
                                 1346 (save history namelist to the rh0 files NOT rh1)
                                 1351 (Add all CLM tools namelist items to XML)
                                 1351 (Problem with interpinic on non bluefire machines)
                                 1353 (Huge "ccsm.log" file)
                                 1367 (final_spinup stop time isn't right)
data)
Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1358 (incorrect units for a few history fields)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1361 (Problem with transient compsets for PTCLM)
                                 1372 (pio problem writing out RTM hist fields at RTM res)
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1355 (tlai is zero for first two time-steps in CLMSP)
                                 1326 (Crop and irrigation sims give balance check error)
                                 1310 (Restart files different over different tasks)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts/drv/shr/cism/datm
   scripts   to scripts4_110711
   drv       to drvseq3_1_54
   datm      to datm8_110624
   csm_share to share3_110717
   cism      to cism1_110418

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>> Add new tests for tools
   A models/lnd/clm/test/system/TOPtools.sh ------- Ensure different number of threads
            give the same answers for tools
   A models/lnd/clm/test/system/TBLscript_tools.sh  Comparison test for script tools
   A models/lnd/clm/test/system/TBLrst_tools.sh --- Comparison test for rst_tools
   A models/lnd/clm/test/system/config_files/tools__do ---- Add OpenMP debug config
   A models/lnd/clm/test/system/config_files/17p_nrscnv_ds  Add non-RTM debug serial CN

>>>>>>>>>>> Make copies of existing files to inside of 
>>>>>>>>>>> individual tools so that tools can be standalone
   A models/lnd/clm/tools/mksurfdata/clm_varpar.F90
   A models/lnd/clm/tools/mksurfdata/shr_file_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_timer_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_log_mod.F90
   A models/lnd/clm/tools/mksurfdata/fileutils.F90
   A models/lnd/clm/tools/mksurfdata/shr_const_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_string_mod.F90
   A models/lnd/clm/tools/mksurfdata/clm_varctl.F90
   A models/lnd/clm/tools/mksurfdata/shr_sys_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_kind_mod.F90
   A models/lnd/clm/tools/mksurfdata/nanMod.F90
   A models/lnd/clm/tools/mksurfdata/Mkdepends
   A models/lnd/clm/tools/mksurfdata/clm_varpar.F90
   A models/lnd/clm/tools/mkgriddata/mkvarpar.F90
   A models/lnd/clm/tools/mkgriddata/clm_varctl.F90
   A models/lnd/clm/tools/mkgriddata/clm_varpar.F90
   A models/lnd/clm/tools/mkgriddata/shr_sys_mod.F90
   A models/lnd/clm/tools/mkgriddata/shr_log_mod.F90
   A models/lnd/clm/tools/mkgriddata/ncdio.F90
   A models/lnd/clm/tools/mkgriddata/shr_kind_mod.F90
   A models/lnd/clm/tools/mkgriddata/shr_const_mod.F90
   A models/lnd/clm/tools/mkgriddata/domainMod.F90
   A models/lnd/clm/tools/mkgriddata/areaMod.F90
   A models/lnd/clm/tools/mkgriddata/nanMod.F90
   A models/lnd/clm/tools/mkgriddata/Mkdepends
   A models/lnd/clm/tools/mkdatadomain/Mkdepends
   A models/lnd/clm/tools/mkdatadomain/shr_kind_mod.F90
   A models/lnd/clm/tools/mkdatadomain/shr_const_mod.F90

>>>>>>>>>>> Add new README files to talk about testing and file copies
   A models/lnd/clm/tools/README.testing
   A models/lnd/clm/tools/README.filecopies

>>>>>>>>>>> Add a new chapter for PTCLM
   A models/lnd/clm/doc/UsersGuide/ptclm.xml

List all existing files that have been modified, and describe the changes:


>>>>>>>>>>> Remove CLM_CESMBLD, remove clm* in pathname, add quotes in tests
>>>>>>>>>>> fix some spelling and unused vars, add new scripts tests
M    models/lnd/clm/test/system/TCB.sh -------------- Remove CLM_CESMBLD
M    models/lnd/clm/test/system/TSMncl_tools.sh ----- Remove clm* in pathname
M    models/lnd/clm/test/system/TBL.sh -------------- Remove clm* in pathname
M    models/lnd/clm/test/system/README.testnames ---- Update for new tests
M    models/lnd/clm/test/system/TBR.sh -------------- Remove unused cfgdir
M    models/lnd/clm/test/system/TCBtools.sh --------- Remove clm* in pathname, fix spelling
M    models/lnd/clm/test/system/TER.sh -------------- Remove unused cfgdir
M    models/lnd/clm/test/system/test_driver.sh ------ Remove CLM_CESMBLD, change temp on lynx
M    models/lnd/clm/test/system/TSMrst_tools.sh ----- Remove unused cfgdir, add quotes 
                in comparison
M    models/lnd/clm/test/system/nl_files/getregional - Add -nomv option in
M    models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850 - Put -exedir last
M    models/lnd/clm/test/system/input_tests_master --- Add TBLtools, TOPtools, 
                TBLrst_tools, TBLscript_tools tests in
M    models/lnd/clm/test/system/TSMtools.sh ---------- Add CLM_RERUN (needed for
                TOPtools which runs the same test over for different threads)
                Remove clm* from path add quotes to some if tests
M    models/lnd/clm/test/system/TBLtools.sh ---------- Remove clm* from path

>>>>>>>>>>> Move tests around a bit
M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M    models/lnd/clm/test/system/tests_pretag_edinburgh_nompi - Add TOP test
M    models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
M    models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>> Make fdynuse file optional and remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mklaiMod.F90 ---- Remove fdynuse file,
            remove use of getfil, all averaging is the same (no *_pft options)
M    models/lnd/clm/tools/mksurfdata/mksoilMod.F90 --- Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkharvestMod.F90  Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/creategridMod.F90 Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90 - Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkvocefMod.F90 -- Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkglacierMod.F90  Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90 Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/areaMod.F90 ----- Remove _pft methods
M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Make mksrf_fdynuse optional
            remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mklanwatMod.F90 - Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ---- Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850-2005.txt -- new paths

>>>>>>>>>>> Updated RMS differences, and add -nomv option to getregional_datasets
M    models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat ---------- Updated RMS differences
M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- Add -nomv option
M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Add NOMV env var

>>>>>>>>>>> Fix bug 1351
M    models/lnd/clm/tools/interpinic/interpinic.F90 -------- Make sure: htop_var, 
            fpcgrid_var, present_var, itypveg_var are set
M    models/lnd/clm/tools/interpinic/interpinic.runoptions - Update the input file to use

>>>>>>>>>>> Work on formatting, remove use of getfils
M    models/lnd/clm/tools/mkgriddata/mkgriddata.F90 - Work on formatting a bit, 
            removed use of fileutils
M    models/lnd/clm/tools/mkgriddata/areaMod.F90 ---- Remove use of getfil
M    models/lnd/clm/tools/mkdatadomain/create_domain.F90 - Work on output write

>>>>>>>>>>> Update documentation in README files
M    models/lnd/clm/test/system/config_files/README
M    models/lnd/clm/bld/namelist_files/use_cases/README
M    models/lnd/clm/test/system/README
M    models/lnd/clm/tools/mkgriddata/README
M    models/lnd/clm/tools/mkdatadomain/README
M    models/lnd/clm/tools/interpinic/README
M    models/lnd/clm/tools/README.testing
M    models/lnd/clm/tools/README
M    models/lnd/clm/bld/README

>>>>>>>>>>> Sync up tools Makefile, make Filepath standalone (only includes .)
>>>>>>>>>>> Work on formatting, set OPT default, add TOOLROOT default
>>>>>>>>>>> compare to null instead of strip
M    models/lnd/clm/tools/mksurfdata/Makefile
M    models/lnd/clm/tools/mksurfdata/Filepath
M    models/lnd/clm/tools/mksurfdata/Srcfiles - Remove spmdMod,fileutils,
            abortutils/shr_cal_mod, ESMF, mpi, shr_mpi_mod
M    models/lnd/clm/tools/interpinic/Makefile
M    models/lnd/clm/tools/mkgriddata/Filepath
M    models/lnd/clm/tools/mkgriddata/Srcfiles - Remove fileutils,spmdMod,
            abortutils,shr_timer_mod,shr_mpi_mod,shr_file_mod,MPI
M    models/lnd/clm/tools/mkgriddata/Makefile
M    models/lnd/clm/tools/mkdatadomain/Filepath
M    models/lnd/clm/tools/mkdatadomain/Makefile

>>>>>>>>>>> Cleanup help and documentation
M    models/lnd/clm/bld/configure --------------- Cleanup help, remove cesm_bld
M    models/lnd/clm/bld/queryDefaultNamelist.pl - Cleanup help
M    models/lnd/clm/bld/listDefaultNamelist.pl -- Add more description, documentation
            set maxpft for crop
M    models/lnd/clm/bld/build-namelist ---------- Cleanup help, add papi_inparm
            remove some list options for non-CLM vars
M    models/lnd/clm/bld/clm.cpl7.template ------- Remove clm* in path
            remove warning about CAM and CLM dtime, remove comment about *.h files

>>>>>>>>>>> Make sure all 1x1 files are in supported single-point res
M    models/lnd/clm/bld/config_files/config_definition.xsl - Add CLM in descriptions
M    models/lnd/clm/bld/config_files/config_definition.xml - Add 
            1x1_numaIA,1x1_smallvilleIA to supported single-point resolutions
            cleanup spelling and a few descriptions

>>>>>>>>>>> Work on documentation descriptions, document all tools namelist items
M    models/lnd/clm/bld/namelist_files/checklatsfiles.ncl --------- Add doc, continue
            if file NOT found rather than abort
M    models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl --------- Add doc, continue
            if file NOT found rather than abort
M    models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Work on descriptions,
            add in all mksurfdata/mkdatadomain/mkgriddata namelist vars, add in 
            new driver namelist vars (so documented in table in UG), 
            add HCN,CH3CN to drydep
M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Add datasource
            small formatting change
M    namelist_files/namelist_defaults_drv.xml --------------------- Fix final_spinup
            (bug 1367)
M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ------ Add attributes
            to output for: crop, irrig, ad_spinup, and source
M    models/lnd/clm/bld/namelist_files/namelist_definition.xsl ---- Work to improve
            output formatting of table
M    models/lnd/clm/bld/namelist_files/datm-build-namelist -------- Cleanup help / source
M    models/lnd/clm/bld/namelist_files/checktopofiles.ncl --------- Change res list,
            add documentation, continue rather than abort if file not found
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml Update paths
            to landuse for mksurfdata as all in repo now, add default values for
            other mksurfdata namelist items

>>>>>>>>>>> Update documentation for latest release
M    models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
M    models/lnd/clm/doc/UsersGuide/single_point.xml
M    models/lnd/clm/doc/UsersGuide/special_cases.xml
M    models/lnd/clm/doc/UsersGuide/tools.xml
M    models/lnd/clm/doc/UsersGuide/limitLineLen.pl
M    models/lnd/clm/doc/UsersGuide/preface.xml
M    models/lnd/clm/doc/UsersGuide/clm_ug.xml
M    models/lnd/clm/doc/UsersGuide/adding_files.xml
M    models/lnd/clm/doc/UsersGuide/appendix.xml
M    models/lnd/clm/doc/UsersGuide/custom.xml
M    models/lnd/clm/doc/UsersGuide/Makefile

>>>>>>>>>>> Update documentation for latest release
M    models/lnd/clm/doc/Quickstart.userdatasets
M    models/lnd/clm/doc/IMPORTANT_NOTES
M    models/lnd/clm/doc/Quickstart.GUIDE
M    models/lnd/clm/doc/CodeReference/Filepath
M    models/lnd/clm/doc/KnownLimitations
M    models/lnd/clm/doc/KnownBugs
M    models/lnd/clm/doc/README
M    README

>>>>>>>>>>> Add if masterproc, work on documentation, use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/CropRestMod.F90 ---------- Add if masterproc
M    models/lnd/clm/src/biogeochem/CASAMod.F90 -------------- Cleanup endrun statement
M    models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 --- Use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/CNDVMod.F90 -------------- Use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------ Ensure arepr is initialized
            (bug 1341)
M    models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Comment out debug write
M    models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90 - Use iulog NOT unit 6

>>>>>>>>>>> Add if masterproc, work on documentation, rh files are t-1
M    models/lnd/clm/src/main/fileutils.F90 --- Add if masterproc
M    models/lnd/clm/src/main/pftdynMod.F90 --- Add if masterproc (fix bug 1353)
M    models/lnd/clm/src/main/histFileMod.F90 - Add if masterproc, rh files are t-1
            (bug 1346)
M    models/lnd/clm/src/main/clmtype.F90 ----- Work on documentation


Summary of testing:

  bluefire: All PASS except... (up to 43)
004 blC91 TBL.sh _sc_dh clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 5
008 blTZ1 TBL.sh 21p_cncrpsc_dh clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 5
011 blD91 TBL.sh _persc_dh clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 5
015 blEH1 TBL.sh 4p_vorsc_dh clm_std^nl_urb 20021231:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic ......FAIL! rc= 5
019 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 5
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 5
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 5
028 smG41 TSM.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 10
029 erG41 TER.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
030 brG41 TBR.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
031 blG41 TBL.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 4
035 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 5
039 blG61 TBL.sh _scnv_dh clm_std^nl_urb 20020101:1800 1.9x2.5 gx1v6 48 startup .................FAIL! rc= 5
043 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 5
  bluefire interactive testing: All PASS except TBL tests
  bluefire/CESM testing: All PASS except compare tests to clm4_0_32
  bluefire/CESM extra testing (show that answers are identical with cesm1_0_beta22):
PASS  ERI.T31_g37.IGCN.bluefire
PASS  ERI.T31_g37.IGCN.bluefire.compare.cesm1_0_alpha22a
PASS  ERS.T31_g37.ITEST.bluefire
PASS  ERS.T31_g37.ITEST.bluefire.compare_hist.cesm1_0_alpha22a
PASS  ERS.T31_g37.ITEST.bluefire.compare.cesm1_0_alpha22a
PASS  ERS.f19_g16.IGCN.bluefire
PASS  ERS.f19_g16.IGCN.bluefire.compare_hist.cesm1_0_alpha22a
PASS  ERS.f19_g16.IGCN.bluefire.compare.cesm1_0_alpha22a
PASS  ERS.f45_g37.I4804.bluefire
PASS  ERS.f45_g37.I4804.bluefire.compare_hist.cesm1_0_alpha22a
PASS  ERS.f45_g37.I4804.bluefire.compare.cesm1_0_alpha22a
PASS  SMS_RLA.f45_f45.I.bluefire
PASS  SMS_RLA.f45_f45.I.bluefire.compare_hist.cesm1_0_alpha22a
PASS  SMS_RLA.f45_f45.I.bluefire.compare.cesm1_0_alpha22a
PASS  SMS_RLB.f45_f45.ITEST.bluefire
PASS  SMS_RLB.f45_f45.ITEST.bluefire.compare_hist.cesm1_0_alpha22a
PASS  SMS_RLB.f45_f45.ITEST.bluefire.compare.cesm1_0_alpha22a
  jaguarpf interactive testing: All PASS except...
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -10 arb_ic ...............FAIL! rc= 5
008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 5
012 blVU4 TBL.sh 21p_cncrpsc_ds clm_stdIgnYr^nl_crop 20020101:3600 1x1_smallvilleIA test -1100 cold FAIL! rc= 5
014 blAK4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 5
015 smG43 TSM.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 10
016 erG43 TER.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
017 brG43 TBR.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
018 blG43 TBL.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 4
022 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -670 arb_ic .................FAIL! rc= 5
026 blSn3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arFAIL! rc= 5
030 blQQ4 TBL.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold .............FAIL! rc= 5
034 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 5
038 blS63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 5
040 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
042 bl954 TBLscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ..........FAIL! rc= 6
046 bl9T4 TBLscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__ds FAIL! rc= 6
050 bl9C4 TBLscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds ...FAIL! rc= 6
  edinburgh/lf95 interactive testing: All PASS except...
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 7
014 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic ...FAIL! rc= 7
  edinburgh/lf95 testing: All PASS except TBL tests
  lynx/intel testing: All PASS except TBL tests

CLM tag used for the baseline comparison tests if applicable: clm4_0_32

Changes answers relative to baseline: Yes (Driver change)

    But, answers are identical to cesm1_0_beta22 where the driver change
    was already in effect.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: larger than roundoff/same climate

===============================================================
===============================================================
Tag name:  clm4_0_32
Originator(s):  erik (Erik Kluzek)
Date: Thu May 19 15:18:49 MDT 2011
One-line Summary: Make I1850SPINUPCN compset use MOAR data, various bug fixes, work on test lists

Purpose of changes:

Update datm and scripts so can run I1850SPINUPCN compset with MOAR data. Fix CN units.
Fix some documentation for crop. Add attribute that notes that flux variables are NOT
multiplied by landfrac. Change align year for I4804 and I4804CN compsets, add append/warn
option to xmlchange. Some clarifications to clm namelist. build-namelist can run list
options without a config_cache file. Add comment/title to output files. Remove the
2.65x3.33 grid, no longer supported. Work on test lists a bit.

Bugs fixed (include bugzilla ID):
                                 1337 (have ISPINUPCN compset use MOAR data)
                                 1336 (evaluate CLM testing for release)
                                 1327 (correct documentation of CN variable units)
                                 1158 (make 4804 compsets consistent with 1850 etc.)
                                 1151 (remove co2_ppmv when co2_type is NOT constant)
                                 1140 (build-namelist -list options die with config file)
                                 1108 (have append/warn mode for xmlchange)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1367 (final_spinup stop time isn't right)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: 

   I1850SPINUP compset changed to use MOAR data

   DATM_CPL_* variables added to env_conf.xml to set casename, years run over
   I4804 compsets ALIGN year changed to agree with doc. and I1850 compsets

   New options to xmlchange -- allow you to append (-a) to the end of something already
   there and another option (-w) warn you and abort if already set.

Describe any changes made to the namelist: Add options to build-namelist

    Add -co2_ppmv and -rtm_tstep options to set co2_ppmv when co2_type is constant
    and set rtm time-step when RTM is on.

    This way co2_ppmv and rtm_nsteps do NOT show up in the namelist if they aren't needed.

List any changes to the defaults for the boundary datasets: Remove 2.65x3.33 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self, slevis (units change), sacks (crop doc)

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, datm
    scripts   to scripts4_110517
    csm_share to share3_110516
    datm      to datm8_110517b

List all files eliminated:

>>>>>>>>>>>>> Remove as no longer needed to get lists for documentation
   D   models/lnd/clm/doc/UsersGuide/config_cache.xml

List all files added and what they do:

>>>>>>>>>>>>> Add new test configurations
   A   models/lnd/clm/test/system/config_files/_scnv_dm
   A   models/lnd/clm/test/system/config_files/17p_scnv_dm
   A   models/lnd/clm/test/system/config_files/17p_scnv_ds
   A   models/lnd/clm/test/system/config_files/17p_nrcnsc_do
   A   models/lnd/clm/test/system/config_files/17p_nrcnsc_ds
   A   models/lnd/clm/test/system/config_files/17p_scnv_m
   A   models/lnd/clm/test/system/config_files/17p_scnv_o
   A   models/lnd/clm/test/system/config_files/17p_scnv_s
   A   models/lnd/clm/test/system/config_files/17p_cnnfsc_dh -- turn on NOFIRE
   A   models/lnd/clm/test/system/config_files/17p_cnnfsc_dm -- turn on NOFIRE
   A   models/lnd/clm/test/system/config_files/17p_cnnfsc_do -- turn on NOFIRE
   A   models/lnd/clm/test/system/config_files/21p_nrcncrpsc_s
   A   models/lnd/clm/test/system/config_files/21p_nrcncrpsc_ds

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/config_files/README

>>>>>>>>>>>>> Change tests a bit to make them more consistent with naming convention
>>>>>>>>>>>>> make sure tests are covered, and have no-RTM tests for single-point
   M   models/lnd/clm/test/system/README.testnames
   M   models/lnd/clm/test/system/nl_files/clm_spin --- Use MOAR data on bluefire
   M   models/lnd/clm/test/system/input_tests_master

>>>>>>>>>>>>> Change test lists
   M   models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M   models/lnd/clm/test/system/tests_pretag_bluefire
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh
   M   models/lnd/clm/test/system/tests_posttag_kraken
   M   models/lnd/clm/test/system/tests_posttag_yong
   M   models/lnd/clm/test/system/tests_posttag_purempi_regression
   M   models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
   M   models/lnd/clm/test/system/tests_posttag_mirage
   M   models/lnd/clm/test/system/tests_posttag_intrepid
   M   models/lnd/clm/test/system/tests_posttag_intrepid_nompi
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/tests_posttag_lynx

>>>>>>>>>>>>> Add -co2_ppmv, and -rtm_tstep options to build-namelist
>>>>>>>>>>>>> Don't require config file for build-namelist list options
>>>>>>>>>>>>> Remove 2.65x3.33 files, add capability to handle MOAR data
   M   models/lnd/clm/bld/build-namelist
   M   models/lnd/clm/bld/clm.cpl7.template
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>>>>>>>> Correct documentation of units from kg to g
   M   models/lnd/clm/src/biogeochem/CNMRespMod.F90
   M   models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 -- Also documentation changes
            from Bill Sacks
   M   models/lnd/clm/src/biogeochem/CNDecompMod.F90
   M   models/lnd/clm/src/biogeochem/CNAllocationMod.F90
   M   models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90

>>>>>>>>>>>>> Add title and comment attributes to output files
   M   models/lnd/clm/src/main/histFileMod.F90
   M   models/lnd/clm/src/main/restFileMod.F90

Summary of testing:

  bluefire interactive testing: All PASS up to...
006 smC97 TSM.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 10
  bluefire/CESM testing: All PASS except...
BFAIL PST.f45_g37.I1850CN.bluefire.compare.clm4_0_31
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_31

CLM tag used for the baseline comparison tests if applicable: clm4_0_31

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_31
Originator(s):  erik (Erik Kluzek)
Date: Fri May 13 17:11:38 MDT 2011
One-line Summary: Fix answers for transient_CN, fix interpinic

Purpose of changes:

Fix interpinic test with finidat files. Fix CNPrecisionControl so answers with transient
CN are same as clm4_0_26 without crop.

Bugs fixed (include bugzilla ID):
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1319 (interpinic doesn't interpolate *_PERIOD)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1367 (final_spinup stop time isn't right)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>>>> Add transient 20th Century namelist config
   A   models/lnd/clm/test/system/nl_files/clm_transient_20thC

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add f19 transient-CN tests that start in 1979 (which showed bug 1335)
   M   models/lnd/clm/test/system/input_tests_master - Add f19 transient CN tests
              Also make glc_nec interpinic test run for f09@1850
   M   models/lnd/clm/test/system/README.testnames --- Add run-4 for f19 transient CN
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi ------ Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_posttag_purempi_regression - Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_posttag_hybrid_regression -- Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi ------ Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression --- Add f19 transient_CN
test

>>>>>>>>>>>>>> Put changes from clm4_0_27 back in except those that cause runs to fail
   M   models/lnd/clm/tools/interpinic/interpinic.F90
   M   models/lnd/clm/tools/interpinic/Srcfiles ------ Add shr_const_mod.F90 back in

>>>>>>>>>>>>>>
   M   models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90 - Add if ( crop_prog ) to
               a crop change that needed it
   M   models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 ---- Remove pft_ctrunc not used
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 -- Remove pft_ctrunc not used
   M   models/lnd/clm/src/biogeochem/DryDepVelocity.F90 -------- Set wesveg for crop_prog

Summary of testing:

  bluefire extra interactive testing:
001 bl853 TBLtools.sh interpinic tools__o runoptions ............................................PASS
001 sm893 TSMrst_tools.sh _sc_do interpinic clm_std^nl_urb 20000101:1800 1.9x2.5 gx1v6 4x5 gx3v7 -1 PASS
001 sm857 TSMrst_tools.sh 17p_cnsc_o interpinic clm_std^nl_urb 18500101:1800 1.9x2.5 gx1v6@1850 10x1PASS
002 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6PASS
003 sm813 TSMrst_tools.sh 17p_cndvsc_do interpinic clm_std^nl_urb 18500101:1800 1.9x2.5 gx1v6@1850 4PASS
>>>>> This test compares to clm4_0_30 and rightly shows that answers change
001 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
  bluefire/CESM testing: All PASS except... (why did these comparisons PASS in clm4_0_27)
BFAIL ERP.f19_g16.IGRCP60CN.bluefire.compare.clm4_0_30 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_30 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_30 
  bluefire/CESM testing compared to cesm1_0_beta19:
PASS  SMS_D.f09_g16.BRCP45CN.bluefire 
PASS  SMS_D.f09_g16.BRCP45CN.bluefire.compare_hist.cesm1_0_beta19 
PASS  SMS_D.f09_g16.BRCP45CN.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f09_f09.FAMIPCN.bluefire 
PASS  ERS.f09_f09.FAMIPCN.bluefire.compare_hist.cesm1_0_beta19 
PASS  ERS.f09_f09.FAMIPCN.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPC5.bluefire 
PASS  ERS.f19_f19.FAMIPC5.bluefire.compare_hist.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPC5.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPCN.bluefire 
PASS  ERS.f19_f19.FAMIPCN.bluefire.compare_hist.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPCN.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f09_g16.BRCP45CN.lynx_pgi 
PASS  ERS.f09_g16.BRCP45CN.lynx_pgi.compare_hist.cesm1_0_beta19 
PASS  ERS.f09_g16.BRCP45CN.lynx_pgi.compare.cesm1_0_beta19 

CLM tag used for the baseline comparison tests if applicable: clm4_0_30

Changes answers relative to baseline: Some transient_CN tests are different
   because of bug 1335 introduced in clm4_0_27
   
   With these changes answers are the same as clm4_0_26

===============================================================
===============================================================
Tag name:  clm4_0_30
Originator(s):  erik (Erik Kluzek)
Date: Wed May 11 14:32:19 MDT 2011
One-line Summary: New finidat/fsurdat files for T31

Purpose of changes:

Externals update, fix some PTCLM problems. New finidat/fsurdat files for T31, make sure
works.

Bugs fixed (include bugzilla ID):
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1248 (PTCLM can only go to 2005)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1319 (interpinic doesn't interpolate *_PERIOD)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    New finidat files for T31
    New fsurdat file for T31@2000

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, mct, pio

    scripts to scripts4_110511
    mct     to MCT2_7_0_110504a
    pio     to pio1_3_0

List all files eliminated: None

List all files added and what they do:

   A   models/lnd/clm/test/system/config_files/17p_cnsc_h
   A   models/lnd/clm/test/system/config_files/17p_cnsc_o

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/README.testnames --- Add R f19 rcp4.5 resol
   M   models/lnd/clm/test/system/input_tests_master - Make some tests startup, add
          some rcp tests, change some tests from T31 to f19
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add new finidat
          files for T31@1850/2000, add new surdata file for T31@2000, remove empty
          half-degree pftdyn file

Summary of testing:

  bluefire: All PASS except...
024 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
026 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
049 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
054 erJ61 TER.sh 4p_casasc_dh clm_std^nl_urb 20021230:1800 1.9x2.5 gx1v6 10+38 cold .............FAIL! rc= 5
055 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:1800 1.9x2.5 gx1v6 72+72 cold ..........FAIL! rc= 5
056 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:1800 1.9x2.5 gx1v6 48 cold ................FAIL! rc= 4
  bluefire interactive testing: All PASS
  bluefire extra interactive testing:
001 smE13 TSM.sh 17p_vorsc_do clm_std^nl_urb 20021230:1800 48x96 gx3v7 96 startup ...............PASS
001 smH13 TSM.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:1800 48x96 gx3v7@1850-2000 96 startup PASS
  bluefire/CESM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_29 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_29 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_29 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_29 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_29 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_29 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_29 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_29 
BFAIL ERS_E.T31_g37.I1850.bluefire.compare.clm4_0_29 
BFAIL ERI.T31_g37.IG1850.bluefire.compare.clm4_0_29 
BFAIL ERS_D.f19_g16.IGRCP26CN.bluefire.compare.clm4_0_29 

  bluefire/CESM rcps extra testing: All PASS...
PASS  SMS.f09_g16.IRCP26CN.bluefire 
PASS  SMS.f09_g16.IRCP45CN.bluefire 
PASS  SMS.f09_g16.IRCP60CN.bluefire 
PASS  SMS.f09_g16.IRCP85CN.bluefire 
PASS  SMS.f09_g16.IGRCP26CN.bluefire 
PASS  SMS.f09_g16.IGRCP45CN.bluefire 
PASS  SMS.f09_g16.IGRCP60CN.bluefire 
PASS  SMS.f09_g16.IGRCP85CN.bluefire 
PASS  SMS.f19_g16.IRCP26CN.bluefire 
PASS  SMS.f19_g16.IRCP45CN.bluefire 
PASS  SMS.f19_g16.IRCP60CN.bluefire 
PASS  SMS.f19_g16.IGRCP45CN.bluefire 
PASS  SMS.f19_g16.IGRCP85CN.bluefire 

  bluefire/PTCLM testing: All PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_29

Changes answers relative to baseline: no bit-for-bit (except T31 with new files)

===============================================================
===============================================================
Tag name:  clm4_0_29
Originator(s):  erik (Erik Kluzek)
Date: Thu May  5 14:19:04 MDT 2011
One-line Summary: Backout interpinic changes to one that works

Purpose of changes:

Backout interpinic to Mariana's non2dgrid version. Won't work for new
files (have to remove fields to get it to work). Adds back in bugs 1318 and 1319.
Add more comparison tests for tools and add cprnc.pl/ncl scripts to compare files that 
don't have a time-axis.

Bugs fixed (include bugzilla ID):
                                 1328 (interpinic gives bad results that can NOT be used!)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1319 (interpinic doesn't interpolate *_PERIOD)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>>>> Add scripts to compare two NetCDF files and report if different
>>>>>>>>>>>>>> This mimic's the cprnc program, but also works on files without 
>>>>>>>>>>>>>> a time coordinate. For big files it's considerably slower as well.
   A   models/lnd/clm/tools/ncl_scripts/cprnc.pl
   A   models/lnd/clm/tools/ncl_scripts/cprnc.ncl

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add tool comparison tests, use cprnc.pl for tool comparison
   M   models/lnd/clm/test/system/input_tests_master - Add TBLtools test for:
           mkgriddata, mksurfdata, mkdatadomain, and interpinic, remove pftdyn
           mksurfdata test
   M   models/lnd/clm/test/system/CLM_compare.sh ----- Remove unused variable
   M   models/lnd/clm/test/system/TSMtools.sh -------- Copy .txt files over if exist
   M   models/lnd/clm/test/system/TBLtools.sh -------- Use cprnc.pl in place of cprnc binary

>>>>>>>>>>>>>> Add tool comparison tests
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_posttag_yong
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>>>> Add notes on cprnc tools
   M   models/lnd/clm/tools/ncl_scripts/README

>>>>>>>>>>>>>> Move back to Mariana's version of interpinic in non2dgrid08_clm4_0_26
>>>>>>>>>>>>>> This means it won't work for new files, but will work for older files
>>>>>>>>>>>>>> and gives the same answers as the non2dgrid version.
   M   models/lnd/clm/tools/interpinic/interpinic.F90
   M   models/lnd/clm/tools/interpinic/Srcfiles


Summary of testing:

  bluefire interactive testing: These PASS

002 bl853 TBLtools.sh interpinic tools__o runoptions ............................................PASS (same as non2dgrid08_clm4_0_26)
001 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................PASS
002 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................PASS
001 bl654 TBLtools.sh mkgriddata tools__ds namelist .............................................PASS
001 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................PASS
002 blZ94 TBLtools.sh mkdatadomain tools__ds namelist ...........................................PASS

  yong/ifort interactive testing: These PASS

001 bl853 TBLtools.sh interpinic tools__o runoptions ............................................PASS (same as non2dgrid08_clm4_0_26)

CLM tag used for the baseline comparison tests if applicable: clm4_0_28

Changes answers relative to baseline: no bit-for-bit (except interpinic)

===============================================================
===============================================================
Tag name:  clm4_0_28
Originator(s):  erik (Erik Kluzek)
Date: Tue May  3 09:14:24 MDT 2011
One-line Summary: Remove DUST/PROGSSLT in land coupler layer, update driver and scripts

Purpose of changes:

Update drv to branch version, fix ram1/fv issue (remove DUST/PROGSSLT #ifdef's in
lnd_comp_*). Answers will then be identical to clm4_0_26 (except air density sent to
cpl). Don't allow both -irrig and -crop to be on at same time in scripts.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1328 (interpinic gives bad results that can NOT be used!)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): drv, scripts
     scripts to scripts4_110428a
     drv     to branch version: t3148b_tags/t3148b02_drvseq3_1_48

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/bld/build-namelist - Don't allow crop and irrig on at same time

   M models/lnd/clm/tools/interpinic/interpinic.F90 -------- Move input read up
   M models/lnd/clm/tools/interpinic/interpinic.runoptions - Use latest input file

   M models/lnd/clm/test/system/tests_pretag_bluefire -- Remove some tests
   M models/lnd/clm/test/system/README.testnames ------- Don't mix crop and irrig
   M models/lnd/clm/test/system/input_tests_master ----- Change irrig+crop tests to
          just crop


>>>>>>>>>> Remove DUST, PROGSSLT and VOC #ifdef's
   M models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
   M models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90

Summary of testing:

  bluefire: All PASS except...
024 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
026 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
049 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
058 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_irrig^nl_crop 20000101:1800 1.9x2.5 gx1v6 10FAIL! rc= 4
  bluefire/CESM testing: All PASS except... (compare to clm4_0_26 with updated datm)
SFAIL ERS_D.T31_g37.IGRCP26CN.bluefire.GC.160557 
SFAIL ERP.T31_g37.IGRCP60CN.bluefire.GC.160557 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_26_datmdens 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_26_datmdens

CLM tag used for the baseline comparison tests if applicable: clm4_0_27

Changes answers relative to baseline: No bit-for-bit
    Although coupler log file will show changes in fv and ram1 to clm4_0_27, but
    will be identical to clm4_0_26 (although then dens in atm changes)

===============================================================
===============================================================
Tag name:  clm4_0_27
Originator(s):  erik (Erik Kluzek)
Date: Mon May  2 09:37:57 MDT 2011
One-line Summary: Move crop branch over to trunk

Purpose of changes:

Move crop branch to trunk. Add crop and noio options to configure. maxpft option to
configure can now only be a number (removing numpft+1 option to it). Add datasets for
crop. Add T31 historical and rcp2.6 transient dynpft datasets. Remove some of the CPP
tokens (DUST, PROGSSLT, etc.) Bring Marian Vertensteins version of interpinic over to the
trunk as well. This version is faster and is able to run for higher resolution cases.
Remove scaled_harvest and carbon_only namelist options and add suplnitro option
(supplemental Nitrogen which can be: NONE, PROG_CROP_ONLY, or ALL). Add number parameters
for the different nsrest settings, and have only one copy of is_restart in
clm_time_manager. Update to ESMF interface from Tony.

Bugs fixed (include bugzilla ID):
                                 1323 (Remove some unused items)
                                 1319 (interpinic doesn't interpolate *_PERIOD)
                                 1318 (interpinic has trouble with new restart files)
                                 1303 (remove complexity of no-urban in interpinic)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                  901 (remove some CPP tokens)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1328 (interpinic gives bad results that can NOT be used!)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: Yes

   Add -crop and -noio options to configure, remove -dust and -progsslt options
   Remove "numpft+1" option to -maxpft. maxpft can go up to 17 without crop and
   needs to be 21 for crop.

  -crop adds the CROP #ifdef. Removes the DUST, PROGSSLT, CLAMP CPP tokens.
  Also remove: DISTURB, COUP_WRF, NO_DAYLEN_VCMAX, TCX_REMOVE_SEE_NOTES_ABOVE, and
  L2R_Decomp, and some testing/debug CPP defines

Describe any changes made to the namelist: Yes

   Remove Carbon_only and scaled_harvest options 
   Add suplnitro option which can be set to: NONE, PROG_CROP_ONLY, or ALL

   Add new history output variables:

        A5TMIN   5-day running mean of min 2-m temperature                         (K)
        A10TMIN  10-day running mean of min 2-m temperature                        (K)
        GDD0     Growing degree days base  0C from planting                        (ddays)
        GDD8     Growing degree days base  8C from planting                        (ddays)
        GDD10    Growing degree days base 10C from planting                        (ddays)
        GDD020   Twenty year average of growing degree days base  0C from planting (ddays)
        GDD820   Twenty year average of growing degree days base  8C from planting (ddays)
        GDD1020  Twenty year average of growing degree days base 10C from planting (ddays)
        GDDPLANT Accumulated growing degree days past planting date for crop       (ddays)
        GDDHARV  Growing degree days (gdd) needed to harvest                       (ddays)
        GDDTSOI  Growing degree-days from planting (top two soil layers)           (ddays)

List any changes to the defaults for the boundary datasets:
   New point mode for crop: 1x1_numaIA and 1x1_smallvilleIA
   pftcon: pft-physiology.c110425.nc
   surface datasets for crop mode for: f19, f10, 1x1_numaIA, and 1x1_smallvilleIA
   (also crop datasets with crop AND irrigation on)
   finidat file for crop for f19
   New T31 pftdyn file for historical and rcp2.6
   Raw veg and lai datasets for mksurfdata for crop

Describe any substantial timing or memory changes: Crop adds some additional variables
    and if checks that may make small differences in run-time and/or memory

Code reviewed by: self, slevis

List any svn externals directories updated (csm_share, mct, etc.): Almost all

    scripts to scripts4_110421
    share   to share3_110411
    drv     to drvseq3_1_53
    datm    to datm8_110419
    stubs   to stubs1_2_04

List all files eliminated:

>>>>>>>>>>>>>>> Remove test configs that explicitly have dust
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_dh
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_dm
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_do
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_ds
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_h
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_m
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_o
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_dh
    D  models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_dm
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_do
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_h
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_ds
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_o

>>>>>>>>>>>>>>> Remove test for scaled_harvest namelist item
    D  models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv

>>>>>>>>>>>>>>> Remove sample namelists and always use mksurfdata.pl script
    D  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig
    D  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn

>>>>>>>>>>>>>>> Remove these two from changes that mvertens applied
    D  models/lnd/clm/tools/interpinic/addglobal.F90
    D  models/lnd/clm/tools/interpinic/wrap_nf.F90

>>>>>>>>>>>>>>> Update sample IC file 
    D  models/lnd/clm/tools/interpinic/clmi.IQ.1953-01-01_10x15_USGS_simyr2000_c081202.nc

List all files added and what they do:

>>>>>>>>>>>>>>> Add crop test configs
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_do
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_s
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_ds
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dh
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dm
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_do
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_ds
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_h
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_m
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_o
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_s
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_h
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_dh
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_m
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_o
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_dm
>>>>>>>>>>>>>>> Add test configs without dust
    A  models/lnd/clm/test/system/config_files/4p_vorsc_dm
    A  models/lnd/clm/test/system/config_files/4p_vorsc_do
    A  models/lnd/clm/test/system/config_files/4p_vorsc_ds
    A  models/lnd/clm/test/system/config_files/17p_vorsc_h
    A  models/lnd/clm/test/system/config_files/17p_vorsc_m
    A  models/lnd/clm/test/system/config_files/17p_vorsc_o
    A  models/lnd/clm/test/system/config_files/4p_vorsc_h
    A  models/lnd/clm/test/system/config_files/4p_vorsc_o
    A  models/lnd/clm/test/system/config_files/17p_vorsc_dm
    A  models/lnd/clm/test/system/config_files/17p_vorsc_dh
    A  models/lnd/clm/test/system/config_files/17p_vorsc_do
    A  models/lnd/clm/test/system/config_files/17p_vorsc_ds
    A  models/lnd/clm/test/system/config_files/4p_vorsc_dh

>>>>>>>>>>>>>>> Add crop restart variables
    A  models/lnd/clm/src/biogeochem/CropRestMod.F90

>>>>>>>>>>>>>>> Add namelist for crop, and mksurfdata to create crop single point
    A  models/lnd/clm/test/system/nl_files/nl_crop
    A  models/lnd/clm/test/system/nl_files/nl_cn_conly
    A  models/lnd/clm/test/system/nl_files/clm_stdIgnYr
    A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000

    A  models/lnd/clm/test/system/TSMrst_tools.sh - Add test to use finidat files
            run interpinic on it and then make sure you can startup from the result

>>>>>>>>>>>>>>> Explicitly add csm_share files into interpinic build
    A  models/lnd/clm/tools/interpinic/Mkdepends
    A  models/lnd/clm/tools/interpinic/shr_sys_mod.F90
    A  models/lnd/clm/tools/interpinic/shr_log_mod.F90
    A  models/lnd/clm/tools/interpinic/shr_kind_mod.F90
    A  models/lnd/clm/tools/interpinic/shr_const_mod.F90

>>>>>>>>>>>>>>> Add the latest 10x15 initial conditions file to test on
    A  models/lnd/clm/tools/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c100322.nc

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Set maxpft to number
    M  models/lnd/clm/test/system/config_files/README
    M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_m
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_o
    M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
    M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_s
    M  models/lnd/clm/test/system/config_files/_nrmexsc_ds
    M  models/lnd/clm/test/system/config_files/17p_cnsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cnsc_m
    M  models/lnd/clm/test/system/config_files/17p_cnsc_dm
    M  models/lnd/clm/test/system/config_files/_nrvansc_ds
    M  models/lnd/clm/test/system/config_files/17p_cnsc_do
    M  models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
    M  models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
    M  models/lnd/clm/test/system/config_files/17p_cnc13sc_do
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_dm
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_do
    M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
    M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
    M  models/lnd/clm/test/system/config_files/4p_vonrsc_ds
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_h

>>>>>>>>>>>>>>> Remove some tests add new crop tests
    M  models/lnd/clm/test/system/README.testnames ----------------
    M  models/lnd/clm/test/system/tests_posttag_lynx_nompi --------
    M  models/lnd/clm/test/system/tests_pretag_bluefire -----------
    M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi -----
    M  models/lnd/clm/test/system/tests_pretag_edinburgh ----------
    M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi ----
    M  models/lnd/clm/test/system/tests_posttag_yong --------------
    M  models/lnd/clm/test/system/tests_pretag_jaguarpf -----------
    M  models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi -----
    M  models/lnd/clm/test/system/tests_posttag_mirage ------------
    M  models/lnd/clm/test/system/tests_posttag_purempi_regression
    M  models/lnd/clm/test/system/tests_posttag_hybrid_regression -
    M  models/lnd/clm/test/system/tests_posttag_nompi_regression --

    M  models/lnd/clm/test/system/TCBtools.sh ------- Add TOOL_ROOT
    M  models/lnd/clm/test/system/test_driver.sh ---- Use path to glade, update path
    M  models/lnd/clm/test/system/mknamelist -------- Add ability to set finidat file on
         startup
    M  models/lnd/clm/test/system/input_tests_master  Change out vodsrsc for vorsc,
         add crop tests, add interpinic restart tests
    M  models/lnd/clm/test/system/tests_posttag_lynx  Add sm9T4 test
    M  models/lnd/clm/test/system/CLM_runcmnd.sh ---- Remove -d

    M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850  Change from 1850-2000
          to just 1850
    M  models/lnd/clm/test/system/nl_files/clm_irrig -------------- Use ignore_ic_year
          instead of ignore_ic_date

>>>>>>>>>>>>>>> Add ability to add crop in, add -crop to mksurfdata.pl which sets the
>>>>>>>>>>>>>>> numpft=20 namelist item
    M  models/lnd/clm/tools/mksurfdata/mkvarpar.F90 - Add numstdpft
    M  models/lnd/clm/tools/mksurfdata/mkvarctl.F90 - Add numpft
    M  models/lnd/clm/tools/mksurfdata/ncdio.F90 ---- Add nf_get_att_double/nf_get_var_text
    M  models/lnd/clm/tools/mksurfdata/mklaiMod.F90 - Use numpft
    M  models/lnd/clm/tools/mksurfdata/mkfileMod.F90  Add mksrf_flai/mksrf_firrig to file
    M  models/lnd/clm/tools/mksurfdata/areaMod.F90 -- Put numpft in mkvarctl
    M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 - Add numpft to namelist
    M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl  Handle crop and irrig and change 
         names accordingly
    M  models/lnd/clm/tools/mksurfdata/mkpftMod.F90 - Add numpft and add to namelist
         if numpft = 20 add crop in

>>>>>>>>>>>>>>> Bring in interpinic version from Mariana Vertenstein
>>>>>>>>>>>>>>> Make faster and use less memory, update NetCDF interface, make
>>>>>>>>>>>>>>> standalone so not dependant on other directories
    M  models/lnd/clm/tools/interpinic/interpinic.F90 - Make faster by saving indices,
         use less memory, update to F90 NetCDF interface, make standalone
    M  models/lnd/clm/tools/interpinic/fmain.F90 ------ Add -a option to NOT override missing
    M  models/lnd/clm/tools/interpinic/Srcfiles ------- Remove mpi files
    M  models/lnd/clm/tools/interpinic/Filepath ------- Make standalone
    M  models/lnd/clm/tools/interpinic/Makefile ------- Use local MkDepends, compare
           to null, change interface for testing a bit
    M  models/lnd/clm/tools/interpinic/README --------- Add note about SMP, update clmi file
    M  models/lnd/clm/tools/interpinic/interpinic.runoptions Use new file

>>>>>>>>>>>>>>> Add numpft
    M  models/lnd/clm/tools/mkgriddata/mkvarctl.F90

>>>>>>>>>>>>>>> Add crop/noio remove dust and progsslt and CLAMP setting
    M  models/lnd/clm/bld/configure ------------- Add -crop/-noio remove -dust/-progsslt
          turn RTM off for sitespf_pt, error check crop, maxpft, remove CLAMP setting
    M  models/lnd/clm/bld/listDefaultNamelist.pl  Add loop for crop
    M  models/lnd/clm/bld/build-namelist -------- Sense crop=on/off, add suplnitro remove
          Carbon_only
    M  models/lnd/clm/bld/clm.cpl7.template ----- Change order of $CLM_CONFIG_OPTS
          so will be done last and override other settings
    M  models/lnd/clm/bld/config_files/config_definition.xml Add crop/noio, remove dust/progsslt
          have maxpft only allow numbers up to 21

>>>>>>>>>>>>>>>  New files for crop, remove old namelist items add new, add crop datasets
    M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Remove
        Carbon_only add suplnitro, remove scaled_harvest, correct spellings
        1x1_numaIA,1x1_smallvilleIA resolutions
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml --- Add
        1x1_numaIA,1x1_smallvilleIA
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ------ Add
        1x1_numaIA,1x1_smallvilleIA
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- Add
       settings for suplnitro, new fpftcon, finidat for crop f19, add crop parameters
       files for crop for f19,f10,1x1_numaIA,1x1_smallvilleIA, fix T31 files
       turn create_crop_landunit on for crop
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add
       mksrf_flai/mksrf_fvegtyp for crop add crop=on/off for those files

>>>>>>>>>>>>>>> Use nsrest parameters, use secspday/days_per_year, handle prognostic crop
>>>>>>>>>>>>>>> Remove CLAMP/is_restart/DUST/DISTURB/CLAMP
>>>>>>>>>>>>>>> if soil also check if crop, use vegetation indices, add initialization
>>>>>>>>>>>>>>> subroutines, pass crop filters down, suplementatal Nitrogen can be for
>>>>>>>>>>>>>>> nothing, just for crop, or for all.
    M  models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90 ----- Use nsrest parameters, secspday
    M  models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90 ---- Use secspday
    M  models/lnd/clm/src/biogeochem/CNGRespMod.F90 ----------- Handle crop
    M  models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 --- Handle crop
    M  models/lnd/clm/src/biogeochem/CNFireMod.F90 ------------ Use secspday/days_per_year
    M  models/lnd/clm/src/biogeochem/CNMRespMod.F90 ----------- If crop add livestem
    M  models/lnd/clm/src/biogeochem/CASAMod.F90 -------------- Remove CLAMP is_restart
          if soil or crop, nsrest parameters, use veg indices
    M  models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90  Handle crop
    M  models/lnd/clm/src/biogeochem/CNSummaryMod.F90 --------- Remove CLAMP, add crop
    M  models/lnd/clm/src/biogeochem/DUSTMod.F90 -------------- Remove DUST, if soil or crop
    M  models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 ------- Add init and crop-Phenology
    M  models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 --- Add prog crop
    M  models/lnd/clm/src/biogeochem/CNDecompMod.F90 ---------- Pass crop filter down
          use secspday
    M  models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Remove extra use
    M  models/lnd/clm/src/biogeochem/CNrestMod.F90 ------------ Remove is_restart
    M  models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 ---- Add CROP #ifdef to CNDV
    M  models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 ------- Use dayspyr and secspday
    M  models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------ Add init subroutine
          section for prognostic crop, supplemental Nitrogen can be on for nothing,
          crop only, or everything
    M  models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 ---- Add init subroutine, 
          add crop filters
    M  models/lnd/clm/src/biogeochem/CNSetValueMod.F90 -------- Set crop vars remove CLAMP
    M  models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Add if section for crop
    M  models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90 - Remove DISTURB

>>>>>>>>>>>>>>> Use nsrest parameters, update ESMF interface
    M  models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 --- Use nsrest parameters
    M  models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - Update interface from Tony Craig
          Use nsrest parameters, use phase as a keyword.
    M  models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 -- Update interface from Tony Craig
          compare success to ESMF_SUCCESS rather than 0.

>>>>>>>>>>>>>>>  Add istcrop and if statements for istsoil also test for istcrop
>>>>>>>>>>>>>>>  Remove CLAMP/DUST/PROGSSLT/debug ifdef/vcmx25/dw_fcel/dw_flig
>>>>>>>>>>>>>>>  /scaled_harv/ bad hist indices. Set if prog_crop in surfrdMod
>>>>>>>>>>>>>>>  Use secspday and days_per_year, more vars on pft-physiology file
>>>>>>>>>>>>>>>  Add parameters for nsrest settings, new hist vars, error check CROP
    M  models/lnd/clm/src/main/clm_varcon.F90 -------- Add istcrop
    M  models/lnd/clm/src/main/clm_varpar.F90 -------- Add numveg and mxpft
    M  models/lnd/clm/src/main/CNiniTimeVar.F90 ------ Remove CLAMP, if soil or crop
          also set some crop vars
    M  models/lnd/clm/src/main/dynlandMod.F90 -------- If soil or crop
    M  models/lnd/clm/src/main/accumulMod.F90 -------- Remove is_restart, add missing to _PERIOD
    M  models/lnd/clm/src/main/clm_initializeMod.F90 - Remove CLAMP/DUST, use nsrest parameters
          add call to CNEcosystemDynInit
    M  models/lnd/clm/src/main/subgridRestMod.F90 ---- Remove incorrect grid indices (bug 1310)
    M  models/lnd/clm/src/main/accFldsMod.F90 -------- Add GDD0/8/10/PLANT/HARV/TSOI/TDM5/10
    M  models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Remove CLAMP
          CROP & C13 is not valid, add crop vars, remove vcmx25/dw_fcel/dw_flig
    M  models/lnd/clm/src/main/ndepStreamMod.F90 ----- Use secspday in place of 86400
    M  models/lnd/clm/src/main/pftdynMod.F90 --------- Use days_per_year in place of 365
          move pconv/pprod10/pprod100 to pft-physiology file, if soil or crop
          use nsrest parameters, remove scaled_harvest
    M  models/lnd/clm/src/main/iniTimeConst.F90 ------ Add graincn, remove: vcmx25/dw_fcel/dw_flig
    M  models/lnd/clm/src/main/histFileMod.F90 ------- Use secspday in place of 86400
          fix Conventions, use nsrest parameters, comment out indices (bug 1310)
    M  models/lnd/clm/src/main/clm_atmlnd.F90 -------- Remove DUST/PROGSSLT/1==1
    M  models/lnd/clm/src/main/restFileMod.F90 ------- Use nsrest parameters, add CropRest
          fix Conventions
    M  models/lnd/clm/src/main/controlMod.F90 -------- Remove scaled_harvest/Carbon_only
          use nsrest parameters, add suplnitro
    M  models/lnd/clm/src/main/initSurfAlbMod.F90 ---- if soil or crop, send crop filters
          to CNEcosystemDyn
    M  models/lnd/clm/src/main/clm_time_manager.F90 -- Remove COUP_WRF, add get_driver_start_ymd
    M  models/lnd/clm/src/main/filterMod.F90 --------- Add filter for prognostic-crop
          if soil or crop
    M  models/lnd/clm/src/main/clm_varctl.F90 -------- Add parameters for nsrest valid
           values: nsrStartup, nsrContinue, nsrBranch, remove scaled_harvest
           make sure crop allocates all PFT's
    M  models/lnd/clm/src/main/clm_driver.F90 -------- Remove DUST send crop filters
           to CNEcosystemDyn
    M  models/lnd/clm/src/main/initGridCellsMod.F90 -- If crop send istcrop to set_landunit_crop_noncompete
    M  models/lnd/clm/src/main/CASAiniTimeVarMod.F90 - Remove CLAMP
    M  models/lnd/clm/src/main/pftvarcon.F90 --------- Add crop vars, corn,
            temperate sping/winter cereal, and soybean, remove vcmx25/dw_flig/dw_fcel
            add new variables for crop add npcropmin, npcropmax and error checking
    M  models/lnd/clm/src/main/ncdio_pio.F90 --------- Add logical field support
    M  models/lnd/clm/src/main/spmdMod.F90 ----------- Add MPI_LOR
    M  models/lnd/clm/src/main/surfrdMod.F90 --------- Add crop_prog as public module data
            Remove TCX_REMOVE_SEE_NOTES_ABOVE, error checking if prognostic crops avail
            and CROP not defined and vice versa
    M  models/lnd/clm/src/main/clmtype.F90 ----------- New variables for CROP, remove CLAMP
            Remove dw_fcel, dw_flig, vcmx25
    M  models/lnd/clm/src/main/histFldsMod.F90 ------- Remove CLAMP and DUST, T10 output
             for CNDV or CROP, add A5TMIN, A10TMIN, GDD0, GDD8, GDD10, GDD020, GDD820,
             GDD1020, GDDPLANT, GDDTSOI and GDDHARV for crop (as inactive)
             
    M  models/lnd/clm/src/main/mkarbinitMod.F90 ------ If soil or crop

    M  models/lnd/clm/src/riverroute/RtmMod.F90 - Remove L2R_Decomp #ifdef, and #if (1 ==
          Remove is_restart and use clm_time_manager version.
0)

>>>>>>>>>>>>>>> Change if statements on "if soil" to "if soil or crop"
>>>>>>>>>>>>>>> Remove DUST, NO_DAYLEN_VCMAX #ifdefs, is_restart, vcmx25, avcmx, 
>>>>>>>>>>>>>>> and SNICAR stats. vcmx calc is different for crop and btran for soybean
    M  models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - If soil or crop
    M  models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 -- If soil or crop
    M  models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 ---- If soil or crop
    M  models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 --- If soil or crop
    M  models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 --- If soil or crop
    M  models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Remove DUST #ifdef
    M  models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ---- If soil or crop
    M  models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 ------- If soil, urb, wet or crop
    M  models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- If soil or crop
    M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Remove is_restart use
          clm_time_manger version, use nsrest parameters
    M  models/lnd/clm/src/biogeophys/SNICARMod.F90 ----------- Remove commented out SNICAR stats
    M  models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 - If soil or crop
    M  models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Remove NO_DAYLEN_VCMAX,
          and vcmx25,avcmx, vcmx calc different for crop and btran for soybean.

Summary of testing:

  bluefire: All PASS except...
008 blAZ1 TBL.sh 21p_cncrpsc_dh clm_irrig^nl_crop 20020401:3600 10x15 USGS -10 cold .............FAIL! rc= 5
015 blE91 TBL.sh 4p_vorsc_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 arb_ic ...................FAIL! rc= 5
020 blF92 TBL.sh 17p_vorsc_dm clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 5
024 blEH1 TBL.sh 4p_vorsc_dh clm_std^nl_urb 20021231:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic ......FAIL! rc= 5
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
041 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 7
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
032 blF93 TBL.sh 17p_vorsc_do clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 5
056 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
057 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
058 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_irrig^nl_crop 20000101:1800 1.9x2.5 gx1v6 10FAIL! rc= 4
  bluefire/CESM testing: All PASS except... (dens, fv and ram1 change)
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_26 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_26 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_26 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_26 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_26 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_26 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_26 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_26 
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_26 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_26 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_26 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_26 
FAIL  ERI.f19_g16.IG1850.bluefire.compare.clm4_0_26 
SFAIL ERS_D.T31_g37.IGRCP26CN.bluefire.GC.231059 
SFAIL ERP.T31_g37.IGRCP60CN.bluefire.GC.231059 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_26 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_26 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_26 
FAIL  PST.f10_f10.I20TRCN.bluefire.compare.clm4_0_26 
FAIL  PET_PT.f10_f10.I20TRCN.bluefire.compare.clm4_0_26 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare_hist.clm4_0_26 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare.clm4_0_26 
  bluefire/PTCLM testing: All PASS up to..
US-Ha1_ICN_ad_spinup.PTCLM                PASS
  jaguarpf interactive testing: All PASS up to...
008 blAZ3 TBL.sh 21p_cncrpsc_do clm_irrig^nl_crop 20020401:3600 10x15 USGS -10 cold .............FAIL! rc= 5
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
014 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
035 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_irrig^nl_crop 20000101:1800 1.9x2.5 gx1v6 10FAIL! rc= 4
  edinburgh/lf95 interactive testing: All PASS except...
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -10 arb_ic ...............FAIL! rc= 7
010 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic .............FAIL! rc= 7
014 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic ...FAIL! rc= 7
018 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ..FAIL! rc= 7
026 blL74 TBL.sh _nrsc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 7
  mirage,storm/ifort interactive testing: All PASS except...
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_26

Changes answers relative to baseline: no bit-for-bit
    with the exception that the new crop mode is NOT in previous tags

===============================================================
===============================================================
Tag name:  clm4_0_26
Originator(s):  erik (Erik Kluzek)
Date: Wed Mar 23 11:43:00 MDT 2011
One-line Summary: Update externals, driver update changes answers, drydep changes from fvitt, fix bugs

Purpose of changes:

Update externals to latest pre-cesm1_0_beta17 version. driver to beyond cesm1_0_beta16
version -- so answers change. Always update ndep_interp in clm_driver -- so restarts are
exact. Bring in Francis Vitt drydep changes. Remove bad T31 pftdyn datasets add in 
a new T31 rcp2.6 T31 dataset. Fix interpinic _var bug. Remove HIRES from bld. Change 
tools Makefile's so that you can set env variables. Change test_driver to use newer 
version of cprnc.

Bugs fixed (include bugzilla ID):
                                 1284 (Crop restart test fails)
                                 1304 (bug in interpinic *_var)
                                 1308 (tools Make doesn't allow setting env vars)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: more fields added for drydep namelist

List any changes to the defaults for the boundary datasets:
   Remove bad T31 pftdyn datasets 

Describe any substantial timing or memory changes: none

Code reviewed by: self, drydep changes from fvitt and JFL

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, cprnc

   scripts to scripts4_110314
   drv     to drvseq3_1_51
   cprnc   to cprnc_110310

List all files eliminated: None

List all files added and what they do:

   A   README_EXTERNALS -- Describes how to work with externals (similar to cam file)

List all existing files that have been modified, and describe the changes:

   M   README - Update with new 

   M   models/lnd/clm/test/system/CLM_compare.sh - Update for latest cprnc which
           doesn't have a "completed successfully line at the end"
   M   models/lnd/clm/test/system/test_driver.sh - Use newer cprnc on bluefire

>>>>>>>>>>> Change tools build so that you can set env variables for SMP/USER_FC/CC
   M   models/lnd/clm/tools/mksurfdata/Makefile -------- Compare to ,null rather than strip
   M   models/lnd/clm/tools/interpinic/Makefile -------- Compare to ,null rather than strip
   M   models/lnd/clm/tools/mkgriddata/Makefile -------- Compare to ,null rather than strip
   M   models/lnd/clm/tools/mkdatadomain/Makefile ------ Compare to ,null rather than strip

   M   models/lnd/clm/tools/interpinic/interpinic.F90 -- Make sure htop_var/fpcgrid_var
          are initialized to false each time comes into routine (bug 1304)

   M   models/lnd/clm/bld/configure -- Remove HIRES setting for stand-alone testing

   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New rcp2.6 T31
          pftdyn dataset remove rcp4.5,6,8.5 T31 pftdyn files as they only go to 2035

   M   models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - Pick wesveg and index_season
           differently for special landunits, add max for rc, assume no surface
           resistance for SO2 over water, use has_rain logical (from fvitt)
   M   models/lnd/clm/src/main/clm_driver.F90 ----------- Always call ndep_interp
          even if (stream_year_first_ndep /= stream_year_last_ndep) as can change
          answers if not

Summary of testing:

  bluefire: All PASS except TBL tests and...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
063 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
064 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
065 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
  bluefire interactive testing: All PASS except TBL tests
  bluefire/CESM testing: All PASS (even the comparision tests)
  bluefire/PTCLM testing: All PASS up to...
US-Ha1_ICN_ad_spinup.PTCLM                PASS
  edinburgh/lf95 interactive testing: All PASS except...
021 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 10
  mirage,storm/ifort interactive testing: All PASS except TBL tests and...
016 smVx3 TSM.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 10
017 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 5
018 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 5
024 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
026 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
 yong/ifort interactive testing: All PASS except...
011 smD94 TSM.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_25

Changes answers relative to baseline: Yes! Greater than roundoff

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change:(larger than roundoff/same climate

   driver mapping changes, drydep code has changes, ndep_interp is always called
   which changes answers on some platforms/compilers (such as intel compiler).

===============================================================
===============================================================
Tag name:  clm4_0_25
Originator(s):  erik (Erik Kluzek)
Date: Tue Mar 22 10:13:08 MDT 2011
One-line Summary: Always output restart-history files add more meta-data to them, 
      fix urbanc_alpha and 2.5x3.33 datasets, Changes from Keith O on SNOWLIQ/SNOWICE

Purpose of changes:

Move history namelist information to restart history files and always output them. Add
attributes and meta-data to the restart history files. Fix urbanc_alpha test site surface
dataset. Fix datm namelist for urban cases. Use new crop pft-physiology file. Update
scripts and csm_share. Changes from Keith O on SNOWLIQ/SNOWICE so goes to zero rather
than missing value. Update 2.5x3.33 datasets. Fix dvolrdt units documentation, call
mksoifmaxInit.

Bugs fixed (include bugzilla ID):
                                 1247 (Some changes to ncd_pio in clm)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    New pft-physiology file with fields for prognostic crop
    New surface dataset for urbanc_alpha
    New grid/topo/frac/domain files for 2.5x3.33

Describe any substantial timing or memory changes: None

Code reviewed by: self, snowliq/snowice changes by oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, cism, csm_share

    scripts    to scripts4_110204
    datm       to datm8_110210
    cism       to cism1_110220
    csm_share  to share3_110201

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/input_tests_master - Change start dates of urban tests

>>>>>>>>>>>> Move mksoil*Init subroutines private to mksoilMod, and call a mksoilInit
>>>>>>>>>>>> routine from mksrfdata, making sure mksoifmaxInit is called.
   M   models/lnd/clm/tools/mksurfdata/mksoilMod.F90 - Add mksoilInit to call
              mksoitexInit/mksoicolInit and mksoifmaxInit (mksoifmaxInit was missing)
              fix mksoifmaxInit, and make mksoitex/col/fmaxInit routines private
   M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -- Call mksoilInit, 
              remove mksoicol/texInit

>>>>>>>>>>>> Add notes about setting path to NetCDF, and other gmake options
   M   models/lnd/clm/tools/mksurfdata/README
   M   models/lnd/clm/tools/interpinic/README
   M   models/lnd/clm/tools/mkgriddata/README
   M   models/lnd/clm/tools/mkdatadomain/README

   M   models/lnd/clm/bld/queryDefaultNamelist.pl - Remove white-space from input options
   M   models/lnd/clm/bld/listDefaultNamelist.pl -- Also list datm_internal files
   M   models/lnd/clm/bld/build-namelist ---------- Add drv_final_spinup from PTCLM
              document precidence of the different env_conf.xml 

>>>>>>>>>>>> Fix 2.5x3.33 and urbanc_alpha files, change some settings for CLM1PT
>>>>>>>>>>>> or pt1_pt1 resolution, remove ndepsrc.
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Add
              taxmode and dtlimit, add 2.5x3.33 resolution
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml --- Add
              sim_year="2000" sim_year_range="constant" for pft1_pt1 datm_presaero files
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ------ Add
              1x1_numaIA and 1x1_smallvilleIA domain/preseaero files, update 2.5x3.33 domain
              make mapalgo nn for CLM1PT, set taxmode and tintalgo appropriately
              if CLM1PT is set. Add transient presaero file for 1x1_tropicAtl.
   M   models/lnd/clm/bld/namelist_files/use_cases/stdurbpt_pd.xml ------- Set
              dtime to 1800 for 1x1_urbanc_alpha
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist ------------- Set
              tintalgo, mapalgo by datm_source, and set taxmode as well. Remove
              option for datm_presaero="none". Set mapalgo=nn for datm_presaero=pt1_pt1.
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- Update
              urbanc_alpha surface dataset, 2.5x3.33 grid/topo/frac datasets
              Remove ndepsrc="stream" in ndepmapalgo settings as doesn't exist anymore.
              Use latest pft-physiology file from CROP branch (has extra data needed
              for prognostic crop)
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ------- Set
              atm_cpl_dt=1800 for urbanc_alpha, set stop_option/stop_n for
              urban sites carefully (add 1 time-step to stop_n, double for urbanc_alpha).
              Use "test" mask for urbanc_alpha
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Remove
              ndepsrc="stream"

>>>>>>>>>>>> Add meta-data to restart hist files, put history restart data on
>>>>>>>>>>>> restart hist files and off master restart files (so initial condition
>>>>>>>>>>>> files aren't cluttered with information only needed for continue runs).
>>>>>>>>>>>> Some changes to SNOWLIQ/SNOWICE, document dvolrdt units.
   M   models/lnd/clm/src/main/histFileMod.F90 - Use htape_create for restart_hist
              files, modify hist_restart_ncd so that namelist vars on one restart
              history files and they are always output, add more metadata to
              restart hist files, remove some temp arrays. Restart history files
              now always needed for continue runs, but not for other run types,
              and restart history information does not clutter the master restart
              files. The only history variables on master restart files are the
              history and restart filenames. Comments on the files make this clear.
   M   models/lnd/clm/src/main/restFileMod.F90 - Change hist_restart_ncd calls
   M   models/lnd/clm/src/main/ncdio_pio.F90 --- Add ncd_io_log_var0_nf interface
              add options for attributes: comment, flag_values, flag_meanings, and
              nvalid_range for variables., fix an issue in ncd_io_int_var0_nf
   M   models/lnd/clm/src/main/histFldsMod.F90 - Change default for SNOWLIQ/SNOWICE
              to "Average" rather than "Instant" (from oleson).
   M   models/lnd/clm/src/riverroute/RtmMod.F90 ---- Document dvolrdt conversion
   M   models/lnd/clm/src/riverroute/RunoffMod.F90 - Document dvolrdt units
              correctly.
   M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 - Initialize snowice/snowliq
              to zero over lake filter (from oleson).

Summary of testing:

  bluefire: All PASS except TBL tests and...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
063 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
064 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
065 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
  bluefire interactive testing: All PASS except all TBL tests fail
  bluefire/CESM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.generate.clm4_0_25 
FAIL  SMS_RLB.f45_f45.I.bluefire.generate.clm4_0_25 
FAIL  SMS_ROA.f45_f45.I.bluefire.generate.clm4_0_25 
FAIL  ERS_D.f45_g37.I.bluefire.generate.clm4_0_25 
BFAIL ERS_D.f45_g37.I.bluefire.compare.clm4_0_23 
FAIL  PST.f45_g37.I1850.bluefire.generate.clm4_0_25 
FAIL  PET_PT.f45_g37.I1850.bluefire.generate.clm4_0_25 
FAIL  ERS_E.f19_g16.I1850.bluefire.generate.clm4_0_25 
FAIL  ERI.f19_g16.IG1850.bluefire.generate.clm4_0_25 
FAIL  ERS_D.T31_g37.IGRCP26CN.bluefire.generate.clm4_0_25 
FAIL  ERP.T31_g37.IGRCP60CN.bluefire.generate.clm4_0_25 
BFAIL ERP.T31_g37.IGRCP60CN.bluefire.compare.clm4_0_23 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.generate.clm4_0_25 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_25 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.generate.clm4_0_25 
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_23 
FAIL  PST.f10_f10.I20TRCN.bluefire.generate.clm4_0_25 
FAIL  PET_PT.f10_f10.I20TRCN.bluefire.generate.clm4_0_25 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.generate.clm4_0_25 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.generate.clm4_0_25 
BFAIL ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_23
  jaguarpf interactive testing:
002 erA74 TER.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -5+-5 arb_ic .............FAIL! rc= 13
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:1800 1x1_brazil navy -5+-5 arb_ic ..........FAIL! rc= 11
006 erAZ3 TER.sh _sc_do clm_irrig 20020401:3600 10x15 USGS -3+-7 cold ...........................FAIL! rc= 13
007 brAZ3 TBR.sh _sc_do clm_irrig 20020401:3600 10x15 USGS -5+-5 cold ...........................FAIL! rc= 11
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
016 erJ74 TER.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:3600 1x1_tropicAtl test -10+-10 arb_ic ..FAIL! rc= 13
017 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:3600 1x1_tropicAtl test -3+-3 arb_ic .FAIL! rc= 11
020 erK74 TER.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -334+-336 arb_ic ............FAIL! rc= 13
021 brK74 TBR.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -334+-336 arb_ic ............FAIL! rc= 11
024 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 13
025 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 11
028 erHQ4 TER.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -3+-7 cold ............FAIL! rc= 13
029 brHQ4 TBR.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -5+-5 cold ............FAIL! rc= 11
032 erV63 TER.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 10+38 arb_ic ................FAIL! rc= 13
  jaguarpf/CESM testing: All PASS including comparision tests except...
FAIL  PST.f10_f10.I20TRCN.jaguarpf 
  edinburgh/lf95 interactive testing:
002 erA74 TER.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -5+-5 arb_ic .............FAIL! rc= 13
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:1800 1x1_brazil navy -5+-5 arb_ic ..........FAIL! rc= 11
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -10 arb_ic ...............FAIL! rc= 7
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 7
008 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -45+-45 arb_ic .........FAIL! rc= 13
009 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:3600 1x1_camdenNJ navy -10+-10 arb_ic ......FAIL! rc= 11
010 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic .............FAIL! rc= 7
012 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 115+115 arb_ic FAIL! rc= 13
013 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:3600 1x1_vancouverCAN navy 72+72 arb_ic FAIL! rc= 11
014 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic ...FAIL! rc= 5
016 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 58+100 arb_ic FAIL! rc= 13
017 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:3600 1x1_mexicocityMEX navy 72+72 arb_ic FAIL! rc= 11
018 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ..FAIL! rc= 5
020 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 13
021 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 11
022 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 7
024 erL74 TER.sh _nrsc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -5+-5 arb_ic ..............FAIL! rc= 13
025 brL74 TBR.sh _nrsc_s clm_std^nl_urb_br 20020101:1800 1x1_brazil navy -10+-10 arb_ic .........FAIL! rc= 11
026 blL74 TBL.sh _nrsc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 7
  edinburgh/CESM testing: All PASS including comparision tests
  yong/intel testing:
011 smD94 TSM.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 2
012 erD94 TER.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
022 smV24 TSM.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 96 arb_ic .....................FAIL! rc= 10
023 erV24 TER.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 10+38 arb_ic ..................FAIL! rc= 5
024 brV24 TBR.sh _mec10sc_ds clm_glcmec^nl_urb_br 19980115:1800 48x96 gx3v7 72+72 arb_ic ........FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_24

Changes answers relative to baseline: answers bit-for-bit, but SNOWLIQ/SNOWICE on history
   files change.

===============================================================
===============================================================
Tag name:  clm4_0_24
Originator(s):  erik (Erik Kluzek)
Date: Wed Feb  9 13:20:39 MST 2011
One-line Summary: Fix mksurfdata and add ability to override soil_fmax

Purpose of changes:

Fix mksurfdata for urban. Add soil_fmx to mksurfdata. Add attributes to suface datasets
that tell you the special namelist settings (such as all_urban, soil_, pft_). Add -irrig
as option to mksurfdata.pl. Update datm with new datasets for urbanc_alpha. Add new frac
dataset for urbanc_alpha. Update documentation to cesm1_0_rel_09_clm4_0_14 tag. Change
test_driver from jaguar to jaguarpf. Fix bug in build-namelist creating namelist
with clm_usr_name option.

Bugs fixed (include bugzilla ID):
                                 1281 (bug in mksurfdata for urban_only case)
                                 1280 (improve modularity of mksurfdata) [partial]
                                 1276 (urbanc_alpha site does not work)  [partial]

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    Update frac and domain file for urbanc_alpha site

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

 scripts, drv and csm_share to cesm1_0_beta15 versions

    scripts   to scripts4_110204
    drv       to drvseq3_1_48
    csm_share to share3_110201
    datm      to datm8_110204

List all files eliminated:

   D   models/lnd/clm/tools/mksurfdata/mkfmaxMod.F90 --- Put inside of mksoilMod.F90

   D   models/lnd/clm/test/system/tests_pretag_jaguar ------- rename to jaguarpf
   D   models/lnd/clm/test/system/tests_pretag_jaguar_nompi - rename to jaguarpf

>>>>>>>>>>>> Remove files that were no longer used 
>>>>>>>>>>>> (they are already in mksoilMod or mkpftMod)
   D   models/lnd/clm/tools/mksurfdata/mkorganic.F90
   D   models/lnd/clm/tools/mksurfdata/mkrank.F90
   D   models/lnd/clm/tools/mksurfdata/mkirrig.F90
   D   models/lnd/clm/tools/mksurfdata/mksoicolMod.F90

List all files added and what they do:

>>>>>>>>>>>> Add an irrigation and urban test for mksurfdata
   A   models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850
   A   models/lnd/clm/test/system/nl_files/mksrfdt_1x1_vancouverCAN_2000

   A   models/lnd/clm/test/system/tests_pretag_jaguarpf ------- rename from jaguar
   A   models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi - rename from jaguar

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add all_urban and irrigation mksurfdata tests
>>>>>>>>>>>> Update jaguar to jaguarpf
   M   models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_posttag_yong
   M   models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M   models/lnd/clm/test/system/input_tests_master
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/TCBtools.sh ---- Remove copy of *.h files
   M   models/lnd/clm/test/system/test_driver.sh - change jaguar to jaguarpf, update
          modules to agree with scripts
   M   models/lnd/clm/test/system/CLM_runcmnd.sh - change jaguar to jaguarpf

>>>>>>>>>>>> Add soil_fmax option and soil_fmx, soil_col and irrig option to
>>>>>>>>>>>> mksurfdata.pl. Add attributes to file for override cases.
>>>>>>>>>>>> Put mkfmax inside of mksoilMod, add mksoilAtt and mkpftAtt methods.
   M   models/lnd/clm/tools/mksurfdata/Srcfiles -------- Remove unused files
   M   models/lnd/clm/tools/mksurfdata/mksoilMod.F90 --- Move mkfmax inside here
          add mksoifmaxInit, mkfmax, and mksoilAtt interfaces, add soil_fmax as
          an override setting
   M   models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ---- Fix bug in if statement 
          (needed to also ask if .not. zerod_out). Create mkpftAtt interface, move
          settings from mkfileMod.F90 to there.
   M   models/lnd/clm/tools/mksurfdata/mkfileMod.F90 --- Move soil and pft specific 
          declarations to either mksoilAtt or mkpftAt interfaces
          if all_urban is set add all_urban=TRUE attribute to file
   M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Add soil_fmax to namelist
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl --- Add ability to set soil_col,
          soil_fmax and irrig on command line
          bring irrigation, setting of numpft and query of lai file from crop branch

>>>>>>>>>>>> Update urbanc_alpha domain/frac files
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml -------- Add mksrf_flai
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml -- Set
            urbanc_alpha default mask to test
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ----- urbanc_alpha
            domain file
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------ urbanc_alpha
            frac file
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml  Add in 
            mksrf_flai file

>>>>>>>>>>>> Update to cesm1_0_rel_09_clm4_0_14 documentation (includes info on new bugs)
   M   models/lnd/clm/doc/UsersGuide/single_point.xml
   M   models/lnd/clm/doc/UsersGuide/tools.xml
   M   models/lnd/clm/doc/KnownBugs

Summary of testing:

  bluefire interactive testing:
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic ......FAIL! rc= 5
  jaguarpf interactive testing:
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
014 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
026 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
034 blV63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
  edinburgh/lf95 interactive testing:
022 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
  mirage/intel interactive testing: All PASS except...
017 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 5
018 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 5
019 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 4
021 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL! rc= 13
022 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
024 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
026 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
029 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
030 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
  yong/intel interactive testing:
011 smD94 TSM.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
012 erD94 TER.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
022 smV24 TSM.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 96 arb_ic .....................FAIL! rc= 10
023 erV24 TER.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 10+38 arb_ic ..................FAIL! rc= 5
024 brV24 TBR.sh _mec10sc_ds clm_glcmec^nl_urb_br 19980115:1800 48x96 gx3v7 72+72 arb_ic ........FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_23

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_23
Originator(s):  erik (Erik Kluzek)
Date: Thu Feb  3 13:42:17 MST 2011
One-line Summary: Add in new glacier-MEC use-cases

Purpose of changes:

Add in new datasets and use-cases for glc_mec to support glc_nec=10 for 1850, 2000,
1850-2000, and 1850-2100 for all 4 rcp's. Standardize naming convention for use-cases.
Use scripts branch that has new compsets in it that access the new use-cases. Make sure
ncdpio is used for all I/O. Work with PTCLM a bit, and PTCLM testing. Change precedence
for build-namelist so that use-case is lower after user_nl_clm.

Bugs fixed (include bugzilla ID):
                                 1273 (fix pts_mode problem on jaguar)
                                 1256 (fix PTCLM testcases.csh on jaguar to use netcdf/3)
                                 1254 (PTCLM add .nc and date to pft-physiology file copy)
                                 1250 (add scratchroot in PTCLM for generic machines)
                                 1247 (some changes in ncdio_pio) [partial]
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1168 (Change precedence so user_nl_clm used over use-case)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: Change order of precedence so that
     use_case is AFTER -namelist -infile and clm_usr_name options.
     Thus values in your user_nl_clm file will be used instead of what's in
     the use_case.

     New precedence is...
       1. values set on the command-line using the -namelist option,
       2. values read from the file specified by -infile,
       3. datasets from the -clm_usr_name option,
       4. values set from a use-case scenario, e.g., -use_case
       5. values from the namelist defaults file.
List any changes to the defaults for the boundary datasets:
     New datasets for glc_nec="10"
               surfdata for 1850@(f09,f19,T31)
               pftdyn for 1850-2000@(f09,f19,T31)
               pftdyn for 1850-2100@(f09,f19,T31) rcp (2.6,4.5,6,8.5)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, cism

      scripts to glccsbr01_scripts4_110111
      datm    to datm8_110124
      cism    to cism1_110125

List all files eliminated:

    Rename use-cases to versions with an _pd ending or 2000_*_control form

         models/lnd/clm/bld/namelist_files/use_cases/...
    D    .../use_cases/stdurbpt.xml ----- rename to stdurbpt_pd
    D    .../use_cases/glacier_mec.xml -- rename to 2000_glacierMEC_control
    D    .../use_cases/pergro.xml ------- rename to pergro_pd
    D    .../use_cases/pergro0.xml ------ rename to pergro0_pd

List all files added and what they do:

>>>>>>>>>>>>>> Add tests for all new glacier-MEC use-cases
    A    models/lnd/clm/test/system/nl_files/clm_glcmec
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp2.6
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp4.5
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp8.5
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp6

    A    models/lnd/clm/test/system/nl_files/nl_per - PERGRO testing namelist

>>>>>>>>>>>>>>
         models/lnd/clm/bld/namelist_files/use_cases/...
    A    .../use_cases/pergro_pd.xml -------------- Renamed from pergro
    A    .../use_cases/2000_glacierMEC_control.xml  Copy of glacier_mec_pd
    A    .../use_cases/stdurbpt_pd.xml ------------ Renamed from stdurbpt
    A    .../use_cases/pergro0_pd.xml ------------- Renamed from pergro0
    A    .../use_cases/README --------------------- Add README file to describe
             naming convention for use_cases

>>>>>>>>>>>>>> Add new glacier_MEC use_cases
         models/lnd/clm/bld/namelist_files/use_cases/...
    A    .../use_cases/1850_glacierMEC_control.xml
    A    .../use_cases/20thC_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp6_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
    A    .../use_cases/glacierMEC_pd.xml --- renamed from glacier_mec

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add some new glacierMEC use-case tests
    M    models/lnd/clm/test/system/README.testnames ------------- Add n,w,x,y glcMEC resolutions
    M    models/lnd/clm/test/system/tests_posttag_lynx_nompi
    M    models/lnd/clm/test/system/tests_pretag_bluefire
    M    models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
    M    models/lnd/clm/test/system/tests_posttag_kraken
    M    models/lnd/clm/test/system/tests_posttag_yong
    M    models/lnd/clm/test/system/tests_pretag_jaguar_nompi
    M    models/lnd/clm/test/system/tests_posttag_mirage
    M    models/lnd/clm/test/system/tests_posttag_purempi_regression
    M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
    M    models/lnd/clm/test/system/tests_posttag_intrepid_nompi
    M    models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>>>> Get glcmec branch testing to work and pergro testing working with
>>>>>>>>>>>>>> build-namelist precedence change
    M    models/lnd/clm/test/system/TBR.sh ------------- Match history files 
                NOT restart-history files
    M    models/lnd/clm/test/system/nl_files/clm_per0 -- Change use-case name
    M    models/lnd/clm/test/system/nl_files/nl_urb_br - Add hist_fincl2 to remove
                any secondardy history files from use-case
    M    models/lnd/clm/test/system/nl_files/clm_per --- Change use-case name
    M    models/lnd/clm/test/system/input_tests_master - Add new tests
    M    models/lnd/clm/test/system/TSM.sh ------------- Make restart file touched
           with .nc extension, remove bit about deleting clm.i files

>>>>>>>>>>>>>> Use mksrf_glacier files from XML database, add glc_nec to mksurfdata.pl,
>>>>>>>>>>>>>> allow glc_nec=0, and don't write out glcmec fields if glc_nec=0.
    M    models/lnd/clm/tools/mksurfdata/mkfileMod.F90 --- Don't define glc_nec
               fields if nglcec == 0.
    M    models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90 - Set nglcec=0 by default, 
               add ability to handle nglcec=0
    M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Don't write out or call
               glc-mec stuff if nglcec == 0.
    M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl --- Add ability to set glc_nec
               get mksrf_glacier file from XML database

>>>>>>>>>>>>>> Add in new glc_nec=10 datasets, change precedence order in
>>>>>>>>>>>>>> build-namelist so use_case is AFTER -namelist/-infile/-clm_usr_name.
>>>>>>>>>>>>>> Add mksrf_glacier files to XML database
    M    models/lnd/clm/bld/listDefaultNamelist.pl - Make faster and add settings
               for glc_nec and glc_grid, also add loop over sim_year_range
    M    models/lnd/clm/bld/build-namelist --------- Change precedence order so
               that use-cases are after namelist and infile (thus user_nl_clm files
               are used in place of the use-case. Check that the use-cases follow
               a strict naming convention (ensures will work with PTCLM.py).
               This is the new order of precedence
+      1. values set on the command-line using the -namelist option,
+      2. values read from the file specified by -infile,
+      3. datasets from the -clm_usr_name option,
+      4. values set from a use-case scenario, e.g., -use_case
+      5. values from the namelist defaults file.

    M    models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Add
               mksrf_glacier file for mksurfdata.pl to XML database
    M    models/lnd/clm/bld/namelist_files/datm-build-namelist ------------- Change
               order of precedence so that use_case is after infile and namelist
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- New glc datasets
               surfdata for 1850@(f09,f19,T31)
               pftdyn for 1850-2000@(f09,f19,T31)
               pftdyn for 1850-2100@(f09,f19,T31) rcp (2.6,4.5,6,8.5)
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add
               mksrf_glacier datasets for glc_nec=0 (previous version), glc_nec=3,5,10 
               use older glacier dataset that Bill Lipscomb says has better glacier
               representation over greenland
>>>>>>>>>>>>>> Remove direct calls to pio -- use ncdio_pio module for all NetCDF
>>>>>>>>>>>>>> read/write/define/query. Write out at initialization if there is no
>>>>>>>>>>>>>> land and won't be running CLM.
    M    models/lnd/clm/src/main/clm_initializeMod.F90 - Set subname and write out
               if no land exists and clm will NOT be run
    M    models/lnd/clm/src/main/iniTimeConst.F90 ------ Use ncd_io to read in mxsoil_color
               (remove direct calls to pio)
    M    models/lnd/clm/src/main/histFileMod.F90 ------- Use ncd_io to read/write
               everything (remove direct calls to pio). Add max_nFields function.
    M    models/lnd/clm/src/main/restFileMod.F90 ------- Change use of PIO_GLOBAL
               to NCD_GLOBAL
    M    models/lnd/clm/src/main/ncdio_pio.F90 --------- Remove making pio interfaces
               public, add new interfaces to ncd_io global, add dimexist as optional
               argument to ncd_inqdid, and name as optional argument to ncd_inqdlen
               change ncd_io interfaces that could NOT need to call scam_field_offsets
               so that they don't. Initialize data_offset and pfts to bigint NOT nan.
         New interfaces:
+     module procedure ncd_io_char_var1_nf
+     module procedure ncd_io_char_var3_nf
+     module procedure ncd_io_char_varn_strt_nf
    M    models/lnd/clm/src/main/surfrdMod.F90 --------- Use ncd_inqdid and ncd_inqvid
              instead of pio interfaces directly.

Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
057 blV61 TBL.sh _mec10sc_dh clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
061 blVn1 TBL.sh _mec10sc_dh clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arFAIL! rc= 5
063 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
064 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
065 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
066 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4

glcmec TBL tests fail since they didn't exist in previous version

  bluefire interactive testing:
006 smHS3 TSM.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic ......FAIL! rc= 8
007 erHS3 TER.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic ...FAIL! rc= 5
008 brHS3 TBR.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic ...FAIL! rc= 5
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic ......FAIL! rc= 4
044 blV63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
060 sm974 TSMscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds ....FAIL! rc= 6
  bluefire/CESM testing: All PASS except... (new compare tests fail since didn't exist before)
BFAIL ERI.f19_g16.IG1850.bluefire.compare.clm4_0_22 
BFAIL ERS_D.T31_g37.IGRCP26CN.bluefire.compare.clm4_0_22 
BFAIL PST.f10_f10.I20TRCN.bluefire.compare.clm4_0_22 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire.compare.clm4_0_22 
BFAIL SMS.f10_f10.IRCP45CN.bluefire.compare.clm4_0_22 

PEND  ERS_D.f45_g37.I.bluefire.GC.003008 
PEND  ERP.T31_g37.IGRCP60CN.bluefire.GC.003008 
PEND  ERH_D.f10_f10.I1850CN.bluefire.GC.003008 
PEND  ERS_D.f19_g16.IRCP85CN.bluefire.GC.003008 

  bluefire/CESM Extra testing: 
PASS  ERI.f19_g16.IG1850.bluefire 
PASS  ERI.f19_g16.IG1850CN.bluefire 
PASS  ERS.T31_g37.IGRCP45CN.bluefire 
PASS  ERS.T31_g37.IGRCP85CN.bluefire 

PASS  ERS_D.T31_g37.IG.bluefire 
PASS  ERS_D.f19_g16.IGCN.bluefire 

  bluefire/CESM Extra testing for coupled with CAM and CAM/POP: 
PASS  ERI.f19_g16.BGCN.bluefire 
PASS  SMS_D.f19_g16.BG1850CN.bluefire 
PASS  ERP.f09_g16.BG20TRCN.bluefire 
PASS  ERS.T31_g37.BGRCP26CN.bluefire 
RUN   ERS_D.T31_g37.BGRCP45CN.bluefire.111336  --- takes too long
PASS  ERS.T31_g37.BGRCP60CN.bluefire 
RUN   ERS_D.T31_g37.BGRCP85CN.bluefire.111336  --- takes too long
FAIL  SMS.f19_f19.EGCN.bluefire  ----------------- seg-fault
FAIL  SMS.T31_T31.EG1850CN.bluefire  ------------- seg-fault
PASS  ERI.f09_f09.FGCN.bluefire 
PASS  SMS.f19_f19.FG1850CN.bluefire 
PASS  SMS.T31_T31.FG20TRCN.bluefire 
FAIL  SMS.T31_g37.TG.bluefire

  bluefire/PTCLM testing:
PTCLM.631306_1x1_mexicocityMEX_ICN.PTCLM          PASS
PTCLM.631306_1x1_mexicocityMEX_I.PTCLM    PASS
PTCLM.631306_1x1_mexicocityMEX_I_QIAN.PTCLM       PASS
PTCLM.631306_US-Ha1_I_1850.PTCLM          PASS
PTCLM.631306_US-Ha1_I20TR.PTCLM   PASS
PTCLM.631306_US-Ha1_I20TRCN.PTCLM         PASS
PTCLM.631306_US-Ha1_ICN.PTCLM     PASS
PTCLM.631306_US-Ha1_I1850CN.PTCLM         PASS
PTCLM.631306_US-Ha1_IRCP85CN.PTCLM        PASS
PTCLM.631306_US-Ha1_I.PTCLM       PASS
PTCLM.631306_US-Ha1_I_QIAN.PTCLM          PASS
PTCLM.631306_US-Ha1_I.PTCLM       PASS
PTCLM.631306_US-UMB_I.PTCLM       PASS
PTCLM.631306_US-UMB_I_QIAN.PTCLM          PASS
PTCLM.631306_US-UMB_I.PTCLM       PASS
US-Ha1_ICN_ad_spinup.PTCLM                PASS
  jaguar interactive testing: All PASS except...
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
014 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
026 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
  jaguar/PTCLM testing:
PTCLM.4224_1x1_mexicocityMEX_ICN.PTCLM	  PASS
PTCLM.4224_1x1_mexicocityMEX_I.PTCLM    PASS
PTCLM.4224_1x1_mexicocityMEX_I_QIAN.PTCLM   PASS
PTCLM.4224_US-Ha1_I_1850.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_I20TR.PTCLM   FAIL 0
PTCLM.4224_US-Ha1_I20TRCN.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_ICN.PTCLM   FAIL 0
PTCLM.4224_US-Ha1_I1850CN.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_IRCP85CN.PTCLM    FAIL 0
PTCLM.4224_US-Ha1_I.PTCLM   FAIL 0
PTCLM.4224_US-Ha1_I_QIAN.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_I.PTCLM   FAIL 0
PTCLM.4224_US-UMB_I.PTCLM   FAIL 0
PTCLM.4224_US-UMB_I_QIAN.PTCLM	  FAIL 0
PTCLM.4224_US-UMB_I.PTCLM   FAIL 0
US-Ha1_ICN_ad_spinup.PTCLM      PASS
  edinburgh/lf95 interactive testing: All PASS up to...
022 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
  edinburgh/PTCLM testing: Fails because Python is too OLD (2.4 when needs 2.5)
  yong/intel/PTCLM testing: Following PASS...
PTCLM.4900_1x1_mexicocityMEX_ICN.PTCLM	  PASS
PTCLM.4900_1x1_mexicocityMEX_I.PTCLM    PASS
PTCLM.4900_1x1_mexicocityMEX_I_QIAN.PTCLM   PASS
PTCLM.4900_US-Ha1_I_1850.PTCLM	  PASS
PTCLM.4900_US-Ha1_I20TR.PTCLM   PASS
PTCLM.4900_US-Ha1_I20TRCN.PTCLM	  PASS
PTCLM.4900_US-Ha1_ICN.PTCLM   PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_22

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_22
Originator(s):  erik (Erik Kluzek)
Date: Thu Jan 20 13:17:56 MST 2011
One-line Summary: Move coupler field indicies to clm, move cpl_* directories up a level, add the cpl_share directory

Purpose of changes:

Move cpl_* directories up a level, add cpl_shr directory. Update driver, move coupler
field indicies to clm, and allow fields to be passed in driver with just names added to
namelist. Make is_restart() public in clm_time_manager.F90. Fix PTS_MODE. Don't pass
Sl_landfrac to driver in run-phase.

Bugs fixed (include bugzilla ID):
                                 1271 (Problem in PTS_MODE with clm)
                                 1270 (Make is_restart public in clm_time_manager.F90)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1273 (fix pts_mode problem on jaguar)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1110 (dtlimit error in datm8 with partial year forcing)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: Change Filepath

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens (most code changes originate from mvertens)
   I made some tweaks after the review and added protex header documentation to the 
   new clm_cpl_indices file.

List any svn externals directories updated (csm_share, mct, etc.): datm, cism
    datm to datm8_110118
    cism to cism1_100913

List all files eliminated:

>>>>>>>>> Move to directories up a level
   D   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90
   D   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90
   D   models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90

List all files added and what they do:

>>>>>>>>> Use this local version of indices rather than seq_indices_mod.F90
   A   models/lnd/clm/src/cpl_share/clm_cpl_indices.F90

>>>>>>>>> Move to directories up a level, use local version of indices rather
>>>>>>>>> than seq_* version and remove sending landfrac at run phase.
   A   models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
   A   models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
   A   models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/doc/README -- Update directory info.

>>>>>>>>> Change pts_mode test so that RTM is not turned on.
   M   models/lnd/clm/test/system/input_tests_master

>>>>>>>>> Change Filepath
   M   models/lnd/clm/bld/configure

>>>>>>>>> Make is_restart() method public
   M   models/lnd/clm/src/main/clm_time_manager.F90

>>>>>>>>> Fix PTS_MODE.
   M   models/lnd/clm/src/main/pftvarcon.F90 ------- Pass posNOTonfile=.true. down
          to ncd_io methods so won't check for lat/lon
   M   models/lnd/clm/src/main/ncdio_pio.F90 ------- Add posNOTonfile option to global
          reads so that if set, won't try to find nearest lat/lon to PTS_MODE point
          (for files that are global data NOT spatial).
   M   models/lnd/clm/src/biogeophys/SNICARMod.F90 - Pass posNOTonfile=.true. down
          to ncd_io methods so won't check for lat/lon

Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
>>>>>>>> Test was changed to remove RTM
025 blAK4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 5
  bluefire/CESM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_20 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_20 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_20 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_20 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_20 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_20 
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_20 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_20 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_20 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_20 
FAIL  ERI.f19_g16.IG.bluefire.compare.clm4_0_20 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_20 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_20 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_20 
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_20 
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_20 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_20 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_20 
>>>>>>>> Compare tests fail because Sl_landfrac is missing on new case
>>>>>>>> Everything else is identical
  bluefire/PTCLM testing: All PASS
  edinburgh/lf95 interactive testing: All PASS except...
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
  yong/intel interactive testing:
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
011 smD94 TSM.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
012 erD94 TER.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
013 blD94 TBL.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 4
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_21

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_21
Originator(s):  jedwards (Jim Edwards)
Date: Wed Jan 12 14:50:45 MST 2011
One-line Summary:  Remove includes, finish PIO transition

Purpose of changes: 

Code cleanup

Remove misc.h/preproc.h, update SNICARMod to use ncdio_pio calls rather than NetCDF
directly. 

Bugs fixed (include bugzilla ID):
                                 394 (misc.h and preproc.h NOT used at all anymore)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1271 (Problem in PTS_MODE with clm)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1110 (dtlimit error when a full year isn't available)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system:  Removed generation of files misc.h and preproc.h

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, Erik K

List any svn externals directories updated (csm_share, mct, etc.):  None

List all files eliminated: misc.h, preproc.h

D       models/lnd/clm/tools/mksurfdata/misc.h
D       models/lnd/clm/tools/mksurfdata/preproc.h
D       models/lnd/clm/tools/mkdatadomain/preproc.h
D       models/lnd/clm/tools/mkdatadomain/misc.h

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

       models/lnd/clm/tools/mkgriddata/README
       models/lnd/clm/tools/mksurfdata/README
       models/lnd/clm/tools/mkdatadomain/README
       models/lnd/clm/tools/README
       models/lnd/clm/bld/configure
       models/lnd/clm/bld/clm.cpl7.template	
       models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90
       models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90
       models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90
       models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90
       models/lnd/clm/src/biogeochem/CNGRespMod.F90
       models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90
       models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90
       models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90
       models/lnd/clm/src/biogeochem/CNFireMod.F90
       models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90
       models/lnd/clm/src/biogeochem/CNSummaryMod.F90
       models/lnd/clm/src/biogeochem/CNDVLightMod.F90
       models/lnd/clm/src/biogeochem/CNPhenologyMod.F90
       models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90
       models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90
       models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90
       models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90
       models/lnd/clm/src/biogeochem/CNDVEcosystemDynIniMod.F90
       models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90
       models/lnd/clm/src/biogeochem/C13SummaryMod.F90
       models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90
       models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90
       models/lnd/clm/src/biogeochem/CNAllocationMod.F90
       models/lnd/clm/src/biogeochem/CNC13FluxMod.F90
       models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90
       models/lnd/clm/src/biogeochem/CNSetValueMod.F90
       models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90
       models/lnd/clm/src/main/organicFileMod.F90
       models/lnd/clm/src/main/dynlandMod.F90
       models/lnd/clm/src/main/accFldsMod.F90
       models/lnd/clm/src/main/fileutils.F90
       models/lnd/clm/src/main/pftdynMod.F90
       models/lnd/clm/src/main/pft2colMod.F90
       models/lnd/clm/src/main/restFileMod.F90
       models/lnd/clm/src/main/clm_varsur.F90
       models/lnd/clm/src/main/controlMod.F90
       models/lnd/clm/src/main/initSurfAlbMod.F90
       models/lnd/clm/src/main/filterMod.F90
       models/lnd/clm/src/main/clm_varorb.F90
       models/lnd/clm/src/main/initGridCellsMod.F90
       models/lnd/clm/src/main/pftvarcon.F90
       models/lnd/clm/src/main/spmdMod.F90
       models/lnd/clm/src/main/domainMod.F90
       models/lnd/clm/src/riverroute/RunoffMod.F90
       models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
       models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90
       models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90
       models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90
       models/lnd/clm/src/biogeophys/QSatMod.F90
       models/lnd/clm/src/biogeophys/clm_driverInitMod.F90
       models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
	
       models/lnd/clm/src/biogeophys/SNICARMod.F90
       models/lnd/clm/src/main/ncdio_pio.F90

	Removed reference to preproc.h and misc.h in all files.   Converted snicarmod to use pio 
	and added support for a 3d non-decomposed real variable in ncdio.
	
Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
NOTE: pts_mode tests failed... (bug 1271)
  bluefire/CESM testing: All PASS

  jaguarpf:  All pass except ...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 72+72 arb_ic ..................FAIL! rc= 10
022 erH92 TER.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 10+38 cold FAIL! rc= 13
023 brH92 TBR.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 72+72 cold FAIL! rc= 11
038 smLI2 TSM.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
039 erLI2 TER.sh _sc_dm clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
040 brLI2 TBR.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
041 blLI2 TBL.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
042 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
043 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
044 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
045 blL58 TBL.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 48 arb_ic ....................FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm4_0_19

Changes answers relative to baseline: bit-for-bit
	
===============================================================
Tag name:  clm4_0_20
Originator(s):  erik (Erik Kluzek)
Date: Tue Jan 11 11:18:30 MST 2011
One-line Summary: Update for ESMF metadata, update doc. from release branch, 
                  bug fixes (doc of qflx_evap_tot, threading CNDV, aer/ndepregrid)

Purpose of changes:

Update externals, fix in datm speeds up single-point simulations, update for esmf
metadata capability. Update documentation from Release branch (cesm1_0_rel07_clm4_0_14). 
Fix documentation of qflx_evap_tot. Fix ndepregrid/aerdepregrid scripts. Fix threading 
problem with CNDV.

Bugs fixed (include bugzilla ID):
                                1266 (Threading problem with CNDV)
                                1265 (Fix ndep/aerdepregrid.ncl)
                                1264 (Incorrect doc of qflx_evap_tot in the code)
                                1258 (runinit_ibm.csh needs to be updated)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1110 (dtlimit error when a full year isn't available)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes:
    Small section of clm_driver was moved to a OMP loop. This should
    improve threading performance slightly.

Code reviewed by: self, doc of qflx_evap_tot by Keith Oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, 
     stubs, datm, csm_share, timing

    scripts   to scripts4_110108
    drv       to drvseq3_1_47
    sice      to stubs1_2_03
    socn      to stubs1_2_03
    sglc      to stubs1_2_03
    datm      to datm8_110106
    csm_share to share3_101231
    timing    to timing_101215

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Fix deposition regrid scripts so they will work (from crop04)
  M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Fix XML queries so will
        work, using the datm_internal namelist now
  M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Fix XML queries so will
        work, using stream_fldfilename_ndep in the ndepdyn_nml namelist.

>>>>>>>>> Fix so will work (from rel07)
  M  models/lnd/clm/tools/interpinic/runinit_ibm.csh - Fix config options so will work
  M  models/lnd/clm/bld/config_files/config_definition.xsl ---- Remove extra empty rows
  M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl  Fix missing ">"

>>>>>>>>> Update documentation (from rel07)
  M  models/lnd/clm/doc/UsersGuide/single_point.xml - Change how supported single-point
          cases are handled and add documentation on setting start/stop times
  M  models/lnd/clm/doc/UsersGuide/tools.xml -------- Add new options to mksurfdata.pl
          add notes about bugs, add notes that aer/ndepregid is optional
  M  models/lnd/clm/doc/UsersGuide/preface.xml ------ Update what_is_new section
  M  models/lnd/clm/doc/UsersGuide/clm_ug.xml ------- Add more versions in quicklist
  M  models/lnd/clm/doc/UsersGuide/appendix.xml ----- Add note about runinit_ibm.csh
          problem
  M  models/lnd/clm/doc/UsersGuide/custom.xml ------- Remove DATM_PRESAERO=none option,
          remove hist_crtinic, and use_ndepstream namelist settings

>>>>>>>>> Update documentation (from rel07)
  M  models/lnd/clm/doc/KnownLimitations - Add doc on dtlimit error
  M  models/lnd/clm/doc/KnownBugs -------- Add bug 1168, remove bug 498
  M  models/lnd/clm/doc/README ----------- Rework what's new
  M  models/lnd/clm/doc/index.shtml ------ Add link to KnownLimitations
  M  README ------------------------------ Rework what's new

>>>>>>>>> Fix threading problem with CNDV, by adding an OMP loop in a section
>>>>>>>>> in clm_driver that didn't have one, pass down beg/end c|g|p indices
>>>>>>>>> as needed
  M  models/lnd/clm/src/biogeochem/CNSetValueMod.F90 - Pass in begc/endc, begp/endp
  M  models/lnd/clm/src/main/clm_initializeMod.F90 --- Add OMP loop over setFilters
  M  models/lnd/clm/src/main/pftdynMod.F90 ----------- Pass down beg/end indices as needed
        pftdyn_wbal_init, pftdyn_cnbal, pftwt_interp, 
  M  models/lnd/clm/src/main/filterMod.F90 ----------- Pass clump index down to setFilters
        remove OMP from inside
  M  models/lnd/clm/src/main/clm_driver.F90 ---------- Add OMP loop around section that
        wasn't inside an OMP loop

>>>>>>>>> Fix the documentation of the qflx_evap_tot field
  M  models/lnd/clm/src/main/clmtype.F90 -------------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/main/clm_atmlnd.F90 ----------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/main/histFldsMod.F90 ---------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ------ Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 -------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 - Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ----- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 -- Fix qflx_evap_tot doc

>>>>>>>>> Add component meta-data for ESMF
  M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - Add meta-data description
        of CLM
  M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90 -- Add more arguments to 
        lnd_register method

Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS
  bluefire/CESM testing: All PASS
  bluefire/PTCLM testing: All PASS
  jaguar interactive testing: All PASS except (up to 017 brJ74)...
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic
.............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic
...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
  up to....

017 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:3600 1x1_tropicAtl test -3+-3 arb_ic .PASS
  edinburgh/lf95 interactive testing: All PASS except...
005 smAL4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ....................FAIL! rc= 10
  edinburgh/PTCLM testing: All PASS up to ...
myPTCLMtests_US-Ha1_I_1850.PTCLM    FAIL 0
  mirage,storm/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_19

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_19
Originator(s):  erik (Erik Kluzek)
Date: Wed Dec  8 22:20:30 MST 2010
One-line Summary: Bring irrigation branch to the trunk

Purpose of changes:

Add option for simple code to redirect some riverflow to irrigate generic crops.
Irrigation is turned on at 6AM, runs for 4 hours and keeps soil moisture to 0.7.
Change corn and wheat indices to c3crop and irrigated generic c3 crop.
Add QIRRIG as a history file output. Change pft-physiology and RTM flow files from
ASCII to NetCDF. Single pft-physiology file can handle all cases (has extra FCUR value
for CNDV), also has for new fields for crops that will come in later: corn, spring-wheat,
winter-wheat and soybean. Add findat and fsurdat files for irrigation (f09, f19, f10, finidat
only for f19). Split RTM run method into three and move subroutines around to where makes
more sense. Fix a mksurfdata PFT override bug. Synchronize the Makefiles for the tools
and add build for Darwin intel and PGI and remove Darwin XLF. Remove concurrent
directives and UNICOSMP, CPP_VECTOR, NEC_SX CPP #ifdefs. Remove some #include
misc.h/preproc.h statements. Switch pio_close for ncd_close calls. Replace some constants
with parameters. Remove clm_comp layer and call clm_initialize and clm_driver directly.
Change mk*.F90 subroutines in mksurfdata into modules, so that argument checking will
happen at compile-time.

Bugs fixed (include bugzilla ID):
                                  964 (Remove UNICOS #ifdef logic in clm)
                                 1238 (PST test fails)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1253 (mkglacier in mksurfdata has arguments in wrong order)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: std-test

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Add -irrig and -rtm_res options to build-namelist

+     -irrig                   Seek surface datasets with irrigation turned on.
+     -rtm_res "resolution"    Specify river transport model resolution.
    (Still only have half-degree files in the XML database)

   Add new history field:

           QIRRIG  water added through irrigation (mm/s)

List any changes to the defaults for the boundary datasets: NetCDF pft-phys/RTM files
  NetCDF PT-physiology file: pft-physiology.c101006.nc
  finidat and surfdata files for irrigation (for 1.9x2.5@2000)
  surfdata files for irrigation (for f09 and f10)
  NetCDF River-direction file: clmi.IQirrcr_2000-01-01_1.9x2.5_gx1v6_c101115.nc

Describe any substantial timing or memory changes: None

Code reviewed by: self, slevis, dlawren, wsacks, mvertens, swensosc
       slevis/wsacks -- irrigation changes
       dlawren -------- convert pft-physiology file to NetCDF
       mvertens ------- high level restructuring
       swensosc ------- convert RTM flow file to NetCDF

List any svn externals directories updated (csm_share, mct, etc.): scripts and csm_share

    scripts to scripts4_101206
    csm_share to csm_share3_101122

List all files eliminated:

D       models/lnd/clm/src/main/inicFileMod.F90 --------- Move to inicPerpMod
D       models/lnd/clm/src/main/clm_comp.F90 ------------ Move to clm_initialize and
               clm_driver
D       models/lnd/clm/src/main/scam_setlatlonidx.F90 --- Use shr_scam version
D       models/lnd/clm/src/main/snowdp2lev.F90 ---------- Move to mkarbinitMod
D       models/lnd/clm/src/main/areaMod.F90 ------------- Split out into relavent modules:
                celledge      -> RtmMapMod
                map_setmapsAr -> RmtMapMod
                cellarea      -> clm_initialize
                map_setgatm   -> downscaleMod
D       models/lnd/clm/test/system/tests_posttag_spot1 -- rename to yong

D       models/lnd/clm/tools/mksurfdata/mkfmax.F90 ---- rename to mkfmaxMod.F90
D       models/lnd/clm/tools/mksurfdata/mkvocef.F90 --- rename to mkvocefMod.F90
D       models/lnd/clm/tools/mksurfdata/mkglacier.F90 - put in mkglcmecMod.F90
D       models/lnd/clm/tools/mksurfdata/mklanwat.F90 -- rename to mklanwatMod.F90
D       models/lnd/clm/tools/mksurfdata/mkelev.F90 ---- put in mkurbanparMod.F90
D       models/lnd/clm/tools/mksurfdata/mkurban.F90 --- put in mkurbanparMod.F90
D       models/lnd/clm/tools/mksurfdata/mksoitexMod.F90 rename to mksoilMod.F90

List all files added and what they do:

A  +    models/lnd/clm/test/system/nl_files/clm_irrig -- New irrigation test

>>>>>>>>>>> Some high level restructuring/renames
A  +    models/lnd/clm/src/main/inicPerpMod.F90 -------- From inicFileMod
A  +    models/lnd/clm/src/riverroute/RtmMapMod.F90 ---- From areaMod.F90
A       models/lnd/clm/test/system/tests_posttag_yong -- rename add more tests

>>>>>>>>>>> Rename mksurfdata subroutines into modules
A       models/lnd/clm/tools/mksurfdata/mkfmaxMod.F90
A       models/lnd/clm/tools/mksurfdata/mksoilMod.F90
A       models/lnd/clm/tools/mksurfdata/mkvocefMod.F90
A       models/lnd/clm/tools/mksurfdata/mklanwatMod.F90

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Add irrigation "AZ" tests at 10x15 with irrigation on
M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/tests_pretag_bluefire
M       models/lnd/clm/test/system/tests_pretag_edinburgh
M       models/lnd/clm/test/system/tests_pretag_jaguar_nompi
M       models/lnd/clm/test/system/tests_posttag_hybrid_regression
M       models/lnd/clm/test/system/tests_posttag_purempi_regression
M       models/lnd/clm/test/system/tests_posttag_intrepid_nompi
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi -- Remove repeated test

M       models/lnd/clm/test/system/README.testnames --- Add Z res (10x15 with irrig)
M       models/lnd/clm/test/system/test_driver.sh ----- Changes for lynx and yong

>>>>>>>>>>> Fix bug 1249 for PFT overrides, correct irrigation sample namelist
>>>>>>>>>>> Change subroutines into modules for mk*.F90 files (allows compiler to check args)
>>>>>>>>>>> Fix bug 1253 putting mksoitex call after mkglacier
M       models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig - Correct name of irrigation dataset
M       models/lnd/clm/tools/mksurfdata/mksrfdat.F90  nullify pctpft_i
M       models/lnd/clm/tools/mksurfdata/mkpftMod.F90  Set nlat_i/nlon_i to 1 if PFT override
M       models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90 -- Add mkglacier subroutine
M       models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90  Add mkurban and mkelev subroutines
M       models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ----- Change subroutines into modules
           nullify pctpft_i, put mksoitex call after mkglacier
M       models/lnd/clm/tools/mksurfdata/Srcfiles --------- Change names of files
M       models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ----- Add mkirrig subroutine


>>>>>>>>>>> Sync up the tools Makefiles and add darwin intel and pgi build (remove darwin xlf)
M       models/lnd/clm/tools/mksurfdata/Makefile ---- Sync up makefiles, add darwin build
M       models/lnd/clm/tools/interpinic/Makefile ---- Sync up makefiles, add darwin build
M       models/lnd/clm/tools/mkgriddata/Makefile ---- Sync up makefiles, add darwin build
M       models/lnd/clm/tools/mkdatadomain/Makefile -- Sync up makefiles, add darwin build

>>>>>>>>>>>  Add -irrig and -rtm_res options, update files to new NetCDF versions,
>>>>>>>>>>>  add in findat/fsurdat files for irrigation (f19,f10, f09)
M       models/lnd/clm/bld/build-namelist ----- Add -irrig, -rtm_res options
              set do_budgets, and budget_inst in drv_namelist, finidat/fsurdat depend on irrig
              set create_crop_landunit by irrig
M       models/lnd/clm/bld/clm.cpl7.template -- Set CLM_RTM_RES to half-degree and pass
              to build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ------ add irrig and rtm_res
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml  default for irrig and rtm_res
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ---- New NetCDF 
              pft-physiology file (for all configs), finidat and fsurdat files check
              irrig, f19, f10, and f09 surfdata files for irrigation (and f19 finidat)
              defaults for create_croplandunit, new NetCDF RTM direction file
M       models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ---- Set do_budgets
              to .true. and budget_inst to 1.

>>>>>>>>>>> Remove concurrent directives and misc.h/preproc.h #includes
>>>>>>>>>>> Remove scam_setlatlonidx and use shr_scam_.
>>>>>>>>>>> Switch ncorn for nc3crop and nwheat for nirrig change pio_close for ncd_close
M       models/lnd/clm/src/biogeochem/CNMRespMod.F90 -------- Remove concurrent directives
            remove misc.h/preproc.h #includes
M       models/lnd/clm/src/biogeochem/CASAMod.F90 ----------- Change pio_closefile to
            ncd_pioclosefile
M       models/lnd/clm/src/biogeochem/CNWoodProductsMod.F90 - Remove directives
M       models/lnd/clm/src/biogeochem/DUSTMod.F90 ----------- Remove directives
M       models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90  ncorn->nc3crop, 
            use shr_scam_getCloseLatLon in place of scam_setlatlonidx, 
            Remove directives, switch pio_close with ncd_pio_closefile
M       models/lnd/clm/src/biogeochem/CNDecompMod.F90 ------- Remove directives and #includes
M       models/lnd/clm/src/biogeochem/CNDVMod.F90 ----------- Switch pio_plosefile with ncd_close
M       models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ---- ncorn->nc2crop
M       models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ---- ncorn->nc3crop, nwheat->nirrig
             and remove #includes
M       models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 ncorn->nc3crop, nwheat->nirrig
             and remove #includes

>>>>>>>>>>> Remove concurrent directives and misc.h/preproc.h #includes
>>>>>>>>>>> Remove scam_setlatlonidx and use shr_scam_.
>>>>>>>>>>> Switch ncorn for nc3crop and nwheat for nirrig change pio_close for ncd_close
M       models/lnd/clm/src/main/clm_varcon.F90 ------- Add degpsec, isecspday,
             and remove #includes
M       models/lnd/clm/src/main/clm_varpar.F90 ------- Remove #includes, add ivis/inir
             indices, and make rtmlat/rtmlon variables not parameters
M       models/lnd/clm/src/main/CNiniTimeVar.F90 ----- Remove directives, and #includes, 
             add qflx_irrig
M       models/lnd/clm/src/main/abortutils.F90 ------- Remove directives, and #includes
             and NEC_SX, and UNICOSMP CPP defines
M       models/lnd/clm/src/main/accumulMod.F90 ------- Remove directives
M       models/lnd/clm/src/main/decompInitMod.F90 ---- Remove UNICOSMP CPP defines
M       models/lnd/clm/src/main/clm_initializeMod.F90  Move cellarea from areaMod to here
             work with downscale a bit, add stuff from clm_comp init to here
M       models/lnd/clm/src/main/clmtypeInitMod.F90 --- Add irrig_rate and n_irrig_steps_left
M       models/lnd/clm/src/main/iniTimeConst.F90 ----- Switch pio_close with ncd_close,
             add single-column read for PCT_CLAY, switch 86400 for secspday
M       models/lnd/clm/src/main/histFileMod.F90 ------ Remove UNICOSMP, switch pio_close
             with ncd_close
M       models/lnd/clm/src/main/restFileMod.F90 ------ Switch pio_close with ncd_close
M       models/lnd/clm/src/main/clm_time_manager.F90 - Replace 24*3600/86400 with isecspday
M       models/lnd/clm/src/main/clm_driver.F90 ------- Change to one phase run method
             clm_drv, add history file handling phase in
M       models/lnd/clm/src/main/subgridAveMod.F90 ---- Remove directives, #includes, 
             CPP_VECTOR CPP #ifdef
M       models/lnd/clm/src/main/CASAiniTimeVarMod.F90  Remove directives and #includes
M       models/lnd/clm/src/main/CNiniSpecial.F90 ----- Remove directives and #includes
M       models/lnd/clm/src/main/pftvarcon.F90 -------- ncorn->nc3crop, nwheat->nirrig,
             add irrigated and fcurdv (fcur for CNDV), read in file as NetCDF
             use ncd_ calls and let it handle bcasts
M       models/lnd/clm/src/main/ncdio_pio.F90 -------- Remove making pio_closefile public
             add found option to ncd_io_real_var1_nf and scam_field_offsets
             replace scam_setlatlonidx with shr_scam_getCloseLatLon
M       models/lnd/clm/src/main/surfrdMod.F90 -------- Switch pio_close with ncd_close
             if find irrigated crop make sure create_crop_landunit is on
M       models/lnd/clm/src/main/domainMod.F90 -------- Remove domain_setsame
M       models/lnd/clm/src/main/clmtype.F90 ---------- Add irrig_rate, qflx_irrig, and
              n_irrig_steps_left
         PFT indices for 15 and up are now...
+!   15 => c3_crop
+!   16 => c3_irrigated
+!   17 => corn
+!   18 => spring_wheat
+!   19 => winter_wheat
+!   20 => soybean
        17 through 20 aren't activited yet, but will be with the crop changes
M       models/lnd/clm/src/main/clm_mct_mod.F90 ------ Remove UNICOSMP, CPP_VECTOR
             CPP #ifdef
M       models/lnd/clm/src/main/downscaleMod.F90 ----- Remove map1dl_a2l, map1dl_l2a args
             remove setting of ldomain mask and frac based on adomain and mapping
M       models/lnd/clm/src/main/histFldsMod.F90 ------ Add QIRRIG
M       models/lnd/clm/src/main/mkarbinitMod.F90 ----- Initialize irrig_rate, 
             qflx_irrig, and n_irrig_steps_left add snowdp2lev into here

>>>>>>>>>>> Remove lnd_chkAerDep, remove clm_comp layer
M       models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 Remove lnd_chkAerDep_mct, remove
              clm_comp with clm_initialize directly, and switch clm_run with clm_drv
              add clm_run method to here
M       models/lnd/clm/src/main/cpl_mct/lnd_comp_esmf.F90 Remove lnd_chkAerDep_mct, remove
              clm_comp with clm_initialize directly, and switch clm_run with clm_drv
              add clm_run method to here

>>>>>>>>>>> Change RTM flow file read from ASCII to NetCDF
>>>>>>>>>>> Remove UNICOSMP and CPP_VECTOR #ifdef, divide RTM run method into three
M       models/lnd/clm/src/riverroute/RtmMod.F90 ---- Read in RTM flow file in NetCDF
              Remove UNICOSMP and CPP_VECTOR
              Divide Rtmriverflux method into
+  public RtmInput        ! Update rtm inputs
+  public RtmMapl2r       ! Maps input from clm to rtm grid
+  public Rtm             ! River routing model (based on U. Texas code)
M       models/lnd/clm/src/riverroute/RunoffMod.F90 - Remove sMatP_l2r

>>>>>>>>>>> Remove #includes and concurrent directives
>>>>>>>>>>> Switch ncd_close for pio_close, add setting of irrigation arrays
>>>>>>>>>>> Use parameters rather than constants
M       models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - Remove #includes
              use degpsec and isecspday rather than constants
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ----- Remove #includes
              add qflx_irrig
M       models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ------- Switch pio_close with ncd_close
M       models/lnd/clm/src/biogeophys/FracWetMod.F90 ---------- Remove directives/#includes
M       models/lnd/clm/src/biogeophys/TridiagonalMod.F90 ------ Remove directives/#includes
M       models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 ------- Remove #includes add 
              irrig_rate, n_irrig_steps_left, qflx_irrig
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- Remove #includes add
              qflx_irrig
M       models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Add
              n_irrig_steps_left and irrig_rate to restart files
M       models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ---- Set qflx_irrig to zero
              over pervious road
M       models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------ Use isecspday, degpsec
M       models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ---- Remove #include add
              setting of qflx_irrig to zero
M       models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Remove #includes and
              directives add handling of irrig_rate, and n_irrig_steps_left
              starts irrigation at 1/4 of a day and run for 1/6th of a day up
              to 0.7 moisture level, remove NEC_SX CPP #ifdef

  bluefire testing: All PASS except...
008 blAZ1 TBL.sh _sc_dh clm_irrig 20020401:3600 10x15 USGS -10 cold .............................FAIL! rc= 5
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing:
025 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold .................FAIL! rc= 7
053 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
055 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
  bluefire/CESM testing: All PASS except baseline compare tests that failed in clm4_0_18
BFAIL PST.f45_g37.I1850.bluefire.compare.clm4_0_18 
BFAIL ERI.f19_g16.IG.bluefire.compare.clm4_0_18 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm4_0_18
  bluefire/PTCLM testing: All PASS
  jaguar: All PASS except...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 72+72 arb_ic ..................FAIL! rc= 13
022 erH92 TER.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 10+38 cold FAIL! rc= 13
023 brH92 TBR.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 72+72 cold FAIL! rc= 11
038 smLI2 TSM.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
039 erLI2 TER.sh _sc_dm clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
040 brLI2 TBR.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
042 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
043 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
044 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
  jaguar interactive testing: All PASS except...
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
  edinburgh/lf95 interactive testing: All PASS
  edinburgh/lf95 testing: MPI problems on edinburgh interfere with testing
  edinburgh/PTCLM testing: All PASS up to...
myPTCLMtests_US-Ha1_I_1850.PTCLM    FAIL 0
  mirage,storm/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
  yong/intel testing: All PASS except..
011 smD94 TSM.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
012 erD94 TER.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
  yong/intel PTCLM testing: All PASS up to...
myPTCLMtests_US-Ha1_I_QIAN.PTCLM    PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_18

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_18
Originator(s):  erik (Erik Kluzek)
Date: Sun Nov 21 22:08:03 MST 2010
One-line Summary: Fix a problem with the clm template, update scripts version to fix bug with linking with ESMF

Purpose of changes:

Fix a minor problem with the clm template from the last tag. Update scripts to fix
a problem with linking with ESMF.

Bugs fixed (include bugzilla ID):
                                 1239 (ESMF build fails)
                                 1240 (lynx_pgi build fails)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1238 (PST test fails)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts

   scripts to mpiserial08_scripts4_101117

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M models/lnd/clm/test/system/test_driver.sh
  M models/lnd/clm/bld/clm.cpl7.template

Summary of testing:

  bluefire/CESM testing: All PASS except
cat: 0652-050 Cannot open
/glade/proj2/fis/cgd/home/erik/clm_trunk/scripts/PST.f45_g37.I1850.bluefire.GC.140531/TestStatus.
BFAIL ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_17 
RUN   ERI.f19_g16.IG.bluefire.GC.140531 
cat: 0652-050 Cannot open
/glade/proj2/fis/cgd/home/erik/clm_trunk/scripts/PST.f10_f10.I8520CN.bluefire.GC.140531/TestStatus.

CLM tag used for the baseline comparison tests if applicable: clm4_0_17

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_17
Originator(s):  erik (Erik Kluzek)
Date: Sat Nov 20 10:04:09 MST 2010
One-line Summary: Update to externals that change answers to roundoff, use drv pio namelist, add in T341 datasets

Purpose of changes:

Update driver, datm, esmf_wrf,csm_share to version that changes answers to roundoff.
Update pio to new pio drv namelist, remove pio namelist in clm. Remove samegrids, just
use downscale. Add in new T341 datasets.

PIO for all model components is now controlled in the pio_inparm namelist that's in
the drv_in namelist file in cpl.buildnml.csh. CLM and DATM now respond to the settings
for lnd_pio_* and atm_pio_* in this namelist respectively.

There's also a new driver namelist setting that will update the orbit each year
(setting orb_mode and orb_iyear_align).

Bugs fixed (include bugzilla ID):
                                 1225 (abort if both trigrid and finemesh on)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1238 (PST test fails)
                                 1239 (ESMF build fails)
                                 1240 (lynx_pgi build fails)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: Add in darwin_intel build

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets: Add in T341 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm,
           csm_share, pio, mct, cprnc

    scripts     to mpiserial07_scripts4_101117
    drv         to drv3_1_45
    datm        to datm8_101105
    csm_share   to share3_101118
    pio         to pio1_2_6
    mct         to MCT2_7_0_100228-mpiserial101109_tag02
    cprnc       to cprnc_101119

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/tests_pretag_jaguar - remove non-existant tests

>>>>>>>>>> Remove clmi frequency setting, add darwin build/run
   M  models/lnd/clm/test/system/input_tests_master
   M  models/lnd/clm/test/system/TBR.sh
   M  models/lnd/clm/test/system/test_driver.sh - Add darwin builds
   M  models/lnd/clm/test/system/mknamelist

>>>>>>>>>> Change orb_iyear for orb_iyear_ad
   M  models/lnd/clm/test/system/nl_files/nl_urb
   M  models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv
   M  models/lnd/clm/test/system/nl_files/clm_ndepdyn -- remove ndepsrc stream setting
              Can now replace usage of this file with clm_std
   M  models/lnd/clm/test/system/nl_files/nl_cn_conly
   M  models/lnd/clm/test/system/nl_files/nl_urb_br

>>>>>>>>>> Get build working with darwin_intel
   M  models/lnd/clm/bld/configure ------ get it working with darwin_intel
   M  models/lnd/clm/bld/clm.cpl7.template - Use $GMAKE, set to gmake if not set

>>>>>>>>>> Remove non-existant resolution: 2.5x3.33
   M  models/lnd/clm/bld/namelist_files/checklatsfiles.ncl
   M  models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl

>>>>>>>>>> Add orb_mode, set orbit based on it, also add orb_iyear_align
>>>>>>>>>> Add run_barriers, pio_inparm namelist, add T341 resolution (512x1024)
   M  models/lnd/clm/bld/build-namelist - Set orbit based on orb_mode, set pio namelist
             for stand-alone testing, 
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Remove pio namelist
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
   M  models/lnd/clm/bld/namelist_files/datm-build-namelist
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Add T341: griddata,
             fracdata, surfdata, topodata (fracdata for USGS and tx0.1 masks)`
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml

>>>>>>>>>> Switch orb_iyear for orb_iyear_ad
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

>>>>>>>>>> Switch ncd_x for pio_x/nf_x
>>>>>>>>>> Fix a couple memory leaks that Jim Edwards found
>>>>>>>>>> Make ncd_pio private, add documentation add attributes for restart history
>>>>>>>>>> files, add 2D character read (needed for NetCDF pft-physiology file read on
>>>>>>>>>> irrigation branch)
   M  models/lnd/clm/src/biogeochem/CASAMod.F90 ------------ Replcae pio_x
   M  models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - use masterproc at top of module
   M  models/lnd/clm/src/biogeochem/CNDVMod.F90 ------------ Replace pio_x
   M  models/lnd/clm/src/biogeochem/CNrestMod.F90 ---------- Replace pio_x
   M  models/lnd/clm/src/main/inicFileMod.F90 -------------- Add use MPI_LOGICAL
   M  models/lnd/clm/src/main/accumulMod.F90 --------------- Replace pio_x
   M  models/lnd/clm/src/main/clm_initializeMod.F90 -------- Remove samegrids use downscale,
                don't pass namelist to ncd_pio initialization
   M  models/lnd/clm/src/main/subgridRestMod.F90 ----------- Add use endrun, switch ncd_x for nf_x
   M  models/lnd/clm/src/main/ndepStreamMod.F90 ------------ PIO initialization uses 
                driver settings, pass get_calendar to initialization
   M  models/lnd/clm/src/main/histFileMod.F90 -------------- Add attributes to history restart files
   M  models/lnd/clm/src/main/restFileMod.F90 -------------- Replace pio_x
   M  models/lnd/clm/src/main/clm_time_manager.F90 --------- Replace nf_x with ncd_x add
                get_calendar
   M  models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ----- Abort if trigrid and downscale
                Update orbit params in run-phase
   M  models/lnd/clm/src/main/clm_varctl.F90 --------------- Remove samegrids
   M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 --- Abort if trigrid and downscale
                Update orbit params in run-phase
   M  models/lnd/clm/src/main/ncdio_pio.F90 ---------------- Update documentation, make private
                add ncd_pio_closefile wrapper, make some pio interfaces public from here,
                add ncd_io_char_var2_nf for NetCDF pft-physiology file, remove pio namelist
                remove a second allocation that Jim Edwards found
   M  models/lnd/clm/src/main/surfrdMod.F90 ---------------- Fix memory leak from Jim Edwards
   M  models/lnd/clm/src/riverroute/RtmMod.F90 ------------- Switch nf_x with ncd_x
   M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 -- Add use for spval and iulog,
                change nf_x for ncd_x

Summary of testing:

All TBL tests fail... (although you can use clm4_0_16 with updated externals and show b4b)

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
055 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
056 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
057 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
  bluefire interactive testing: All PASS
  bluefire/CESM testing:
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_16 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_16 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_16 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_16 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_16 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_16 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_16 
FAIL PST.f45_g37.I1850.bluefire <<<<< Didn't create scripts problem, bug 1238
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_16 
FAIL  ERS_E.f19_g16.I1850.bluefire <<<< Scripts build issue, bug 1239
BFAIL ERS_E.f19_g16.I1850.bluefire.generate.clm4_0_17 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_16 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_16 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_16 
FAIL  PST.f10_f10.I8520CN.bluefire <<<<< Didn't create scripts problem, bug 1238
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_16 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_16 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_16 
  bluefire/PTCLM testing: All PASS
  jaguar: All PASS except...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 72+72 arb_ic ..................FAIL! rc= 13
022 erH92 TER.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 10+38 cold FAIL! rc= 13
023 brH92 TBR.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 72+72 cold FAIL! rc= 11
038 smLI2 TSM.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
039 erLI2 TER.sh _sc_dm clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
040 brLI2 TBR.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
042 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
043 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
044 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
  jaguar interactive testing: All PASS except...
007 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
008 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
009 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 sm974 TSMscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds ....FAIL! rc= 6
  edinburgh/lf95 interactive testing: All PASS
  edinburgh/lf95 testing: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 96 arb_ic .................FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 10+38 arb_ic ..............FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:1800 4x5 gx3v7 72+72 arb_ic ...........FAIL! rc= 5
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:1800 10x15 USGS 96 arb_ic .......................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:1800 10x15 USGS 10+38 arb_ic ....................FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 96 cold ..FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 5
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
  edinburgh/PTCLM testing: All PASS up to...
myPTCLMtests_US-Ha1_I_1850.PTCLM    FAIL 0
  mirage,storm/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL!  rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
  lynx/pgi testing: All FAIL scripts build issue <<<< bug 1240
  yong/darwin_intel testing: All PASS up to ...
005 smD94 TSM.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_16


IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All with datm
    - what platforms/compilers: All
    - nature of change: roundoff

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

     PERGRO test on bluefire

===============================================================
===============================================================
Tag name:  clm4_0_16
Originator(s):  erik/mvertens (Kluzek Erik 1326 CGD) (Vertenstein Mariana 1349 CGD)
Date: Wed Oct 27 13:33:21 MDT 2010
One-line Summary: Fix downscaling roundoff difference for same-grids by copying scale factor when needed

Purpose of changes:

Fix bug 1230, that caused problems with runoff to the ocean when running fully coupled. The global integrals of runoff fields
was the same in the coupler -- but the values where roundoff different. This caused problems both in testing for bit-for-bit with
the previous version and with restarts. The problem was that in the downscaling changes made in clm4_0_15 the areal scaling factor
asca needed to be copied from adomain into ldomain is no downscaling is taking place.

Bugs fixed (include bugzilla ID):
                                 1230 (Subtle roundoff level difference with clm4_0_15 in scaling of fields when samegrids is on)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self,mvertens
  fix comes from mvertens

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/main/clm_initializeMod.F90 ------ Move local samegrids variable to clm_varctl
M       models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- If samegrids copy adomain scale factor to ldomain
M       models/lnd/clm/src/main/clm_varctl.F90 ------------- Add samegrids variable in
M       models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - If samegrids copy adomain scale factor to ldomain

Summary of testing:

  bluefire interactive testing: All PASS up to...
041 smV63 TSM.sh _mec10sc_do clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 96 arb_ic ..............PASS
  bluefire/CESM testing: All PASS except...
BFAIL ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_15

CLM tag used for the baseline comparison tests if applicable: clm4_0_15

Changes answers relative to baseline: Potentially roundoff level different

===============================================================
===============================================================
Tag name:  clm4_0_15
Originator(s):  mvertens (Mariana Vertenstein), erik (Erik Kluzek)
Date: Sun Oct 24 19:16:06 MDT 2010
One-line Summary: Move pio branch to trunk

Purpose of changes: 

Move Mariana's pio branch to trunk. Update driver to pass U10 field to. Remove the 
separate creation of clm.i files (always use clm.r files for initial conditions. 
Move the finemesh downscale methods to it's own module. Remove unused modules, and
move the close_dispose method to inside of the history module. Change history 
restart files to NetCDF.

Bugs fixed (include bugzilla ID): 1219 (remove clm.i files)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1230 (Subtle roundoff level difference with clm4_0_15 in scaling of fields when samegrids is on)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: Remove old PIO namelist items (there is a new clm namelist to control PIO)
   We aren't supporting the new clm PIO namelist until we move the PIO control to the driver and the drv_in namelist.
   So there is no support to handle the namelist in build-namelist nor in the buildnml template.


Describe any substantial timing or memory changes: none with PIO off

Code reviewed by: self, mvertens (mvertens created the original work on the branch)

List any svn externals directories updated (csm_share, mct, etc.): scripts, pio and drv

    scripts   to mpiserial06_scripts4_101022
    pio       to pio1_1_2
    drv       to drvseq3_1_38

List all files eliminated:

    R  models/lnd/clm/src/main/ncdio.F90 --- Old NetCDF I/O interface
    R  models/lnd/clm/src/main/system_messages.F90
    R  models/lnd/clm/src/main/iobinary.F90
    R  models/lnd/clm/src/main/do_close_dispose.F90

List all files added and what they do:

    A  models/lnd/clm/src/main/ncdio_pio.F90 ----- New PIO I/O interface
    A  models/lnd/clm/src/main/downscaleMod.F90 -- New module with downscaling methods for fine-mesh

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Remove setting of hist_crtinic
    M  models/lnd/clm/test/system/mknamelist
    M  models/lnd/clm/test/system/nl_files/nl_urb
    M  models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv
    M  models/lnd/clm/test/system/nl_files/nl_cn_conly
    M  models/lnd/clm/test/system/nl_files/nl_urb_br

    M  models/lnd/clm/bld/configure ------- Remove USEPIO
    M  models/lnd/clm/bld/build-namelist -- Remove hist_crtinic
    M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Remove hist_crtinic and old PIO options, 
               increase datm_file_aero string length from 80 to 256
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove hist_crtinic

    M  models/lnd/clm/doc/UsersGuide/preface.xml - Remove old PIO options

>>>>>>>>>>> Remove ncdio calls to ncdio_pio, add in downscale module, remove do_close_dispose, handle history restarts as NetCDF
>>>>>>>>>>> rather than binary. Remove some of the misc.h/preproc.h includes
    M  models/lnd/clm/src/biogeochem/CASAMod.F90 ------------ Update ncdio calls to ncdio_pio calls
    M  models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Update ncdio to ncdio_pio
    M  models/lnd/clm/src/biogeochem/CNDVMod.F90 ---- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/biogeochem/CNrestMod.F90 -- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/inicFileMod.F90 ------ Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/organicFileMod.F90 --- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/spmdGathScatMod.F90 -- Remove allgather_data, and scatter/gather_2darray_int/real
    M  models/lnd/clm/src/main/accumulMod.F90 -- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/clm_comp.F90 ---- Change format
    M  models/lnd/clm/src/main/decompInitMod.F90 - Remove misc.h/preproc.h
    M  models/lnd/clm/src/main/getdatetime.F90 --- Remove misc.h/preproc.h
    M  models/lnd/clm/src/main/clm_initializeMod.F90 - Update ncdio to ncdio_pio, add in downscale module
    M  models/lnd/clm/src/main/subgridRestMod.F90 ---- Update ncdio to ncdio_pio
                      NOTE: mcdate and mcsec are NOT on output files
    M  models/lnd/clm/src/main/clm_glclnd.F90 -------- Move map_maparrayl, map1dl_a2l, map1dl_l2a, map_setptrs
                      to downscale module
    M  models/lnd/clm/src/main/fileutils.F90 --------- Add "if masterproc" to error write statements
    M  models/lnd/clm/src/main/pftdynMod.F90 --------- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/iniTimeConst.F90 ------ Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/histFileMod.F90 ------- Update ncdio to ncdio_pio, add if_disphist to keep track of if saving file
                      add hist_do_disp, and strip_null methods
                      (remove external do_close_dispose and do it in here) add history restart files, improve indenting 
    M  models/lnd/clm/src/main/clm_atmlnd.F90 -------- Add u10 in, and change name of calls to include downscale in names
    M  models/lnd/clm/src/main/restFileMod.F90 ------- Update ncdio to ncdio_pio, add netCDF history restart, remove binary read/write
    M  models/lnd/clm/src/main/scam_setlatlonidx.F90 - Update to using pio calls
    M  models/lnd/clm/src/main/controlMod.F90 -------- Remove old PIO namelist items
    M  models/lnd/clm/src/main/clm_time_manager.F90 -- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/main/clm_driver.F90 -------- Remove do_inicwrite, restFile_write_binary
    M  models/lnd/clm/src/main/clm_varctl.F90 -------- Remove hist_crtinic and old PIO control, add downscale flag
    M  models/lnd/clm/src/main/surfrdMod.F90 --------- Update ncdio to ncdio_pio and use a mix of ncdio_pio and PIO calls for reads
                      also work with file formatting
    M  models/lnd/clm/src/main/decompMod.F90 --------- Add a blank line
    M  models/lnd/clm/src/main/areaMod.F90 ----------- Move some of this to the downscale module
    M  models/lnd/clm/src/main/histFldsMod.F90 ------- Change RAINATM/SNOWATM depending on downscale or not
    M  models/lnd/clm/src/riverroute/RtmMod.F90 ------ Update ncdio to ncdio_pio
    M  models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ----- Update ncdio to ncdio_pio
    M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 - Update ncdio to ncdio_pio
    M  models/lnd/clm/src/biogeophys/SNICARMod.F90 --------- Update ncdio to ncdio_pio, remove check_ret

    M  models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ---- Add u10, change some finemesh calls to downscale module
    M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 -- Add u10, change some finemesh calls to downscale module

Summary of testing:

  bluefire interactive testing: All PASS up to...
037 smK74 TSM.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............PASS
  bluefire/PTCLM testing: All PASS
  bluefire/CESM testing: All PASS except...
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_14 
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_14 
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_14 
BFAIL ERS_D.f45_g37.I.bluefire.compare.clm4_0_14 
BFAIL PST.f45_g37.I1850.bluefire.compare.clm4_0_14 
BFAIL PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_14 
BFAIL ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_14 
BFAIL ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_14 
BFAIL ERI.f19_g16.IG.bluefire.compare.clm4_0_14 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_14 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_14 
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_14 
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_14 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm4_0_14 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_14 
BFAIL ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_14 
  lynx/pgi interactive testing: All PASS
  jaguar interactive testing: Up to following PASS
007 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
  edinburgh/lf95 testing: All FAIL except...
001 smA92 TSM.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -6 arb_ic ...................PASS
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................PASS
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............PASS
017 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 96 cold ..........PASS
021 smJ92 TSM.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 cold ...............PASS
022 erJ92 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 cold ............PASS
023 brJ92 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 cold .........PASS
  edinburgh/lf95 interactive testing: All PASS
  edinburgh/PTCLM testing: Up to following PASS
myPTCLMtests_US-Ha1_I_1850.PTCLM          FAIL 0
  mirage,storm/ifort interactive testing: up to following PASS
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13

CLM tag used for the baseline comparison tests if applicable: clm4_0_14

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_14
Originator(s):  erik (Erik Kluzek)
Date: Tue Oct 19 13:12:36 MDT 2010
One-line Summary: Fix finidat file for T31 sim_year=2000 cases

Purpose of changes:

Remove the 1850 T31 finidat file for sim_year=2000 and use the previous sim_year=2000
files (created using interpinic). Update scripts and datm.

Bugs fixed (include bugzilla ID): Correct finidat file for T31 sim_year=2000

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Go back to T31,sim_year=2000
finidat file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts and datm

   scripts to mpiserial05_scripts4_101018
   datm    to datm8_101008

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Return to old
                                                  finidat file for T31 sim_year=2000
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - change
                                                  fearedep to datm_file_aero

Summary of testing:

  bluefire/CESM testing:
PASS  SMS_D.T31_g37.I1850CN.bluefire 
PASS  SMS_D.T31_g37.ICN.bluefire 

CLM tag used for the baseline comparison tests if applicable: clm4_0_13

Changes answers relative to baseline: T31 2000 cases

===============================================================
===============================================================
Tag name:  clm4_0_13
Originator(s):  erik (Erik Kluzek)
Date: Sat Oct 16 09:14:08 MDT 2010
One-line Summary: Bring in PTCLM branch, add in T31 finidat file and turn off ice_runoff for T31

Purpose of changes:

Bring in PTCLM work. Update externals for scripts, datm, drv. Get mksurfdata to have options to override soil/PFT with user input values. Fix some issues with getregional_datasets.pl.  Remove old stand-alone CLM Makefile (always use CESM Macro's files and Makefile). More removal of ndepsrc in build-namelist. Turn off ice_runoff for T31. Add in T31 finidat file.

Bugs fixed (include bugzilla ID):
                                 1189 (Create ability to change soil color/texture in mksurfdata)
                                 1188 (Add ability to handle control transient land-cover change)
                                 1206 (Problem looping over a single year of CPLHIST forcing)
                                 1211 (Small memory leak in CLM4 initialization)
                                 1223 (ESMF problem)
Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1249 (problem in mksurfdata for PFT override mode)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: 

    Remove custom options to stand-alone build/test, require using cesm make files

Describe any changes made to the namelist: None, although many new options to mksurfdata namelist

List any changes to the defaults for the boundary datasets: New T31 finidat files

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, csm_share

   drv       to drvseq3_1_37
   datm      to datm8_100921
   csm_share to share3_101001
   scripts   to PTCLM03_scripts4_101005

List all files eliminated:

   R models/lnd/clm/test/system/tests_posttag_breeze >>> rename to mirage
>>>>>>>>>>> Rename to module
   R models/lnd/clm/tools/mksurfdata/mkglcmec.F90
   R models/lnd/clm/tools/mksurfdata/mksoicol.F90
   R models/lnd/clm/tools/mksurfdata/mksoitex.F90

   R models/lnd/clm/bld/config_files/Makefile.in --- Remove always use CESM make

List all files added and what they do:

>>>>>>>>>>> Renames
   A models/lnd/clm/test/system/tests_posttag_mirage
   A models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90
   A models/lnd/clm/tools/mksurfdata/mksoitexMod.F90
   A models/lnd/clm/tools/mksurfdata/mksoicolMod.F90

>>>>>>>>>>> Namelist settings for standard urban single-point
   A models/lnd/clm/bld/namelist_files/use_cases/stdurbpt.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Remove PTS_MODE restart/branch tests
   M models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M models/lnd/clm/test/system/tests_posttag_spot1 --------- remove hybrid test
   M models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M models/lnd/clm/test/system/tests_posttag_intrepid_nompi
   M models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>> Change breeze+ for mirage changes for new build that requires CESM build files
   M models/lnd/clm/test/system/TCB.sh -------------------- Set nc_path
   M models/lnd/clm/test/system/config_files/_nrmexsc_ds -- Use -sitespf_pt
   M models/lnd/clm/test/system/config_files/_nrvansc_ds -- Use -sitespf_pt
   M models/lnd/clm/test/system/test_driver.sh ------------ Swap out mirage/storm for breeze+, add GEN machine options, remove CLM_CESMBLD
   M models/lnd/clm/test/system/mknamelist ---------------- Use config_file variable
   M models/lnd/clm/test/system/TSMscript_tools.sh -------- Add exedir
   M models/lnd/clm/test/system/CLM_runcmnd.sh ------------ Add more options for yong, change breeze+ to mirage/storm
   M models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850 ------ Add exedir
   M models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000 - Add exedir

>>>>>>>>>>> Add new options to override dataset setttings with your own values for: soil color/texture, and PFT
   M models/lnd/clm/tools/mksurfdata/mkvarctl.F90 ----- Make private
   M models/lnd/clm/tools/mksurfdata/mkglacier.F90 ---- Add option to zero out glacier
   M models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 - Add mkharvest_parse_oride to override harvesting
   M models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ---- Move nglcec here
   M models/lnd/clm/tools/mksurfdata/mklanwat.F90 ----- Add option to zero out lake
   M models/lnd/clm/tools/mksurfdata/mkurban.F90 ------ Add option to zero out urban
   M models/lnd/clm/tools/mksurfdata/mkvarsur.F90 ----- Make private
   M models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ----- Add new namelist options: soil_color, soil_sand, soil_clay, pft_idx, pft_frc
   M models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ----- Add init and override methods: mkpftInit, mkpft, and mkpft_parse_oride
   M models/lnd/clm/tools/mksurfdata/Filepath --------- Add esmf_wrf_timemgr to directory list
   M models/lnd/clm/tools/mksurfdata/Srcfiles --------- Change names, add shr_cal_mod, shr_string_mod, and ESMF files

   M models/lnd/clm/tools/mksurfdata/mksurfdata.pl ---- Add new options to override your own values, and error check the input:
+     -dynpft "filename"            Dynamic PFT/harvesting file to use
+                                   (rather than create it on the fly)
+                                   (must be consistent with first year)
+     -exedir "directory"           Directory where mksurfdata program is
+                                   (by default assume it's in the current directory)
+OPTIONS to override the mapping of the input gridded data with hardcoded input
+
+     -pft_frc "list of fractions"  Comma delimited list of percentages for veg types
+     -pft_idx "list of veg index"  Comma delimited veg index for each fraction
+     -soil_cly "% of clay"         % of soil that is clay
+     -soil_snd "% of sand"         % of soil that is sand

>>>>>>>>>>> Start fixing some issues with getregional scripts
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl

>>>>>>>>>>> Add USER_FCTYP
   M models/lnd/clm/tools/mksurfdata/Makefile
   M models/lnd/clm/tools/interpinic/Makefile
   M models/lnd/clm/tools/mkgriddata/Makefile
   M models/lnd/clm/tools/mkdatadomain/Makefile

>>>>>>>>>>>  Remove stand-alone user options and require cesm_bld, add ice_runoff run_stopdate, and new finidat files for T31, more ndepmapalgo defaults
>>>>>>>>>>>  Change stop_n values for urban single-point so will run to completion
   M models/lnd/clm/bld/configure --------------- Remove options: test, cc, cflags, fc, fflags, fopt, gmake, ldflags, linker, mpi/nc_inc/_lib
                                                  add nc_path and mpi_path options, require cesm_bld, and remove logic for doing 
                                                  clm-stand-alone build
   M models/lnd/clm/bld/queryDefaultNamelist.pl - Check for valid values, add list options, 
   M models/lnd/clm/bld/queryDefaultXML.pm ------ Change a comment
   M models/lnd/clm/bld/build-namelist ---------- Add setting of ice_runoff
   M models/lnd/clm/bld/config_files/config_sys_defaults.xml --- Set more default machine names
   M models/lnd/clm/bld/config_files/config_definition.xml ----- Remove compiler options above and add nc_path/mpi_path

   M models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add run_stopdate and work on comments
   M models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add ice_runoff defaults, new finidat files for T31, add more ndepmapalgo defaults
   M models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml - Change stop_n for urban single-point, add stop_date

   M models/lnd/clm/doc/UsersGuide/preface.xml - Change comment

>>>>>>>>>>> Fix two code bugs (1211 and 1223)
   M models/lnd/clm/src/main/iniTimeConst.F90 ------------ make sure to deallocate memory
   M models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 -- add use statement needed for endrun

Summary of testing:

  bluefire testing: All PASS except.. (up to 054 smI59)
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  bluefire interactive testing: All PASS except..
061 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 6
  bluefire/CESM testing: All PASS except
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_11
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_11
  jaguar interactive testing: All PASS except...
005 smAK4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 10
007 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
008 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
009 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/lf95 interactive testing: All PASS
  mirage/storm.intel interactive testing: ALL PASS up to...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13

CLM tag used for the baseline comparison tests if applicable: clm4_0_12

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_12
Originator(s):  erik (Erik Kluzek)
Date: Fri Sep 10 13:07:03 MDT 2010
One-line Summary: Add U10 to history, cesm1_0_rel06 updates, PTCLM02 updates (except 
                  mksurfdata), remove ndepdat/dyn/faerdep

Purpose of changes:

Update to latest cesm1 release branch. Change SPMD from spmd to use_mpiserial in
configure. Remove old aerdep and ndepdat/dyn files from code and scripts. Change ccsm in
scripts to cesm. Add in new U10 field to history files, change old name to U10_DUST. Some
updates from PTCLM branch for XML database. Also perturb initial conditions read in from
initial file by pertlim. With with PERGRO CPP #ifdef a bit. Start adding in testing on 
lynx.

Bugs fixed (include bugzilla ID):
                                 1199 (Add trusted machine history file for PERGRO analysis)
                                 1196 (Add urban option to configure, delete GRANDVIEW ifdefs)
                                 1191 (UG documentation for single-point needs to change que to shared-que)
                                 1167 (Add note about reducing PE's for single-point mode)
                                 1115 (Make config_definition names the same as configure options)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1206 (Problem looping over a single year of CPLHIST forcing)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1147 (mkgriddata can't straddle over Greenwich)

Type of tag: std-test

Describe any changes made to build system:
    Names of configure modes changed: seq_ccsm to clm_stndln, and ext_ccsm_seq to ext_cesm
    Add sitespf_pt option which will set either MEXICOCITY or VANCOUVER cpp ifdefs
    Names of some configure options changed to make consistent with config_definition file.

Describe any changes made to the namelist: Remove use_ndepstream/fndepdat/fndepdyn/faerdep

List any changes to the defaults for the boundary datasets:

     New 10x15 rcp6 transient 1850-2100 pftdyn dataset
     Add navy oro file to clm_tools XML file

Describe any substantial timing or memory changes: None

Code reviewed by: self, U10 code from Keith Oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts and datm
   scripts to scripts4_100901a
   datm    to datm8_100830

List all files eliminated:

   D    models/lnd/clm/src/main/aerdepMod.F90
   D    models/lnd/clm/src/main/ndepFileMod.F90
   D    models/lnd/clm/tools/ncl_scripts/convertUrbanOffline2Seq.ncl
   D    models/lnd/clm/tools/ncl_scripts/getndepdatFrom20thCentury.ncl
   D    models/lnd/clm/tools/mkgriddata/mkgriddata.ccsm_dom -- Rename to .cesm_dom
   D    models/lnd/clm/doc/UsersGuide/fixvan_datm.buildnml.diff

List all files added and what they do:

>>>>>>>>>> Transient test files for rcp2.6 and rcp4.5, start adding lynx testing
   A    models/lnd/clm/test/system/nl_files/clm_transient_rcp2.6
   A    models/lnd/clm/test/system/nl_files/clm_transient_rcp4.5
   A    models/lnd/clm/test/system/tests_posttag_lynx
   A    models/lnd/clm/test/system/tests_posttag_lynx_nompi

>>>>>>>>>> Sample perturbation growth data for jaguar, intel and lahey
   A    models/lnd/clm/tools/ncl_scripts/RMSjaguar.dat
   A    models/lnd/clm/tools/ncl_scripts/RMSintel.dat
   A    models/lnd/clm/tools/ncl_scripts/RMSlahey.dat

   A    models/lnd/clm/tools/mkgriddata/mkgriddata.cesm_dom - rename from .ccsm_dom

>>>>>>>>>> Plot of sample bad perturbation error growth
   A    models/lnd/clm/doc/UsersGuide/badpergro.jpg

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Change ccsm_seq=>clm_stndln, spmd=>nouse_mpiserial
   M    models/lnd/clm/test/system/config_files/_nrsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_nrsc_ds
   M    models/lnd/clm/test/system/config_files/17p_scnv_do
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_m
   M    models/lnd/clm/test/system/config_files/_scnv_dh
   M    models/lnd/clm/test/system/config_files/_nrsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_o
   M    models/lnd/clm/test/system/config_files/4p_nrcasasc_ds
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
   M    models/lnd/clm/test/system/config_files/_nrsc_do
   M    models/lnd/clm/test/system/config_files/_persc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_s
   M    models/lnd/clm/test/system/config_files/_nrsc_ds
   M    models/lnd/clm/test/system/config_files/_scnv_do
   M    models/lnd/clm/test/system/config_files/_persc_dm
   M    models/lnd/clm/test/system/config_files/_persc_do
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_dh
   M    models/lnd/clm/test/system/config_files/_persc_ds
   M    models/lnd/clm/test/system/config_files/_nrmexsc_ds
   M    models/lnd/clm/test/system/config_files/_mec10sc_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_dm
   M    models/lnd/clm/test/system/config_files/_nrcnsc_do
   M    models/lnd/clm/test/system/config_files/17p_sc_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_do
   M    models/lnd/clm/test/system/config_files/_mec10sc_dm
   M    models/lnd/clm/test/system/config_files/_nrcnsc_ds
   M    models/lnd/clm/test/system/config_files/4p_casasc_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_ds
   M    models/lnd/clm/test/system/config_files/17p_sc_dm
   M    models/lnd/clm/test/system/config_files/_mec10sc_do
   M    models/lnd/clm/test/system/config_files/17p_sc_do
   M    models/lnd/clm/test/system/config_files/_sc_dh
   M    models/lnd/clm/test/system/config_files/_mec10sc_ds
   M    models/lnd/clm/test/system/config_files/4p_casasc_dm
   M    models/lnd/clm/test/system/config_files/4p_casasc_do
   M    models/lnd/clm/test/system/config_files/17p_sc_ds
   M    models/lnd/clm/test/system/config_files/_sc_dm
   M    models/lnd/clm/test/system/config_files/4p_casasc_ds
   M    models/lnd/clm/test/system/config_files/_nrsc_s
   M    models/lnd/clm/test/system/config_files/_sc_do
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_m
   M    models/lnd/clm/test/system/config_files/_sc_ds
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_do
   M    models/lnd/clm/test/system/config_files/_nrvansc_ds
   M    models/lnd/clm/test/system/config_files/17p_sc_h
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_do
   M    models/lnd/clm/test/system/config_files/4p_casasc_h
   M    models/lnd/clm/test/system/config_files/17p_sc_m
   M    models/lnd/clm/test/system/config_files/17p_sc_o
   M    models/lnd/clm/test/system/config_files/_sc_h
   M    models/lnd/clm/test/system/config_files/4p_casasc_m
   M    models/lnd/clm/test/system/config_files/4p_casasc_o
   M    models/lnd/clm/test/system/config_files/_sc_m
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_h
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_dh
   M    models/lnd/clm/test/system/config_files/_sc_o
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_m
   M    models/lnd/clm/test/system/config_files/_sc_s
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_dm
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_o
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_dh
   M    models/lnd/clm/test/system/config_files/_scsnf_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_dm
   M    models/lnd/clm/test/system/config_files/_scsnf_dm
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_do
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_h
   M    models/lnd/clm/test/system/config_files/_scsnf_do
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_ds
   M    models/lnd/clm/test/system/config_files/_mec10sc_h
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_o
   M    models/lnd/clm/test/system/config_files/_mec10sc_m
   M    models/lnd/clm/test/system/config_files/_mec10sc_o
   M    models/lnd/clm/test/system/config_files/17p_scnv_dh
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_h
   M    models/lnd/clm/test/system/config_files/README --- seq-ccsm=>standalone clm

>>>>>>>>>> Change comments of CCSM to CESM, start adding in test support of lynx, convert
>>>>>>>>>> SPMD to NOUSE_MPISERIAL, change mode name of seq_ccsm to clm_stndln, add tests
>>>>>>>>>> for more rcp's.
   M    models/lnd/clm/test/system/TCB.sh ------------- CCSM_MACH=>CESM_MACH, ccsm_bld=>cesm_bld
   M    models/lnd/clm/test/system/README.testnames --- Change ccsm=>cesm, seq_ccsm=>clm_stndln
   M    models/lnd/clm/test/system/test_driver.sh ----- Change CLM_CCSMBLD=>CLM_CESMBLD,
                                                        Start adding lynx.
   M    models/lnd/clm/test/system/input_tests_master - Add HX and HY tests, ccsm=>cesm
   M    models/lnd/clm/test/system/README ------------- CLM_CCSMBLD=>CLM_CESMBLD
   M    models/lnd/clm/test/system/CLM_runcmnd.sh ----- NOSPMD=>NOUSE_MPISERIAL

>>>>>>>>>> Change comments from ccsm to cesm, change namelist to get faerdep file from,
>>>>>>>>>> work on pergro plot so can plot more graphs.
   M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl --- ccsm=>cesm, 
   M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl -- ccsm=>cesm, 
                     get aerdep file from clmexp clm_tool namelist
   M    models/lnd/clm/tools/ncl_scripts/RMSintrepid.dat ---- New data
   M    models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat ---- New data
   M    models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl --- Get from clmexp namelist
   M    models/lnd/clm/tools/ncl_scripts/pergroPlot.ncl ----- Add ability to plot up to
                     five files, make sure lines are different, add success line to end.
   M    models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Do some operations with
                     out meta-data to save time and remove warnings
   M    models/lnd/clm/tools/ncl_scripts/README --------- Change ccsm=>cesm and improve
   M    models/lnd/clm/tools/interpinic/runinit_ibm.csh - Change ccsm=>cesm
   M    models/lnd/clm/tools/mkgriddata/mkvarctl.F90 ---- Correct documentation, ccsm=>cesm
   M    models/lnd/clm/tools/mkgriddata/mkgriddata.F90 -- ccsm=>cesm
   M    models/lnd/clm/tools/mkgriddata/README ---------- ccsm=>cesm
   M    models/lnd/clm/tools/mkdatadomain/addglobal.F90 - ccsm=>cesm

>>>>>>>>>> Changes comments of ccsm to cesm, add sitespf_pt config option, remove
>>>>>>>>>> -ndepsrc, add ndepmapalgo, switch prog_seasalt for progsslt, spmd for
>>>>>>>>>> nouse_mpiserial, change names of modes
   M    models/lnd/clm/bld/configure ---------------- ccsm=>cesm, +sitespf_pt,
               prog_seasalt=>progsslt, spmd=>nouse_mpiserial, modes changed to 
               ext_cesm, and clm_stndln, remove setting of SPMD cppdef
   M    models/lnd/clm/bld/queryDefaultNamelist.pl -- ccsm=>cesm
   M    models/lnd/clm/bld/queryDefaultXML.pm ------- Remove ability to use cam config 
               file, spmd=>nouse_mpiserial
   M    models/lnd/clm/bld/build-namelist ----------- ccsm=>cesm, remove -ndepsrc,
               add rcp to some settings, ccsm_seq=>clm_stndln, set start_ymd from
               runstart_date, add settings of ndepmapalgo, remove fndepdat/dyn/faerdep
   M    models/lnd/clm/bld/clm.cpl7.template -------- Remove -spmd, mode now ext_cesm,
               ccsm=>cesm
   M    models/lnd/clm/bld/README ------------------- CCSM=>CESM
   M    models/lnd/clm/bld/config_files/Makefile.in - SPMD=>NOUSE_MPISERIAL, ccsm=>cesm
   M    models/lnd/clm/bld/config_files/config_definition.xsl --- Titles to caption, 
               put valid_values under description
   M    models/lnd/clm/bld/config_files/config_sys_defaults.xml - spmd=>nouse_mpiserial
   M    models/lnd/clm/bld/config_files/config_definition.xml --- +sitespf_pt,
               comp_interface=>comp_intf, ccsm=>cesm, spmd=>nouse_mpiserial, mode
               valid values are: ext_cesm, clm_stndln

>>>>>>>>>> Remove ndepsrc/usr_ndepstream/fndepdat/fndepdyn/faerdep add mksrf_navyoor
>>>>>>>>>> Change comments from ccsm to cesm, exchange run_startdate for start_ymd, add
>>>>>>>>>> ndepmapalo, add stop_option/stop_n settings for spinup modes
   M    models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Remove
               ndepsrc/use_ndepstream/fndepdat/dyn/faerdep, ccsm=>cesm, add mksrf_navyoro,
               run_startdate, faerdep and fndepdat for aerdepregrid/ndepregrid tools,
               add 0.33x0.33 resolution for navyoro file
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml --- Remove
               ndepsrc add defaults when sitespf_pt is set
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ------ rcp6 datm_presaero
   M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----------- Add sitespf_pt
   M    models/lnd/clm/bld/namelist_files/namelist_definition.xsl --------- Headers to captions
   M    models/lnd/clm/bld/namelist_files/datm-build-namelist ------------- ccsm=>cesm
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- ccsm=>cesm,
               remove use_ndepstream, faerdep, fndepdat, fndepdyn
               add ndepmapalgo
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add navy oro
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ------- Add 
               stop_option/stop_n for spinup modes, change start_ymd for run_startdate
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Add ndepmapalgo

>>>>>>>>>> Change config mode names (from ccsm_seq to clm_stndln), remove ndepsrc,
>>>>>>>>>> remove start_ymd, clm_demand just sets fpftdyn (fndepdat/dyn removed)
   M    models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml ---- mode
               changes to clm_stndln
   M    models/lnd/clm/bld/namelist_files/use_cases/glacier_mec.xml ----- mode
               changes to clm_stndln
   M    models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml ---- mode
               changes to clm_stndln
   M    models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml - mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml - mode
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml - mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml - mode
               changes to clm_stndln, clm_demand just sets fpftdyn remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml --- mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml - mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/pergro.xml -- Also output TSA
   M    models/lnd/clm/bld/namelist_files/use_cases/pergro0.xml - Also output TSA

>>>>>>>>>> Change so any scripts calls start with "./", ccsm=>cesm, remove ndepsrc
>>>>>>>>>> Use macro for PTS_MODE, use .submit rather than .run scripts.
>>>>>>>>>> Add bit about managing your data with link_dirtree, add more notes and
>>>>>>>>>> examples for PERGRO testing, add more notes about using batch for single-pt
>>>>>>>>>> mode
   M    models/lnd/clm/doc/UsersGuide/trouble_shooting.xml -- Add more about ccsm log file
   M    models/lnd/clm/doc/UsersGuide/config_cache.xml ------ Update from configure
   M    models/lnd/clm/doc/UsersGuide/single_point.xml ------ Add section on which mode
             Add warning about single-point on batch machines, remove warning about
             error that was fixed, remove notes about setting ndepsrc
   M    models/lnd/clm/doc/UsersGuide/special_cases.xml ----- Use .submit, add notes
             about using provided history files from bluefire for PERGRO testing, and
             add bit about TSA as well as TSOI, add more machines and examples of
             bad pergro for PERGRO examples.
   M    models/lnd/clm/doc/UsersGuide/tools.xml ------------- Remove ndepsrc stuff
   M    models/lnd/clm/doc/UsersGuide/preface.xml ----------- Talk about very latest updates.
             remove bit about PERGRO not validated
   M    models/lnd/clm/doc/UsersGuide/clm_ug.xml ------------ Update version, remove bug fix
   M    models/lnd/clm/doc/UsersGuide/appendix.xml ---------- 
   M    models/lnd/clm/doc/UsersGuide/adding_files.xml ------ Add bit about managing your
             data when you use link_dirtree, update table, remove ndepsrc
   M    models/lnd/clm/doc/UsersGuide/custom.xml ------------ Remove bit about rcp experimental
             comment out tables that cause docbook to fail with a seg fault.
   M    models/lnd/clm/doc/UsersGuide/pergro.jpg ------------ New data
   M    models/lnd/clm/doc/UsersGuide/Makefile -------------- Remove vandif bug fix
   M    models/lnd/clm/doc/Quickstart.userdatasets ---------- Shorten lines remove faerdep
             correct procedure
   M    models/lnd/clm/doc/Quickstart.GUIDE ----------------- Use .submit script
   M    models/lnd/clm/doc/UsersGuide/stylesheethtml2docbook.xsl - Change tables from
             informal to formal, using captions for titles, add template for bold.

>>>>>>>>>> Changes comments for CCSM to CESM, remove misc.h and preproc.h #includes
>>>>>>>>>> Remove use_ndepstream/fndepdat/fndepdyn/faerdep/set_*dep_from_file
>>>>>>>>>> Add u10_clm and va, add ability to perturb IC from startup finidat file
   M    models/lnd/clm/src/biogeochem/DUSTMod.F90 ----- CCSM=>CESM, remove misc/preproc.h
   M    models/lnd/clm/src/main/clm_comp.F90 ---------- CCSM=>CESM
   M    models/lnd/clm/src/main/clm_initializeMod.F90 - Remove use_ndepstream logic
              hardwire it to on
   M    models/lnd/clm/src/main/clm_glclnd.F90 -------- CCSM=>CESM
   M    models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Add u10 and va
   M    models/lnd/clm/src/main/clm_atmlnd.F90 -------- Rm set_caerdep_from_file/dustdep
   M    models/lnd/clm/src/main/controlMod.F90 -------- Rm fndepdat, fndepdyn,
              use_ndepstream, faerdep, ccsm=>cesm
   M    models/lnd/clm/src/main/clm_time_manager.F90 -- ccsm=>cesm, remove misc/preproc.h
   M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- lnd_chkAerDep_mct just
              aborts if aerosols NOT sent from atm.
   M    models/lnd/clm/src/main/clm_driver.F90 ------------- Rm aerdep and old ndep interpoaltion
   M    models/lnd/clm/src/main/clm_varctl.F90 ------------- Rm set_caerdep_from_file/dustdep,
              faerdep, fndepdat, fndepdyn, use_ndepstream
   M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - lnd_chkAerDep_mct just
              aborts if aerosols NOT sent from atm.
   M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90 -- ccsm=>cesm
   M    models/lnd/clm/src/main/surfrdMod.F90 ---------- ccsm=>cesm, remove misc/preproc.h
   M    models/lnd/clm/src/main/domainMod.F90 ---------- Rm misc/preproc.h, ccsm=>cesm
   M    models/lnd/clm/src/main/clmtype.F90 ------------ Add u10_clm, and va
   M    models/lnd/clm/src/main/histFldsMod.F90 -------- Add U10, and VA, and mv old U10 to U10_DUST
   M    models/lnd/clm/src/main/mkarbinitMod.F90 ------- Make into module, remove 
              misc/preproc.h, add seperate subroutine to perturb initial conditions
   M    models/lnd/clm/src/biogeophys/UrbanInitMod.F90 - Remove misc/preproc.h, 
              remove GRANDVIEW #ifdefs
   M    models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Add u10/va, 
              remove misc/preproc.h and concurrent loops
   M    models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90  Add some PERGRO #ifdef
              remove misc/preproc.h
   M    models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Add perturbIC call
              remove misc/preproc.h and concurrent loops
   M    models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ---- Remove misc/preproc.h, 
              KO comments and concurrent loops
   M    models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------ Remove misc/preproc.h,
              and GRANDVIEW #ifdefs

   M    README - Start with ./, and correct .build script name, and use .submit in exp

Summary of testing:

  bluefire interactive testing: All PASS except...
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  jaguar: All PASS except...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic .............FAIL! rc= 13
  jaguar interactive testing:
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  edinburgh/lf95 interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
  edinburgh/lf95: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 arb_ic ............FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 arb_ic .........FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 5
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 5
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@1850 72+72 cold .FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_11

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_11
Originator(s):  erik (Erik Kluzek)
Date: Fri Aug 27 14:14:37 MDT 2010
One-line Summary: New files for rcp6, fix MPI bug, update externals

Purpose of changes:

Add in new pftdyn and stream_ndep files for rcp=6.0. Fix MPI bug where send array was the same as receive array.
Fix problem with datm template on gust, and syntax errors for pt1_pt1 mode. Add start_tod to drv/scripts.

Bugs fixed (include bugzilla ID):
                                 1197 (MPI problem sending and receiving data in same array)
                                 1207 (Problem with datm template on gust)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1206 (Problem looping over a single year of CPLHIST forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Add ndepmapalgo
   Move datasets just for clm tools to clm_tools namelist_defaults XML file

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm,
csm_share
   scripts    to scripts4_100730
   drv        to drvseq3_1_33
   datm       to datm8_100728
   csm_share  to share3_100802

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Add configure test file for serial
   A  models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds

>>>>>>>>>>>> Add some files to test mksurfdata.pl script
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000

>>>>>>>>>>>> Put all files for clm-tools in seperate file
   A  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>>>>>>> Add new chapter on trouble shooting, add a script to limit
>>>>>>>>>>>> the line lengths, add style sheet to convert HTML XSL table
>>>>>>>>>>>> to docbook. Add file to fix vancouver problem.
   A  models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
   A  models/lnd/clm/doc/UsersGuide/limitLineLen.pl
   A  models/lnd/clm/doc/UsersGuide/addxhtmlhead.pl
   A  models/lnd/clm/doc/UsersGuide/stylesheethtml2docbook.xsl
   A  models/lnd/clm/doc/UsersGuide/fixvan_datm.buildnml.diff

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Change some of the tests around
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_pretag_edinburgh
   M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M  models/lnd/clm/test/system/tests_pretag_jaguar
   M  models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M  models/lnd/clm/test/system/tests_posttag_purempi_regression
   M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>> Work with testing a bit, add mksurfdata.pl and drydep tests
   M  models/lnd/clm/test/system/README.testnames ---- Add "V" drydep test
   M  models/lnd/clm/test/system/test_driver.sh ------ Add pftdata, change
multi-processing a bit
   M  models/lnd/clm/test/system/TSMscript_tools.sh -- Fix some glitches
   M  models/lnd/clm/test/system/gen_test_table.sh --- Convert to xhtml
   M  models/lnd/clm/test/system/nl_files/clm_usrdat - Remove non-streams mode for ndep
and aerdep
   M  models/lnd/clm/test/system/input_tests_master -- Add mksurfdata.pl and drydep tests
             make scsnf 4x5 rather than 10x15

>>>>>>>>>>>> Add -nomv, usrname, and pftdyn options, add ability to run in 
>>>>>>>>>>>> a different directory, check for vegtyp files before running.
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl

>>>>>>>>>>>> Handle rcp's correctly, and handle datm streams for presaero files
>>>>>>>>>>>> and ndep streams files
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- default rcp=hist, set
             RCP to ncl script
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - add ability to handle
             usrname files, and handle ndep and aerdep streams files correctly

>>>>>>>>>>>> Move tools files into clm_tools default file, add ndepmapalgo
>>>>>>>>>>>> Work on the formatting of the files, do better with clm_usrdat_name
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - Add clm_tools default file.
                  Don't limit list to -var, as now done in .pm file below.
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ If -var set, don't process variables
                  that don't match
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Change to lowercase
                  for xhtml standard, remove glacier list
   M  models/lnd/clm/bld/config_files/config_definition.xml - Put glc_nec in physics list
   M  models/lnd/clm/bld/build-namelist --------------------- Fix minor doc issues
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add ndepmapalgo,
                  change formatting for GPTL options
   M  models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----- Improve formatting,
                  put note in table if All: res, masks, yrs, or sim_yr_rng
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl --- Improve formatting
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove mksrf_fvegtyp
                  files and fndepdat files for single-years only used for processing
tools
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Add in handling
                  of rcp's, and stream_fldfilename_ndep, remove fndepdat/dyn

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  models/lnd/clm/doc/UsersGuide/single_point.xml
   M  models/lnd/clm/doc/UsersGuide/get_Icaselist.pl
   M  models/lnd/clm/doc/UsersGuide/special_cases.xml
   M  models/lnd/clm/doc/UsersGuide/co2_streams.txt
   M  models/lnd/clm/doc/UsersGuide/tools.xml
   M  models/lnd/clm/doc/UsersGuide/preface.xml
   M  models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M  models/lnd/clm/doc/UsersGuide/appendix.xml
   M  models/lnd/clm/doc/UsersGuide/adding_files.xml
   M  models/lnd/clm/doc/UsersGuide/custom.xml
   M  models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   M  models/lnd/clm/doc/UsersGuide/Makefile
   M  models/lnd/clm/doc/Quickstart.userdatasets
   M  models/lnd/clm/doc/KnownBugs
   M  models/lnd/clm/doc/README
   M  models/lnd/clm/src/main/ndepStreamMod.F90
   M  models/lnd/clm/src/main/surfrdMod.F90

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  Copyright
   M  README

Summary of testing:

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
038 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 10
039 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 5
040 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 5
041 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 4
  bluefire interactive testing: All PASS except...
006 smHS3 TSM.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 8
007 erHS3 TER.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic FAIL! rc= 5
008 brHS3 TBR.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic FAIL! rc= 5
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 4
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
026 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
030 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
065 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 6
066 sm974 TSMscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds ....FAIL! rc= 6
  bluefire/CESM testing:
FAIL  SMS_RLA.f45_f45.I.bluefire
BFAIL SMS_RLA.f45_f45.I.bluefire.generate.clm4_0_11
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_10
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_10
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_10
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_10
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_10
FAIL  ERI.f19_g16.IG.bluefire.compare.clm4_0_10
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_10
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_11
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_10
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_10
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_10
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_10
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_10

CLM tag used for the baseline comparison tests if applicable: clm4_0_10

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_10
Originator(s):  erik (Erik Kluzek)
Date: Wed Aug  4 14:37:59 MDT 2010
One-line Summary: Update doc to cesm_rel05, bug-fixes, fix issues for single-point, mksurfdata/getregional scripts

Purpose of changes:

Use nn instead of copy for CO2 patch file. Update documentation to latest cesm version
05. Update externals. Some changes to build-namelist for generic single-point
simulations. Move tools XML files to clm_tools namelist_default file. Add 4x5 drydep
test, work with testing a bit. Add tests for getregional.pl and mksurfdata.pl scripts.
Add: usrname, nomv and pftdata options to mksurfdata.pl. Get RCP's working in getregional
script. Update getregional to handle ndep and aerdep streams, also get it to run in a
different directory. XML query wont test variables that don't match when -var option is
specified. Convert test table to xhtml. Move glc_nec to physics. Add option for
ndepmapalgo. Get faerdep and fndep streams files working right in
namelist_defaults_usrdat.xml file.

Bugs fixed (include bugzilla ID):
                                 1166 (get_regional script needs to be updated)
                                 1190 (add ndepmapalgo to ndep streams)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1207 (Problem with datm template on gust)

Update of datm also fixes several issues with datm for single pt simulations: 1173, 1175, 1176, 1181

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1197 (MPI problem sending and receiving data in same array)
                                 1206 (Problem looping over a single year of forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Add ndepmapalgo
   Move datasets just for clm tools to clm_tools namelist_defaults XML file

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, csm_share
   scripts    to scripts4_100730
   drv        to drvseq3_1_33
   datm       to datm8_100728
   csm_share  to share3_100802

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Add configure test file for serial
   A  models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds

>>>>>>>>>>>> Add some files to test mksurfdata.pl script
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000

>>>>>>>>>>>> Put all files for clm-tools in seperate file
   A  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>>>>>>> Add new chapter on trouble shooting, add a script to limit
>>>>>>>>>>>> the line lengths, add style sheet to convert HTML XSL table
>>>>>>>>>>>> to docbook. Add file to fix vancouver problem.
   A  models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
   A  models/lnd/clm/doc/UsersGuide/limitLineLen.pl
   A  models/lnd/clm/doc/UsersGuide/addxhtmlhead.pl
   A  models/lnd/clm/doc/UsersGuide/stylesheethtml2docbook.xsl
   A  models/lnd/clm/doc/UsersGuide/fixvan_datm.buildnml.diff

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Change some of the tests around
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_pretag_edinburgh
   M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M  models/lnd/clm/test/system/tests_pretag_jaguar
   M  models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M  models/lnd/clm/test/system/tests_posttag_purempi_regression
   M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>> Work with testing a bit, add mksurfdata.pl and drydep tests
   M  models/lnd/clm/test/system/README.testnames ---- Add "V" drydep test
   M  models/lnd/clm/test/system/test_driver.sh ------ Add pftdata, change multi-processing a bit
   M  models/lnd/clm/test/system/TSMscript_tools.sh -- Fix some glitches
   M  models/lnd/clm/test/system/gen_test_table.sh --- Convert to xhtml
   M  models/lnd/clm/test/system/nl_files/clm_usrdat - Remove non-streams mode for ndep and aerdep
   M  models/lnd/clm/test/system/input_tests_master -- Add mksurfdata.pl and drydep tests
             make scsnf 4x5 rather than 10x15

>>>>>>>>>>>> Add -nomv, usrname, and pftdyn options, add ability to run in 
>>>>>>>>>>>> a different directory, check for vegtyp files before running.
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl

>>>>>>>>>>>> Handle rcp's correctly, and handle datm streams for presaero files
>>>>>>>>>>>> and ndep streams files
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- default rcp=hist, set
             RCP to ncl script
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - add ability to handle
             usrname files, and handle ndep and aerdep streams files correctly

>>>>>>>>>>>> Move tools files into clm_tools default file, add ndepmapalgo
>>>>>>>>>>>> Work on the formatting of the files, do better with clm_usrdat_name
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - Add clm_tools default file.
                  Don't limit list to -var, as now done in .pm file below.
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ If -var set, don't process variables
                  that don't match
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Change to lowercase
                  for xhtml standard, remove glacier list
   M  models/lnd/clm/bld/config_files/config_definition.xml - Put glc_nec in physics list
   M  models/lnd/clm/bld/build-namelist --------------------- Fix minor doc issues
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add ndepmapalgo,
                  change formatting for GPTL options
   M  models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----- Improve formatting,
                  put note in table if All: res, masks, yrs, or sim_yr_rng
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl --- Improve formatting
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove mksrf_fvegtyp
                  files and fndepdat files for single-years only used for processing tools
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Add in handling
                  of rcp's, and stream_fldfilename_ndep, remove fndepdat/dyn

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  models/lnd/clm/doc/UsersGuide/single_point.xml
   M  models/lnd/clm/doc/UsersGuide/get_Icaselist.pl
   M  models/lnd/clm/doc/UsersGuide/special_cases.xml
   M  models/lnd/clm/doc/UsersGuide/co2_streams.txt
   M  models/lnd/clm/doc/UsersGuide/tools.xml
   M  models/lnd/clm/doc/UsersGuide/preface.xml
   M  models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M  models/lnd/clm/doc/UsersGuide/appendix.xml
   M  models/lnd/clm/doc/UsersGuide/adding_files.xml
   M  models/lnd/clm/doc/UsersGuide/custom.xml
   M  models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   M  models/lnd/clm/doc/UsersGuide/Makefile
   M  models/lnd/clm/doc/Quickstart.userdatasets
   M  models/lnd/clm/doc/KnownBugs
   M  models/lnd/clm/doc/README
   M  models/lnd/clm/src/main/ndepStreamMod.F90
   M  models/lnd/clm/src/main/surfrdMod.F90

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  Copyright
   M  README

Summary of testing:

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
055 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
056 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
057 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
058 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 4
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
026 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
030 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CESM testing: All PASS except...
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_10
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_09
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  edinburgh/lf95 interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
  edinburgh/lf95: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 5
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 4
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 arb_ic ............FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 arb_ic .........FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 5
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 4
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
028 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 4
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 5
032 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 4
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_09

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_09
Originator(s):  erik (erik)
Date: Mon Jun 14 00:02:12 MDT 2010
One-line Summary: Fix some small issues, update documentation, and externals

Purpose of changes:

Work on documentation for CESM1.0 release, with glcec changes, and namelist changes. Run
testing and fix bugs. Move documentation changes from release branch to trunk. Fix
getregional script for transient. Remove "At point 2" from lnd log files. Update
csm_share, and scripts version so can now run testing with lahey compiler. Get CO2 patch
file working.

Bugs fixed (include bugzilla ID):
                                 1092 (Problems running on dublin with datm8 with debug)
                                 1159 (date in fco2 file is not used)
                                 1160 (Fix mksurfdata.pl script to work with 1000-1004)
                                 1167 (doc. about running single point reduce pes)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1166 (get_regional script needs to be updated)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: std-test

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm,
cism, csm_share
    scripts   to scripts4_100612
    drv       to drvseq3_1_31
    datm      to datm8_100612
    cism      to cism1_100608
    csm_share to share3_100607

List all files eliminated: None

List all files added and what they do: None

>>>>>>>>>>>> Add testing configure file
   A   models/lnd/clm/test/system/config_files/_nrcnsc_do

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add CLM_USRDAT_NAME and getregional.pl tests
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/README.testnames
   M   models/lnd/clm/test/system/TSMscript_tools.sh
   M   models/lnd/clm/test/system/nl_files/clm_usrdat
   M   models/lnd/clm/test/system/nl_files/getregional
   M   models/lnd/clm/test/system/input_tests_master
   M   models/lnd/clm/test/system/README

>>>>>>>>>>>> 
   M   models/lnd/clm/tools/ncl_scripts/getco2_historical.ncl ---- Add comment that 
                 date variable is NOT used
   M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- Add path to scripts
                 so can run from a different directory
   M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Fix warnings and
                 allow some files to not be converted if not needed
   M   models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl ------- Re-order longitudes
                 so from -180-180 rather than 0-360

>>>>>>>>>>>> 
   M   models/lnd/clm/bld/queryDefaultXML.pm ----- Get working for usrdat better
   M   models/lnd/clm/bld/listDefaultNamelist.pl - Get working for usrdat files
   M   models/lnd/clm/bld/build-namelist --------- Allow lnd_res to be usrdat name
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Set year first/last
                 for datm_presaero for clim_2000
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist -------- Don't allow 
                 prognostic for datm_presaero

>>>>>>>>>>>> Update documentation, add cprnc README to document
   M   models/lnd/clm/doc/UsersGuide/tools.xml
   M   models/lnd/clm/doc/UsersGuide/preface.xml
   M   models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M   models/lnd/clm/doc/UsersGuide/adding_files.xml
   M   models/lnd/clm/doc/UsersGuide/appendix.xml
   M   models/lnd/clm/doc/UsersGuide/custom.xml
   M   models/lnd/clm/doc/UsersGuide/single_point.xml
   M   models/lnd/clm/doc/UsersGuide/Makefile
   M   models/lnd/clm/doc/UsersGuide/special_cases.xml
   M   models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff - Update patch to
          work with the latest datm with DATM_PRESAERO

>>>>>>>>>>>> Remove "at point 2" and fix esmf duplication from fix by Mariana
   M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90
   M   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90

>>>>>>>>>>>> Update README files and use CESM in place of CCSM
   M   models/lnd/clm/doc/Quickstart.userdatasets
   M   models/lnd/clm/doc/IMPORTANT_NOTES
   M   models/lnd/clm/doc/KnownBugs
   M   models/lnd/clm/doc/README
   M   models/lnd/clm/doc/index.shtml
   M   Copyright
   M   README

Summary of testing:

  bluefire: All PASS except...
016 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 5
017 smEH1 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 10
018 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 5
019 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 5
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 4
021 smHN1 TSM.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 8
022 erHN1 TER.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -3+-7 cFAIL! rc= 3
023 brHN1 TBR.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -5+-5 cFAIL! rc= 3
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 3
025 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -90 cold .............FAIL! rc= 3
026 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -3+-7 cold ...........FAIL! rc= 3
027 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -5+-5 cold ...........FAIL! rc= 3
028 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -90 cold .............FAIL! rc= 3
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 3
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 3
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 3
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 3
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 3
034 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 3
035 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 3
036 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 3
037 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 3
038 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 3
039 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 3
040 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 3
041 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 3
042 smC61 TSM.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 -6 startup ............FAIL! rc= 3
043 erC61 TER.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 10+38 startup .........FAIL! rc= 3
044 brC61 TBR.sh _scnv_dh clm_std^nl_urb_br 20020101:NONE:1800 1.9x2.5 gx1v6 -3+-3 startup ......FAIL! rc= 3
045 blC61 TBL.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 48 startup ............FAIL! rc= 3
046 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 96 cold ..........FAIL! rc= 3
047 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 3
048 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 3
049 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold ..........FAIL! rc= 3
050 smV61 TSM.sh _mec10sc_dh clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 96 arb_ic ..............FAIL! rc= 3
051 erV61 TER.sh _mec10sc_dh clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 10+38 arb_ic ...........FAIL! rc= 3
052 brV61 TBR.sh _mec10sc_dh clm_std 19980115:NONE:1800 1.9x2.5 gx1v6 72+72 arb_ic ..............FAIL! rc= 3
053 blV61 TBL.sh _mec10sc_dh clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 48 arb_ic ..............FAIL! rc= 3
054 smI59 TSMcnspinup.sh 17p_cnadspinupsc_dm 17p_cnexitspinupsc_dm 17p_cnsc_dm clm_std 20020115:NONEFAIL! rc= 3
055 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 3
056 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 3
057 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 3
058 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 3
059 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 3
060 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 3
061 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 3
062 blL58 TBL.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 48 arb_ic ...............FAIL! rc= 3
063 smJ61 TSM.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 3
064 erJ61 TER.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 3
065 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 3
066 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 3
067 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 3
  bluefire interactive testing: All PASS except...
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 5
021 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 5
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
026 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
030 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
062 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 3
063 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 3
064 smZ94 TSMtools.sh mkdatadomain tools__ds namelist ...........................................FAIL! rc= 3
065 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 3
  bluefire/CESM testing: All PASS except...
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_08 
BFAIL ERI.f19_g16.IG.bluefire.compare.clm4_0_08 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_09 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_08 
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 smV23 TSM.sh _mec10sc_do clm_glcmec 19980115:NONE:1800 48x96 gx3v7 96 arb_ic ................FAIL! rc= 8
026 erV23 TER.sh _mec10sc_do clm_glcmec 19980115:NONE:1800 48x96 gx3v7 10+38 arb_ic .............FAIL! rc= 5
027 brV23 TBR.sh _mec10sc_do clm_std 19980115:NONE:1800 48x96 gx3v7 72+72 arb_ic ................FAIL! rc= 5
  jaguar/CESM testing: All PASS
  edinburgh/lf95 interactive testing: All PASS except...
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 5
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
008 blAL4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -10 cold ...............FAIL! rc= 5
012 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 5
  edinburgh/lf95: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 5
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 4
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 arb_ic ............FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 arb_ic .........FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 5
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 4
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
028 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 4
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 5
032 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 4
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_08

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_08
Originator(s):  erik (erik)
Date: Fri Jun  4 01:25:39 MDT 2010
One-line Summary: Snow hydrology bug fix from Keith and Dave

Purpose of changes:

SnowHydrology bug fix from Keith Oleson. For test-suite, make default to send aerosol
data through datm. Update version of cism, scripts and datm. Remove some of the old aerdep
stuff from the XML database as we now are using presaero from datm (leave 1-deg and
2-deg).

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1166 (get_regional script needs to be updated)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1197 (MPI problem sending and receiving data in same array)
                                 1206 (Problem looping over a single year of forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: none

Describe any changes made to the namelist: Move datm_presaero to overall defaults

List any changes to the defaults for the boundary datasets:
    Remove all faerdep files except f09 and f19

Describe any substantial timing or memory changes: None

Code reviewed by: self
    code changes come from Keith Oleson and Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.):  scripts, cism and drv
   scripts to scripts4_100603a
   drv     to drvseq3_1_29
   cism    to cism1_100603

List all files eliminated: None

List all files added and what they do:

   A   models/lnd/clm/test/system/config_files/17p_cnsc_m

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/nl_files/clm_ndepdyn - Switch demand for ndepdyn for
          ndepsrc stream

   M   models/lnd/clm/bld/build-namelist ----- Get datm_presaero if not null
            do NOT set faerdep
   M   models/lnd/clm/bld/clm.cpl7.template -- Set datm_presaero by DATM_PRESAERO
            if datm or to prognostic if not (so aerosol dep require from atm)

   M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Set
            datm_presaero by resolution, sim_year, sim_year_range and rcp
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Remove datm_presaero
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist ----------- Set
            datm_presaero by resolution, sim_year, sim_year_range and rcp
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Remove
            all faerdep files except for f09 and 19

   M   models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 - Snow hydrology fix

Summary of testing:

  bluefire interactive testing: All PASS up to...
014 smJ74 TSM.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test
-1100 arb_ic FAIL! rc= 10
  bluefire/CCSM testing: All PASS except..
FAIL  SMS_RLB.f45_f45.I.bluefire 
BFAIL SMS_RLB.f45_f45.I.bluefire.generate.clm4_0_08 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_06 
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_06 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_06 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_06 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_06 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_08 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_06 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_06 
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_06 
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_06 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_06 
   Extra testing:
PASS  ERI.f19_g16.IG.bluefire
Make sure answers agree with /OLESON/csm/ccsm4_0_beta52_ndepaer other than VOC fields
Test that F case will configure..
create_newcase -compset F -case testF -res f19_g16 -mach bluefire -skip_rundb

CLM tag used for the baseline comparison tests if applicable: clm4_0_07

Changes answers relative to baseline: YES

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: ALL
    - what platforms/compilers: ALL
    - nature of change: larger than roundoff/same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
       
   - platform/compilers: IBM
   - compset (and additional configure options): I1850CN
   - build-namelist options (or complete namelist): -ndepsrc stream

   MSS location of control simulations used to validate new climate:

  /OLESON/csm/ccsm4_0_beta52_ndepaer
  /OLESON/csm/ccsm4_0_beta52_ndepaertrans

   The above is identical to this tag (other than the two VOC fields that changed)
	
===============================================================
===============================================================
Tag name:  clm4_0_07
Originator(s):  erik (erik)
Date: Thu Jun  3 21:22:46 MDT 2010
One-line Summary: Some cleanup/fix bugs, add RTM var, add albice to namelist, allow last-millenium in mksurfdata, allow setting of datm_presaero in clm test-suite

Purpose of changes:

Fix mksurfdata.pl, to correctly create 1000-1004 test datasets. Fix drydep for OpenMP.
Update 1x1_tropicAtl_1000-1004 test fsurdat file. Move glc_grid from configure to
build-namelist. Add in alb_ice to namelist. Start adding in the capability to handle
mksurfdata from 0850-1850AD, put all mksrf_fvegtyp files in XML database (remove some of
the sample pftdyn text files). New RTM field on history output from Sean (VOLR and
VOLR_ICE, only VOLR output by default). Allow use of aerosol data from datm for I cases
in the clm test suite. Split out datm-build-namelist from clm build-namelist (put in
bld/namelist_files).

Bugs fixed (include bugzilla ID):
                                 1162 (OpenMP bug with dry-deposition code in clm)
                                  883 (aerosol deposition not from atm)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1166 (get_regional script needs to be updated)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1197 (MPI problem sending and receiving data in same array)
                                 1206 (Problem looping over a single year of forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: Move glc_grid to build-namelist
     remove esmf_libdir, fix ccsm_bld so will build threaded properly

Describe any changes made to the namelist: Add albice to namelist
   Add new history fields VOLR and VOLR_ICE

      VOLR     RTM storage: LIQ  (m3)
      VOLR_ICE RTM storage: ICE  (m3)

List any changes to the defaults for the boundary datasets:
  New datasets for 1x1_tropicAtl 1000 tests

Describe any substantial timing or memory changes: None

Code reviewed by: self, VOLR changes come from Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, pio
    scripts to scripts4_100601
    drv     to drvseq3_1_28
    pio     to pio1_1_1

List all files eliminated:

>>>>>>>>>>>>>>> Remove mksurdata pftdyn text files, let XML database create them
   D  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp6.0_simyr1850-2100.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp2.6_simyr1850-2100.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp4.5_simyr1850-2100.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp8.5_simyr1850-2100.txt

List all files added and what they do:

>>>>>>>>>>>>>>> Split out datm part of build-namelist into it's own script
   A  models/lnd/clm/bld/namelist_files/datm-build-namelist

   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000-2000.txt -- Same as
         old file with 2000.txt name rather than 2000-2000.txt name.

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Move glc_grid to build-namelist, remove kraken
   M  models/lnd/clm/test/system/config_files/_mec10sc_dh
   M  models/lnd/clm/test/system/config_files/_mec10sc_dm
   M  models/lnd/clm/test/system/config_files/_mec10sc_do
   M  models/lnd/clm/test/system/config_files/_mec10sc_ds
   M  models/lnd/clm/test/system/config_files/_mec10sc_h
   M  models/lnd/clm/test/system/config_files/_mec10sc_m
   M  models/lnd/clm/test/system/config_files/_mec10sc_o
   M  models/lnd/clm/test/system/test_driver.sh --------- Remove kraken, update dataroot
            for bluefire, and tempworkspacefor intrepid
   M  models/lnd/clm/test/system/CLM_runcmnd.sh --------- Remove kraken
   M  models/lnd/clm/test/system/nl_files/clm_drydep ---- Change drydep to drv_drydep

>>>>>>>>>>>>>>> Use XML database for pftdyn files, have mksrfdata.pl write out pftdyn files 
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig - change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.regional ---- change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn ------ start at 1850
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.singlept ---- change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.namelist ---- change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl ---------- Get mksrf_vegtyp filenames
            from XML database for all files, and write out pftdyn files with them
            also get working for 1000-1004 test cases (specifically for 1x12_tropicAtl 
            test case)
   M  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850-2005.txt - Use CSMDATA versions
         of 1850 and 2000 files

>>>>>>>>>>>>>>> Move glc_grid to namelist, fix ccsm_bld=on, add datm_presaero
>>>>>>>>>>>>>>> Only do COLD start for startup type
   M  models/lnd/clm/bld/configure --------------- Remove glc_grid and esmf_libdir
               add in control of CCSM_VOC, set compile_threaded for ccsm_bld on,
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - Remove double reading of namelist_defaults_overall.xml
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ Add csmdata to beginning of file, only
              if it's a relative pathname (to handle instances of /cgd/tss for mksrf_vegtyp files)
   M  models/lnd/clm/bld/config_files/config_definition.xml - Remove glc_grid/esmf_libdir
   M  models/lnd/clm/bld/listDefaultNamelist.pl --- Move glc_grid to namelist vars
   M  models/lnd/clm/bld/build-namelist ----------- Add in glc_grid, and datm_presaero
             change -drydep to -drv_drydep option, set glc_nthreads, outnc_large_files
             and albice if glc_nec>0, move datm settings to own datm-build-namelist.
   M  models/lnd/clm/bld/clm.cpl7.template -------- Move glc_grid to build-namelist,
             remove outnc_large_files setting (now in build-namelist), only do
             COLD start for startup type (NOT for hybrid or branch).

>>>>>>>>>>>>>>> Add albice/glc_grid/datm_presaero/outnc_large_files
>>>>>>>>>>>>>>> New datasets for 1x1_tropicAtl 1000 tests
>>>>>>>>>>>>>>> Add in all mksrf_fvegtyp files and include last-millenium
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ------ Add in albice, 
             and glc_* settings for drv (glc_nthreads, glc_ntasks etc.), add presaero
             datam_presaero, datm_file_aero, datm_year_first_aero, datm_year_last_aero,
             datm_year_align_aero, and glc_grid. Add 0.5x0.5 resolution (for mksurfdata)
             and some premillenial years (850,1100,1350,1600) and sim-year ranges
             (850-1100,1100-1350,1350-1600,1600-1850)
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Set default
             masks here, and add in glc_grid default
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Add in some 
             new domain files that are in datm template, and add in datm_presaero
             settings needed: datm_file_aero, datm_aero_streams, datm_year_first_aero
             datm_year_last_aero, and datm_year_align_aero
   M  models/lnd/clm/bld/namelist_files/namelist_defaults.xsl --------- Show
             datm_presaero setting if set.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Add
             outnc_large_files, albice, and move mask to overall, update
             1x1_tropicAtl files for 1000, 1000-1004, add in all mksrf_fvegtyp
             files for all scenarios and last-millenium. Add in diri and diro.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ----- Get URL
             svn keyword set properly.

>>>>>>>>>>>>>>> Put datm/drv settings on bottom (only for mode=ccsm_seq)
>>>>>>>>>>>>>>> set datm_presaero and data_cycle_beg/end years
   M  models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml -- default
                datm_presaero is clim_2000
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml - default
                datm_presaero is rcp8.5, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml - default
                datm_presaero is rcp8.5, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml ------------ default
                datm_presaero is trans_1850-2000, beg/end year 1948-1972, co2=386.9
   M  models/lnd/clm/bld/namelist_files/use_cases/glacier_mec.xml ---------------- default
                datm_presaero is clim_2000
   M  models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml --------------- default
                datm_presaero is clim_1850, beg/end year 1948/1972
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml - default
                datm_presaero is rcp2.6, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml --- default
                datm_presaero is rcp6.0, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml - default
                datm_presaero is rcp4.5, beg/end year 1972-2004

>>>>>>>>>>>>>>> Add in albice to namelist, add VOLR and VOLR_ICE to history files
>>>>>>>>>>>>>>> always call interpMonthlyVeg for drydep
   M  models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - Remove interpMonthlyVeg
             call as coming from a threaded region
   M  models/lnd/clm/src/main/clm_comp.F90 ------------- Call interpMonthlyVeg 
             for drydep even if CN is on
   M  models/lnd/clm/src/main/controlMod.F90 ----------- Add albice
   M  models/lnd/clm/src/main/clm_varcon.F90 ----------- Remove albice
   M  models/lnd/clm/src/main/clm_driver.F90 ----------- Always call interpMonthlyVeg
             if drydep is on (even when NOT doalb)
   M  models/lnd/clm/src/main/histFldsMod.F90 ---------- Add VOLR and VOLR_ICE
             (VOLR_ICE is an optional field)
   M  models/lnd/clm/src/riverroute/RtmMod.F90 --------- Handle volr under runoff
             type, rather than as local variable
   M  models/lnd/clm/src/riverroute/RunoffMod.F90 ------ Add volr, volrlnd, volr_nt1/2
   M  models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 Add albice as public var
             that can be set in controlMod on namelist

Summary of testing:

  bluefire: All PASS except (up to test 061 nl_crcrop)
061 brL58 TBR.sh _sc_dh clm_std^nl_crcrop
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -6 arb_ic ...................FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 7
011 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 7
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
037 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 7
045 blC61 TBL.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 48 startup ............FAIL! rc= 7
  bluefire interactive testing: All PASS up to...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except..
FAIL  ERI.f19_g16.IG.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_06


  bluefire/extra CCSM testing:
Make sure answers agree with /OLESON/csm/ccsm4_0_beta52_ndepaer other than VOC fields
  (when snowhydrology changes are put in)

  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@1850 72+72 cold .FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_06

Changes answers relative to baseline: no bit-for-bit (except omp active stand-alone tests)
   The standalone tests with OpenMP on are different because the previous tag
   wasn't building with OpenMP

===============================================================
===============================================================
Tag name:  clm4_0_06
Originator(s):  erik (erik)
Date: Wed May 26 10:35:26 MDT 2010
One-line Summary: Update gglc to cism

Purpose of changes:

Changes from jwolfe to lnd_comp* subroutines to exchange cism fields. Requires an update
to the driver for the index of the fieldnames passed. Change paths of gglc glc_grid files
from gglc to cism. Make stream the default for all resolutions for ndepsrc.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1162 (OpenMP bug with dry-deposition code in clm)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system:
    Change name of ice model from gglc to cism
    Change list of fields exchanged with cism

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
     Change pathnames for gglc fglcmask datasets to cism

Describe any substantial timing or memory changes: None

Code reviewed by: self, jwolfe, lipscomb

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, cism
    scripts  to scripts4_100525
    drv      to drvseq3_1_26
    cism     to cism1_100525b

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

    M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Change default
           of ndepsrc for f19 and f09 to stream
    M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Change pathnames
           for fglcmask files to pathame with cism instead of gglc

    M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ---------------- Pass a different
           set of fields for sno (needed for update to cism)

    M   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 -------------- Pass a different
           set of fields for sno (needed for update to cism)

Summary of testing:

  bluefire/CCSM testing:
FAIL  ERI.f19_g16.IG.bluefire
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_06
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_05
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_05
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_05
  bluefire/CCSM extra testing:
PASS  SMS.f19_g16.IG.bluefire
PASS  ERS.f19_g16.IG.bluefire

CLM tag used for the baseline comparison tests if applicable: clm4_0_05

Changes answers relative to baseline: Only when glc is active
      Or for f19 and f09 with CN as now ndepsrc streams is the default for all resolutions
      (previously ndepsrc data was the default for f19 and f09)

===============================================================
===============================================================
Tag name:  clm4_0_05
Originator(s):  erik (erik)
Date: Tue May 25 15:13:30 MDT 2010
One-line Summary: Move Nitrogen deposition stream branch to trunk

Purpose of changes:

Move branch that treats ndepdyn files as streams to trunk. Change csm_share to have a
simpler normalization for coszen scaling (from dlawren/kauff in datm/csm_share). Fix
fragile code in clm_atmlnd, from Mariana. Update to datm8 that can set streams for
aerosols. Fix template so that CLM_BLDNML_OPTS is active. Update scripts and get in 
other new finidat files, change clm test list, include _E test and IG f19 test.

Bugs fixed (include bugzilla ID):
                                 1161 (New history fields added that should NOT be)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1162 (OpenMP bug with dry-deposition code in clm)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: Add -ndepsrc option to build-namelist

List any changes to the defaults for the boundary datasets: 
   Add new datasets for Nitrogen deposition streams files (same as fndepdyn files)
   Remove fndepdat/fndepdyn files for resolutions other than f09 and f19

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, csm_share
   scripts   to scripts4_100524b
   drv       to drvseq3_1_23
   datm      to datm8_100420
   csm_share to share3_100423

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Handle Nitrogen deposition streams
A    models/lnd/clm/src/main/ndepStreamMod.F90

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add some CN drydep tests for hybrid/open-MP
M    models/lnd/clm/test/system/tests_pretag_jaguar
M    models/lnd/clm/test/system/input_tests_master

>>>>>>>>>>>> Add ability to handle ndep streams namelists
>>>>>>>>>>>> Add ability to set CLM_BLDNML_OPTS
M    models/lnd/clm/bld/build-namelist
M    models/lnd/clm/bld/clm.cpl7.template
M    models/lnd/clm/bld/namelist_files/namelist_definition.xml
M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
>>>>>>>>>>>> Set ndepstreams variables if ndepsrc=stream, otherwise set fndep files
M    models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

>>>>>>>>>>>> Handle new ndep streams namelist and namelist variables
>>>>>>>>>>>> Remove misc.h and preproc.h #includes
M    models/lnd/clm/src/main/clm_comp.F90 ---------- Renumber starting at 1 not 0
M    models/lnd/clm/src/main/clm_initializeMod.F90 - Handle initialization both
            for ndep streams and old ndep handling
M    models/lnd/clm/src/main/aerdepMod.F90 --------- Check if allocated before allocate
M    models/lnd/clm/src/main/iniTimeConst.F90 ------ Move setting of ndep out of here
M    models/lnd/clm/src/main/clm_atmlnd.F90 -------- Remove fragile code
M    models/lnd/clm/src/main/controlMod.F90 -------- Handle use_ndepstream
M    models/lnd/clm/src/main/clm_varctl.F90 -------- Add use_ndepstream
M    models/lnd/clm/src/main/clm_driver.F90 -------- Add ndep_interp if use_ndepstream
             and first and last years are different
M    models/lnd/clm/src/main/ndepFileMod.F90 ------- Make fndepdat optional input so
             can do this way (old way) or ndep streams (new way).
M    models/lnd/clm/src/main/clm_glclnd.F90 -------- Change order of vars from Bill Lipscomb

M    models/lnd/clm/src/main/areaMod.F90 - Add interfaces for MCT datatypes

M    models/lnd/clm/src/main/clmtypeInitMod.F90 - Remove unfilled history vars
M    models/lnd/clm/src/main/clmtype.F90 -------- Remove unfilled history vars
M    models/lnd/clm/src/main/histFldsMod.F90 ---- Remove unfilled history vars, add QTOPSOIL
         as an optional history variable.
M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - Handle fragile code mapping with MCT
M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- Handle fragile code mapping with MCT

Summary of testing:

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
037 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 7
049 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold ..........FAIL! rc= 7
055 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
056 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
057 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
058 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
040 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 7
048 blHQ4 TBL.sh _nrcnsc_ds clm_drydep 20000214:NONE:1800 1x1_brazil navy@2000 -150 cold ........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_04
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_04
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_04
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_04
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_04
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_04
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_04
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_04
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_04
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_04
BFAIL ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_04
FAIL  ERI.f19_g16.IG.bluefire
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_04
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_05
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_04
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_04
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_04
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_04
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_04
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_04
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13

CLM tag used for the baseline comparison tests if applicable: clm4_0_04

Changes answers relative to baseline: Yes!

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
        ndepaer01_clm3_7_15 + SnowHydrology changes
   - platform/compilers: IBM
   - compset (and additional configure options): I1850CN
   - build-namelist options (or complete namelist): -ndepsrc stream

   MSS location of control simulations used to validate new climate:

  /OLESON/csm/ccsm4_0_beta52_ndepaer
  /OLESON/csm/ccsm4_0_beta52_ndepaertrans
   
===============================================================
===============================================================
Tag name:  clm4_0_04
Originator(s):  erik (erik)
Date: Thu May 20 10:57:54 MDT 2010
One-line Summary: New namelist items: ice_runoff, scaled_harvest, carbon_only, new 
    RTM hist vars, new finidat files, update esmf interface, turn off aerosol read quicker

Purpose of changes:

Redo all fndepdyn datasets for f19. Add namelist option to turn off ice-flow and send it
to liquid runoff: ice_runoff (by default .true.).  Add new coefficients for harvest from
Johann, and add ability to trigger it on and off for backwards compatibility
(scaled_harvest, by default .false.). Change SUPLN from CPP token to carbon_only namelist
item. Add in new RTM variable to history files from Sean. Add in T31 1850/2000 CN/non-CN
and 2-deg 2000 CNDV finidat files.  Turn off reading of aerosol/dust at initialization
rather than run time, so files aren't even opened if CAM is passing data to clm. Update
lnd_comp_esmf to same as mct interface.

New history fields are incorrect. This is bug 1161. Since, time-lines are critical
and testing was completed, these changes will go in, but will be removed next week.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1161 (New history fields added that should NOT be)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: Remove SUPLN #ifdef change to namelist option

Describe any changes made to the namelist: Add namelist items

    ice_runoff     = If true, river runoff will be split up into liquid and ice streams,
               otherwise ice runoff will be zero and all runoff directed to liquid stream
    scaled_harvest = If true, harvesting will be scaled according to coeffecients
                     determined by Johann Feddema, 2009
    carbon_only    = If true, and CLMCN carbon-nitrogen model is on, Nitrogen will be
                     prescribed rather than prognosed

List any changes to the defaults for the boundary datasets:
    New fndepdyn files with correct time coordinate
    New finidat files for T31 1850/2000 and f19 2000 for CNDV

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):  None

List all files eliminated:

>>>>>>>>>>>>>> Remove SUPLN build tests
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_h
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_m
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_o
    D    models/lnd/clm/test/system/config_files/_cnnsc_h
    D    models/lnd/clm/test/system/config_files/_cnnsc_m
    D    models/lnd/clm/test/system/config_files/_cnnsc_o
    D    models/lnd/clm/test/system/config_files/17p_nrcnnsc_ds
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_dh
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_dm
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_do
    D    models/lnd/clm/test/system/config_files/_cnnsc_dh
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_ds
    D    models/lnd/clm/test/system/config_files/_cnnsc_dm
    D    models/lnd/clm/test/system/config_files/_cnnsc_do
    D    models/lnd/clm/test/system/config_files/_cnnsc_ds

>>>>>>>>>>>>>> Remove namelist files no longer used
    D    models/lnd/clm/test/system/nl_files/scam
    D    models/lnd/clm/test/system/nl_files/ext_ccsm_seq_cam
    D    models/lnd/clm/test/system/nl_files/nl_glcsmb
    D    models/lnd/clm/test/system/nl_files/scam_prep

List all files added and what they do:

>>>>>>>>>>>>>> Add ice_runoff=.false., scaled_harvest=.true., and carbon_only tests
    A    models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv
    A    models/lnd/clm/test/system/nl_files/nl_cn_conly

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Switch SUPLN tests for carbon_only
>>>>>>>>>>>>>> Add ice_runoff=.false., scaled_harvest=.true tests
    M    models/lnd/clm/test/system/tests_pretag_bluefire
    M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
    M    models/lnd/clm/test/system/config_files/README
    M    models/lnd/clm/test/system/tests_pretag_edinburgh
    M    models/lnd/clm/test/system/tests_pretag_jaguar
    M    models/lnd/clm/test/system/tests_posttag_breeze
    M    models/lnd/clm/test/system/README.testnames
    M    models/lnd/clm/test/system/tests_pretag_jaguar_nompi
    M    models/lnd/clm/test/system/tests_posttag_purempi_regression
    M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
    M    models/lnd/clm/test/system/input_tests_master
    M    models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>>>> Remove setting of supln to off
    M    models/lnd/clm/test/system/config_files/17p_cnsc_dh
    M    models/lnd/clm/test/system/config_files/17p_cnsc_dm
    M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
    M    models/lnd/clm/test/system/config_files/17p_cnsc_do
    M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
    M    models/lnd/clm/test/system/config_files/17p_cnc13sc_do

>>>>>>>>>>>>>> Remove SUPLN from configure
    M    models/lnd/clm/bld/configure
    M    models/lnd/clm/bld/config_files/config_definition.xml

>>>>>>>>>>>>>> Add carbon_only, scaled_harvest and ice_runoff options
>>>>>>>>>>>>>> T31 1850/2000 finidat files, f19 CNDV 2000 finidat file
>>>>>>>>>>>>>> Add error checking, change fndepdyn files for ones with
>>>>>>>>>>>>>> corrected time axis.
    M    models/lnd/clm/bld/build-namelist
    M    models/lnd/clm/bld/namelist_files/namelist_definition.xml
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>>>>>>>>> Remove SUPLN #ifdef for carbon_only namelist
    M    models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 - Correct comment
    M    models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ---- Switch SUPLN for carbon_only
    M    models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ----- Remove ltype as duplicated

>>>>>>>>>>>>>> Add carbon_only, scaled_harvest, and ice_runoff options
>>>>>>>>>>>>>> Add new RTM history variables
    M    models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- Add res_sno, topo_ndx,
                topo_slope, var_track, var_track2, frost_table, zwt_perched,
                qflx_top_soil, qflx_snow_out, qflx_drain_perched
    M    models/lnd/clm/src/main/pftdynMod.F90 ---------------- Add CN ifdef's for harvest
             add if for scaled_harvest or not
    M    models/lnd/clm/src/main/iniTimeConst.F90 ------------- Add CN ifdef's for ndep
    M    models/lnd/clm/src/main/histFileMod.F90 -------------- Add RTM ifdef's for frivinp_rtm
    M    models/lnd/clm/src/main/controlMod.F90 --------------- Put options in appropriate
                RTM and CN #ifdef blocks. Add ice_runoff, scaled_harvest and carbon_only to namelist
    M    models/lnd/clm/src/main/clm_varctl.F90 --------------- Add CN/RTM #ifdefs, add
               scaled_harvest and ice_runoff
    M    models/lnd/clm/src/main/clm_driver.F90 --------------- Add CN #ifdef for ndepdyn
    M    models/lnd/clm/src/main/ndepFileMod.F90 -------------- Add CN #ifdef
    M    models/lnd/clm/src/main/clmtype.F90 ------------------ Add res_sno, topo_ndx,
                topo_slope, var_track, var_track2, frost_table, zwt_perched,
                qflx_top_soil, qflx_snow_out, qflx_drain_perched
    M    models/lnd/clm/src/main/histFldsMod.F90 -------------- Add
	  FROST_TABLE, ZWT_PERCH, QDRAI_PERCH, QTOPSOIL

    M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ----- Move lnd_chkAerDep_mct to init
            add ice_runoff option to output rtm streams
    M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 --- Move lnd_chkAerDep_mct to
            add ice_runoff option to output rtm streams. And sync up with lnd_comp_mct
init


Summary of testing:

  bluefire interactive extra checking:
001 smH43 TSM.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold PASS
002 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coPASS
003 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coPASS
005 smH93 TSM.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:NONE:1800 4x5 gx3v7@1850-2000 96 cold PASS
006 erH93 TER.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:NONE:1800 4x5 gx3v7@1850-2000 10+38 coPASS
007 brH93 TBR.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:NONE:1800 4x5 gx3v7@1850-2000 72+72 coPASS
  bluefire/CCSM testing: All PASS except...
FAIL  ERI.T31_g37.IG.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_04 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_03 
  jaguar/CCSM testing: All FAIL
FAIL  ERS_D.f09_g16.I1850.jaguar 
FAIL  PST.f10_f10.I8520CN.jaguar 
FAIL  PET_PT.f10_f10.I8520CN.jaguar 
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_03

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_03
Originator(s):  erik (erik)
Date: Mon May 17 14:06:50 MDT 2010
One-line Summary: Changes from Francis for VOC and drydep

Purpose of changes:

Changes from Francis Vitt and Jean-Francois Lamarque for VOC and drydep. Add a scaling
factor for VOC isoprene. Get annual LAI and differences from CLMSP even when CLMCN is
on when sending drydep to atm, as need LAI monthly differences to estimate season index.
Get these changes to work with CN on and off and also get it to work with DEBUG mode
on. Use clm veg indicies in pftvarcon and abort drydep if don't find a wesley veg type
index. Fix ndeplintInterp.ncl script for rcp=-999.9 historical (bug 1153). Add in quarter
degree gx1v6 fraction dataset. 

Bugs fixed (include bugzilla ID):
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: qtr-degree, gx1v6 frac/domain datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self, dlawren, fvitt

List any svn externals directories updated (csm_share, mct, etc.): scripts

    scripts to scripts4_100513

List all files eliminated: None

List all files added and what they do:

   A    models/lnd/clm/test/system/config_files/_nrcnsc_ds --- cn test without rtm or supln

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Add in qtr-degree fraction and domain file datasets
>>>>>>>>>>> Make gx1v6 default mask for qtr-degree
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>>>>>> Separate out CN+SUPLN tests as H and CN only as P
   M    models/lnd/clm/test/system/tests_pretag_bluefire
   M    models/lnd/clm/test/system/README.testnames
   M    models/lnd/clm/test/system/tests_posttag_purempi_regression
   M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M    models/lnd/clm/test/system/nl_files/clm_drydep ---- correct build-nml options
   M    models/lnd/clm/test/system/input_tests_master ----- Remove 360x720 tests, add
                          drydep tests with CN and without, have start dates for drydep
                          tests span the year

>>>>>>>>>>> A few small fixes to tools
   M    models/lnd/clm/tools/mksurfdata/mkvocef.F90 --------- Remove diagnostics as nonsensical
                                     (also was incorrect, see bug 1157)
   M    models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Fix so can work with historical case

>>>>>>>>>>> Allow some CLMSP subroutines to be called even with CLMCN so that LAI can help set 
>>>>>>>>>>> the season index when dry-deposition is active (and only when dry-dep is active)
   M    models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Change #ifdefs so that
               some can be called from drydep even when CN is on. Don't allow 
               EcosystemDyn to be called if CN on though.
   M    models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ----- Add a scaling factor
               for isoprene
   M    models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ----- Make winter season on
               anytime you have snow. Use pftvarcon indices to set wesveg type from
               clmveg type. Add landuse type and set to desert winter if not veg type.
               (so won't abort on DEBUG mode)
   M    models/lnd/clm/src/main/clm_initializeMod.F90 -------- Also call
	  EcosystemDynini and readAnnualVegetation even if CN is on when drydep is on.

Summary of testing:

  bluefire: Ran 100 days of 1850CN, compared to Francis's mods and the two results were identical
  bluefire interactive testing:
001 smCO3 TSM.sh _sc_do clm_drydep^nl_urb 20021001:NONE:3600 10x15 USGS -10 cold ................PASS
002 erCO3 TER.sh _sc_do clm_drydep^nl_urb 20021001:NONE:3600 10x15 USGS -3+-7 cold ..............PASS
003 brCO3 TBR.sh _sc_do clm_drydep^nl_urb_br 20021001:NONE:3600 10x15 USGS -5+-5 cold ...........PASS
004 blCO3 TBL.sh _sc_do clm_drydep^nl_urb 20021001:NONE:3600 10x15 USGS -30 cold ................PASS
005 smCP3 TSM.sh _sc_do clm_drydep^nl_urb 20020317:NONE:1800 1.9x2.5 gx1v6 -15 startup ..........PASS
006 erCP3 TER.sh _sc_do clm_drydep^nl_urb 20020317:NONE:1800 1.9x2.5 gx1v6 -3+-7 startup ........PASS
007 brCP3 TBR.sh _sc_do clm_drydep^nl_urb_br 20020317:NONE:1800 1.9x2.5 gx1v6 -5+-5 startup .....PASS
008 blCP3 TBL.sh _sc_do clm_drydep^nl_urb 20020317:NONE:1800 1.9x2.5 gx1v6 -15 startup ..........PASS
001 sm654 TSMtools.sh mkgriddata tools__ds namelist .............................................PASS
002 sm674 TSMtools.sh mkgriddata tools__ds singlept .............................................PASS
003 sm774 TSMtools.sh mksurfdata tools__ds singlept .............................................PASS
004 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................SKIPPED*
005 sm853 TSMtools.sh interpinic tools__o runoptions ............................................PASS
  bluefire/CCSM testing: All PASS except...
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_0+upext
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_0+upext
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_0+upext
FAIL  ERI.T31_g37.IG.bluefire
BFAIL ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_0+upext
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_03
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_0+upext

CLM tag used for the baseline comparison tests if applicable: clm4_0_02

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_02
Originator(s):  erik (erik)
Date: Thu May 13 00:47:40 MDT 2010
One-line Summary: Make sure dtime is initialized, so that answers are consistently the same as clm4_0_00

Purpose of changes:

Make sure dtime is initialized before it is used in lnd_run_mct/lnd_run_esmf so
that results are consistent. This bug has been around since clm3_6_36 where doalb
logic was changed. However, until clm4_0_01 results seemed to have been consistent,
but with clm4_0_01 results were inconsistent, and usually incorrect for nstep=1 (in
calculating calday1 and hence doalb).

Bugs fixed (include bugzilla ID):
                                 1156 (Reproducability problem with clm4_0_01)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: None

List all files added and what they do:

>>>>>>>>> Add a reproducability test
   A   models/lnd/clm/test/system/TRP.sh

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Add reproducability test
   M   models/lnd/clm/test/system/input_tests_master

>>>>>>>>> Set glcmec by GLC_NEC_ $ifdefs
   M   models/lnd/clm/src/main/clm_varpar.F90

>>>>>>>>> Make sno fields NOT optional, and set dtime before use in _run
   M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90
   M   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90

Summary of testing:

  bluefire interactive testing:
001 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........PASS
  bluefire/CCSM testing:
PASS  PST.f45_g37.I1850.bluefire.compare.clm4_0_0+upext 
PASS  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_0+upext 
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm4_0_0+upext 
PASS  ERS.f19_g16.I1850.bluefire.compare.clm4_0_0+upext 
PASS  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_0+upext 
PASS  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_0+upext 

CLM tag used for the baseline comparison tests if applicable: clm4_0_00

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_01
Originator(s):  erik (erik)
Date: Tue May 11 14:39:25 MDT 2010
One-line Summary: Move glacier multiple elevation class branch to the trunk so that we can work with the active glacier model

Purpose of changes:

Add ability to handle glacier multiple elevation classes (glc_mec) in clm, so that we 
can interact with the active glacier component (glc). Adds glacier elevation classes 
to the surface datasets and requires they be read in when glacier multiple elevation 
classes are active.  New namelist options for glc_mec include glc_smb and glc_dyntopo.
At build-time the number of glc_mec classes is set (can be 0, 1, 3, 5, or 10). The
model also interacts with the mask of valid glacier points that the active glacier
model determined (input with the fglcmask file), and set by glc_grid (which can be
gland5,gland10, or gland20 for 5-20km resolution over Greenland). glc_grid is set at
build time, but should be moved to the build-namelist.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1156 (Reproducability problem with clm4_0_01)
                                 1157 (Problem with VOC interpolation in mksurfdata)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: Add glc_nec and glc_grid options to configure
   glc_nec can be 1,3,5, or 10 and MUST match the number on the input surface dataset
           the elevation classes themselves are read from the surface dataset
   glc_grid can be gland5, gland10, gland20 for greenland 5, 10, or 20km resolution
            it is merely passed on to build-namelist to pick the glcmask file

Describe any changes made to the namelist:

- create_glacier_mec_landunit (= T when these landunits are created; F by default)
- glc_smb (= T if passing surface mass balance to GLC; else pass PDD info; T by default)
- glc_dyntopo (= T if CLM topography changes dynamically; currently F)
              (NOT fully implemented yet)

  New history fields:
             QICE      ice growth/melt    (mm/s)
             QICEYR    ice growth/melt    (mm/s)
             gris_mask Greenland mask     (unitless)
             gris_area Greenland ice area (km^2)
             aais_mask Antarctic mask     (unitless)
             aais_area Antarctic ice area (km^2)

Changes to build-namelist:

  finidat file and possibly the fsurdat files include glc_nec values
    Currently only support glc_nec=0 or glc_nec=10

List any changes to the defaults for the boundary datasets: Update datm domain file for T31

Describe any substantial timing or memory changes: None

Code reviewed by: self, jwolfe, lipscomb, dlawren

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share
     Also add in active glacier model
   scripts   to scripts4_100510a
   csm_share to share3_100423
   gglc      to glc4_100507

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>> Add mec tests
    A    models/lnd/clm/test/system/config_files/_mec10sc_dh
    A    models/lnd/clm/test/system/config_files/_mec10sc_dm
    A    models/lnd/clm/test/system/config_files/_mec10sc_do
    A    models/lnd/clm/test/system/config_files/_mec10sc_ds
    A    models/lnd/clm/test/system/config_files/_mec10sc_h
    A    models/lnd/clm/test/system/config_files/_mec10sc_m
    A    models/lnd/clm/test/system/config_files/_mec10sc_o
    A    models/lnd/clm/test/system/nl_files/clm_glcmec
    A    models/lnd/clm/test/system/nl_files/nl_glcsmb

>>>>>>>>>> Handle passing of data from clm to the active glacier model
    A    models/lnd/clm/src/main/clm_glclnd.F90 -- handle passing data to glc model

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Add mec tests
    M    models/lnd/clm/test/system/tests_pretag_jaguar
    M    models/lnd/clm/test/system/input_tests_master
    M    models/lnd/clm/test/system/tests_posttag_purempi_regression
    M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
    M    models/lnd/clm/test/system/tests_pretag_bluefire
    M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
    M    models/lnd/clm/test/system/config_files/README
    M    models/lnd/clm/test/system/README.testnames

>>>>>>>>>>>> Add GLC_MEC to mksurfdata, add ability to set glc_nec on namelist
    M    models/lnd/clm/tools/mksurfdata/mkglcmec.F90
    M    models/lnd/clm/tools/mksurfdata/mkvarctl.F90
    M    models/lnd/clm/tools/mksurfdata/mkfileMod.F90
    M    models/lnd/clm/tools/mksurfdata/Makefile ------ Add gfortran remove xlf90 for Darwin
    M    models/lnd/clm/tools/mksurfdata/mkvarpar.F90
    M    models/lnd/clm/tools/mksurfdata/README
    M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90

>>>>>>>>>>>> Add some more checking for glc settings
    M    models/lnd/clm/bld/listDefaultNamelist.pl - Try to make faster, add loop over
                                                     glc_nec and glc_grid
    M    models/lnd/clm/bld/build-namelist --------- Get default glc_smb when
                                                     create_glacier_mec_landunits is on
    M    models/lnd/clm/bld/clm.cpl7.template ------ Add glc_ settings
    M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add glc_nec to 
             finidat files, add glc_nec="10" fsurdat files for T31, 1-deg, 2-deg
    M    models/lnd/clm/bld/configure
    M    models/lnd/clm/bld/config_files/Makefile.in - Add gfortran to Darwin and remove
xlf90
    M    models/lnd/clm/bld/config_files/config_definition.xsl - Add glacier types
    M    models/lnd/clm/bld/config_files/config_definition.xml

>>>>>>>>>>>> Read in glacier elevation classes from surfdata file as GLC_MEC
>>>>>>>>>>>> require it when create_glacier_mec_landunits is .true. and use it
>>>>>>>>>>>> to set value of glc_topomax. Add checking for glc options.
>>>>>>>>>>>> Also remove concurrent directives
    M    models/lnd/clm/src/main/clm_varcon.F90 -------- Add h2osno_max, lapse_glcmec 
                  and istice_mec, change albice when GLC_NEC>0
    M    models/lnd/clm/src/main/clm_varpar.F90 -------- Add npatch_glacier_mec
    M    models/lnd/clm/src/main/dynlandMod.F90 -------- Add checking for istice_mec
    M    models/lnd/clm/src/main/decompInitMod.F90 ----- Pass glcmask in
    M    models/lnd/clm/src/main/clm_initializeMod.F90 - Handle create_glacier_mec_landunit
    M    models/lnd/clm/src/main/ncdio.F90 ------------- Add 2D module procedures to ncd_iolocal interface
    M    models/lnd/clm/src/main/subgridMod.F90 -------- Handle create_glacier_mec_landunit if true
    M    models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Add glcmecpoi and greenland and antarctic mask/area
                       add forc_pbot, forc_rho, glc_topo, forc_t, forc_th to ces, forc_q to cws, eflx_bot to cef
                       add qflx_glcice, glc_rofi, glc_rofl
    M    models/lnd/clm/src/main/pftdynMod.F90 --------- Change comments
    M    models/lnd/clm/src/main/iniTimeConst.F90 ------ Handle istice_mec
    M    models/lnd/clm/src/main/clm_atmlnd.F90 -------- Fix comment
    M    models/lnd/clm/src/main/clm_varsur.F90 -------- Add topoxy
    M    models/lnd/clm/src/main/controlMod.F90 -------- Add create_glacier_mec_landunit, glc_dyntopo, glc_smb, fglcmask to namelist
    M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 - Add sno_export/import
    M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 Add sno_export/import
    M    models/lnd/clm/src/main/filterMod.F90 --------- Add istice_mec
    M    models/lnd/clm/src/main/clm_varctl.F90 -------- Add fglcmask, create_glacier_mec_landunit,
                glc_dyntopo, glc_smb, glc_nec, and glc_topomax add some error checking for them
    M    models/lnd/clm/src/main/initGridCellsMod.F90 -- Make ice sheet masks and deal with glcmask
    M    models/lnd/clm/src/main/surfrdMod.F90 --------- Read GLCMASK, GLC_MEC, PCT_GLC_MEC and TOPO_GLC_MEC when create_glacier_mec_landunit
    M    models/lnd/clm/src/main/domainMod.F90 --------- Add glcmask
    M    models/lnd/clm/src/main/clmtype.F90 ----------- Add forc_pbot, forc_rho, glc_frac, glc_topo add
                forc_t, forc_q, eflx_bot, qflx_glcice, glc_rofi, glc_rofl, glcmecpoi, gris and assis mask/area
    M    models/lnd/clm/src/main/histFldsMod.F90 ------- Add new fields when create_glacier_mec_landunit
    M    models/lnd/clm/src/main/histFileMod.F90 ------- Add glacier_mec to notes, set_noglcmec to hist_addfld1d
    M    models/lnd/clm/src/main/mkarbinitMod.F90 ------ Set mask sno to h2osno_max, use istice_mec
    M    models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ----- Assess if istice_mec and add qflx_glcice for glc_dyntopo
P
    M    models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - Assess if istice_mec
    M    models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 -- Assess if istice_mec and add eflx_bot
    M    models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 ---- Assess if istice_mec
    M    models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 --- Move forc_pbot/forc_q/forc_t/forc_th from g to c, assess istice_mec
    M    models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ---- Assess if isice_mec
    M    models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 ------- Assess if isice_mec move force_t from g to c
    M    models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- Assess if istice_mec and add qflx_glcice
    M    models/lnd/clm/src/biogeophys/clm_driverInitMod.F90 --- Downscale forc_t, forc_th, forc_q, forc_pbot from gridcell to columns
                  based on surface eleveation for glc_mec landunits
    M    models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 - Change forcing from g to c

Summary of testing:

  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing:
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_15
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_15
FAIL  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_7_15
FAIL  ERS.f19_g16.I1850.bluefire.compare.clm3_7_15
FAIL  ERI.T31_g37.IG.bluefire
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_7_15
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_01
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_15
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm3_7_15
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_15

PASS  SMS_D.f19_g16.IG.bluefire
PASS  ERS.f19_g16.IG.bluefire
FAIL  SMS.T31_g37.IG.bluefire
FAIL  SMS.f09_g16.IG.bluefire

  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_7_15

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_00
Originator(s):  erik (erik)
Date: Tue May  4 23:02:18 MDT 2010
One-line Summary:  Update to datm8, redirect aquifer overflow to drainage, add 
       gx3v7 masks, script to extract regional datasets, add harvesting for CN, 
       modify shrubs, include urban model, ice stream for snowcapping, new 
       build-namelist system, scale solar by solar zenith angle in datm, deep 
       soil with bedrock at bottom, organic matter in soils, SNICAR for snow 
       radiation, sparce dense aero, snow cover changes

Type of tag: doc

Software engineering changes:

    Update to cpl7 and scripts.
    Remove offline and cpl6 modes.
    Remove support for CASA model.
    Update to datm8 atmospheric data model.
    Add gx3v7 land mask for T31 and fv-4x5 horizontal resolutions.
    Add gx1v6 land mask for f05, f09, and f19 horizontal resolutions.
    Add tx1v1 land mask and 1.9x2.5_tx1v1 horizontal resolution.
    Add in 2.5x3.33 horizontal resolution.
    Add in T62 horizontal resolution so can run at same resolution as input datm data.
    Allow first history tape to be 1D.
    Add ability to use own version of input datasets with CLM_USRDAT_NAME variable.
    Add a script to extract out regional datasets.
    New build-namelist system with XML file describing all namelist items.
    Add glacier_mec use-case and stub glacier model.
    Add ncl script to time-interpolate between 1850 and 2000 for fndepdat dataset, for fndepdyn version.
    Make default of maxpatch_pft=numpft+1 instead of 4.
    Only output static 3D fields on first h0 history file to save space.
    Add new fields for VOC (Volatile Organic Compounds) on some surface datasets
    Add irrigation area to mksurfdata tool (NOT used in CLM yet).
    Add multiple elevation class option for glaciers in mksurfdata tool (NOT used in CLM yet).
    Add ascale field to land model in support of model running on it's own grid.

Science changes:

    Change to freezing temperature constant      
    Forcing height at atm plus z0+d on each tile                    
    Effective porosity divide by zero fix                          
    Sparse/dense canopy aerodynamic parameters                 
    Ground/snow emissivity smooth transition                                                       
    Thermal and hydraulic properties of organic soil                                                                        
    Init h2osoi=0.3                                                            
    Snow compaction fix                                                          
    Snow T profile during layer splitting fix                                  
    Snow burial fraction                                                             
    Snow cover fraction                                                                   
    SNICAR (snow aging, black carbon and dust deposition, vertical distribution of solar energy) 
    Remove SNOWAGE, no longer used                                                   
    Deep soil (15 layers, ~50m), 5 new layers are hydrologically inactive bed rock                          
    Ground evap (beta), stability, and litter resistance                      
    Organic/mineral soil hydraulic conductivity percolation theory       
    Richards equation modifications                                         
    Normalization of frozen fraction of soil formulation                                 
    One-step solution for soil moisture and qcharge                          
    Changes to rsub_max for drainage and decay factor for surface runoff      
    Fixed diurnal cycle of solar radiation in offline forcing data                            
    Back to CLM3 lakes and wetlands datasets, but 1% rather than 5% threshold (same for glacier) 
    Changes to pft physiology file from CN                                                                                     
    New grass optical properties                                                                   
    New surface dataset assuming no herbaceous understory  
    Direct versus diffuse radiation offline                                           
    New VOC model (MEGAN)                                                                                            
    Snow-capped runoff goes to new ice stream and routed to ocean as ice                                         
    Dust model always on, LAI threshold parameter change from 0.1 to 0.3     
    Daylength control on vcmax                                                           
    SAI and get_rad_dtime fix                                                              
    Always run with MAXPATCH_PFT=npfts + 1 instead of 4                                                                               
    Transient land cover/use mode - datasets, energy and water balance   
    RTM sub-cycling                                                     
    Twostream bug fix                                
    Update soil colors     
    2m relative humidity        
    Fix for aquifer leak (SoilHydrologyMod, BalanceCheckMod)              
    New nitrogen deposition file (units and sum of NOx, NHy)  

Quickstart to new cpl7 scripts...

         cd scripts
         ./create_newcase -help      # get help on how to run create_newcase
         ./create_newcase -case testI -mach bluefire -res f19_g16 -compset I    # create new "I" case for bluefire at 1.9x2.5_gx1v6 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         ./xmlchange -help           # Get help on editor for XML files
         ./xmlchange <options> env_conf.xml env_mach_pes  # Edit configure files if needed
         configure -case             # create scripts
         ./xmlchange <options> env_build.xml              # Edit build files if needed
         testI.build                 # build model and create namelists
         ./xmlchange <options> env_run.xml                # Edit run files if needed
         bsub < testI.run            # submit script
                                     # (NOTE: edit env_run.xml to set RESUBMIT to number of times to automatically resubmit)
Quickstart to use of regional extraction scripts and PERSONAL datasets:

       # Run the script to create an area to put your files (assume CSMDATA set to standard inputdata)
       cd scripts
       setenv MYCSMDATA $HOME/myinputdata
       link_dirtree $CSMDATA $MYCSMDATA

       # Run the extraction for data from 52-73 North latitude, 190-220 longitude
       # that creates 13x12 gridcell region from the f19 (1.9x2.5) global resolution over
       # Alaska
       cd ../models/lnd/clm/tools/ncl_scripts
       setenv MYID 13x12pt_f19_alaskaUSA
       getregional_datasets.pl -sw 52,190 -ne 73,220 -id $MYID -mycsmdata $MYCSMDATA

       # Now create a case that uses these datasets
       cd ../../../../../scripts
       create_newcase -case testregional -compset I -mach bluefire -res pt1_pt1
       cd testregional
       $EDITOR env_conf.xml # change CLM_BLDNML_OPTS to include "-clm_usr_name $MYID" (expand $MYID)
       $EDITOR env_mach_pes.xml # Change tasks/threads as appropriate (defaults to serial)
       xmlchange -file env_run.xml -id DIN_LOC_ROOT_CSMDATA -val $MYCSMDATA

       # Do other changes to xml files as appropriate
       # configure as normal, then edit the datm namelist

       configure -case

       # Then build and run the case as normal

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
                                 1197 (MPI problem sending and receiving data in same array)
Describe any changes made to build system:

   Change directory structure to match CCSM.
   Add BGP target.
   Add choice between ESMF and MCT frameworks.
   Start removing #ifdef and directives that supported Cray-X1 Phoenix as now decommissioned.
   Make default of maxpatch_pft=numpft+1 instead of 4 for all configurations.
   By default turn on CLAMP when either CN or CASA is enabled
   New SNICAR_FRC, CARBON_AERO, and C13 CPP ifdef tokens.

   New options added to configure:

     -comp_intf <name>   Component interface to use (ESMF or MCT) (default MCT)
     -nofire             Turn off wildfires for bgc setting of CN (default includes fire for CN)
     -pio <name>         Switch enables building with Parallel I/O library. [on | off] (default is on)
     -snicar_frc <name>  Turn on SNICAR radiative forcing calculation. [on | off] (default is off)

Describe any changes made to the namelist:

   NOTE: build-namelist now checks the validity of your namelist you generate by looking at data in the namelist_definition.xml
         file. In order to add new namelist items you need to change the code and also edit this file. To view information
         on the namelist view the file:
         models/lnd/clm/bld/namelist_files/namelist_definition.xml
         in your browser and you'll see the names, type, description and valid_values for all namelist variables.

   Changes to build-namelist:
     Transient sim_year ranges (i.e. 1850-2000)
     Remove cam_hist_case option.
     Make sure options ONLY used for stand-alone testing have a "drv_" or "datm_" prefix in them and list these
     options all together and last when asking for help from build-namelist.
   New options to build-namelist:
     -clm_usr_name     "name" Dataset resolution/descriptor for personal datasets. Default: not used
                              Example: 1x1pt_boulderCO_c090722 to describe location,
                                       number of pts, and date files created
   New list options to build-namelist:
     build-namelist -res list          # List valid resolutions
     build-namelist -mask list         # List valid land-masks
     build-namelist -sim_year list     # List valid simulation years and simulation year ranges
     build-namelist -clm_demand list   # List namelist variables including those you could demand to be included.
     build-namelist -use_case list     # List valid use-cases
     build-namelist -rcp list          # List valid representative concentration pathways
                                       # for future scenarios

     List of use-cases for build-namelist:

1850-2100_rcp4.5_transient = Simulate transient land-use, and aerosol deposition changes
with historical data from 1850 to 2005 and then with the RCP4.5 scenario from MINICAM

1850-2100_rcp8.5_transient = Simulate transient land-use, and aerosol deposition changes
with historical data from 1850 to 2005 and then with the RCP8.5 scenario from MESSAGE

   1850_control = Conditions to simulate 1850 land-use
2000-2100_rcp8.5_transient = Simulate transient land-use, and aerosol deposition changes
with historical data from 2000 to 2005 and then with the RCP8.5 scenario from MESSAGE

   2000_control = Conditions to simulate 2000 land-use
20thC_transient = Simulate transient land-use, and aerosol deposition changes from 1850
to 2005
         pergro = Perturbation error growth test with initial conditions perturbed by
roundoff level
        pergro0 = Perturbation error growth test with unperturbed initial conditions


   New namelist items:

        urban_hac = OFF, ON or ON_WASTEHEAT   (default OFF)     Flag for urban Heating and Air-Conditioning
                                                       OFF          = Building internal temperature is un-regulated.
                                                       ON           = Building internal temperature is bounded to reasonable range.
                                                       ON_WASTEHEAT = Building internal temperature is bounded and resultant waste
                                                                      heat is given off.
        urban_traffic = .true. or .false.     (default .false.) Flag to include additional multiplicative factor of urban traffic
                                                                to sensible heat flux.
        fsnowoptions = filename          file for snow/aerosol optical properties (required)
        fsnowaging   = filename          file for snow aging parameters (required)
        faerdep      = filename          file of aerosol deposition (required)

  New history variables: (note watt vs. W in units, 26 vs. 76)
     BCDEP                      total BC deposition (dry+wet) from atmosphere                kg/m^2/s
     BIOGENCO                   biogenic CO flux                                             uGC/M2/H
     C13_PRODUCT_CLOSS          C13 total carbon loss from wood product pools                gC13/m^2/s
     DSTDEP                     total dust deposition (dry+wet) from atmosphere              kg/m^2/s
     EFLX_DYNBAL                dynamic land cover change conversion energy flux             W/m^2
     FGR12                      heat flux between soil layers 1 and 2                        watt/m^2
     FSAT                       fractional area with water table at surface                  unitless
     FSH_NODYNLNDUSE		sensible heat flux not including correction for land use change
                                                                                             watt/m^2
     GC_HEAT1                   initial gridcell total heat content                          J/m^2
     GC_HEAT2                   post land cover change total heat content                    J/m^2    inactive
     GC_ICE1                    initial gridcell total ice content                           mm/s
     GC_ICE2                    post land cover change total ice content                     mm/s     inactive
     GC_LIQ1                    initial gridcell total liq content                           mm
     GC_LIQ2                    initial gridcell total liq content                           mm       inactive <<<< name??
     H2OSNO_TOP                 mass of snow in top snow layer                               kg
     HEAT_FROM_AC               sensible heat flux put into canyon due to heat removed from air conditioning
                                                                                             watt/m^2
     HK                         hydraulic conductivity                                       mm/s     inactive
     ISOPRENE                   isoprene flux                                                uGC/M2/H
     LAND_USE_FLUX              total C emitted from land cover conversion and wood produc t pools gC/m^2/s
     LAND_UPTAKE                NEE minus LAND_USE_FLUX, negative for update                 gC/m^2/s
     LWup                       upwelling longwave radiation                                 watt/m^2 inactive
     MONOTERP                   monoterpene flux                                             uGC/M2/H
     NBP                        net biome production, includes fire, landuse, and harvest flux, positive for sink
                                                                                             gC/m^2/s
     OCDEP                      total OC deposition (dry+wet) from atmosphere                kg/m^2/s
     OVOC                       other VOC flux                                               uGC/M2/H
     ORVOC                      other reactive VOC flux                                      uGC/M2/H
     PBOT                       atmospheric pressure                                         Pa
     PCO2                       atmospheric partial pressure of CO2                          Pa
     PRODUCT_CLOSS              total carbon loss from wood product pools                    gC/m^2/s
     PRODUCT_NLOSS              total N loss from wood product pools                         gN/m^2/s
     Qair                       atmospheric specific humidity                                kg/kg    inactive
     Qanth                      anthropogenic heat flux                                      watt/m^2 inactive
     Qtau                       momentum flux                                                kg/m/s^2
     QFLX_LIQ_DYNBAL            liq dynamic land cover change conversion runoff flux         mm/s
     QFLX_ICE_DYNBAL            ice dynamic land cover change conversion runoff flux         mm/s
     QRUNOFF_NODYNLNDUSE        total liquid runoff not including correction for land use change (does not include QSNWCPICE) 
                                                                                             mm/s
     QSNWCPICE                  excess snowfall due to snow capping                          mm/s
     QSNWCPICE_NODYNLNDUSE      excess snowfall due to snow capping not including correction for land use change
                                                                                             mm/s
     QSNWCPLIQ                  excess rainfall due to snow capping                          mm/s     inactive
     SMP                        soil matric potential                                        mm       inactive
     SNOAERFRC2L                surface forcing of all aerosols in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNOAERFRCL                 surface forcing of all aerosols in snow (land)               watt/m^2
     SNOBCFRCL                  surface forcing of BC in snow (land)                         watt/m^2
     SNOBCMCL                   mass of BC in snow column                                    kg/m2
     SNOBCMSL                   mass of BC in top snow layer                                 kg/m2
     SNOdTdzL                   top snow layer temperature gradient (land)                   K/m
     SNODSTFRC2L                surface forcing of dust in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNODSTFRCL                 surface forcing of dust in snow (land)                       watt/m^2
     SNODSTMCL                  mass of dust in snow column                                  kg/m2
     SNODSTMSL                  mass of dust in top snow layer                               kg/m2
     SNOFSRND                   direct nir reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRNI                   diffuse nir reflected solar radiation from snow              watt/m^2 inactive
     SNOFSRVD                   direct vis reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRVI                   diffuse vis reflected solar radiation from snow              watt/m^2 inactive
     SNOFSDSND                  direct nir incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSNI                  diffuse nir incident solar radiation on snow                 watt/m^2 inactive
     SNOFSDSVD                  direct vis incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSVI                  diffuse vis incident solar radiation on snow                 watt/m^2 inactive
     SNOLIQFL                   top snow layer liquid water fraction (land)                  fraction inactive
     SNOOCMCL                   mass of OC in snow column                                    kg/m2
     SNOOCMSL                   mass of OC in top snow layer                                 Kg/m2
     SNOOCFRC2L                 surface forcing of OC in snow, averaged only when snow is present (land)
     SNOOCFRCL                  surface forcing of OC in snow (land)                         watt/m^2
                                                                                             watt/m^2
     SNORDSL                    top snow layer effective grain radius                        m^-6     inactive
     SNOTTOPL                   snow temperature (top layer)                                 K/m      inactive <<< units?
     SOILWATER_10CM             soil liquid water + ice in top 10cm of soil                  kg/m2
     SWup                       upwelling shortwave radiation                                watt/m^2 inactive
     TSOI_10CM                  soil temperature in top 10cm of soil                         K
     URBAN_AC                   urban air conditioning flux                                  watt/m^2
     URBAN_HEAT                 urban heating flux                                           watt/m^2
     VOCFLXT                    total VOC flux into atmosphere                               uGC/M2/H
     Wind                       atmospheric wind velocity magnitude                          m/s      inactive
     WOOD_HARVESTC              wood harvest (to product pools)                              gC/m^2/s
     WOOD_HARVESTN              wood harvest (to product pools)                              gN/m^2/s

  History field name changes:

     ANNSUM_PLANT_NDEMAND  => ANNSUM_POTENTIAL_GPP
     ANNSUM_RETRANSN       => ANNMAX_RETRANSN
     C13_DWT_PROD10C_LOSS  => C13_PROD10C_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     C13_DWT_PROD10N_LOSS  => C13_PROD10N_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     DWT_PROD100N_LOSS     => PROD10N_LOSS
     DWT_PROD100N_LOSS     => PROD100N_LOSS
     DWT_PROD100C_LOSS     => PROD10C_LOSS
     DWT_PROD100C_LOSS     => PROD100C_LOSS
     HCSOISNO              => HC
     TEMPSUM_PLANT_NDEMAND => TEMPSUM_POTENTIAL_GPP
     TEMPSUM_RETRANSN      => TEMPMAX_RETRANSN

   History field names deleted:
     SNOWAGE, TSNOW, FMICR, FCO2, DMI, QFLX_SNOWCAP

  Add new urban oriented _U, and _R (Urban and Rural) for:
        EFLX_LH_TOT, FGR, FIRA, FSH, FSM, Q2M, QRUNOFF, RH2M, SoilAlpha, TG, TREFMNAV, TREFMXAV, and TSA
        (missing _R for SoilAlpha)

Describe timing and memory performance:

Versions of any externally defined libraries:

   scripts             scripts4_100108b
   drv                 vocemis-drydep12_drvseq3_1_11
   datm                datm8_091218
   socn                stubs1_2_02/socn
   sice                stubs1_2_02/sice
   sglc                stubs1_2_02/sglc
   csm_share           vocemis-drydep13_share3_091217
   esmf_wrf_timemgr    esmf_wrf_timemgr_090402
   timing              timing_090929
   mct                 MCT2_7_0_100106
   pio                 pio60_prod
   cprnc               cprnc_081022

Summary of testing:

  bluefire: All PASS except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
048 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 12
  bluefire interactive testing: All PASS except...
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_15 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_10 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_10 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_10 
  jaguar: All PASS except..
005 smB51 TSM.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 144 arb_ic ..............FAIL! rc= 10
006 erB51 TER.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
007 brB51 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
026 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
027 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
028 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
030 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
031 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 5
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort: All PASS except...
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................FAIL! rc= 7
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_5_00

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: new climate for clm4

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
    ccsm4_0_beta35
    bluefire
    -compset B_1850_TRACK1_CN -res f19_g16

   MSS location of control simulations used to validate new climate:

/DLAWREN/csm/b40.1850.track1.2deg.003.snow
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/ccr/paleo/b40.snow/b40.1850.track1.2deg.003.snow-b40.1850.track1.2deg.003.control/
	
===============================================================
===============================================================
Tag name:  clm3_8_00
Originator(s):  erik (erik)
Date: Tue May  4 22:39:18 MDT 2010
One-line Summary: Get future scenarios working, finalize documentation, bring in MEGAN VOC and CNDV, simplify, mksurfdata optimization, fix bugs: snow enthalpy, BMOZ, pergro, use pft weights from fsurdat NOT finidat

Purpose of changes:

Get all of the future scenarios working (other than rcp=6.0) and get all of the datasets
for these scenarios (pftdyn, fndepdyn, and aerdep files, for rcp=2.6,4.5, and 8.5).
Finalize the User's Guide for now, with reviews from: Sam, Keith, Dave, and Sean, as
well as more work on tools chapter, and adding testing chapter in appendix. We brought
in the MEGAN version of the Volatile Organic Compounds (VOC) module which also reads
in VOC emission factors from the surface dataset, and hence all fsurdat files needed
to be replaced. Along with this the mksurfdata tool was changed in order to handle VOC's
and effort was made to optimize it, add shared memory paralelism, and do memory
optimization. We also removed the old Dynamic Global Vegetation Model (DGVM) and replaced
it with the Carbon Nitrogen Dynamic Vegetation model (CNDV). Make some simplifications
in the configure system to always use the CCSM version of build files, remove some 
unused options, put standalone test options last in configure. Improve documenation in
XML files for configure and build-namelist options.

Fix many different bugs. Enthalpy in snow combination was sometimes NOT conserved and now
is. There was a problem running DryDeposition for the BMOZ compset that is now fixed.
There were multiple issues running PERGRO testing that is now fixed. Previously, if 
both the finidat file and the fsurdat file had PFT weights on them, the values from
the finidat file was used, now it will use the values from the fsurdat file. There are
also several cases where if the weights are different it will abort with an error, or
at least send a message to the log file about the differences.

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Type of tag: doc

Describe any changes made to build system:
   Switch cndv for dgvm, Have configure disallow bad cases
   Change configure to NOT allow supln with spinup cases
   Do NOT allow exit_spinup and ad_spinup at the same time.
   Only allow voc to be set for seq_ccsm NOT ext_ccsm_seq
   Remove carbon_aero and pio from configure (always build with pio)
   emove unused configure options: clm_exe, -clm_exedir, and -clm_bld.
   Move standalone testing options to the end of help. Use CCSM version
   of mkSrcfiles/mkDepends, separate config vars into categories, work
   on documentation with comments from Keith/Sam.

Describe any changes made to the namelist:
   Add 2000-2100 simulation year range as allowed option

   Two new history fields:

        TSOI_10CM      = soil temperature in top 10cm of soil (K)
        SOILWATER_10CM = soil liquid water + ice in top 10cm of soil (kg/m2)

   Check for some files based on rcp (fpftdyn, ndepdyn, and aerdep)

   Add in ability to add a user namelist in your case directory to input
   namelist items at configure time. Simply add a file called "user_nl_clm"
   as a valid namelist and the items in that namelist will show up in the initial
   BuildConf/clm.buildnml.csh file.

List any changes to the defaults for the boundary datasets:
    get urbanc_alpha grid and frac files in
    get in new single-point datasets
              new qtr-degree, T62 and T85 fsurdat
              new f10, f05, f09, 1850 fsurdat
              new rcp=8.5, f19 pftdyn, 
              new rcp=4.5 f09, f19, f10 pftdyn
              new rcp=2.6 f09, f19, f10 pftdyn
              new rcp=8.5/4.5/2.6 f19 aerdep 1850-2100 datasets
              new rcp=8.5/4.5 f19 fndepdyn 1850-2100 datasets
              new rcp=2.6/4.5 f10, f45, f25, f09 aerdep/ndepdyn datasets
              new rcp=2.6/4.5,8.5 f19 decadal averages for ndepdat
   (Note: harvest was updated in PFTDYN files and raw PFT input files for 2006).
   New 10x15 and 4x5 finidat files so that transient cases will work at those resolutions
     New finidat files for 1-deg and 2-deg (from fully coupled simulations)
     New datasets for I cases that are set in scripts
   Duplicate cn datasets for cndv
    New pft-physiology files with extra fields for CNDV
   Remove 360x720 files, gx3v5, gx1v5 files
   Remove 1x1.25, 2x2.5, and 2.5x3.33 grid resolutions
   Remove gx1v3, gx1v4, gx1v5 land masks, add drydep defaults.
   add mksrf_fvegtyp@1000-1004

Describe any substantial timing or memory changes: None

Code reviewed by:
    snow changes came from dlawren and also reviewed by oleson
    PFT weight change also reviewed by: dlawren, slevis, oleson
    CNDV came from slevis
    VOC changes came from Francis Vitt and Jean-Francois Lamarque
    history changes came from Keith Oleson, reviewed by Dave Lawrenece
    OpenMP bug fix came from Mariana-Vertenstein, reviewed by Pat Worley

List any svn externals directories updated (csm_share, mct, etc.): all
    scripts    to scripts4_100406a
    drv        to drvseq3_1_23
    datm       to datm8_100406
    csm_share  to share3_100407
    pio        to pio1_0_18
    timing     to timing_091021

Summary of testing:

  bluefire: All PASS except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
048 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 12
  bluefire interactive testing: All PASS except...
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_15 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_10 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_10 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_10 
  jaguar: All PASS except..
005 smB51 TSM.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 144 arb_ic ..............FAIL! rc= 10
006 erB51 TER.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
007 brB51 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
026 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
027 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
028 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
030 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
031 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 5
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort: All PASS except...
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................FAIL! rc= 7
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_00

Changes answers relative to baseline: Yes!
    snow change has a small effect on climate (see below)
    Bringing in MEGAN VOC changes answers for VOC fluxes in a diagnostic way
    Changing to use weights from fsurdat file rather than finidat file, changes
      answers for cases with finidat startup files, if the weights are different.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
    ccsm4_0_beta35
    bluefire
    -compset B_1850_TRACK1_CN -res f19_g16

   MSS location of control simulations used to validate new climate:

/DLAWREN/csm/b40.1850.track1.2deg.003.snow
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/ccr/paleo/b40.snow/b40.1850.track1.2deg.003.snow-b40.1850.track1.2deg.003.control/
http://www.cgd.ucar.edu/ccr/dlawren/research/clm4.0_dev/b40.1850.track1.2deg.003.snowa-b40.1850.track1.2deg.003.controla/setsIndex.html
	
===============================================================
===============================================================
Tag name:  clm3_7_15
Originator(s):  erik (erik)
Date: Tue Apr 27 10:13:57 MDT 2010
One-line Summary: Finish User's Guide, surfdata files for urban-1pt, fix mksurfdata ifort bugs, work with testing

Purpose of changes:

Fix all urban single-point datasets (mexicocity, urbanc_alpha), fix get_regional script
to work. Add more documentation on mksurfdata to users-guide, add pergro procedure
examples, more to testing section. Remove "moving the sun" warning. Fix
ndeplintInterp.ncl and getregional_datasets.ncl scripts.

Bugs fixed (include bugzilla ID):
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1150 (Bug in indices in getregional_datasets.ncl script)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Type of tag: std-test

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New fsurdat files for urban-1p datasets
      1x1_vancouverCAN, 1x1_mexicocityMEX, 1x1_urbanc_alpha, 1x1_asphaltjungleNJ

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): datm

   datm to datm8_100406

List all files eliminated:

>>>>>>>>>>> Remove test lists no longer used
     D   models/lnd/clm/test/system/tests_pretag_bangkok
     D   models/lnd/clm/test/system/tests_pretag_calgary
     D   models/lnd/clm/test/system/tests_posttag_lightning_nompi

List all files added and what they do:

>>>>>>>>>>> Add plot of pergro testing
     A   models/lnd/clm/doc/UsersGuide/pergro.jpg
>>>>>>>>>>> Add in plotting for pergro testing
     A   models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat
     A   models/lnd/clm/tools/ncl_scripts/RMSintrepid.dat
     A   models/lnd/clm/tools/ncl_scripts/pergroPlot.ncl

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Remove tests no longer used, work on documentation
     M   models/lnd/clm/test/system/test_driver.sh ---- Remove calgary, work on doc
     M   models/lnd/clm/test/system/gen_test_table.sh - Remove note for calgary
     M   models/lnd/clm/test/system/README ------------ Clarify documentation
     M   models/lnd/clm/test/system/CLM_runcmnd.sh ---- Remove calgary
>>>>>>>>>>> Fix ifort compiler problems, point to $CSMDATA locations of 1850
>>>>>>>>>>> and 2000 PFT datasets
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig ---- Change path
     M   models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000.txt - Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.regional ------- Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn --------- Change path
     M   models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850.txt - Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.singlept ------- Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.namelist ------- Change path
     M   models/lnd/clm/tools/mksurfdata/README -------------------- Update documentation
     M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -------------- outnc_double to
                    .true., fix implicit none statements, add documentation
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl ------------- Add ability to set 
                    inputdata directory
     M   models/lnd/clm/tools/mksurfdata/creategridMod.F90 --------- Change where to loops
>>>>>>>>>>> Fix bug in time axis and getregional indices
     M   models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Fix time axis and check it
     M   models/lnd/clm/tools/ncl_scripts/README ------------- Add note about pergroPlot
     M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl
>>>>>>>>>>> Fix CLM_USRDAT_NAME and add urban 1pt datasets
     M   models/lnd/clm/bld/clm.cpl7.template ------------------------ Set resolution for CLM_USRDAT_NAME
     M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New urban pt1
               datasets: 1x1_vancouverCAN, 1x1_mexicocityMEX, 1x1_urbanc_alpha, 1x1_asphaltjungleNJ
>>>>>>>>>>> Remove SNICAR message about moving the sun
     M   models/lnd/clm/src/biogeophys/SNICARMod.F90
>>>>>>>>>>> Finish off current User's Guide
>>>>>>>>>>> Bring rel03->rel04 updates in, run ispell on everything
>>>>>>>>>>> Work on mksurfdata and testing sections, give instructions for pergro
>>>>>>>>>>> Add help from mksurfdata.pl and test_driver.sh scripts
     M   models/lnd/clm/doc/KnownBugs -- Add note that mkgriddata can not straddle Greenwich
     M   models/lnd/clm/doc/UsersGuide/tools.xml
     M   models/lnd/clm/doc/UsersGuide/preface.xml
     M   models/lnd/clm/doc/UsersGuide/clm_ug.xml
     M   models/lnd/clm/doc/UsersGuide/adding_files.xml
     M   models/lnd/clm/doc/UsersGuide/appendix.xml
     M   models/lnd/clm/doc/UsersGuide/config_cache.xml
     M   models/lnd/clm/doc/UsersGuide/custom.xml
     M   models/lnd/clm/doc/UsersGuide/single_point.xml
     M   models/lnd/clm/doc/UsersGuide/Makefile
     M   models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
     M   models/lnd/clm/doc/UsersGuide/special_cases.xml

Summary of testing:

  bluefire: All PASS except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
048 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 12
  bluefire interactive testing: All PASS except...
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_15 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_10 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_10 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_10 
  jaguar: All PASS except..
005 smB51 TSM.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 144 arb_ic ..............FAIL! rc= 10
006 erB51 TER.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
007 brB51 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
026 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
027 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
028 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
030 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
031 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 5
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort: All PASS except...
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................FAIL! rc= 7
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_14

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_14
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Thu Apr  8 16:15:35 MDT 2010
One-line Summary: Fix rcp=2.6/4.5 1-degree fndepdyn filenames

Purpose of changes:

Fix the names of the rcp=2.6/4.5 1-degree fndepdyn filenames (had a 100208 file creation
date but should be 100407).

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Fix fndepdyn filenames

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Fix fndepdyn filenames

Summary of testing: None

===============================================================
===============================================================
Tag name:  clm3_7_13
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Thu Apr  8 10:53:06 MDT 2010
One-line Summary: Add in missing rcp=2.6/6 use-cases, and fix syntax errors in the namelist_defaults file

Purpose of changes:

Add in missing use cases for rcp=4.5 and rcp=6 transient future scenarios. Fix syntax errors in the namelist_defaults_clm
file.

Bugs fixed (include bugzilla ID):  Above two problems

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Nonae

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

A      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
A      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Fix syntax errors

Summary of testing: None, other than script creation testing

===============================================================
===============================================================
Tag name:  clm3_7_12
Originator(s):  erik (erik)
Date: Thu Apr  8 00:30:30 MDT 2010
One-line Summary: rcp=2.6/4.5 datasets for fndepdyn and aerdepdat, fix some minor issues, new 1pt urban surfdata files

Purpose of changes:

Add in urban single-point surfdata files.  Add in regridded ndepdyn/aerdep files: f09,
f45, f10, f25. Fix name of f05, 1850 fsurdat file, add in new urban single point
datasets, add back urbanc_alpha grid/frac files. Put rcp in filenames for aerdep/ndep
regrid scripts. chomp frac filename in mksurfdata.pl, for urban single-point files. Make
OPT=TRUE default for mksurfdata. Lengthen allowed gridname for mksurfdata.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    aerdep/ndepdyn for rcp=2.6/4.5 f10, f45, f25, f09
    fix name of f05 fsurdata file for 1850
    get urbanc_alpha grid and frac files in
    get in new urban single-point datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
    csm_share to share3_100407

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M    models/lnd/clm/tools/mksurfdata/Makefile ------ make OPT=TRUE the default
M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -- lengthen gridname to 32
M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl - make sure to chomp fracdata file

M    models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Add rcp to filename
M    models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Add rcp to filename

M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New datasets
                    aerdep/ndepdyn for rcp=2.6/4.5 f10, f45, f25, f09
                    fix name of f05 fsurdata file for 1850
                    get urbanc_alpha grid and frac files in
                    get in new urban single-point datasets

Summary of testing:

  bluefire interactive testing: All PASS except up to 014 smJ74
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
010 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10

===============================================================
===============================================================
Tag name:  clm3_7_11
Originator(s):  erik (erik)
Date: Wed Apr  7 11:59:22 MDT 2010
One-line Summary: qtr-degree and T85 surfdata, rcp=2.6/4.5 datasets, doc updates

Purpose of changes:

Documentation updates, for users guide and namelist and configure xml files (rel04 to
rel05 update). Fix missing deallocate (bug 1133), and line length for NEE. Changes in
mksurfdata so that will run for qtr-degree. New rcp datasets for 4.5 and 2.6, aerdep
(only f19)/ndepdyn/pftdyn datasets. Fix CN spinup test, fix test name for bluefire tests.
Add in qtr-degree and T85 surfdata files.

Bugs fixed (include bugzilla ID):
                                 1141 (CN spinup test)
                                 1137 (qtr-deg fsurdat)
                                 1136 (line length for NEE in histFlds)
                                 1135 (miss smG45 test)
                                 1133 (missing deallocate)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                      (partial T85 and qtr-degree)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
              new qtr-degree and T85 fsurdat
              new rcp=8.5, f19 pftdyn, rcp=4.5 f09, f19, f10 pftdyn
              new rcp=2.6 f09, f19, f10 pftdyn
              new rcp=4.5/2.6 f19 aerdep 1850-2100 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv
    scripts to scripts4_100406a
    drv     to drvseq3_1_23

List all files eliminated:

   D  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt -- Rename with _hist_
   D  models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt -- Rename with _hist_

List all files added and what they do:

   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000.txt - Renamed from above
   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850.txt - Renamed from above

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Turn supln off for spinup modes
   M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
   M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
   M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
   M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
   M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
   M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
   M  models/lnd/clm/test/system/tests_pretag_bluefire --------------- Change name of missing test smG45->smG55

>>>>>>>>>>>>> Change names of pftdyn text files to include _hist_
>>>>>>>>>>>>> Memory updates so uses less memory (allocate just before needed
>>>>>>>>>>>>> deallocate after done). This is from the ccsm4_0_rel05 update
>>>>>>>>>>>>> Mariana started the changes and Erik added some more.
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.namelist
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.regional
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.singlept
   M  models/lnd/clm/tools/mksurfdata/README
   M  models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90 ----- Memory updates

   M  models/lnd/clm/bld/clm.cpl7.template - Use $CASETOOLS for Makefile

   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - 
              new qtr-degree and T85 fsurdat
              new rcp=8.5, f19 pftdyn, rcp=4.5 f09, f19, f10 pftdyn
              new rcp=2.6 f09, f19, f10 pftdyn
              new rcp=4.5/2.6 f19 aerdep 1850-2100 datasets

>>>>>>>>>>>>> Documentation udpates updating from rel04 to ccsm4_0_rel05
   M  models/lnd/clm/bld/configure -------------------------- change CVS to SVN
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Correct name
   M  models/lnd/clm/bld/config_files/config_definition.xml - Add category for maxpft

   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml - Work with categories
                    and improve descriptions, remove rpntpath
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl - Seperate out
                    stand-alone testing categories, improve documentation, work
                    on categories.

>>>>>>>>>>>>> Documentation udpates updating from rel04 to ccsm4_0_rel05
>>>>>>>>>>>>> Updates from Sam, Keith, and Sean, more doc on tools and appendix
   M  models/lnd/clm/doc/UsersGuide/co2_streams.txt
   M  models/lnd/clm/doc/UsersGuide/tools.xml
   M  models/lnd/clm/doc/UsersGuide/preface.xml
   M  models/lnd/clm/doc/UsersGuide/clm_stylesheet.dsl
   M  models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M  models/lnd/clm/doc/UsersGuide/adding_files.xml
   M  models/lnd/clm/doc/UsersGuide/appendix.xml
   M  models/lnd/clm/doc/UsersGuide/custom.xml
   M  models/lnd/clm/doc/UsersGuide/single_point.xml
   M  models/lnd/clm/doc/UsersGuide/Makefile
   M  models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   M  models/lnd/clm/doc/UsersGuide/special_cases.xml
   M  models/lnd/clm/doc/KnownBugs --------------------------- Add notes on: 
       bugzilla bugs: 669, 1024, 1124, 1125, 1127

   M  models/lnd/clm/src/main/accFldsMod.F90 -- Deallocate outside #ifdef
   M  models/lnd/clm/src/main/histFldsMod.F90 - Shorten long line for NEE

Summary of testing:

  bluefire: All PASS up to 024, blHN1 test except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing: All PASS except (up to 26 brAK8 test)
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  jaguar interactive testing: All PASS up to smAK4 test except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............SKIPPED*
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
008 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_7_10

Changes answers relative to baseline: no (b4b)

===============================================================
===============================================================
Tag name:  clm3_7_10
Originator(s):  erik (erik)
Date: Mon Mar 22 23:54:48 MDT 2010
One-line Summary: Fix drydep so that BMOZ case will work

Purpose of changes:

Update externals, fix drydep bug (so that BMOZ case will run bug 1132). Add 10x15 and 4x5
finidat files, so that bluefire.clm.auxtest PET and PST cases will work. Fix
documentation on transient CO2.

Bugs fixed (include bugzilla ID):
                                 1132 (clm failure for BMOZ compset)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   New 10x15 and 4x5 finidat files so that transient cases will work at those resolutions

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, pio
  Update to ccsm4_0_beta47 versions
   scripts  to scripts4_100322b
   drv      to drvseq3_1_20
   datm     to datm8_100225
   pio      to pio1_0_18 

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/doc/UsersGuide/Makefile ---------- Fix conversion to xml
M      models/lnd/clm/doc/UsersGuide/special_cases.xml - Fix transient CO2 doc
M      models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff - Fix CO2 file

M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl --- Fix historical rcp value
M      models/lnd/clm/tools/interpinic/runinit_ibm.csh - Fix so will run

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add 10x15, 4x5
              finidat files

M      models/lnd/clm/src/main/clm_comp.F90 ------- check drydep_method
M      models/lnd/clm/src/main/clmtypeInitMod.F90 - check drydep_method
M      models/lnd/clm/src/main/clm_atmlnd.F90 ----- check drydep_method, don't pass
                  drydep stuff unless drydep_method is DD_XLND

Summary of testing:

  bluefire/CCSM testing: All PASS except...
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_10 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_07 

CLM tag used for the baseline comparison tests if applicable: clm3_7_09

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_09
Originator(s):  erik (erik)
Date: Sun Mar 21 21:08:54 MDT 2010
One-line Summary: Fix snow enthalpy bug, cndv datasets, various fixes

Purpose of changes:

Fix snow enthalpy bug from Dave Lawrence. Add rcp to mksurfdata.pl. Add new 2006 datasets
for pftdyn files for mksurfdata. Fix history bug. New rcp 8.5 1-degree pftdyn dataset.
Duplicate all cn datasets for cndv. pergro use cases output in double precision. Some
work on documentation.

Bugs fixed (include bugzilla ID):
                                 1128 (cndv needs the same input files as cn)
                                 1130 (History problem on restarts)
                                 1131 (pergro use cases need double output files)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:

   New 1-degree rcp=8.5 pftdyn dataset with harvest for 2006
   Duplicate cn datasets for cndv

Describe any substantial timing or memory changes: None

Code reviewed by: self
   snow changes come from dlawren and also reviewed by oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>> Add AIM rcp datasets
A    models/lnd/clm/tools/mksurfdata/pftdyn_rcp6.0_simyr1850-2100.txt

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> New 2006 file
M    models/lnd/clm/tools/mksurfdata/pftdyn_rcp2.6_simyr1850-2100.txt - New 2006 file
M    models/lnd/clm/tools/mksurfdata/pftdyn_rcp4.5_simyr1850-2100.txt - New 2006 file
M    models/lnd/clm/tools/mksurfdata/pftdyn_rcp8.5_simyr1850-2100.txt - New 2006 file
M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl - Add rcp as argument
M    models/lnd/clm/tools/mksurfdata/README -------- Document mksurfdata.pl and rcp files

M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl - Get rid of old masks

M    models/lnd/clm/tools/interpinic/runinit_ibm.csh - Get rid of old masks/grids, and sim_year
M    models/lnd/clm/tools/interpinic/README ---------- Update documentation

M    models/lnd/clm/tools/mkgriddata/mkgriddata.ccsm_dom - Add clm grid file
M    models/lnd/clm/tools/mkgriddata/README  ------------- More documentation

M    models/lnd/clm/bld/namelist_files/use_cases/pergro.xml ------ Output history in double
M    models/lnd/clm/bld/namelist_files/use_cases/pergro0.xml ----- Output history in double
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Duplicate cn files for cndv
                                      New 1-degree rcp=8.5 pftdyn file

M    models/lnd/clm/src/main/histFileMod.F90 - Make sure 3D fields defined before output

M    models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 - conserve enthalpy on snow combination

M    models/lnd/clm/doc/IMPORTANT_NOTES ----- Add notes about fine-mesh
M    models/lnd/clm/doc/UsersGuide/Makefile - Remove file for realclean

Summary of testing:

  bluefire:
003 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 11
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -6 arb_ic ...................FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 7
010 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 11
011 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 7
015 brF92 TBR.sh 17p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 cold .......FAIL! rc= 11
016 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 7
019 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 13
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
023 brHN1 TBR.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -5+-5 cFAIL! rc= 13
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing:
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:NONE:1800 1x1_brazil navy -5+-5 arb_ic .....FAIL! rc= 13
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
016 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_icFAIL! rc= 11
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
031 brF93 TBR.sh 17p_vodsrsc_do clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 cold .......FAIL! rc= 11
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 7
035 brL83 TBR.sh _nrsc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic ...FAIL! rc= 13
040 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 7
045 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
047 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
049 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 2
  jaguar interactive testing:
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort: interactive testing:
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
009 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
010 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
011 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
013 smOC4 TSM.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
017 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
  edinburgh/ifort
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_7_08

Changes answers relative to baseline: YES

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
    ccsm4_0_beta35
    bluefire
    -compset B_1850_TRACK1_CN -res f19_g16

   MSS location of control simulations used to validate new climate:

/DLAWREN/csm/b40.1850.track1.2deg.003.snow
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/ccr/paleo/b40.snow/b40.1850.track1.2deg.003.snow-b40.1850.track1.2deg.003.control/
http://www.cgd.ucar.edu/ccr/dlawren/research/clm4.0_dev/b40.1850.track1.2deg.003.snowa-b40.1850.track1.2deg.003.controla/setsIndex.html
	
===============================================================
===============================================================
Tag name:  clm3_7_08
Originator(s):  Mariana Vertenstein (mvertens)
Date: Fri Mar 12 13:26:09 MST 2010
One-line Summary: Removal of check for weights if dynamic land use is used

Purpose of changes:
This one line change enabled the vast majority of the CCSM tests to pass.
	
Verified that ERI 20th century tests in CCSM test suite for ccsm4_0_beta46 now passed with this changed 
	
This was reviewed by Dave Lawrence and Sam Levis	
	
Everything from clm3_7_07 applies except for the following:
	
M      biogeophys/BiogeophysRestMod.F90
  -   if ( nsrest == 1 .or. (nsrest == 3 .and. fpftdyn /= ' ') )then
  -   ! Do NOT do any testing for restart or a pftdyn branch case
  +   if ( nsrest == 1 .or. fpftdyn /= ' ' )then
  +   ! Do NOT do any testing for restart or a pftdyn case
  also added in a #if CNDV 

M      biogeochem/CNDVEstablishmentMod.F90
M      main/clmtypeInitMod.F90
       - fix for case when leaf area index is pathologically large
         the original fix for this was not longer working - and the above changes address this

M      bld/build-namelist
M      bld/namelist_files/namelist_defaults_clm.xml
       - fixed issues related to getting fndepdat for -bgc cndv

===============================================================
Tag name:  clm3_7_07
Originator(s):  erik (erik)
Date: Wed Mar 10 23:35:37 MST 2010
One-line Summary: New finidat datasets for 1-deg, 2-deg, and abort if weights from finidat/fsurdat files are too different, and use fsurdat files as truth

Purpose of changes:

Use surfdata weights and stop if finidat file weights are too different. Use ccsm4init
datasets for finidat files for 1-deg and 2-deg. In I compsets, setup for special I case
finidat files. Update scripts. Drydep changes from Francis. Change cell_method to
cell_methods. Allow clm_start_type to be overridden if on use_case. Only set orb_iyearad
for standalone clm testing. Allow vars on use_cases to not be set for some configs. Make
sure all BGC modes are set for variables on use_cases. Set cold-start for pergro cases.
Update documentation.

Bugs fixed (include bugzilla ID):
                                1098 (use weights from surdat file rather than finidat file)
                                1121 (history variable attribute cell_methods misnamed)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:

     New finidat files for 1-deg and 2-deg (from fully coupled simulations)
     New datasets for I cases that are set in scripts

Describe any substantial timing or memory changes: None

Code reviewed by: self, dlawren, slevis, oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts

    scripts to scripts4_100310c

    This version of scripts sets up special finidat files that will be used
    for all I cases (other cases use the fully coupled datasets that are stored
    in the namelist_defaults_clm.xml database).

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New finidat files
M      models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ------------ Changes from Francis
M      models/lnd/clm/src/main/ncdio.F90 --------------------------- Change cell_method to cell_methods
M      models/lnd/clm/src/main/clm_initializeMod.F90 --------------- Remove second call to pftdyn_interp
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --------- Compare weights only
                if NOT restart and NOT branch with pftdyn. If weights are too different
                abort, if close enough write a warning and continue using the surfdata
                weights

>>>>>>>>>>>>>>>> Some work on documentation
M      models/lnd/clm/doc/KnownBugs
M      models/lnd/clm/doc/UsersGuide/preface.xml
M      models/lnd/clm/doc/IMPORTANT_NOTES
M      models/lnd/clm/doc/Quickstart.GUIDE

>>>>>>>>>>>>>>>> Allow clm_start_type to be overridden if on use_case
>>>>>>>>>>>>>>>> Allow vars in use_cases to not be set for some configs
M      models/lnd/clm/bld/build-namelist

>>>>>>>>>>>>>>>> Change start_type to clm_start_type for all use-cases
>>>>>>>>>>>>>>>> Only set orb_iyearad for standalone clm testing
M      models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M      models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M      models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M      models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M      models/lnd/clm/bld/namelist_files/use_cases/pergro.xml --------- Set start to cold
M      models/lnd/clm/bld/namelist_files/use_cases/pergro0.xml -------- Set start to cold
M      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

Summary of testing:

  bluefire: All PASS except...
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing: All PASS except...
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except...
FAIL  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_7_06 
FAIL  ERS.f19_g16.I1850.bluefire.compare.clm3_7_06 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_7_06 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_07 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_06 
SFAIL PST.f10_f10.I8520CN.bluefire.GC.201955 
SFAIL PET_PT.f10_f10.I8520CN.bluefire.GC.201955 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_06 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_06 
  jaguar interactive testing: All PASS up to...
005 smAK4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold

CLM tag used for the baseline comparison tests if applicable: clm3_7_06

Changes answers relative to baseline: Different initial condition datasets, 
                also now using weights from surfdata files rather than finidat files

===============================================================
===============================================================
Tag name:  clm3_7_06
Originator(s):  erik (erik)
Date: Wed Mar 10 16:35:57 MST 2010
One-line Summary: Bring cndv branch to trunk

Purpose of changes:

Bring CNDV branch to trunk cndv16_clm3_7_05 (erik/slevis).  Fix bug 978 for Sam (nl
option for branch). Put CROP part of CNDV branch on it's own branch. Add a couple more
history fields (LAND_USE_FLUX, and LAND_UPTAKE). Add HTOP to default output. SNICAR_FRC
fix, test SNICAR_FRC. Fix VOC by making sure fsun240 is between 0 and 1. Fix CO2 PPMV for
I cases. Add in script to create CO2 streams file that can be used by datm8. Update VOC
documentation. Get in updates from ccsm4_0_rel branch. Remove 360x720 grid, files with
gx3v5/gx1v5 masks. Fix bug 1120, by initializing displavegc+ for CN, Change start_type to
clm_start_type, don't allow both fndepdat and fndepdyn. Don't allow spinup modes with
supln, and don't allow both ad_spinup and exit_spinup. Move testing from gx3v5 to gx3v7
mask

Bugs fixed (include bugzilla ID):
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Switch cndv for dgvm, Have configure disallow
bad cases
    Change configure to NOT allow supln with spinup cases
    Do NOT allow exit_spinup and ad_spinup at the same time.
    Only allow voc to be set for seq_ccsm NOT ext_ccsm_seq

Describe any changes made to the namelist: Add override_nsrest namelist option

List any changes to the defaults for the boundary datasets:
    New pft-physiology files with extra fields for CNDV
    Add new f05 1850 surfdata file
    Remove 360x720 files, gx3v5, gx1v5 files

Describe any substantial timing or memory changes: None

Code reviewed by: slevis, self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, csm_share, mct, and pio

   scripts   to scripts4_100306
   drv       to drvseq3_1_19
   csm_share to share3_100228
   mct       to MCT2_7_0_100228
   pio       to pio1_0_15

List all files eliminated: Remove DGVM files

   D   models/lnd/clm/src/biogeochem/DGVMLightMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMReproductionMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMAllocationMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMEcosystemDynMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMKillMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMEstablishmentMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMRestMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMMortalityMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMTurnoverMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMFireMod.F90

List all files added and what they do:

>>>>>>>>>>>>> Add CNDV files
   A    models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90
   A    models/lnd/clm/src/biogeochem/CNDVLightMod.F90
   A    models/lnd/clm/src/biogeochem/CNDVMod.F90
   A    models/lnd/clm/src/biogeochem/CNDVEcosystemDynIniMod.F90
>>>>>>>>>>>>> Add script to convert CAM historical greenhouse gas file to CO2 history
>>>>>>>>>>>>> file that can be used in datm streams
   A   models/lnd/clm/tools/ncl_scripts/getco2_historical.ncl
>>>>>>>>>>>>> Add SNICAR_FRC and CNDV config files to test
   A   models/lnd/clm/test/system/config_files/_scsnf_dh
   A   models/lnd/clm/test/system/config_files/_scsnf_dm
   A   models/lnd/clm/test/system/config_files/_scsnf_do
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_dh
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_dm
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_do
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_h

>>>>>>>>>>>>> Add files to describe how to add streams for CO2
   A   models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   A   models/lnd/clm/doc/UsersGuide/co2_streams.txt

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Document new getco2 script, use correct namelist in getregional script
   M   models/lnd/clm/tools/ncl_scripts/README
   M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl

>>>>>>>>>>>>>>> Add K configure tests for CNDV, B configure tests for SNICAR_FRC, 
>>>>>>>>>>>>>>> and create_croplunit tests Change maxpft 17 tests to numpft+1
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_h
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_m
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_o
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_do
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_ds

   M    models/lnd/clm/test/system/tests_pretag_bluefire
   M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M    models/lnd/clm/test/system/tests_pretag_jaguar
   M    models/lnd/clm/test/system/tests_posttag_kraken
   M    models/lnd/clm/test/system/tests_posttag_breeze
   M    models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M    models/lnd/clm/test/system/tests_pretag_bangkok
   M    models/lnd/clm/test/system/tests_posttag_purempi_regression
   M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M    models/lnd/clm/test/system/tests_posttag_nompi_regression
   M    models/lnd/clm/test/system/tests_pretag_calgary

   M    models/lnd/clm/test/system/input_tests_master - Add B and K tests
   M    models/lnd/clm/test/system/test_driver.sh ----- Update for bluefire changes
                                   to scripts
   M    models/lnd/clm/test/system/mknamelist --------- Change start_type to
                                   clm_start_type add in nrevsnfile
   M    models/lnd/clm/test/system/README.testnames --- Change K configure
tests to mean CNDV

>>>>>>>>>>>>> 
   M   models/lnd/clm/bld/configure ---- Swap out cndv for dgvm. -bgc cndv turns on
                                         both CN AND CNDV cpp tokens.
                                         voc part of standalone_test arguments
                                         supln and spinup options can't be on at the same
time
                                         exit_spinup and ad_spinup can't be on at the
same time
   M    models/lnd/clm/bld/queryDefaultXML.pm ---------------- Swap cndv for DGVM
   M   models/lnd/clm/bld/config_files/config_definition.xml - Swap cndv for dgvm
                    voc in standalone_test, maxpft lists valid numbers
category
   M   models/lnd/clm/bld/build-namelist ----- Change start_type to clm_start_type
                                               Don't allow both fndepdyn and fndepdat to e set
                                               Work with nrevsn, so not always given
   M   models/lnd/clm/bld/clm.cpl7.template -- Rename start_type to clm_start_type, and
                                               let default be "default"
   M   models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl ------ Update mask list
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml - Add override_nsrest, 
                    mkghg_bndtvghg, rename start_type to clm_startype

  M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Add
clm_start_type
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Remove domain
files
                                               with gx3v5 and gx1v5 masks
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- new pft-physiology files for CNDV
                                               Use same fndepdat datasets for cndv
                                               Remove 360x720 files,
                                               files with gx3v5 and gx1v5 masks
                                               New 1850 f05 fsurdat file
                                               Add mkghg_bndtvghg dataset to point to CAM
                                               historical greenhouse dataset
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ----- Remove
start_type

   M   models/lnd/clm/doc/UsersGuide/tools.xml
   M   models/lnd/clm/doc/UsersGuide/preface.xml
   M   models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M   models/lnd/clm/doc/UsersGuide/adding_files.xml
   M   models/lnd/clm/doc/UsersGuide/appendix.xml
   M   models/lnd/clm/doc/UsersGuide/custom.xml
   M   models/lnd/clm/doc/UsersGuide/single_point.xml
   M   models/lnd/clm/doc/UsersGuide/Makefile
   M   models/lnd/clm/doc/UsersGuide/special_cases.xml

>>>>>>>>>>>>> Add in landuseflux/landuptake, always use hardwire_sla for VOC
>>>>>>>>>>>>> Set displavegc for CN not just CNDV, new fields for SNICAR_FRC restarts
   M   models/lnd/clm/src/biogeochem/CNSummaryMod.F90 --------- Calculate landuseflux/landuptake
   M   models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 ------- Calculate pftmayexist for CNDV
                                       Remove concurrent directives
   M   models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Always use hardwire_sla
                          Remove DGVM CPP ifdefs, fix for transient problem from Dave
                          loop over soil filter rather than non-lake
   M   models/lnd/clm/src/biogeochem/CNSetValueMod.F90 -------- Set displavegc etc. for CN as well as CNDV
                                   Add some CNDV fields
   M   models/lnd/clm/src/main/clmtypeInitMod.F90 ------------- Remove agdd0/agdd5,fnpsn10,
                                                                initialize landuseflux/landuptake
   M   models/lnd/clm/src/main/CNiniSpecial.F90 --------------- initialize landuseflux/landuptake
   M   models/lnd/clm/src/main/clmtype.F90 -------------------- Swap DGVM vars for CNDV
                                                                add pftmayexist, landuseflux/landuptake
   M   models/lnd/clm/src/main/histFldsMod.F90 ---------------- Add LAND_USE_FLUX, LAND_UPTAKE, make HTOP active
                     Swap DGVM fields for CNDV
   M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 ---- Add fields needed for SNICAR_FRC

   M   models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 --- Remove uneeded use statement
   M   models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90 ---- CNDV changes
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 - Remove junk
   M   models/lnd/clm/src/biogeochem/CNGRespMod.F90 ----------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 ----
   M   models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90 ---
   M   models/lnd/clm/src/biogeochem/CNFireMod.F90 ------------ CNDV section
   M   models/lnd/clm/src/biogeochem/CNMRespMod.F90 ----------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90  Remove junk
   M   models/lnd/clm/src/biogeochem/CNDecompMod.F90 ---------- Pass lbp, ubp to CNAllocate
   M   models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 --- Formatting changes
   M   models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 --- Swap CNDV for DGVM
   M   models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 - Remove junk
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 - Remove junk
   M   models/lnd/clm/src/biogeochem/CNrestMod.F90 ------------ Add CNDV section
   M   models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 ---- Add CNDV section
   M   models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeochem/C13SummaryMod.F90 -------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 ------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------ Pass pft loop indices in, 
                                  formatting changes remove junk
   M   models/lnd/clm/src/biogeochem/CNC13FluxMod.F90 --------- Remove junk
   M   models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ------- Swap CNDV for DGVM
   M   models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 ---- Pass lbp, ubp to CNDecompAlloc
   M   models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Use dwood from pft-physiology file
                  Add CNDV section

   M   models/lnd/clm/src/main/clm_varpar.F90 --------- Change some of the names around
   M   models/lnd/clm/src/main/CNiniTimeVar.F90 ------- CNDV section for litter fall
   M   models/lnd/clm/src/main/clm_comp.F90 ----------- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/clm_initializeMod.F90 -- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/accFldsMod.F90 --------- Swap CNDV for DGVM 
   M   models/lnd/clm/src/main/subgridMod.F90 --------- Handle create_croplandunit correctly
   M   models/lnd/clm/src/main/pftdynMod.F90 ---------- Add CNDV subroutine: pftwt_init
                 For CNDV make pftwt_interp public
and 
   M   models/lnd/clm/src/main/iniTimeConst.F90 ------- Change dgvm vars init
   M   models/lnd/clm/src/main/restFileMod.F90 -------- Remove DGVM
   M   models/lnd/clm/src/main/controlMod.F90 --------- Add override_nsrest, swap CNDV for DGVM
   M   models/lnd/clm/src/main/initSurfAlbMod.F90 ----- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/filterMod.F90 ---------- Swap CNDV for DGVM remove concurrent directives
   M   models/lnd/clm/src/main/clm_driver.F90 --------- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/clm_varctl.F90 --------- Swap CNDV for DGVM, fix check for create_croplandunit
   M   models/lnd/clm/src/main/ndepFileMod.F90 -------- Remove junk
   M   models/lnd/clm/src/main/initGridCellsMod.F90 --- Fix create_croplandunit
   M   models/lnd/clm/src/main/pftvarcon.F90 ---------- New CNDV parameters, formatting changes,
                              Always read all parameters to make read easier to understand
   M   models/lnd/clm/src/main/surfrdMod.F90 ---------- Swap CNDV for DGVMA, fix create_croplandunit, change some names

   M   models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ----- Remove junk
   M   models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - Remove junk add comments
   M   models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Change comments remove DGVM
   M   models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ---- Change formatting add comments
   M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- Remove DGVM
   M   models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 - Remove junk
   M   models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Remove DGVM add in CNDV

Summary of testing:

  bluefire:
FAIL! rc= 7
025 smK51 TSM.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................PASS
026 erK51 TER.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 10+38 arb_ic ...............PASS
027 brK51 TBR.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 24+24 arb_ic ...............PASS
028 blK51 TBL.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
029 smHN1 TSM.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colPASS
030 erHN1 TER.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -3+-7 cFAIL! rc= 13
031 brHN1 TBR.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -5+-5 cFAIL! rc= 11
032 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing: All PASS except...
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 5
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 7
040 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 5
  bluefire/CCSM testing: All PASS except.. (compare tests fail because CO2 level was changed for 2000 compsets)
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm3_7_05
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm3_7_05
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm3_7_05
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm3_7_05
BFAIL ERS_D.f45_g37.I.bluefire.compare.clm3_7_05
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_7_05
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_06
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_05
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_05
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm3_7_05
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_05
BFAIL ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_05
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_7_05

Changes answers relative to baseline: I2000 cases are different because of new CCSM_CO2_PPMV

===============================================================
===============================================================
Tag name:  clm3_7_05
Originator(s):  erik (erik)
Date: Wed Feb 24 00:33:08 MST 2010
One-line Summary: Bring VOC branch source code to trunk

Purpose of changes:

Move VOC branch over to trunk (vocemis-drydep19_clm3_7_04), this includes source code
changes for VOC and drydep. Ensure answers for f09, f19, f10 are identical to clm3_7_02
(other than VOC fields). Split users guide into separate files by chapter. Remove dublin.
Add rcp option to getregional dataset script.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   Fix date of 1x1_tropicAtl surfdata
   New T62 fsurdat  file with VOC
   Fix syntax error in default_datm file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts and drv

    scripts to scripts4_100222 (uses new bluefire compiler with bug-fix for
                                reproducibility bug)
    drv     to drvseq3_1_17

List all files eliminated:

>>>>>>>>>>>>> Rename to edinburgh
 D  models/lnd/clm/test/system/tests_pretag_dublin
 D  models/lnd/clm/test/system/tests_pretag_dublin_nompi

>>>>>>>>>>>>> Split into separate files
 D  models/lnd/clm/doc/UsersGuide/index.xml

List all files added and what they do:

 A  models/lnd/clm/test/system/tests_pretag_edinburgh ------- Rename dublin files
 A  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi - Rename dublin files

>>>>>>>>>>>>> Split Users Guide into separate files by chapter
 A  models/lnd/clm/doc/UsersGuide/tools.xml
 A  models/lnd/clm/doc/UsersGuide/preface.xml
 A  models/lnd/clm/doc/UsersGuide/clm_ug.xml
 A  models/lnd/clm/doc/UsersGuide/adding_files.xml
 A  models/lnd/clm/doc/UsersGuide/config_cache.xml
 A  models/lnd/clm/doc/UsersGuide/custom.xml
 A  models/lnd/clm/doc/UsersGuide/get_Icaselist.pl --- Script to list I cases
 A  models/lnd/clm/doc/UsersGuide/single_point.xml
 A  models/lnd/clm/doc/UsersGuide/special_cases.xml

>>>>>>>>>>>>> Add module to handle dry-deposition velocity
 A   models/lnd/clm/src/biogeochem/DryDepVelocity.F90

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Remove dublin
 M  models/lnd/clm/test/system/test_driver.sh
 M  models/lnd/clm/test/system/input_tests_master - Decrease mexicoCity run length to 157
 M  models/lnd/clm/test/system/CLM_runcmnd.sh

>>>>>>>>>>>>> Fix bug in dynamic PFT file generation example, let intel allow lines of
>>>>>>>>>>>>> any length
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn - Use 1850 veg file to start from
 M  models/lnd/clm/tools/mksurfdata/Makefile ---------- Remove intel -132 so can be any
length
 M  models/lnd/clm/tools/mkgriddata/Makefile ---------- Remove intel -132 so can be any 
                                                        length, add SMP option
 M  models/lnd/clm/tools/mkdatadomain/Makefile -------- Remove intel -132 so can be any
length

  M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- Add absolute_path and
                                                        ability to use rcp
  M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Add rcp
                                                        correct namelist for domainfile

>>>>>>>>>>>>> 
 M  models/lnd/clm/bld/clm.cpl7.template ---- Turn rtm off for PTS_MODE, remove lnd_in
and Filepath files from clmconf
 M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Fix syntax error in
2.5x3.33 domain file
 M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Fix date of
surfdata_1x1_tropicAtl file

>>>>>>>>>>>>> Split into separate files by Chapter
 M  models/lnd/clm/doc/UsersGuide/Makefile

>>>>>>>>>>>>> Source code changes to use MEGAN VOC and dry-deposition

  M   models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 -- Add readAnnualVegetation
                        subroutine for dry-deposition, use some F90 NetCDF,
                        get mlai difference between months for dry-deposition
  M   models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------ New MEGAN VOC module
                        remove concurrent directives
  M   models/lnd/clm/src/main/clm_varpar.F90 ---------------- Change comment on nvoc
  M   models/lnd/clm/src/main/clm_comp.F90 ------------------ Interp monthly veg for
                        drydep on clm_init2
  M   models/lnd/clm/src/main/clm_initializeMod.F90 --------- add readAnnualVegetation 
  M   models/lnd/clm/src/main/accFldsMod.F90 ---------------- 24hr and 10day accumulators for 
                        t_veg, fsd, fsi, fsun, laip, remove concurrent directives
  M   models/lnd/clm/src/main/clmtypeInitMod.F90 ------------ Add new VOC and drydep variables
  M   models/lnd/clm/src/main/iniTimeConst.F90 -------------- Read in VOC emission 
                        factors, remove concurrent directives
  M   models/lnd/clm/src/main/clm_atmlnd.F90 ---------------- Add VOC and drydep fluxes
  M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ------ Pass VOC and drydep fluxes
  M   models/lnd/clm/src/main/clm_driver.F90 ---------------- Always call VOC emission
                        and call depvel_compute
  M   models/lnd/clm/src/main/clmtype.F90 ------------------- Add some VOC and drydep
                        variables, move sandfrac/clayfrac for all not just CASA
                        add accumulation variables
  M   models/lnd/clm/src/main/histFldsMod.F90 --------------- Bunch of new inactive
                        variables for VOC fluxes
  M   models/lnd/clm/src/main/inicFileMod.F90 --------------- Li Xu: correct ncd_iolocal and snow_fraction
  M   models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Deal with drydep velocity
  M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Add mlaidiff to restart
                        file, if fsun set to NaN on restart set it to spval
  M   models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Keep track of boundary
                        layer resistance

Summary of testing:

  Baseline tests are identical other than VOC flux fields..
> grep RMS
> /ptmp/erik/test-driver.612049/TBL.4p_vodsrsc_dh.clm_std^nl_urb.20021231:NONE:3600.1.9x2.5^0.9x1.25.gx1v6.48.arb_ic/cprnc.clmrun.clm2.h0.2002-12-31-00000.nc.out
> | grep -v 0.0000E+00
 RMS BIOGENCO 1.0058E-01
 RMS ISOPRENE 2.9500E+02
 RMS MONOTERP 2.9129E+00
 RMS ORVOC    3.3526E-01
 RMS OVOC     3.3526E-01
 RMS VOCFLXT  2.9641E+02

  bluefire:
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 7
011 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7
016 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
033 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 7
041 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 7
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 8
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
050 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 7
  bluefire interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 7
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
017 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 7
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
023 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 7
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
028 blL78 TBL.sh _nrsc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic ...........FAIL! rc= 7
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 7
041 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
043 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
045 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
RUN   ERS_D.f45_g37.I.bluefire.GC.092123 
PASS  PST.f45_g37.I1850.bluefire.cpl 
PASS  PST.f45_g37.I1850.bluefire.atm 
PASS  PST.f45_g37.I1850.bluefire.lnd 
PASS  PST.f45_g37.I1850.bluefire.ice 
PASS  PST.f45_g37.I1850.bluefire.ocn 
PASS  PST.f45_g37.I1850.bluefire.glc 
PASS  PET_PT.f45_g37.I1850.bluefire 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
PEND  ERH_D.f10_f10.I1850CN.bluefire.GC.092123 
PASS  PST.f10_f10.I8520CN.bluefire.cpl 
PASS  PST.f10_f10.I8520CN.bluefire.atm 
PASS  PST.f10_f10.I8520CN.bluefire.lnd 
PASS  PST.f10_f10.I8520CN.bluefire.ice 
PASS  PST.f10_f10.I8520CN.bluefire.ocn 
PASS  PST.f10_f10.I8520CN.bluefire.glc 
  jaguar/CCSM testing:
PASS  ERS_D.f09_g16.I1850.jaguar 
PASS  PST.f10_f10.I8520CN.jaguar.cpl 
PASS  PST.f10_f10.I8520CN.jaguar.atm 
PASS  PST.f10_f10.I8520CN.jaguar.lnd 
PASS  PST.f10_f10.I8520CN.jaguar.ice 
PASS  PST.f10_f10.I8520CN.jaguar.ocn 
PASS  PST.f10_f10.I8520CN.jaguar.glc 
PASS  PET_PT.f10_f10.I8520CN.jaguar 
  jaguar interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 7
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 7
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
013 smJ74 TSM.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic FAIL! rc= 8
014 erJ74 TER.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
015 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_icFAIL! rc= 5
016 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 4
  edinburgh/ifort interactive testing:
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
009 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
010 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
011 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
012 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
013 smOC4 TSM.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
017 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort:
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 7
008 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
015 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 7
019 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 48 cold .......FAIL! rc= 7
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_04

Changes answers relative to baseline: No bit-for-bit (except voc flux fields)

===============================================================
===============================================================
Tag name:  clm3_7_04
Originator(s):  erik (erik)
Date: Wed Feb 17 23:22:23 MST 2010
One-line Summary: Bring VOC branch (vocemis-drydep18_clm3_7_03) tools, testing, and build to trunk (everything other than VOC code changes)

Purpose of changes:

Move VOC branch (vocemis-drydep18_clm3_7_03) to trunk for support functionality, tools,
testing, everything but the code changes. This includes optimization of mksurfdata,
adding new tests, adding drydep to build, listen to cpl flag if aerosols are sent, update
documentation about configure variables, remove pio and carbon_aero config options
(always build with pio), remove local Macro's files for Darwin (yong_g95, and
breeze_intel), and remove gx1v3, gx1v4 masks, and 1x1.25 and 2x2.5 grids. All NCL regrid
scripts to be able to use GRDFIL env variable to set location of a grid file just
created. turn rtm off if PTS_MODE is TRUE. mksurfdata optimization includes: create
subroutines for landuse normalization, add OpenMP parallelism, optimize memory so
deallocate when done, and put OMP threads, veg filenames and optimization level on
mksurfdata files. Move shr_drydepInputMod.F90 to drv/shr/seq_drydepMod.F90 (from
csm_share to drv). Update externals. Work on documentation using output logs from scripts
and moving documentation into separate chapters.

Bugs fixed (include bugzilla ID):
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                 1105 (Turn RTM mode off for PTS_MODE)
                                 1110 (dt limit error, for mexicocity)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 
    Remove carbon_aero and pio from configure (always build with pio)

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   Remove 1x1.25, 2x2.5, and 2.5x3.33 grid resolutions
   Remove gx1v3, gx1v4, gx1v5 land masks, add drydep defaults.
   Update 2.65x3.33@2000, 1x1_tropicAtl@2000, f09@1850 and 1x1_tropicAtl@1000-1004 pftdyn
   add mksrf_fvegtyp@1000-1004

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, drv, datm, and timing

    csm_share    to share3_100215
    scripts      to scripts4_100216
    drv          to drvseq3_1_16
    datm         to datm8_100215
    timing       to timing_091021

List all files eliminated:

>>>>>>>>>>>> Remove local Macros files, and remove maxpft=4 vodsrcsc tests
   D   models/lnd/clm/bld/config_files/Macros.yong_g95
   D   models/lnd/clm/bld/config_files/Macros.breeze_intel
   D   models/lnd/clm/test/system/config_files/4p_vodsrsc_m
   D   models/lnd/clm/test/system/config_files/4p_vodsrsc_h

   D   models/lnd/clm/doc/UsersGuide/index.xml -- Rename to clm_ug.xml
              Divide most of the content into separate chapters.

List all files added and what they do:

   A   models/lnd/clm/test/system/config_files/_scnv_dh ---- No-VOC debug-hybrid mode
   A   models/lnd/clm/test/system/config_files/_scnv_do ---- No-VOC debug-pure SMP hybrid mode
   A   models/lnd/clm/test/system/config_files/17p_scnv_dh - 17pft no-VOC debug-hybrid mode
   A   models/lnd/clm/test/system/config_files/17p_scnv_do - 17pft no-VOC debug-pure SMP mode
   A   models/lnd/clm/test/system/nl_files/clm_drydep ------ Turn on drydep in namelist
   A   models/lnd/clm/tools/mksurfdata/mkvocef.F90 --------- VOC emissions
   A   models/lnd/clm/bld/namelist_files/namelist_defaults_drydep.xml - Drydep namelist defaults
   A   models/lnd/clm/doc/UsersGuide/tools.xml --------- Tools chapter
   A   models/lnd/clm/doc/UsersGuide/preface.xml ------- Preface and introduction chapter
   A   models/lnd/clm/doc/UsersGuide/clm_ug.xml -------- Change name of index.xml
                         Move most of the contents into separate chapters
   A   models/lnd/clm/doc/UsersGuide/adding_files.xml -- Adding files chapter
   A   models/lnd/clm/doc/UsersGuide/config_cache.xml -- Sample config cache file so can 
                                                         run build-namelist for documentation
   A   models/lnd/clm/doc/UsersGuide/custom.xml -------- Customizing chapter
   A   models/lnd/clm/doc/UsersGuide/get_Icaselist.pl -- Script to get list of I cases
   A   models/lnd/clm/doc/UsersGuide/single_point.xml -- Single point chapter
   A   models/lnd/clm/doc/UsersGuide/special_cases.xml - Special cases chapter

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/config_files/README - Add nv no-VOC config case
   M   models/lnd/clm/test/system/README.testnames ---- Add drydep testnames
   M   models/lnd/clm/test/system/test_driver.sh ------ Use generic_linux_intel mach for breeze
                                 also changes to get jaguar to work
   M   models/lnd/clm/test/system/input_tests_master -- Add drydep and no-VOC tests, cut
                                                        back Mexicocity test to 158 steps

   M   models/lnd/clm/tools/mksurfdata/mkvarctl.F90 -------- Add mksrf_gridnm and mksrf_fvocef
   M   models/lnd/clm/tools/mksurfdata/ncdio.F90 ----------- Write out error codes on a problem.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.regional - Add voc file.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn --- Add voc file, use 1850 veg file.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.singlept - Add voc file.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.namelist - Add voc file.
   M   models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 ---- Move file definition for harvest to init sub
   M   models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ------- Write out OpenMP threads 
                   and OPT TRUE or FALSE, VOC fields, and veg filenames
   M   models/lnd/clm/tools/mksurfdata/mkorganic.F90 ------- Remove test and use 3D areaave
   M   models/lnd/clm/tools/mksurfdata/Makefile ------------ Add in SMP option to turn on OpenMP
   M   models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90 --- Remove single level fields
                                                             and use 4D areaave
   M   models/lnd/clm/tools/mksurfdata/areaMod.F90 --------- Add 3D and 4D areaave interfaces
                                              and add OpenMP directives
   M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -------- Create subroutines shared
           by dynpft loop and surfdata: change_landuse and normalizencheck_landuse.
           Allocate memory as late as possible and deallocate as soon as possible.
           Add: mksrf_gridnm and mksrf_fvocef to namelist
           Add mkvocef and add to output file
   M   models/lnd/clm/tools/mksurfdata/Srcfiles ------------ Add mkvocef.F90
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl ------- Allow command line arguments
            to pick resolutions and simulation-years. Read in namelist database information
            for checking and using defaults. Add in mksrf_fvocef, and use mksrf_gridnm to
            give output file same name as the input grid resolution name.
   M   models/lnd/clm/tools/mksurfdata/mkpftMod.F90 -------- Remove testing, add 3D areaave

   M   models/lnd/clm/tools/ncl_scripts/README ----------- Remove script no longer available.
   M   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Allow env var GRDFIL to give
                                                           grid file to use
   M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Allow env var GRDFIL to give
                                                           grid file to use

   M   models/lnd/clm/tools/mkgriddata/README -- Fix typo

   M   models/lnd/clm/bld/configure --------------------------------- Remove carbon_aero
                           and pio (always build with pio), and make voc default on
   M   models/lnd/clm/bld/queryDefaultNamelist.pl ------------------- Add drydep file.
   M   models/lnd/clm/bld/config_files/config_sys_defaults.xml ------ Change mach
                           defaults, remove darwin make linux edinburgh_pgi
   M   models/lnd/clm/bld/config_files/config_definition.xml -------- Remove carbon_aero
                           and pio, make default for mode ext_ccsm_seq, make voc on,
                           work on documentation
   M   models/lnd/clm/bld/build-namelist ---------------------------- Add drydep, remove
                           carbon_aero and pio
   M   models/lnd/clm/bld/clm.cpl7.template ------------------------- Turn rtm off for PTS_MODE
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Add mksrf_fvegtyp, 
                           remove 1x1.25, 2x2.5, and 2.5x3.33 grid resolutions
                           remove gx1v3, gx1v4, gx1v5 land masks, add drydep_method, and drydep_list
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Remove 1x1.25,
                           2x2.5, and gx1v3, gx1v4, gx1v5 domain files
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Remove 1x1.25,
                           and gx1v3, gx1v4, gx1v5 files
                           update 2.65x3.33@2000, 1x1_tropicAtl@2000, f09@1850
                           and 1x1_tropicAtl@1000-1004 pftdyn
                           add mksrf_fvegtyp@1000-1004
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml -- Remove gx1v4, gx1v5 start dates

   M   models/lnd/clm/doc/UsersGuide/Makefile --- Get makefile to use scripts to make
                           log info to put into document, and separate out document
                           into chapters

   M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- Use atm_aero in infodata 
                           to determine: caerdep_filled, and dustdep_filled
                           some changes to get ready for VOC and drydep branch to come to trunk

Summary of testing:

  bluefire: All PASS up to 019 brEH1 
  bluefire interactive testing: All PASS except...
004 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100
arb_ic FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing:
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  ERH_D.f10_f10.I1850CN.bluefire 
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort: All PASS except...
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_03

Changes answers relative to baseline: 1x1_tropicAtl changes due to new surfdata file

===============================================================
===============================================================
Tag name:  clm3_7_03
Originator(s):  erik (erik)
Date: Wed Feb 10 11:29:56 MST 2010
One-line Summary: Add in more future scenario datasets, new history fields from Keith

Purpose of changes:

Add in pftdyn dataset for 1-degree rcp-8.5. Add in interpolated aerdep/ndepdyn scenario
files for f10, f09. Add in code change from Keith O. for average of top soil layers. Add
in rcp for ndep and aerdep regrid scripts. Allow 2000-2100 sim_year_range for 1-degree
resolution, and have a aerdep dataset for 1-degree for 2000-2100 (copy other 1850-2100
datasets). There is also a 1-degree 1850-2100 aerosol dataset, but the file is large (~9GB).

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: 
    Add 2000-2100 simulation year range as allowed option

   Two new history fields:

        TSOI_10CM      = soil temperature in top 10cm of soil (K)
        SOILWATER_10CM = soil liquid water + ice in top 10cm of soil (kg/m2)

List any changes to the defaults for the boundary datasets: New datasets for rcp=8.5
        f09, rcp=8.5 pftdyn for 1850-200 (use same file for 2000-2100)
        faerdep, for 1850-2100 rcp=8.5, f10, f45, f25, f09 (and 2000-2100) and f19 for 2000-2100
        fndepdyn, for 1850-2000 rcp=8.5 f09 (use same file for 2000-2100), f25, f45, f10
        fndepdyn for 1850-2100 rcp=2.6 for native f19

Describe any substantial timing or memory changes: None

Code reviewed by: self, history changes from Keith Oleson, reviewed by Dave Lawrenece

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:  use-case for 2000-2100 for high resolution (1 degree and up)

>>>>>>>>>> Add a use-case for a future scenario that only includes 2000-2100
>>>>>>>>>> this is for 1-degree and higher resolution where we can't include the
>>>>>>>>>> historical period and have resonable sized files.
   A   models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Get regridding scripts working for rcp's
   M   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Allow rcp to be set, more printing
   M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Allow rcp to be set, allow more sim_year_ranges

>>>>>>>>>> New rcp=8.5 datasets, and 2000-2100 support for 1-degree
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New rcp=8.5 datasets
        f09, rcp=8.5 pftdyn for 1850-200 (use same file for 2000-2100)
        faerdep, for 1850-2100 rcp=8.5, f10, f45, f25, f09 (and 2000-2100) and f19 for 2000-2100
        fndepdyn, for 1850-2000 rcp=8.5 f09 (use same file for 2000-2100), f25, f45, f10
        fndepdyn for 1850-2100 rcp=2.6 for native f19
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Allow 2000-2100 sim-year range

   M   models/lnd/clm/doc/UsersGuide/index.xml --- Update documentation with namelist examples

>>>>>>>>>> Code changes from Keith Oleson to add 10cm soil temperature and soil water history variables.
   M   models/lnd/clm/src/main/clmtypeInitMod.F90 ------ Add h2osoi_liqice_10cm and t_soi_10cm
   M   models/lnd/clm/src/main/clmtype.F90 ------------- Add h2osoi_liqice_10cm and t_soi_10cm
   M   models/lnd/clm/src/main/histFldsMod.F90 --------- Add TSOI_10CM and SOILWATER_10CM,
                                               on by default and output as average by default.
   M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 - Calculate 10cm soil averages for non-urban points

Summary of testing:

  bluefire: All PASS except...
022 erHN1 TER.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -3+-7 cFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
034 erL83 TER.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ........FAIL! rc= 6
035 brL83 TBR.sh _nrsc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic ...FAIL! rc= 3
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 3
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire
PASS  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm3_7_02
PASS  SMS_RLA.f45_f45.I.bluefire.compare.clm3_7_02
PEND  SMS_RLB.f45_f45.I.bluefire.GC.140232
PEND  SMS_ROA.f45_f45.I.bluefire.GC.140232
PASS  ERS_D.f45_g37.I.bluefire
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_7_02
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_7_02
PEND  PET.f45_g37.I1850.bluefire.GC.140232
PEND  ERS.f19_g16.I1850.bluefire.GC.140232
RUN   ERB.f09_g16.I_1948-2004.bluefire.GC.140232
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_02
PASS  ERH_D.f10_f10.I1850CN.bluefire
PASS  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_02
PEND  PET.f10_f10.I8520CN.bluefire.GC.140232
FAIL  ERS_D.f19_g16.I8521CNR85.bluefire
BFAIL ERS_D.f19_g16.I8521CNR85.bluefire.compare.clm3_7_02
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/lf95: All PASS up to smL58 (test 29) except...
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_7_02

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_02
Originator(s):  erik (erik)
Date: Sat Feb  6 00:43:49 MST 2010
One-line Summary: Start adding in new rcp=8.5 datasets, remove some junk, change some env_conf variables, add user_nl_clm

Purpose of changes:

New pftdyn, ndep and aerdep files for rcp=8.5 future scenario 2005+ . Need to have the
ability to handle four future scenarios: minicam (rcp4.5), aim (rcp 6), image (rcp2.6),
and message (rcp8.5). Add in ndepdat datasets for rcp2.6 for future decades. Add in
ndepdyn, pftdyn, aerdep datasets for rcp8.5, and ndepdyn for rcp4.5 (f19) and pftdyn for
f10 as well. Some changes to scripts, remove CLM_DEMAND, add CLM_NML_USE_CASE,
CLM_CO2_TYPE and user namelist. Add user_nl to clm.cpl7.template, remove CLM_DEMAND add
CLM_CO2_TYPE and CLM_NML_USE_CASE (in favor of use_case's,). Make sure driver/scripts
updated with this change. Update documentation Users-Guide with comments from Keith and
Sam. Remove clm copy of mkSrcfiles/mkDepends. Remove run-ibm. Remove following options
from configure and config_definition: clm_exe, clm_exedir, and clm_bld. Remove
CASE/CCSM/CAM tests from test_driver.sh. Add some tests for new rcp=8.5.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Some changes to configure
   Remove unused configure options: clm_exe, -clm_exedir, and -clm_bld.
   Move standalone testing options to the end of help. Use CCSM version 
   of mkSrcfiles/mkDepends, separate config vars into categories, work 
  on documentation with comments from Keith/Sam.

Describe any changes made to the namelist: Check for some files based on rcp

   Add in ability to add a user namelist in your case directory to input
   namelist items at configure time. Simply add a file called "user_nl_clm"
  as a valid namelist and the items in that namelist will show up in the initial
  BuildConf/clm.buildnml.csh file.

List any changes to the defaults for the boundary datasets:
           fsurdat:  f10, 1850
           fpftdyn:  f10, 1850-2000, 1850-2100 (rcp=8.5)
           fpftdyn:  f19, 1850-2100 (rcp=8.5)
           faerdep:  f19, 1850-2100 (rcp=8.5)
           fndepdat: f19, decadal averages (rcp=2.6)
           fndepdyn: f19, 1850-2100 (rcp=8.5 and rcp=4.5)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, pio

    scripts to scripts4_100204
    drv     to drvseq3_1_15
    pio     to pio1_0_8

List all files eliminated:

>>>>>>>>>>>>>>> Remove CCSM, scam, cam, and run-ibm script testing from test-system
>>>>>>>>>>>>>>> Use <machine>.clm.auxtest lists in CCSM scripts for CCSM testing
   D  models/lnd/clm/test/system/TSM_ccsmseq.sh
   D  models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
   D  models/lnd/clm/test/system/TCT_ccsmseq.sh
   D  models/lnd/clm/test/system/TCSruncase.sh
   D  models/lnd/clm/test/system/TSMruncase.sh
   D  models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh
   D  models/lnd/clm/test/system/TSCext_ccsmseq_scam.sh
   D  models/lnd/clm/test/system/tests_posttag_lightning
   D  models/lnd/clm/test/system/config_files/scam_ds
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_10x15_dh
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_4x5_dh
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_1.9x2.5_dh
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_0.9x1.25_dh
   D  models/lnd/clm/bld/run-ibm.csh
   D  models/lnd/clm/bld/create_newcase
>>>>>>>>>>>>>>> Remove mkSrcfiles/mkDepends duplicated from ccsm scripts
   D  models/lnd/clm/bld/mkSrcfiles
   D  models/lnd/clm/bld/mkDepends

List all files added and what they do:

>>>>>>>>>>>>> no-RTM mode configurations for hybrid and mpi-only testing
   A  models/lnd/clm/test/system/config_files/_nrsc_dh
   A  models/lnd/clm/test/system/config_files/_nrsc_dm
>>>>>>>>>>>>> Add transient_rcp8.5 use-case option
   A  models/lnd/clm/test/system/nl_files/clm_transient_rcp8.5

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/README.testnames --- Update test names
   M  models/lnd/clm/test/system/test_driver.sh ----- Remove CLM_SEQCCSMROOT
   M  models/lnd/clm/test/system/input_tests_master - Remove CCSM/cam tests, add rcp8.5 test
   M  models/lnd/clm/test/system/README ------------- Remove doc on CLM_SEQCCSMROOT
>>>>>>>>>>>>> Remove CCSM, cam, scam, and run-ibm tests from test lists
   M  models/lnd/clm/test/system/tests_pretag_bluefire
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_pretag_jaguar
   M  models/lnd/clm/test/system/tests_posttag_kraken
   M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M  models/lnd/clm/test/system/tests_pretag_bangkok
   M  models/lnd/clm/test/system/tests_posttag_intrepid
   M  models/lnd/clm/test/system/tests_pretag_dublin
   M  models/lnd/clm/test/system/tests_pretag_dublin_nompi
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression
   M  models/lnd/clm/test/system/tests_pretag_calgary

>>>>>>>>>>>>> New location for mkDepends, correct documentation
   M  models/lnd/clm/tools/mkgriddata/README ----- Correct mention of download
   M  models/lnd/clm/tools/mksurfdata/Makefile --- Change location of mkDepends
   M  models/lnd/clm/tools/interpinic/Makefile --- Change location of mkDepends
   M  models/lnd/clm/tools/mkgriddata/Makefile --- Change location of mkDepends
   M  models/lnd/clm/tools/mkdatadomain/Makefile - Change location of mkDepends

>>>>>>>>>>>>> Remove unused configure options: clm_exe, -clm_exedir, and -clm_bld
>>>>>>>>>>>>> Move standalone testing options to the end of help
>>>>>>>>>>>>> Use CCSM version of mkSrcfiles/mkDepends, separate config vars into
>>>>>>>>>>>>> categories, work on documentation
   M  models/lnd/clm/bld/configure -------------------------- Move clm standalone testing
                                       options to the end of the help, remove: -clm_exe,
                                       -clm_exedir, and -clm_bld options
   M  models/lnd/clm/bld/config_files/Makefile.in ----------- Use CCSM version of mkSrcfiles/mkDepends
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Separate variables into categories.
   M  models/lnd/clm/bld/config_files/config_definition.xml - Add categories, add
           description changes from Keith/Sam, remove clm_exe, clm_exedir, and clm_bld

   M  models/lnd/clm/bld/listDefaultNamelist.pl -- Also loop over rcp values

   M  models/lnd/clm/bld/build-namelist ----- have rcp value impact filenames retrieved
   M  models/lnd/clm/bld/clm.cpl7.template -- Add CLM_NML_USE_CASE and CLM_CO2_TYPE,
                           remove CLM_DEMAND add user_nl_clm namelist, remove -clm_bld.
   M  models/lnd/clm/bld/README ------------- Update documentation after removing the
                           clm stand-alone build/run scripts.

   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ------- Remove defaults
               as in namelist_defaults files, apply suggestions from Keith/Sam
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Change rcp default to -999.9
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl ------- Put description above valid values
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- New datasets:
           fsurdat:  f10, 1850
           fpftdyn:  f10, 1850-2000, 1850-2100 (rcp=8.5)
           fpftdyn:  f19, 1850-2100 (rcp=8.5)
           faerdep:  f19, 1850-2100 (rcp=8.5)
           fndepdat: f19, decadal averages (rcp=2.6)
           fndepdyn: f19, 1850-2100 (rcp=8.5 and rcp=4.5)
>>>>>>>>>>>>> Update documentation, add in documentation on changes added in here
   M  models/lnd/clm/doc/UsersGuide/index.xml -- Spellcheck, more work on doc, update
           for changes that came in on this tag.
   M  models/lnd/clm/doc/index.shtml ----------- Correct test table.

Summary of testing:

  bluefire: All PASS except...
009 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 10
010 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
011 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
012 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 4
013 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
.........FAIL! rc= 10
017 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic
.........FAIL! rc= 7
  bluefire interactive testing: All PASS
  bluefire/CCSM testing: All PASS, except..
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_02 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_01 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_01 
FAIL  PET.f10_f10.I8520CN.bluefire.compare.clm3_7_01 
FAIL  ERS_D.f19_g16.I8521CNR85.bluefire 
BFAIL ERS_D.f19_g16.I8521CNR85.bluefire.generate.clm3_7_02 
BFAIL ERS_D.f19_g16.I8521CNR85.bluefire.compare.clm3_7_01 
  Special testing:
PASS  ERS.f19_g16.I8521CNR85.bluefire 
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_7_01

Changes answers relative to baseline: f10 because of new surface dataset
                                      Other resolutions will be bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_01
Originator(s):  erik (Erik Kluzek)
Date: Fri Jan 29 12:58:12 MST 2010
One-line Summary: OpenMP fix for pftdyn, start adding in rcp's, update ndeplintInterp.ncl script

Purpose of changes:

Changes to ndeplintInterp script to add the ability to generate ndepdyn datasets for future scenarios 
2005+. Add rcp as input to build-namelist and add use-cases with different rcp's. Small bug-fixes to 
mksurfdata. Add lists for 1850-2100 for the rcp's. Update drv and scripts to latest. Update documentation. 
Fix from Mariana on OpenMP problem in pftdyn. Remove lightning from tests, start adding in
edinburgh.

Bugs fixed (include bugzilla ID):
                                 1102 (OpenMP problem with pftdyn mode)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1153 (Problem with ndeplintInterp for historical case)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, code-changes came from Mariana-Vertenstein, reviewed by Pat Worley

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, and datm

    scripts to scripts4_100125
    drv     to drvseq3_1_13
    datm    to datm8_100122

List all files eliminated:

   D  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt --> rename to pftdyn_hist_simyr1850-2005.txt

List all files added and what they do:

>>>>>>>>>>>>>>> List of surface datasets to create pftdyn files
   A  models/lnd/clm/tools/mksurfdata/pftdyn_rcp2.6_simyr1850-2100.txt
   A  models/lnd/clm/tools/mksurfdata/pftdyn_rcp4.5_simyr1850-2100.txt
   A  models/lnd/clm/tools/mksurfdata/pftdyn_rcp8.5_simyr1850-2100.txt
>>>>>>>>>>>>>>> Add use-cases for future scenarios
   A  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
   A  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850-2005.txt --> renamed

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add edinburgh, remove lightning
   M  models/lnd/clm/test/system/test_driver.sh --------- Remove lightning, add edinburgh
   M  models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh -- Delete csm_share/dshr directory no longer exists
   M  models/lnd/clm/test/system/CLM_runcmnd.sh --------- Remove lightning, add edinburgh

   M  models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 -- Fix small compiler bug for jaguar
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn - Point to new name for historical pftdyn file

>>>>>>>>>>>>>> Handle future scenarios for dynamic Nitrogen-Deposition file creation
   M  models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl -- Add ability to handle future scenario data, and also leave
                                                             previous historical data the same as before, or 

>>>>>>>>>>>>>> Start adding ability to handle future scenarios for different RCP's
   M  models/lnd/clm/bld/build-namelist ------------------------------- Add rcp,
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ------- Add rcp, new sim_year, sim_year_range values, allow blank
                                                                        for hist_type1d_pertape
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Add default for rcp as -999.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Add new Nitrogen deposition decadal datasets for RCP4.5/RCP8.5

   M  models/lnd/clm/doc/UsersGuide/index.xml -- Add more in, add notes on namelist, tools, and special cases

>>>>>>>>>>>> Changes from Mariana V. to fix bug 1102, OpenMP bug with pftdyn cases
   M  models/lnd/clm/src/main/clm_initializeMod.F90 - Don't pass decomp bounds down
   M  models/lnd/clm/src/main/pftdynMod.F90 --------- Get decomp bounds here
   M  models/lnd/clm/src/main/clm_driver.F90 -------- Call pftdyn_interp on own OMP loop

Summary of testing:

  bluefire:
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
049 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
050 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
051 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
052 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  bluefire interactive testing:
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7022 
brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire special testing:
    Run I8520 from Dec/1/1850 @f09_g16 for 14 months with 64 tasks and 4 threads and make sure identical 
      to same with 128 tasks and 1 thread (require openMP build) comparing clm history files. clm3_7_00 4-thread case for this fails. But, answers are identical with clm3_7_00 for 128 tasks and 1 thread.
  jaguar:
020 blJ62 TBL.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 5
026 erP65 TSM_ccsmseq.sh ERS f19_g15 I ..........................................................FAIL! rc= 4
027 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  jaguar interactive testing:
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  jaguar/special testing:
    Run I8520 from Dec/1/1850 @f09_g16 for 5 months with 416 tasks and 4 threads and make sure identical 
      to same with 1 thread (require openMP build) comparing clm history files. clm3_7_00 4-thread case for this fails.
  jaguar/CCSM testing:
PASS  ERS_D.f09_g16.I1850.jaguar
PASS  PET.f10_f10.I8520CN.jaguar.cpl
PASS  PET.f10_f10.I8520CN.jaguar.atm
PASS  PET.f10_f10.I8520CN.jaguar.lnd
PASS  PET.f10_f10.I8520CN.jaguar.ice
PASS  PET.f10_f10.I8520CN.jaguar.ocn
PASS  PET.f10_f10.I8520CN.jaguar.glc
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
  dublin/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  edinburgh/pgi interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_00

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_00
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Jan 22 22:48:09 MST 2010
One-line Summary: Update to datm8, redirect aquifer overflow to drainage, add gx3v7 
                  masks, script to extract regional datasets, add harvesting for CN, 
                  modify shrubs, include urban model, ice stream for snowcapping, 
                  new build-namelist system, scale solar by solar zenith angle in 
                  datm, deep soil with bedrock at bottom, organic matter in soils, 
                  SNICAR for snow radiation, sparce dense aero, snow cover changes

Software engineering changes:

    Update to cpl7 and scripts.
    Remove offline and cpl6 modes.
    Remove support for CASA model.
    Update to datm8 atmospheric data model.
    Add gx3v7 land mask for T31 and fv-4x5 horizontal resolutions.
    Add gx1v6 land mask for f05, f09, and f19 horigonzl resolutions.
    Add tx1v1 land mask and 1.9x2.5_tx1v1 horizontal resolution.
    Add in 2.5x3.33 horizontal resolution.
    Add in T62 horizontal resolution so can run at same resolution as input datm data.
    Allow first history tape to be 1D.
    Add ability to use own version of input datasets with CLM_USRDAT_NAME variable.
    Add a script to extract out regional datasets.
    New build-namelist system with XML file describing all namelist items.
    Add glacier_mec use-case and stub glacier model.
    Add ncl script to time-interpolate between 1850 and 2000 for fndepdat dataset, for fndepdyn version.
    Make default of maxpatch_pft=numpft+1 instead of 4.
    Only output static 3D fields on first h0 history file to save space.
    Add new fields for VOC (Volatile Organic Compounds) on some surface datasets, that will be 
    needed for the new MEGAN VOC model (NOT incorporated yet).
    Add irrigation area to mksurfdata tool (NOT used in CLM yet).
    Add multiple elevation class option for glaciers in mksurfdata tool (NOT used in CLM yet).
    Add ascale field to land model in support of model running on it's own grid.

Science changes:

    Change to freezing temperature constant      
    Forcing height at atm plus z0+d on each tile                    
    Effective porosity divide by zero fix                          
    Sparse/dense canopy aerodynamic parameters                 
    Ground/snow emissivity smooth transition                                                       
    Thermal and hydraulic properties of organic soil                                                                        
    Init h2osoi=0.3                                                            
    Snow compaction fix                                                          
    Snow T profile during layer splitting fix                                  
    Snow burial fraction                                                             
    Snow cover fraction                                                                   
    SNICAR (snow aging, black carbon and dust deposition, vertical distribution of solar energy) 
    Remove SNOWAGE, no longer used                                                   
    Deep soil (15 layers, ~50m), 5 new layers are hydrologically inactive bed rock                          
    Ground evap (beta), stability, and litter resistance                      
    Organic/mineral soil hydraulic conductivity percolation theory       
    Richards equation modifications                                         
    Normalization of frozen fraction of soil formulation                                 
    One-step solution for soil moisture and qcharge                          
    Changes to rsub_max for drainage and decay factor for surface runoff      
    Fixed diurnal cycle of solar radiation in offline forcing data                            
    Back to CLM3 lakes and wetlands datasets, but 1% rather than 5% threshold (same for glacier) 
    Changes to pft physiology file from CN                                                                                     
    New grass optical properties                                                                   
    New surface dataset assuming no herbaceous understory  
    Direct versus diffuse radiation offline                                           
    New VOC model (MEGAN)                                                                                            
    Snow-capped runoff goes to new ice stream and routed to ocean as ice                                         
    Dust model always on, LAI threshold parameter change from 0.1 to 0.3     
    Daylength control on vcmax                                                           
    SAI and get_rad_dtime fix                                                              
    Always run with MAXPATCH_PFT=npfts + 1 instead of 4                                                                               
    Transient land cover/use mode - datasets, energy and water balance   
    RTM sub-cycling                                                     
    Twostream bug fix                                
    Update soil colors     
    2m relative humidity        
    Fix for aquifer leak (SoilHydrologyMod, BalanceCheckMod)              
    New nitrogen deposition file (units and sum of NOx, NHy)  

Quickstart to new cpl7 scripts...

         cd scripts
         ./create_newcase -help      # get help on how to run create_newcase
         ./create_newcase -case testI -mach bluefire -res f19_g16 -compset I    # create new "I" case for bluefire at 1.9x2.5_gx1v6 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         ./xmlchange -help           # Get help on editor for XML files
         ./xmlchange <options> env_conf.xml env_mach_pes  # Edit configure files if needed
         configure -case             # create scripts
         ./xmlchange <options> env_build.xml              # Edit build files if needed
         testI.build                 # build model and create namelists
         ./xmlchange <options> env_run.xml                # Edit run files if needed
         bsub < testI.run            # submit script
                                     # (NOTE: edit env_run.xml to set RESUBMIT to number of times to automatically resubmit)
Quickstart to use of regional extraction scripts and PERSONAL datasets:

       # Run the script to create an area to put your files (assume CSMDATA set to standard inputdata)
       cd scripts
       setenv MYCSMDATA $HOME/myinputdata
       link_dirtree $CSMDATA $MYCSMDATA

       # Run the extraction for data from 52-73 North latitude, 190-220 longitude
       # that creates 13x12 gridcell region from the f19 (1.9x2.5) global resolution over
       # Alaska
       cd ../models/lnd/clm/tools/ncl_scripts
       setenv MYID 13x12pt_f19_alaskaUSA
       getregional_datasets.pl -sw 52,190 -ne 73,220 -id $MYID -mycsmdata $MYCSMDATA

       # Now create a case that uses these datasets
       cd ../../../../../scripts
       create_newcase -case testregional -compset I -mach bluefire -res pt1_pt1 -skip_rundb
       cd testregional
       $EDITOR env_conf.xml # change CLM_BLDNML_OPTS to include "-clm_usr_name $MYID" (expand $MYID)
       $EDITOR env_mach_pes.xml # Change tasks/threads as appropriate (defaults to serial)
       xmlchange -file env_run.xml -id DIN_LOC_ROOT_CSMDATA -val $MYCSMDATA

       # Do other changes to xml files as appropriate
       # configure as normal, then edit the datm namelist

       configure -case

       # Then build and run the case as normal

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1118 (Restarts with SNICAR_FRC fail)

Describe any changes made to build system:

   Change directory structure to match CCSM.
   Add BGP target.
   Add choice between ESMF and MCT frameworks.
   Start removing #ifdef and directives that supported Cray-X1 Phoenix as now decommisioned.
   Make default of maxpatch_pft=numpft+1 instead of 4 for all configurations.
   By default turn on CLAMP when either CN or CASA is enabled
   New SNICAR_FRC, CARBON_AERO, and C13 CPP ifdef tokens.

   New options added to configure:

     -comp_intf <name>   Component interface to use (ESMF or MCT) (default MCT)
     -nofire             Turn off wildfires for bgc setting of CN (default includes fire for CN)
     -pio <name>         Switch enables building with Parallel I/O library. [on | off] (default is on)
     -snicar_frc <name>  Turn on SNICAR radiative forcing calculation. [on | off] (default is off)

Describe any changes made to the namelist:

   NOTE: build-namelist now checks the validity of your namelist you generate by looking at data in the namelist_definition.xml
         file. In order to add new namelist items you need to change the code and also edit this file. To view information
         on the namelist view the file:
         models/lnd/clm/bld/namelist_files/namelist_definition.xml
         in your browser and you'll see the names, type, description and valid_values for all namelist variables.

   Changes to build-namelist:
     Transient sim_year ranges (i.e. 1850-2000)
     Remove cam_hist_case option.
     Make sure options ONLY used for stand-alone testing have a "drv_" or "datm_" prefix in them and list these
     options all together and last when asking for help from build-namelist.
   New options to build-namelist:
     -clm_usr_name     "name" Dataset resolution/descriptor for personal datasets. Default: not used
                              Example: 1x1pt_boulderCO_c090722 to describe location,
                                       number of pts, and date files created
   New list options to build-namelist:
     build-namelist -res list          # List valid resolutions
     build-namelist -mask list         # List valid land-masks
     build-namelist -sim_year list     # List valid simulation years and simulation year ranges
     build-namelist -clm_demand list   # List namelist variables including those you could demand to be included.
     build-namelist -use_case list     # List valid use-cases

     New use-cases for:

   1850_control = Conditions to simulate 1850 land-use
   2000_control = Conditions to simulate 2000 land-use
20thC_transient = Simulate transient land-use, and aerosol deposition changes from 1850 to 2005
    glacier_mec = Placeholder for running IG cases with the ice sheet model glimmer

   New namelist items:

        urban_hac = OFF, ON or ON_WASTEHEAT   (default OFF)     Flag for urban Heating and Air-Conditioning
                                                       OFF          = Building internal temperature is un-regulated.
                                                       ON           = Building internal temperature is bounded to reasonable range.
                                                       ON_WASTEHEAT = Building internal temperature is bounded and resultant waste
                                                                      heat is given off.
        urban_traffic = .true. or .false.     (default .false.) Flag to include additional multiplicative factor of urban traffic
                                                                to sensible heat flux.
        fsnowoptions = filename          file for snow/aerosol optical properties (required)
        fsnowaging   = filename          file for snow aging parameters (required)
        faerdep      = filename          file of aerosol deposition (required)

  New history variables: (note watt vs. W in units, 26 vs. 76)
     BCDEP                      total BC deposition (dry+wet) from atmosphere                kg/m^2/s
     C13_PRODUCT_CLOSS          C13 total carbon loss from wood product pools                gC13/m^2/s
     DSTDEP                     total dust deposition (dry+wet) from atmosphere              kg/m^2/s
     EFLX_DYNBAL                dynamic land cover change conversion energy flux             W/m^2
     FGR12                      heat flux between soil layers 1 and 2                        watt/m^2
     FSAT                       fractional area with water table at surface                  unitless
     FSH_NODYNLNDUSE		sensible heat flux not including correction for land use change
                                                                                             watt/m^2
     GC_HEAT1                   initial gridcell total heat content                          J/m^2
     GC_HEAT2                   post land cover change total heat content                    J/m^2    inactive
     GC_ICE1                    initial gridcell total ice content                           mm/s
     GC_ICE2                    post land cover change total ice content                     mm/s     inactive
     GC_LIQ1                    initial gridcell total liq content                           mm
     GC_LIQ2                    initial gridcell total liq content                           mm       inactive <<<< name??
     H2OSNO_TOP                 mass of snow in top snow layer                               kg
     HEAT_FROM_AC               sensible heat flux put into canyon due to heat removed from air conditioning
                                                                                             watt/m^2
     HK                         hydraulic conductivity                                       mm/s     inactive
     LWup                       upwelling longwave radiation                                 watt/m^2 inactive
     NBP                        net biome production, includes fire, landuse, and harvest flux, positive for sink
                                                                                             gC/m^2/s
     OCDEP                      total OC deposition (dry+wet) from atmosphere                kg/m^2/s
     PBOT                       atmospheric pressure                                         Pa
     PCO2                       atmospheric partial pressure of CO2                          Pa
     PRODUCT_CLOSS              total carbon loss from wood product pools                    gC/m^2/s
     PRODUCT_NLOSS              total N loss from wood product pools                         gN/m^2/s
     Qair                       atmospheric specific humidity                                kg/kg    inactive
     Qanth                      anthropogenic heat flux                                      watt/m^2 inactive
     Qtau                       momentum flux                                                kg/m/s^2
     QFLX_LIQ_DYNBAL            liq dynamic land cover change conversion runoff flux         mm/s
     QFLX_ICE_DYNBAL            ice dynamic land cover change conversion runoff flux         mm/s
     QRUNOFF_NODYNLNDUSE        total liquid runoff not including correction for land use change (does not include QSNWCPICE) 
                                                                                             mm/s
     QSNWCPICE                  excess snowfall due to snow capping                          mm/s
     QSNWCPICE_NODYNLNDUSE      excess snowfall due to snow capping not including correction for land use change
                                                                                             mm/s
     QSNWCPLIQ                  excess rainfall due to snow capping                          mm/s     inactive
     SMP                        soil matric potential                                        mm       inactive
     SNOAERFRC2L                surface forcing of all aerosols in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNOAERFRCL                 surface forcing of all aerosols in snow (land)               watt/m^2
     SNOBCFRCL                  surface forcing of BC in snow (land)                         watt/m^2
     SNOBCMCL                   mass of BC in snow column                                    kg/m2
     SNOBCMSL                   mass of BC in top snow layer                                 kg/m2
     SNOdTdzL                   top snow layer temperature gradient (land)                   K/m
     SNODSTFRC2L                surface forcing of dust in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNODSTFRCL                 surface forcing of dust in snow (land)                       watt/m^2
     SNODSTMCL                  mass of dust in snow column                                  kg/m2
     SNODSTMSL                  mass of dust in top snow layer                               kg/m2
     SNOFSRND                   direct nir reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRNI                   diffuse nir reflected solar radiation from snow              watt/m^2 inactive
     SNOFSRVD                   direct vis reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRVI                   diffuse vis reflected solar radiation from snow              watt/m^2 inactive
     SNOFSDSND                  direct nir incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSNI                  diffuse nir incident solar radiation on snow                 watt/m^2 inactive
     SNOFSDSVD                  direct vis incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSVI                  diffuse vis incident solar radiation on snow                 watt/m^2 inactive
     SNOLIQFL                   top snow layer liquid water fraction (land)                  fraction inactive
     SNOOCMCL                   mass of OC in snow column                                    kg/m2
     SNOOCMSL                   mass of OC in top snow layer                                 Kg/m2
     SNOOCFRC2L                 surface forcing of OC in snow, averaged only when snow is present (land)
     SNOOCFRCL                  surface forcing of OC in snow (land)                         watt/m^2
                                                                                             watt/m^2
     SNORDSL                    top snow layer effective grain radius                        m^-6     inactive
     SNOTTOPL                   snow temperature (top layer)                                 K/m      inactive <<< units?
     SWup                       upwelling shortwave radiation                                watt/m^2 inactive
     URBAN_AC                   urban air conditioning flux                                  watt/m^2
     URBAN_HEAT                 urban heating flux                                           watt/m^2
     Wind                       atmospheric wind velocity magnitude                          m/s      inactive
     WOOD_HARVESTC              wood harvest (to product pools)                              gC/m^2/s
     WOOD_HARVESTN              wood harvest (to product pools)                              gN/m^2/s

  History field name changes:

     ANNSUM_PLANT_NDEMAND  => ANNSUM_POTENTIAL_GPP
     ANNSUM_RETRANSN       => ANNMAX_RETRANSN
     C13_DWT_PROD10C_LOSS  => C13_PROD10C_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     C13_DWT_PROD10N_LOSS  => C13_PROD10N_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     DWT_PROD100N_LOSS     => PROD10N_LOSS
     DWT_PROD100N_LOSS     => PROD100N_LOSS
     DWT_PROD100C_LOSS     => PROD10C_LOSS
     DWT_PROD100C_LOSS     => PROD100C_LOSS
     HCSOISNO              => HC
     TEMPSUM_PLANT_NDEMAND => TEMPSUM_POTENTIAL_GPP
     TEMPSUM_RETRANSN      => TEMPMAX_RETRANSN

   History field names deleted:
     SNOWAGE, TSNOW, FMICR, FCO2, DMI, QFLX_SNOWCAP

  Add new urban oriented _U, and _R (Urban and Rural) for:
        EFLX_LH_TOT, FGR, FIRA, FSH, FSM, Q2M, QRUNOFF, RH2M, SoilAlpha, TG, TREFMNAV, TREFMXAV, and TSA
        (missing _R for SoilAlpha)

Describe timing and memory performance:

Versions of any externally defined libraries:

   scripts             scripts4_100108b
   drv                 vocemis-drydep12_drvseq3_1_11
   datm                datm8_091218
   socn                stubs1_2_02/socn
   sice                stubs1_2_02/sice
   sglc                stubs1_2_02/sglc
   csm_share           vocemis-drydep13_share3_091217
   esmf_wrf_timemgr    esmf_wrf_timemgr_090402
   timing              timing_090929
   mct                 MCT2_7_0_100106
   pio                 pio60_prod
   cprnc               cprnc_081022

Summary of testing:
  bluefire: All PASS up to...017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............PASS
  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing:
PASS  ERH.f09_g16.B20TRCN.bluefire
BFAIL ERH.f09_g16.B20TRCN.bluefire.compare.ccsm4_0_beta38 --- compset names changed -- but cpl.log files compare exactly
!
> ../Tools/check_exactrestart.pl cpl.log.100109-171753 $FISHOME/ccsm4_0_beta38/scripts/ERH.f09_g16.B20TRTR1CN.bluefire.G
.172652/logs/cpl.log.100108-181015
log files match!
PASS
PASS  SMS_RLA.f45_f45.I.bluefire
PASS  SMS_RLB.f45_f45.I.bluefire
PASS  SMS_ROA.f45_f45.I.bluefire
PASS  ERS_D.f45_g37.I.bluefire
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8
PASS  PET.f45_g37.I1850.bluefire.cpl
PASS  PET.f45_g37.I1850.bluefire.atm
PASS  PET.f45_g37.I1850.bluefire.lnd
PASS  PET.f45_g37.I1850.bluefire.ice
PASS  PET.f45_g37.I1850.bluefire.ocn
PASS  PET.f45_g37.I1850.bluefire.glc
PASS  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8
PASS  ERS.f19_g16.I1850.bluefire
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_6_58+datm8
PASS  ERS.f19_g16.I1850.bluefire.compare.clm3_6_58+datm8
PASS  ERB.f09_g16.I_1948-2004.bluefire
PASS  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_6_58+datm8
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire  <<<<<<<<<<<<<<<<<<<<<<<<< Failed before bug 1063
PASS  ERH_D.f10_f10.I1850CN.bluefire
PASS  PET.f10_f10.I8520CN.bluefire.cpl
PASS  PET.f10_f10.I8520CN.bluefire.atm
PASS  PET.f10_f10.I8520CN.bluefire.lnd
PASS  PET.f10_f10.I8520CN.bluefire.ice
PASS  PET.f10_f10.I8520CN.bluefire.ocn
PASS  PET.f10_f10.I8520CN.bluefire.glc
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  dublin/lf95 interactive testing: None PASS because of bug 1092
  dublin/lf95: None PASS because of bug 1092
  dublin/INTEL interactive testing: ALL PASS except (and didn't compare to baseline)
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
028 smM94 TSMncl_tools.sh ndepregrid ............................................................FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/INTEL: All PASS up to  021 smJ92 TSM.sh (and didn't compare to baseline)
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
	
===============================================================
===============================================================
Tag name:  clm3_6_64
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Jan 22 22:19:24 MST 2010
One-line Summary: Update documentation and README/Quickstart files, set NetCDF large-file format on by default in template, update pio, update some fsurdat files to vocemis-drydep versions, add 2.5x3.33_gx3v7 frac file, make gx3v7 default for 4x5 res

Purpose of changes:

Setup makefiles for docbook UsersGuide to output both pdf and html formats. Work on documentation of new _esmf driver files. Work on documentation. Make sure documentation of clm xml variables is good. Add note about CASA NOT being supported. Work on README/Quickstart files, and move the files from the top level to clm doc directory, but leave a file at top level pointing to these files. Make large file support default, remove LND_CDF64. Add in VOC surfdata files from voc branch: T42, T31, T21, T5, 4x5, 10x15-pftdyn. Add in new 2x5x3.33_gx3v7 frac file. Make default mask for 4x5 gx3v7.

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: Turn NetCDF large-file support on by default

List any changes to the defaults for the boundary datasets: 

 	New fsurdat files for: T42, T31, T21, T5, 4x5
        New fpftdyn file for 10x15 for 1850-2000, new frac file for 2.5x3.33_gx3v7

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): pio

   pio updated to google version: http://parallelio.googlecode.com/svn/trunk_tags/pio1_0_7/pio

List all files eliminated:

  D  Quickstart.userdatasets --- Move to models/lnd/clm/doc
  D  Quickstart.GUIDE ---------- Move to models/lnd/clm/doc
  D  README.DGVM --------------- Move to models/lnd/clm/doc
  D  KnownBugs ----------------- Move to models/lnd/clm/doc
  D  models/lnd/clm/doc/docs.html ----------------- Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/clm_head.shtml - Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/tree.html ------ Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/clm_foot.shtml - Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/index.shtml ---- Remove in favor of DocBook documentation

List all files added and what they do:

  A  models/lnd/clm/doc/Quickstart.userdatasets - Move from top level
  A  models/lnd/clm/doc/IMPORTANT_NOTES --------- Add important notes about what's scientifically valided/expected to work
  A  models/lnd/clm/doc/Quickstart.GUIDE -------- Move from top level
  A  models/lnd/clm/doc/KnownBugs --------------- Move from top level
  A  models/lnd/clm/doc/UsersGuide/Makefile ----- Makefile to build Users-Guide
  A  models/lnd/clm/doc/index.shtml ------------- Add HTML guide to documentation
  A  models/lnd/clm/doc/CodeReference/Filepath -- Filepath to source-code to build Code Reference Guide
  A  models/lnd/clm/doc/CodeReference/Makefile -- Makefile to build Code Reference Guide using Protex

  A  models/lnd/clm/test/system/Makefile -------- Makefile to build HTML test table

  A  models/lnd/clm/test/system/config_files/_nrsc_do --- Add smp only option for no-RTM seq-ccsm default mode

List all existing files that have been modified, and describe the changes:

  M  models/lnd/clm/bld/clm.cpl7.template -------------------------- Set large_file_format to true by default
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- Add in vocemis-drydep branch fsurdat files for: T42, T31, T21, T5,
                                                                     and 4x5 resolution (as well as 10x15 1850-2005 pftdyn file)
                                                                     Add in 2.5x3.33_gx3v7 frac file, and make gx3v7 mask the default
                                                                     for 4x5 resolution.
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml -- 2.5x3.33_gx3v7 domain file
>>>>>>>>>>>>> Update documentation and README text files
  M  models/lnd/clm/test/system/README
  M  models/lnd/clm/tools/mksurfdata/README
  M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ------------------ Make namelist documentation a little more clea
  M  models/lnd/clm/tools/ncl_scripts/convertUrbanOffline2Seq.ncl -- Document datm as datm8
  M  models/lnd/clm/tools/ncl_scripts/README
  M  models/lnd/clm/tools/interpinic/README
  M  models/lnd/clm/tools/mkdatadomain/README
  M  models/lnd/clm/tools/README
  M  models/lnd/clm/bld/README
  M  models/lnd/clm/doc/UsersGuide/index.xml ---- Update docbook UsersGuide
  M  models/lnd/clm/doc/README
  M  README

  M  models/lnd/clm/test/system/tests_pretag_bluefire ----------- Remove LD1 (2.65x3.33 res) tests
  M  models/lnd/clm/test/system/tests_posttag_hybrid_regression - Remove LD1 tests
  M  models/lnd/clm/test/system/input_tests_master -------------- Remove LD1 tests

Summary of testing:

  bluefire: All PASS except...
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 7 << 4x5 fsurdat
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 7 << 4x5 fsurdat
012 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7 << 4x5 fsurdat
017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7 << 4x5 fsurdat
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
030 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 7 << 10x15 fpftdyn different
042 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 6
043 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 5
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7 << 4x5 fsurdat
040 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 5 << no _nrsc_do in previous
041 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7 << script error
043 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7 << script error
045 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 3 << script error
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 3
  bluefire/CCSM testing: All PASS except...
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different than previous version
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 <<<<<<<< 4x5 surfdata file different
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<<<< 4x5 surfdata file different
FAIL  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire <<<<<<<<<<<<<<<<<<<<<<<<<<< Previous failure
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_6_64 <<<<<<<< Previous failure
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_6_58+datm8 <<< Previous failure
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_6_58+datm8 <<<<<<< 10x15 pftdyn file different
BFAIL PET.f10_f10.I8520CN.bluefire.compare.clm3_6_58+datm8 <<<<<<<<< 10x15 pftdyn file different

CLM tag used for the baseline comparison tests if applicable: clm3_6_63

Changes answers relative to baseline: Only for the following resolutions because of new fsurdat files: T42, T31, T5, 4x5
                                      and for dynamic PFT at 10x15 resolution because of a new pftdyn file

===============================================================
===============================================================
Tag name:  clm3_6_63
Originator(s):  erik (erik)
Date: Sat Jan  9 20:37:53 MST 2010
One-line Summary: Get answers to be identical with ccsm4_0_beta38 for 1 and 2 degree transient cases

Purpose of changes:

Get answers to be identical to ccsm4_0_beta38 for both 1 and 2 degree transient cases. Update scripts to
very latest. Tweak test_suite for CN so that can run with finidat file, and can run interactive on dublin
by turning CCSM_BLD to off.

Bugs fixed (include bugzilla ID):
                                 1098 (Use finidat weights instead of weights from fpftdyn file)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts

List all files eliminated: None

List all files added and what they do:

>>>>>> Add configuration files for CN with default of numpft+1 maxpft
A    models/lnd/clm/test/system/config_files/_cnnsc_h
A    models/lnd/clm/test/system/config_files/_cnnsc_m
A    models/lnd/clm/test/system/config_files/_cnnsc_o
A    models/lnd/clm/test/system/config_files/_cnnsc_dh
A    models/lnd/clm/test/system/config_files/_cnnsc_dm
A    models/lnd/clm/test/system/config_files/_cnnsc_do
A    models/lnd/clm/test/system/config_files/_cnnsc_ds

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Tweak test suite so can test for a CN transient case with a startup file, needed to find bug
M    models/lnd/clm/test/system/test_driver.sh ------------ Turn CCSM_BLD to off for interactive use
M    models/lnd/clm/test/system/input_tests_master -------- Tweak CN tests so can use finidat file
>>>>>>>>>>>>>>> Get answers to be identical with ccsm4_0_beta38
M    models/lnd/clm/src/main/clm_initializeMod.F90 -------- add extra call to pftdyn_interp after restart
M    models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 -- Read weights directly into clm_type rather than
                                                            a temporary array.

Summary of testing:

  bluefire: All PASS up to...
017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............PASS
  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing:
PASS  ERH.f09_g16.B20TRCN.bluefire 
BFAIL ERH.f09_g16.B20TRCN.bluefire.compare.ccsm4_0_beta38 --- compset names changed -- but cpl.log files compare exactly!
> ../Tools/check_exactrestart.pl cpl.log.100109-171753 $FISHOME/ccsm4_0_beta38/scripts/ERH.f09_g16.B20TRTR1CN.bluefire.G.172652/logs/cpl.log.100108-181015 
log files match!
PASS 
PASS  SMS_RLA.f45_f45.I.bluefire 
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm3_6_58+datm8  <<< f45_f45 NOT allowed in baseline
PASS  SMS_RLB.f45_f45.I.bluefire 
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm3_6_58+datm8  <<< f45_f45 NOT allowed in baseline
PASS  SMS_ROA.f45_f45.I.bluefire 
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm3_6_58+datm8  <<< f45_f45 NOT allowed in baseline
PASS  ERS_D.f45_g37.I.bluefire 
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  PET.f45_g37.I1850.bluefire.cpl 
PASS  PET.f45_g37.I1850.bluefire.atm 
PASS  PET.f45_g37.I1850.bluefire.lnd 
PASS  PET.f45_g37.I1850.bluefire.ice 
PASS  PET.f45_g37.I1850.bluefire.ocn 
PASS  PET.f45_g37.I1850.bluefire.glc 
PASS  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_6_58+datm8 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire  <<<<<<<<<<<<<<<<<<<<<<<<< Failed before bug 1063
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_6_58+datm8 
PASS  ERH_D.f10_f10.I1850CN.bluefire 
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_6_58+datm8  <<< f10_f10 NOT allowed in baseline
PASS  PET.f10_f10.I8520CN.bluefire.cpl 
PASS  PET.f10_f10.I8520CN.bluefire.atm 
PASS  PET.f10_f10.I8520CN.bluefire.lnd 
PASS  PET.f10_f10.I8520CN.bluefire.ice 
PASS  PET.f10_f10.I8520CN.bluefire.ocn 
PASS  PET.f10_f10.I8520CN.bluefire.glc 
BFAIL PET.f10_f10.I8520CN.bluefire.compare.clm3_6_58+datm8 <<< f10_f10 NOT allowed in baseline
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  dublin/lf95 interactive testing: None PASS because of bug 1092
  dublin/lf95: None PASS because of bug 1092
  dublin/INTEL interactive testing: ALL PASS except (and didn't compare to baseline)
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
028 smM94 TSMncl_tools.sh ndepregrid ............................................................FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/INTEL: All PASS up to  021 smJ92 TSM.sh (and didn't compare to baseline)
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_58+datm8

Changes answers relative to baseline: No bit-for-bit -- really now!

===============================================================
===============================================================
Tag name:  clm3_6_62
Originator(s):  erik (erik)
Date: Fri Jan  8 04:50:59 MST 2010
One-line Summary: Fix startup of PFT transient cases so properly use data from pftdyn file rather than finidat file

Purpose of changes:

Attempt to fix bug 1098 so that properly use the PFT weights interpolated from the fpftdyn file rather than using the
weights from the input finidat file.

Bugs fixed (include bugzilla ID): Attempt to fix -- but only a partial fix, answers were still different
                                 1098 (Use finidat weights instead of weights from fpftdyn file)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts and mct

   scripts to scripts4_100107b
   mct     to MCT2_7_0_100106

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Fix bug with fpftdyn weights
   M models/lnd/clm/test/system/test_driver.sh ------------- Fix name of ifort Macros file

Summary of testing:

  bluefire: All PASS except, up to 045 erLD1
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except CN spinup as below
PASS  ERS.f09_g16.I8520CN.bluefire 
PASS  ERS.f09_g16.I8520CN.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS.f09_g16.I8520CN.bluefire.compare.clm3_6_58+datm8 
PASS  SMS_RLA.f45_g37.I.bluefire 
PASS  SMS_RLA.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  SMS_RLA.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  SMS_RLB.f45_g37.I.bluefire 
PASS  SMS_RLB.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  SMS_RLB.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  SMS_ROA.f45_g37.I.bluefire 
PASS  SMS_ROA.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  SMS_ROA.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  ERS_D.f45_g37.I.bluefire 
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  PET.f45_g37.I1850.bluefire.cpl 
PASS  PET.f45_g37.I1850.bluefire.atm 
PASS  PET.f45_g37.I1850.bluefire.lnd 
PASS  PET.f45_g37.I1850.bluefire.ice 
PASS  PET.f45_g37.I1850.bluefire.ocn 
PASS  PET.f45_g37.I1850.bluefire.glc 
PASS  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_6_58+datm8 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_6_58+datm8 
PASS  ERH_D.f09_g16.I1850CN.bluefire 
PASS  ERH_D.f09_g16.I1850CN.bluefire.compare.clm3_6_58+datm8 
PASS  PET.f19_g16.I8520CN.bluefire.cpl 
PASS  PET.f19_g16.I8520CN.bluefire.atm 
  jaguar: All PASS up to 021 smJ05 
  jaguar interactive testing: All FAIL except...
001 smA74 TSM.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........PASS
002 erA74 TER.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -5+-5 arb_ic ........PASS
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:NONE:1800 1x1_brazil navy -5+-5 arb_ic .....PASS
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........PASS
005 smAK4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............PASS
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............PASS
  dublin/lf95: None pass because of bug 1092
  dublin/pgi:  All PASS except...
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
030 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
  dublin/ifort interactive: All PASS up to...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_58+datm8 (ccsm4_0_beta38)

Changes answers relative to baseline: Identical without fpftdyn files 
                                      with and without finidat files. But, can be
                                      different to roundoff or more for transient cases.

===============================================================
===============================================================
Tag name:  clm3_6_61
Originator(s):  erik (erik)
Date: Thu Jan  7 00:55:20 MST 2010
One-line Summary: Comment out endrun on finidat and fsurdat weights being incomptable, and go back to using finidat weights

Purpose of changes:

Most of our finidat files have weights incompatible with our new fsurdat files. Hence, we went back to allowing
the weights to be different and to using the finidat weights so that answers would be the same as before.
Also hardwire the logfile for datm and clm so that can run testsuite on jaguar. Also add in cppdef required
for breeze.

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1098 (Use finidat weights instead of weights from fpftdyn file)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts to scripts4_100107

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

 M   models/lnd/clm/test/system/test_driver.sh -------------------- Add -cppdefs '-DFORTRANUNDERSCORE' for breeze.
 M   models/lnd/clm/bld/build-namelist ---------------------------- For standalone testing hardwire clm and 
                                                                    datm output log files
 M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Add comment remove logfile
 M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 ---------- Put implicit none in right place, comment
        out abort if weights too different, and use finidat weights instead of fsurdat weights. Hence
        this version is identical to clm3_6_58, other than the use of datm8 (which is roundoff different).

Summary of testing:

  bluefire:
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 4
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
053 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  bluefire/CCSM testing:
PEND  SMS_RLA.f45_f45.I.bluefire.200614 
PEND  SMS_RLB.f45_f45.I.bluefire.200614 
PASS  SMS_ROA.f45_f45.I.bluefire 
PASS  ERS_D.f45_g37.I.bluefire 
PASS  PET.f45_g37.I1850.bluefire.cpl 
PASS  PET.f45_g37.I1850.bluefire.atm 
PASS  PET.f45_g37.I1850.bluefire.lnd 
PASS  PET.f45_g37.I1850.bluefire.ice 
PASS  PET.f45_g37.I1850.bluefire.ocn 
PASS  PET.f45_g37.I1850.bluefire.glc 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I1850CN.bluefire 
PASS  PET.f10_f10.I8520CN.bluefire.cpl 
PASS  PET.f10_f10.I8520CN.bluefire.atm 
PASS  PET.f10_f10.I8520CN.bluefire.lnd 
PASS  PET.f10_f10.I8520CN.bluefire.ice 
PASS  PET.f10_f10.I8520CN.bluefire.ocn 
PASS  PET.f10_f10.I8520CN.bluefire.glc 
  jaguar interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 5
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 5
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
013 smJ74 TSM.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic FAIL! rc= 8
014 erJ74 TER.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
015 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_icFAIL! rc= 5
016 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 4
  dublin/lf95: All Fail due to bug 1092

CLM tag used for the baseline comparison tests if applicable: clm3_6_58 (but with datm8 rather than datm7)

Changes answers relative to baseline: No bit-for-bit except for transient cases which are different

===============================================================
===============================================================
Tag name:  clm3_6_60
Originator(s):  erik (erik)
Date:  Tue Jan  5 23:59:43 MST 2010
One-line Summary: Fix clm template

Purpose of changes:

Fix the broken clm template. Update externals for very latest scripts tag.

Bugs fixed (include bugzilla ID): Fix clm template which was broken

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): Update scripts

   scripts to scripts4_100105b

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M    models/lnd/clm/test/system/test_driver.sh -- update bl to ccsm4_0_beta38
M    models/lnd/clm/bld/clm.cpl7.template ------- fix so can work

Summary of testing:

  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
FAIL  ERS.f19_g16.I_1850.bluefire 
FAIL  ERS.f19_g16.I_1850-2000.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.I8520CN.bluefire.cpl 
PASS  PET.f10_f10.I8520CN.bluefire.atm 
PASS  PET.f10_f10.I8520CN.bluefire.lnd 

CLM tag used for the baseline comparison tests if applicable: clm3_6_59

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_59
Originator(s):  erik (erik)
Date: Tue Jan  5 17:44:48 MST 2010
One-line Summary: Update to datm8, fix so wts used are from fsurdat file NOT finidat file

Purpose of changes:

Changes needed for beta34 ESMF upgrade. Use new datm8 model which is more flexible and
has new options as well as parallel IO. Add in 4x5_gx3v7 frac file. Remove use for
ESMF_mod. Abort if finidat weights are significantly different from surfdata file
weights. Change name of driver and initializeMod to have a clm_ prefix. Convert UG
outline from html to DocBook. Make changes to code documentation for high level
subroutines. Remove documentation of namelist items in controlMod and have it point
to the documentation in the xml namelist file. Fix "called from" in code documentation 
and remove a lot of the concurrent directives. New files from Tony for esmf interface. 
Alpha release testing will start with this version.

Bugs fixed (include bugzilla ID):
                                 1084 (don't use only for ESMF_Mod)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1088 (change name of driver module)
                                 1093 (namelist tweaks) -- partial

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 
    Let CCSM build determine FORTRAN mangle definitions
    Directory structure changes slightly with new ESMF interfaces and new datm8

Describe any changes made to the namelist:
   Make default for hist_crtinic NONE so clm.i files are NOT made by default.
   Change names of options to build-namelist that only are for clm stand-alone testing.
   Add a drv_ or datm_ prefix, and separate how these options are displayed in the help
   Also add an option to several commands for "list" so that you can list the variables
   for clm_demand, for resolution, and for use-cases.
   Also update build-namelist to work with the new datm8

List any changes to the defaults for the boundary datasets: Add in 4x5_gx3v7 dataset

Describe any substantial timing or memory changes: datm8 is approx. 30% faster
   datm8 also allows you to enable parallel I/O

Code reviewed by: self, oleson, slevis, dlawren review of weights change

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, csm_share, drv, pio

+scripts   to scripts4_100103b
+drv       to vocemis-drydep12_drvseq3_1_11
+datm      to datm8_091218
+csm_share to vocemis-drydep13_share3_091217
+pio       to pio60_prod

List all files eliminated: 

  D   models/lnd/clm/test/system/config_files/_mexsc_ds --- Rename with nr in name
  D   models/lnd/clm/test/system/config_files/_vansc_ds --- Rename with nr in name
  D   models/lnd/clm/src/main/driver.F90 ------------------ Rename with clm_ prefix
  D   models/lnd/clm/src/main/initializeMod.F90 ----------- Rename with clm_ prefix
  D   models/lnd/clm/src/biogeophys/DriverInitMod.F90 ----- Rename to clm_driverInitMod

List all files added and what they do:

  A   models/lnd/clm/doc/UsersGuide/index.xml ---------------- Users Guide Outline in docbook format
>>>>>>>>>>> Version with "nr" so that RTM is turned off for non-global tests
  A   models/lnd/clm/test/system/config_files/_nrsc_s
  A   models/lnd/clm/test/system/config_files/17p_nrsc_ds
  A   models/lnd/clm/test/system/config_files/4p_nrcasasc_ds
  A   models/lnd/clm/test/system/config_files/_nrsc_ds
  A   models/lnd/clm/test/system/config_files/_nrmexsc_ds
  A   models/lnd/clm/test/system/config_files/_nrvansc_ds
  A   models/lnd/clm/test/system/config_files/17p_nrcnnsc_ds
>>>>>>>>>>> New files from Tony for ESMF interfaces
  A   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90
  A   models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90

  A   models/lnd/clm/src/main/clm_initializeMod.F90 ---------- Rename with clm_ prefix
              Also change so that dyn pft is always called before reading in the restart
              file.
  A   models/lnd/clm/src/main/clm_driver.F90 ----------------- Rename with clm_ prefix
  A   models/lnd/clm/src/biogeophys/clm_driverInitMod.F90 ---- Rename from driverInitMod

List all existing files that have been modified, and describe the changes:

  M   models/lnd/clm/test/system/config_files/README -- Note about nr means no-RTM
  M   models/lnd/clm/test/system/test_driver.sh ------- Some tweaks for dublin/intrepid
  M   models/lnd/clm/test/system/mknamelist ----------- Changes for datm namelists, and 
                                                        change for new options names for
                                                        build-namelist
  M   models/lnd/clm/test/system/nl_files/clm_per ----- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_std ----- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_ndepdyn - Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_pftdyn -- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_per0 ---- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_spin ---- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_urb1pt -- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/input_tests_master --- Use nr in test names
  M   models/lnd/clm/test/system/CLM_runcmnd.sh ------- Change name for laptop
  M   models/lnd/clm/test/system/TSM.sh --------------- Change datm restart files

  M   models/lnd/clm/bld/clm.cpl7.template ------------ Change template to not put RTM
                                                        time-step in when rtm is off
  M   models/lnd/clm/bld/configure -------------------- Change to new datm dir structure
  M   models/lnd/clm/bld/listDefaultNamelist.pl ------- Change name of datm namelist
  M   models/lnd/clm/bld/build-namelist --------------- New list options, update for
           new datm8 namelist.

  M   models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Document pio options
           new datm8 namelist items, CASA nameist items, and fget_archdev
  M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- New 4x5_gx3v7 frac file
                                                              set default of hist_crtinic to NONE
  M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - New datm8 defaults
  M   models/lnd/clm/bld/namelist_files/namelist_definition.xsl ---- Add section for
           CASA nl items, and a commented out section for the pio items

  M   models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 ---- Fix called from, rm concurrnt directives
  M   models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90 ------ Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 -- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/DGVMEcosystemDynMod.F90 --- Fix called from
  M   models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CASAMod.F90 --------------- Doc routine as private, fix called from, rm con dirct.
  M   models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90 - Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNSummaryMod.F90 ---------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 -- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/DGVMMod.F90 --------------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 -- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/C13SummaryMod.F90 --------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 -------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13FluxMod.F90 ---------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNSetValueMod.F90 --------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 -- Fix called from, rm con dirt.

  M   models/lnd/clm/src/main/clm_comp.F90 ------------- Add clm_ prefix to calls
  M   models/lnd/clm/src/main/pftdynMod.F90 ------------ Fix called from, rm con dirt.
  M   models/lnd/clm/src/main/histFileMod.F90 ---------- Add more documentation, rm con direct.
  M   models/lnd/clm/src/main/clm_atmlnd.F90 ----------- Change documentation of units for nee
  M   models/lnd/clm/src/main/restFileMod.F90 ---------- Change called from documentation
  M   models/lnd/clm/src/main/controlMod.F90 ----------- Remove namelist items documentation 
                                                         point to xml files for documenation
                                                         Work with code documentation
                                                         Get rid of notes about aerdep
                                                         files going away
  M   models/lnd/clm/src/main/clm_time_manager.F90 ----- Fix called from doc
  M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 - Add documentation
  M   models/lnd/clm/src/main/domainMod.F90 ------------ Clarify which driver in doc
  M   models/lnd/clm/src/main/clmtype.F90 -------------- Work on code documentation
  M   models/lnd/clm/src/main/histFldsMod.F90 ---------- Work on code documentation and formatting

  M   models/lnd/clm/src/riverroute/RtmMod.F90 - Fix called from

  M   models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ------ Remove KO and fix called from in code doc, rm con dirct.
  M   models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 -------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 -------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 - Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/SNICARMod.F90 ------------ Fix called from.

  M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 - Check that weights when read
         in agree reasonably closely with fsurdat weights

Summary of testing:

  bluefire:
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 7
012 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7
017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
021 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
028 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 13
029 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 11
030 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 7
034 blC61 TBL.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 48 cold .................FAIL! rc= 7
038 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 7
043 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 7
049 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 7
050 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 4
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 3
053 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 3 
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 3
  bluefire interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
017 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
023 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 7
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
028 blL78 TBL.sh _nrsc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic ...........FAIL! rc= 5
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
033 smL83 TSM.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 4
034 erL83 TER.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ........FAIL! rc= 5
035 brL83 TBR.sh _nrsc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic ...FAIL! rc= 5
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 4
041 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
043 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
045 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/lf95:   No testing as all tests fail due to bug 1092

CLM tag used for the baseline comparison tests if applicable: clm3_6_58

Changes answers relative to baseline: datm8 causes answers to be roundoff different
    Change to use of fsurdat instead of finidat weights means answers may change
    for non-coldstart cases.

===============================================================
===============================================================
Tag name:  clm3_6_58
Originator(s):  erik (erik)
Date: Tue Dec  8 12:56:47 MST 2009
One-line Summary: Fix rpointer, correct units for export of nee, start adding testing for intrepid

Purpose of changes:
    Only update the rpointer file when restart files are written NOT when clm.i initial
    files are written. This was causing problems to restart the model when it was
    aborting before it completed it's period to run for.
    Correct the units for the export of NEE from kg C to kg CO2 (kgCO2/m2/s)
    Remove some concurent directives in the code and the unicosmp target_os in 
    configure as we no longer have Phoenix.
    Add bgp target_os to configure, only set Fortran mangling if NOT using the 
    CCSM build in configure.
    Add CN atm spinup data source as option to configure and to test_driver.sh.
    Update version of external to test with to ccsm4_0_beta35
    Add ability to test on intrepid to test_driver.sh.

Bugs fixed (include bugzilla ID):
                                 1079 (rpointer file updated with clm.i files)
                                 1082 (Add bgp, don't do Fortran mangling for CCSM build)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 

  Add bgp target_os for configure.
  Don't set Fortran mangling when using CCSM build (as this already happens).

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): drv

  drv to vocemis-drydep12_drvseq3_0_41 (just before directory restructure)

List all files eliminated: None

List all files added and what they do:

A      models/lnd/clm/test/system/nl_files/clm_spin ------------ Use spin-up atm dataset
A      models/lnd/clm/test/system/tests_posttag_intrepid ------- List of tests for intrepid
A      models/lnd/clm/test/system/tests_posttag_intrepid_nompi - List of non-MPI tests for intrepid

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/test/system/test_driver.sh ------- Add intrepid
M      models/lnd/clm/test/system/input_tests_master --- Add CN spinup test
M      models/lnd/clm/test/system/CLM_runcmnd.sh ------- Add intrepid
M      models/lnd/clm/bld/configure -------------------- Add target_os bgp, remove unicosmp
                                                         only do Fortran name mangling
                                                         if NOT a CCSM build
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml - Add CPLHIST3HrWxHfHrSol source type
M      models/lnd/clm/src/main/driver.F90 -------------- When clm.i file written tell it NOT to update rpointer
M      models/lnd/clm/src/main/clm_atmlnd.F90 ---------- Convert output NEE from kg C to kg CO2
                                                         remove concurrent directives
M      models/lnd/clm/src/main/restFileMod.F90 --------- Add optional argument to NOT
                                                         update the rpointer file

Summary of testing: Limited

  bluefire: All PASS except...
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS up to...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7

CLM tag used for the baseline comparison tests if applicable: clm3_6_57

Changes answers relative to baseline: No (bit-for-bit)

===============================================================
===============================================================
Tag name:  clm3_6_57
Originator(s):  jwolfe (Jon Wolfe)
Date: Tue Nov 10 02:29:35 MST 2009
One-line Summary: Fix trend in aquifer water

Purpose of changes:

These mods are to fix the trend in aquifer water that results in a trend in
ocean salinity.

Bugs fixed (include bugzilla ID):
                                 1077 (Slow leak of land aquifer to Ocean runoff)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Code changes contributed by Keith Oleson.

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: ALL PASS except..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire extra test:
001 smH65 TSM.sh 17p_cnnsc_dh clm_pftdyn 18501230:NONE:1800 1.9x2.5 gx1v6@1850-2000 -10 arb_ic ..FAIL! rc= 10
002 erH65 TER.sh 17p_cnnsc_dh clm_pftdyn 18501230:NONE:1800 1.9x2.5 gx1v6@1850-2000 -3+-7 arb_ic FAIL! rc= 5
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
RUN   ERS.f19_g16.I_1850-2000.bluefire.114711 
PASS  ERB.f09_g16.I_1948_2004.bluefire 
RUN   ERB.f09_g16.I1850SPINUPCN.bluefire.114711 
RUN   ERH_D.f10_f10.I_1850_CN.bluefire.114711 
FAIL  PET.f10_f10.ICN8520.bluefire.cpl  <<<< script error something to do with "grep -a"
FAIL  PET.f10_f10.ICN8520.bluefire.atm  <<<< script error something to do with "grep -a"
FAIL  PET.f10_f10.ICN8520.bluefire.lnd  <<<< script error something to do with "grep -a"
FAIL  PET.f10_f10.ICN8520.bluefire.ice  <<<< script error something to do with "grep -a"
FAIL  PET.f10_f10.ICN8520.bluefire.ocn  <<<< script error something to do with "grep -a"
FAIL  PET.f10_f10.ICN8520.bluefire.glc  <<<< script error something to do with "grep -a"
  jaguar testing: all PASS except...
021 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 8
  jaguar extra test:
001 smH65 TSM.sh 17p_cnnsc_dh clm_pftdyn 18501230:NONE:1800 1.9x2.5 gx1v6@1850-2000 -10 arb_ic ..PASS
002 erH65 TER.sh 17p_cnnsc_dh clm_pftdyn 18501230:NONE:1800 1.9x2.5 gx1v6@1850-2000 -3+-7 arb_ic PASS
  jaguar interactive testing: PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing: PASS up to...  
016 smR53 TSM.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 96 cold .......FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_55

Changes answers relative to baseline: Yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All with CN, and non-CN for 1850/1850-2000 with f19 and 2.5x3.33
    - what platforms/compilers: All
    - nature of change (similar climate)

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository): clm3_6_48, clm3_6_51, ccsm4_0_beta32
   - platform/compilers: bluefire IBM-SP/xlf12
   - configuration (CPP ifdefs): 
  -DFORTRAN_SAME -DMAXPATCH_PFT=numpft+1 -DPROGSSLT -DRTM -DDUST -DCN -DCLAMP -D_USEBOX
-D_NETCDF -DSPMD
   - build-namelist command (or complete namelist): 2000_control, 1850_control
   - MSS location of output:  /OLESON/csm/clm4_cn
                              /SLEVIS/csm/i1850cnNewNdep
                              /CCSM/csm/b40.1850.track1.1deg.011

   URL for LMWG diagnostics output used to validate new climate:

 http://www.cgd.ucar.edu/tss/clm/diagnostics/clm4.0_dev/clm4_cna-clm4_CNa/setsIndex.html
 http://www.cgd.ucar.edu/tss/clm/diagnostics/clm4.0_dev/i1850cnNewNdep.54-78-i1850cn.251-275/setsIndex.html
o
 http://www.cgd.ucar.edu/cdp/mai/ccsmweb/b40.1850.track1.1deg.011-b40.1850.track1.1deg.006_30-39_lnd/setsIndex.html
	
===============================================================
===============================================================
Tag name:  clm3_6_55
Originator(s):  erik (erik)
Date: Thu Nov  5 21:30:58 MST 2009
One-line Summary: Fix tool to create Nitrogen deposition datasets, and change configure to use CCSM Makefile as source for TopLevel Makefile

Purpose of changes:

    Fix the tools to create Nitrogen deposition datasets, so units are transformed
    to units expected by CLM, and summed together.
    Create a new tool to extract static ndepdata from a given year from a transient file.
    Remove old clm3.0 tex documentation.
    Start adding in new documentation for CLM4.
    Change the configure so that it modifies the standard CCSM makefile on the fly 
    rather than keeping it's own copy.

Bugs fixed (include bugzilla ID): 1068 and 1069 (partial)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                      (fix the file generation tools -- next tag will use them)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1070 (pftdyn datasets bad for f19, 2.5x3.33)
                                 1071 (Problem with PET.f10 comparision)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:  None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

>>>>>>>>>>>>>>> Remove copy of CCSM top level Makefile
   D   models/lnd/clm/bld/config_files/TopCCSMBldMakefile.in
>>>>>>>>>>>>>>> Remove old documentation for clm3.0
   D   models/lnd/clm/doc/UsersGuide/History.tex
   D   models/lnd/clm/doc/UsersGuide/Download.tex
   D   models/lnd/clm/doc/UsersGuide/Namelist.tex
   D   models/lnd/clm/doc/UsersGuide/Examples.tex
   D   models/lnd/clm/doc/UsersGuide/Makefile
   D   models/lnd/clm/doc/UsersGuide/Build.tex
   D   models/lnd/clm/doc/UsersGuide/Subgrid.tex
   D   models/lnd/clm/doc/UsersGuide/UsersGuide.tex
   D   models/lnd/clm/doc/CodeReference/CodeReference.tex
   D   models/lnd/clm/doc/CodeReference/Makefile
   D   models/lnd/clm/doc/CodeReference/clm_offline_tree.html

List all files added and what they do:

>>>>>>>>>>>>>>> Add script to extract out static fndepdat files from
>>>>>>>>>>>>>>> the transient time-series data.
   A   models/lnd/clm/tools/ncl_scripts/getndepdatFrom20thCentury.ncl -- Get ndepdat from fndepdyn
>>>>>>>>>>>>>>> Start adding html based documentation, with a small outline
   A   models/lnd/clm/doc/UsersGuide/clm_head.shtml ------------ Header for all users-guide docs
   A   models/lnd/clm/doc/UsersGuide/tree.html ----------------- Contents nav side-bar
   A   models/lnd/clm/doc/UsersGuide/clm_foot.shtml ------------ Footer for all users-guide docs
   A   models/lnd/clm/doc/UsersGuide/index.shtml --------------- Starting short outline of Users-Guide
   A   models/lnd/clm/doc/docs.html ---------------------------- List of documents
   A   models/lnd/clm/doc/index.shtml -------------------------- Pointer to docs

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> When creating ndepdyn file convert to proper units, and sum fields
>>>>>>>>>>>>>>> together use only the decadal averages for data NOT 1850 and 2000
>>>>>>>>>>>>>>> Make setting of cyclic more robust in regrid, and let ndepregrid handle
>>>>>>>>>>>>>>> new files
   M   models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Convert from Kg/s to g/m^2/yr
                sum fields together also keep separated fields, use only decadal
                files to calculate and extrapolate to 1849 from the 1855 decade average.
   M   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl --- Make setting of Cyclic robust
   M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ----- Make setting of Cyclic robust
           add _FillValue on all NDEP_ fieldnames
>>>>>>>>>>>>>>> Change configure so that the top level Makefile is the standard
>>>>>>>>>>>>>>> CCSM Makefile with some mods done on the fly
   M   models/lnd/clm/bld/configure ---

Summary of testing: Limited

CLM tag used for the baseline comparison tests if applicable: clm3_6_54

Changes answers relative to baseline: No (bit-for-bit)

===============================================================
===============================================================
Tag name:  clm3_6_54
Originator(s):  erik (erik)
Date: Wed Oct 28 21:17:13 MDT 2009
One-line Summary: Allow comp_intf to change on ccsm build, reduce default hist fields, 
                  start adding 2.5x3.33, start adding VOC fsurdat datasets, 
                  new finidat files for f09 and f19

Purpose of changes:

Make: GC_ICE2, GC_LIQ2, GC_HEAT2 output history fields off by default. Add in 2.5x3.33
resolution.Changes for bug 1050, put in env variables for CODE_ROOT and COMP_INTERFACE.
Update pio, MCT, timing, sglc, sice, socn, datm, scripts, csm_share to beta30 versions.
Update scripts so CLM_USRDAT_NAME can be set in scripts and used by datm and clm (also
add in DATM_CO2_SERIES variable so can be added to datm later). Start using VOC
version of the surfdata datasets: non-opt mksurf versions for f09, f10, and f19.
New finidat files for f09, f19 with CN for 1850 (year 400 of
b40.1850.track1.1deg.006) . Remove blAK8 test. Change Template to include: COMP_INTERFACE
logic in csm_share.buildlib and use CLM_USRDAT_NAME. Formatting changes for some comments 
in the code to comply with ProTex documentation standard as a step to move toward automatic 
documentation using doxygen where I have script to convert from ProTex to doxygen comments.
New fndepdyn files that fix a dip near 1855 and 2000, and fix the script that creates it.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1070 (pftdyn datasets bad for f19, 2.5x3.33)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Have configure write out unresolved filepaths 
                                           when called from cpl7.template

Describe any changes made to the namelist: drv namelist updated

List any changes to the defaults for the boundary datasets:
      Add 2.5x3.33 resolution
      Remove 2x2.5 res files
      New f09, f19 finidat files
      New f09, f19, f10, 1x1_tropicAtl fsurdat/fpftdyn files (only f19 change answers)
      New f05, 5x5_amazon, 1x1_brazil 2000 fsurdat file (b4b)
      New f03, f09, f19, f03, f10 ndepdyn files (changes 1851-1924, 1996-2004)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): to ccsm4_0_beta33 versions

   scripts        to scripts4_091027b
   drv            to vocemis-drydep12_drvseq3_0_37
   datm7          to datm7_090928
   socn/sice/sglc to stubs1_2_02
   csm_share      to share3_091013
   timing         to timing_090929
   mct            to MCT2_6_0_090926
   pio            to pio57_prod

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      Quickstart.userdatasets --- Update notes about setting user-defined datasets
>>>>>>>>>>>>>>> Update jaguar, kraken, and bluefire env vars to latest scripts
>>>>>>>>>>>>>>> Remove blAK8 test as ocean-only and no clm files to compare
  M    models/lnd/clm/test/system/README.testnames ---------------- Add 2.5x3.33 test resolution
  M    models/lnd/clm/test/system/tests_driver.sh ----------------- Update env vars
                      to whats in scripts4_091015 for jaguar, kraken and bluefire
  M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi ----- Rm blAK8
  M    models/lnd/clm/test/system/input_tests_master -------------- Rm blAK8, add 1x1_tropicAtl@1850,1850-2000, and 2.5x3.33 tests
  M    models/lnd/clm/test/system/tests_posttag_nompi_regression -- Rm blAK8

>>>>>>>>>>>>>>> Allow configure to write out unresolved Filepath, make TopCCSMBld
>>>>>>>>>>>>>>> Makefile closer to CPL7 version
  M    models/lnd/clm/bld/configure -------------------------- Add clm_root option
              add ability to set comp_intf to cpl_$COMP, allow ability to check for
              directories existance resolving env vars that are set. Create a subroutine
              is_valid_directory to check for directories instead of "-d".
  M    models/lnd/clm/bld/config_files/config_definition.xml - Allow cpl_$COMP rm lapacklibdir
  M    models/lnd/clm/bld/clm.cpl7.template -- Set COMP based on COMP_INTERFACE, 
                 add clm_root to configure, don't resolve CODEROOT and CASEROOT on output
  M    models/lnd/clm/bld/config_files/TopCCSMBldMakefile.in - Changes to make closer to scripts4_091015 version.
>>>>>>>>>>>>>>> Change drv namelist names, 
  M    models/lnd/clm/bld/build-namelist ----- Change drv namelist names: cpl_io_numtasks/cpl_io_typename
>>>>>>>>>>>>>>> Change drv namelist names, add 2.5x3.33 resolution
>>>>>>>>>>>>>>> Remove 2x2.5 res files
>>>>>>>>>>>>>>> New f09, f19 finidat files
>>>>>>>>>>>>>>> New f09, f19, f10, 1x1_tropicAtl fsurdat/fpftdyn files (only f19 change answers)
>>>>>>>>>>>>>>> New f05, 5x5_amazon, 1x1_brazil 2000 fsurdat file (b4b)
>>>>>>>>>>>>>>> New f03, f09, f19, f03, f10 ndepdyn files (changes 1851-1924, 1996-2004)
  M    models/lnd/clm/bld/namelist_files/namelist_definition.xml -----Change drv namelist 
                names: cpl_io_numtasks/cpl_io_typename, add 2.5x3.33 resolution
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml -- Add 2.5x3.33 res domainfile
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- New f19, f09 finidat files
               new f09, f19, f10 fsurdat/fpftdyn files
               new 2.5x3.33: fatmgrid, flndtopo, fatmtopo, fatmlndfrc, faerdep, fndepdat files
              new f05, 5x5_amazon, 1x1_brazil 2000 fsurdat files
              new f03, f09, f19, f03, f10 ndepdyn files
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml --- Change drv namelist 
               names: cpl_io_numtasks/cpl_io_typename

  M    models/lnd/clm/src/main/histFldsMod.F90 -- GC_HEAT2, GC_LIQ2, GC_ICE2 NOT on by default
>>>>>>>>>>>>>>> Remove dips in 20th Century transient Nitrogen deposition
>>>>>>>>>>>>>>> for 1855 and 2000.
  M   models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl --- Remove 1855-1915 and 2000
                from list of input files. The 1850 dataset had too high of CO2 and hence
                to high Nitrogen deposition, which gives a unrealistic dip near the
                beginning.

>>>>>>>>>>>>>>> Documentation changes of ProTex comments to fit the ProTex standard
M      tools/mksurfdata/mkglcmec.F90
M      tools/mksurfdata/mkfmax.F90
M      tools/mksurfdata/ncdio.F90
M      tools/mksurfdata/mklaiMod.F90
M      tools/mksurfdata/mkglacier.F90
M      tools/mksurfdata/mkharvestMod.F90
M      tools/mksurfdata/creategridMod.F90
M      tools/mksurfdata/mkorganic.F90
M      tools/mksurfdata/mklanwat.F90
M      tools/mksurfdata/mksoicol.F90
M      tools/mksurfdata/mkrank.F90
M      tools/mksurfdata/mkelev.F90
M      tools/mksurfdata/mkurban.F90
M      tools/mksurfdata/mkurbanparMod.F90
M      tools/mksurfdata/mksoitex.F90
M      tools/mksurfdata/mkirrig.F90
M      tools/mksurfdata/domainMod.F90
M      tools/mksurfdata/areaMod.F90
M      tools/mksurfdata/mksrfdat.F90
M      tools/mksurfdata/mkpftMod.F90
M      tools/mkgriddata/mkgriddata.F90
M      tools/mkgriddata/creategridMod.F90
M      tools/mkdatadomain/create_domain.F90
M      src/biogeochem/DGVMLightMod.F90
M      src/biogeochem/DGVMReproductionMod.F90
M      src/biogeochem/DGVMAllocationMod.F90
M      src/biogeochem/DGVMEcosystemDynMod.F90
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/DGVMKillMod.F90
M      src/biogeochem/DUSTMod.F90
M      src/biogeochem/DGVMEstablishmentMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMRestMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/biogeochem/CNrestMod.F90
M      src/biogeochem/VOCEmissionMod.F90
M      src/biogeochem/DGVMMortalityMod.F90
M      src/biogeochem/DGVMTurnoverMod.F90
M      src/biogeochem/DGVMFireMod.F90
M      src/biogeochem/CNEcosystemDynMod.F90
M      src/main/inicFileMod.F90
M      src/main/organicFileMod.F90
M      src/main/spmdGathScatMod.F90
M      src/main/clm_varpar.F90
M      src/main/CNiniTimeVar.F90
M      src/main/dynlandMod.F90
M      src/main/accumulMod.F90
M      src/main/clm_comp.F90
M      src/main/driver.F90
M      src/main/decompInitMod.F90
M      src/main/ncdio.F90
M      src/main/getdatetime.F90
M      src/main/subgridRestMod.F90
M      src/main/accFldsMod.F90
M      src/main/subgridMod.F90
M      src/main/fileutils.F90
M      src/main/aerdepMod.F90
M      src/main/initializeMod.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/pft2colMod.F90
M      src/main/clm_atmlnd.F90
M      src/main/restFileMod.F90
M      src/main/controlMod.F90
M      src/main/initSurfAlbMod.F90
M      src/main/clm_time_manager.F90
M      src/main/cpl_mct/lnd_comp_mct.F90
M      src/main/ndepFileMod.F90
M      src/main/subgridAveMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/CASAiniTimeVarMod.F90
M      src/main/CNiniSpecial.F90
M      src/main/pftvarcon.F90
M      src/main/snowdp2lev.F90
M      src/main/spmdMod.F90
M      src/main/surfrdMod.F90
M      src/main/domainMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/iobinary.F90
M      src/main/do_close_dispose.F90
M      src/main/mkarbinitMod.F90
M      src/riverroute/RtmMod.F90
M      src/riverroute/RunoffMod.F90
M      src/biogeophys/BalanceCheckMod.F90
M      src/biogeophys/SurfaceRadiationMod.F90
M      src/biogeophys/SoilTemperatureMod.F90
M      src/biogeophys/SnowHydrologyMod.F90
M      src/biogeophys/UrbanInputMod.F90
M      src/biogeophys/Biogeophysics1Mod.F90
M      src/biogeophys/Biogeophysics2Mod.F90
M      src/biogeophys/FracWetMod.F90
M      src/biogeophys/UrbanInitMod.F90
M      src/biogeophys/FrictionVelocityMod.F90
M      src/biogeophys/TridiagonalMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90
M      src/biogeophys/Hydrology1Mod.F90
M      src/biogeophys/Hydrology2Mod.F90
M      src/biogeophys/BiogeophysicsLakeMod.F90
M      src/biogeophys/BiogeophysRestMod.F90
M      src/biogeophys/SoilHydrologyMod.F90
M      src/biogeophys/UrbanMod.F90
M      src/biogeophys/QSatMod.F90
M      src/biogeophys/HydrologyLakeMod.F90
M      src/biogeophys/SNICARMod.F90
M      src/biogeophys/DriverInitMod.F90
M      src/biogeophys/BareGroundFluxesMod.F90
M      src/biogeophys/CanopyFluxesMod.F90

Summary of testing:

  bluefire:
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
.........FAIL! rc= 10
031 smC61 TSM.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 -6 cold
.................FAIL! rc= 10
032 erC61 TER.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 10+38 cold
..............FAIL! rc= 5
033 brC61 TBR.sh _sc_dh clm_std^nl_urb_br 20021001:NONE:1800 1.9x2.5 gx1v6 -3+-3 cold
...........FAIL! rc= 5
034 blC61 TBL.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 48 cold
.................FAIL! rc= 4
035 smH52 TSM.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 96 cold
.........FAIL! rc= 8
036 erH52 TER.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38
cold ......FAIL! rc= 5
037 brH52 TBR.sh 17p_cnnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72
cold ...FAIL! rc= 5
038 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold
.........FAIL! rc= 4
039 smI59 TSMcnspinup.sh 17p_cnadspinupsc_dm 17p_cnexitspinupsc_dm 17p_cnsc_dm clm_std
20020115:NONEFAIL! rc= 5
040 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic
........................FAIL! rc= 10
041 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic
......................FAIL! rc= 5
  bluefire interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic........FAIL! rc= 10
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
FAIL  ERS.f19_g16.I_1850-2000.bluefire  <-- script fails, but cpl log same
PASS  ERB.f09_g16.I_1948_2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire <-- recv lnd Sl_t different
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc
  jaguar: All PASS
  jaguar interactive testing: All PASS except
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
013 smJ74 TSM.sh 4p_casasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic .FAIL! rc= 8
014 erJ74 TER.sh 4p_casasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
015 brJ74 TBR.sh 4p_casasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic FAIL! rc= 5
  dublin/lf95 interactive testing:
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
026 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
027 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/lf95:
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
030 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to..
019 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 48 cold ......FAIL! rc= 7

CLM tag used for the baseline comparison tests if applicable: clm3_6_53

Changes answers relative to baseline: Only f19 due to new fsurdat file (off by roundoff)
                                      and startup for f09 and f19 with CN change due
                                      to new finidat files. 20th Century simulations 
                                      with CN change because the ndep data set is different
                                      from 1851-1924, and 2001-2004.

===============================================================
===============================================================
Tag name:  clm3_6_53
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Tue Sep 22 16:15:39 MDT 2009
One-line Summary: Fix so that T31_gx3v7 file is actually included

Purpose of changes:

Add new optics file from Mark Flanner. Fix so T31_gx3v7 file included. Change testing 
for 48x96 to gx3v7. Update datm so that pt1_pt1 res works. Fix clm template so 
that RTM is turned off for pt1_pt1 resolution.

Bugs fixed (include bugzilla ID):
                                 1042 (Bug with domain directory name in datm for pt1_pt1 resolution)
                                  789 -- change so that RTM is off should make single-point mode faster

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: In template turn off RTM if grid=pt1

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Add in T31_gx3v7 frac file, update snicar optics file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): datm7

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      Quickstart.userdatasets
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/bld/clm.cpl7.template
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

Summary of testing: Limited

  bluefire:
  bluefire interactive testing:
  bluefire/CCSM testing:

CLM tag used for the baseline comparison tests if applicable: clm3_6_53

Changes answers relative to baseline: None -- bit for bit

===============================================================
===============================================================
Tag name:  clm3_6_52
Originator(s):  erik (erik)
Date: Thu Sep 17 11:07:19 MDT 2009
One-line Summary: Add T31_gx3v7 support, remove forganic, read from fsurdat, add script to extract regional datasets, work with CN output, add more urban/rural fields

Purpose of changes:

 Add T31_gx3v7 files needed. Read organic fields from fsurdat file, remove forganic file.
 Add in script to extract regional datasets. Change CN output fields list, add NBP (Net
 Biome Production field). New Urban/Rural fields from Keith. Update bluefire compiler
  to XLF12 (causes some restart issues listed below).

 This tag includes new scripts to extract regional datasets from the global datasets
 in order to run for a specific region of interest. The scripts are available in the
 models/lnd/clm/tools/ncl_scripts directory, the main script is the
 getregional_datasets.pl perl script and it has a command line interface and help with
 the "-help" option. There's also a README file in the directory containing the scripts,
 and more information in the Quickstart.userdatasets file at the top level.

 Quickstart to use of regional extraction scripts:

       # Run the script to create an area to put your files (assume CSMDATA set to standard inputdata)
       cd scripts
       setenv MYCSMDATA $HOME/myinputdata
       link_dirtree $CSMDATA $MYCSMDATA 

       # Run the extraction for data from 52-73 North latitude, 190-220 longitude
       # that creates 13x12 gridcell region from the f19 (1.9x2.5) global resolution over
       # Alaska
       cd ../models/lnd/clm/tools/ncl_scripts
       setenv MYID 13x12pt_f19_alaskaUSA
       getregional_datasets.pl -sw 52,190 -ne 73,220 -id $MYID -mycsmdata $MYCSMDATA

       # Now create a case that uses these datasets
       cd ../../../../../scripts
       create_newcase -case testregional -compset I -mach bluefire -res pt1_pt1 -skip_rundb
       cd testregional
       $EDITOR env_conf.xml # change CLM_BLDNML_OPTS to include "-clm_usr_name $MYID" (expand $MYID)
       $EDITOR env_mach_pes.xml # Change tasks/threads as appropriate (defaults to serial)
       xmlchange -file env_run.xml -id DIN_LOC_ROOT_CSMDATA -val $MYCSMDATA
       $EDITOR Tool/Templates/datm.cpl7.template.csh # Add the following line before the check on DOMAINFILE (expand $MYID)

if ( $DOMAINFILE == "unset" ) set DOMAINFILE = "domain.lnd.$MYID.nc"

       # Do other changes to xml files as appropriate
       # configure as normal, then edit the datm namelist

       configure -case

       # Then build and run the case as normal

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1042 (Bug with domain directory name in datm for pt1_pt1 resolution)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Filepath, bluefire compiler to XLF12

    Filepath for stub-components changes
    In scripts and in test_driver.sh update compiler for bluefire to XLF12
    (this causes the restart issue for certain cases below).

Describe any changes made to the namelist: Remove forganic (read organic from fsurdat file)

List any changes to the defaults for the boundary datasets: Add 48x96_gx3v7 fracdata 

Describe any substantial timing or memory changes: None

Code reviewed by: self, oleson(urban/rural), slevis (CN fields, new NBP field)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7, stub-comps, csm_share

 scripts        to scripts4_090916
 drv            to vocemis-drydep12_drvseq3_0_29
 datm7          to datm7_090915
 socn/sice/sglc to stubs1_2_01
 csm_share      to share3_090902

List all files eliminated: Remove noOrganicSoilDataset use case

  Remove the use case that removed the requirement for the forganic dataset.

  D    models/lnd/clm/bld/namelist_files/use_cases/noOrganicSoilDataset.xml

List all files added and what they do:

  Add stylesheet for namelist defaults files.

  A models/lnd/clm/bld/namelist_files/namelist_defaults.xsl

 Scripts to extract regions of interest from global grids and put them into the place
 expected by build-namelist with the clm_usr_name option.

  A  models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl --- Main script to extract regional datasets.
          This one has a command line interface.
  A  models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl -- Support script to do the actual work.
          This one works based on settings of a bunch of environment variables.
          
List all existing files that have been modified, and describe the changes:

  M    Quickstart.userdatasets - Add notes about using getregional_datasets.pl
  M    Quickstart.GUIDE -------- Fix typo

  M    models/lnd/clm/test/system/test_driver.sh ---- Update seqccsm version to beta26
                                                      Also update bluefire to XLF12.

  M    models/lnd/clm/tools/ncl_scripts/README ----- Add note about new getregional_datasets scripts

>>>>>>>>>>>>>>> Get configure working with new scripts/stub-components
  M    models/lnd/clm/bld/configure ------- Change Filepath for stub components, remove
                                            write_filepath_ccsm use ccsmbld version

>>>>>>>>>>>>>>> Remove forganic, add T31_gx3v7, have query NOT return user filenames
>>>>>>>>>>>>>>> for transient files when sim_year_range=constant.
>>>>>>>>>>>>>>> Add style sheets for namelist_defaults files.
  M    models/lnd/clm/bld/queryDefaultXML.pm -- Skip filenames set to "null"
  M    models/lnd/clm/bld/build-namelist ------ Remove forganic

  M    models/lnd/clm/bld/namelist_files/namelist_definition.xml ------------ Remove forganic, 
            add gx3v7
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml ------ Remove forganic, 
             add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml --------- Add T31_gx3v7 
              domainfile, add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ---------- Add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ---------- Make 
               gx3v7 default for T31, remove reference to forganic, add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml ---- Set transient 
           files to null for sim_year_range=constant, add stylesheet.

>>>>>>>>>>>>>>> Add NBP, change which CN fields active/inactive, add new Urban/Rural
>>>>>>>>>>>>>>> fields, remove forganic read organic soil from fsurdat
  M    models/lnd/clm/src/biogeochem/CNSummaryMod.F90 --------- Add nbp, update doc for nee, nep, 
                work with formatting
  M    models/lnd/clm/src/biogeochem/C13SummaryMod.F90 -------- Add nbp, update doc for nee, nep, 
                work with formatting
  M    models/lnd/clm/src/biogeochem/CNSetValueMod.F90 -------- Set nbp and work with formatting
  M    models/lnd/clm/src/main/organicFileMod.F90 ------------- Remove forganic use fsurdat
  M    models/lnd/clm/src/main/clmtypeInitMod.F90 ------------- New urban/rural fields and nbp, 
                work with formatting
  M    models/lnd/clm/src/main/controlMod.F90 ----------------- Remove forganic
  M    models/lnd/clm/src/main/clm_varctl.F90 ----------------- Remove forganic
  M    models/lnd/clm/src/main/clmtype.F90 -------------------- Add urban/rural (oleson) and nbp, 
             and update doc on nep, nee
  M    models/lnd/clm/src/main/histFldsMod.F90 ---------------- Add urban/rural fields (oleson),
           Change which CN fields on/off, add NBP
  M    models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 -- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 --- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/UrbanInitMod.F90 --------- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Add urban/rural (oleson)

Summary of testing:

  bluefire: All PASS except...
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS up to...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except for branch tests that fail due to XLF12
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
PASS  ERS.f19_g16.I_1850-2000.bluefire 
FAIL  ERB.f09_g16.I_1948_2004.bluefire    <<<< FAIL's due to compiler upgrade to XLF12
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire  <<<< FAIL's due to compiler upgrade to XLF12
>>>>>>>>>>>>> NOTE This same problem exists in clm3_6_51 if you update the compiler to
>>>>>>>>>>>>> XLF12.
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc 
  jaguar: All PASS
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  dublin/lf95 interactive testing: All PASS up to...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  dublin/lf95: All PASS except (up to...)
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_51

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_51
Originator(s):  erik (erik)
Date: Tue Sep  1 10:46:16 MDT 2009
One-line Summary: Update fndepdyn and aerdep datasets (f02,f05,f09,f10) (1850,2000) and f09, f10 transient (1850-2000)

Purpose of changes:

Update fndepdyn and aerdep datasets (f02,f05,f09,f10) (1850,2000) and f09, f10 transient.
Turn on CCSM_BLD for dublin. Update scripts and get Macro's for dublin, have PTS_MODE 
auto flip 1-PE and USE_MPISERIAL.

Bugs fixed (include bugzilla ID):
                                 1007 (interpinic error with Linux/lahey)
                                 1031 (Can't run SMS_D.f09_g16.ICN8520)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Small change to configure

    If ccsmbld=on and -nospmd send blank for mpi_lib/mpi_inc, also set
    nc_inc as wasn't set before.

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New f02,f05,f09,f10 datasets
    New aerdep   datasets for 2000:      f02, f04, f09, f10
    New aerdep   datasets for 1850:      f02, f04, f09, f10
    New aerdep   datasets for 1850-2000:           f09, f10 (f02 and f04 datasets too large)
    New fndepdat datasets for 2000:      f02, f04, f09, f10
    New fndepdat datasets for 1850:      f02, f04, f09, f10
    New fndepdyn datasets for 1850-2000:           f09, f10

  The quarter and half degree aerdep transient datasets for 1850-2000 are too large being
  many tens of GB. Hence I did not create transient datasets for either of these.

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts

    scripts to scripts4_090829 --- pts_mode now automatically flips #pes=1,
                                   and USE_MPISERIAL to TRUE

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M    models/lnd/clm/test/system/test_driver.sh ------------------- Check for dublin
             node names, and set CLM_CCSMBLD to TRUE on dublin.
M    models/lnd/clm/bld/queryDefaultNamelist.pl ------------------ Set notest option
            for get_usr_files based on setting from -test.
M    models/lnd/clm/bld/configure -------------------------------- For -nospmd
            do NOT write out mpi_inc, mpi_lib to Macros file for CCSMBLD.
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New f02,f05,f09,f10 datasets
         new aerdep, fndepdat, and fndepdyn datasets for f02,f05,f09, and f10 resolutions
M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ------------ If noland set
            rof_present to .false. and set lnd_prognostic to .false.

Summary of testing:

  bluefire: All PASS except...
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
  (Also tested f09 1850-2000 case)
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
027 blAK8 TBL.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ........FAIL! rc= 6
051 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire/CCSM testing: All PASS...
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
PASS  ERS.f19_g16.I_1850-2000.bluefire 
PASS  ERB.f09_g16.I_1948_2004.bluefire 
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc 
  jaguar interactive testing: All PASS up to TER ptsmode test
  lightning/ifort interactive testing: All PASS
  dublin/lf95 interactive testing: All PASS up to ...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  dublin/lf95: All PASS except...
004 blA92 TBL.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 5
020 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
024 blJ92 TBL.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold ...............FAIL! rc= 5
028 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
030 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 7
 (TBL tests fail because clm3_6_50 did NOT have macros files available in scripts for dublin)
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_50

Changes answers relative to baseline: Code bit-for-bit, but new datasets change answers

    f02,f05, and f10 change answers for all configurations
    other resolutions (including f09) do NOT change answers

===============================================================
===============================================================
Tag name:  clm3_6_50
Originator(s):  erik (erik)
Date: Fri Aug 28 14:38:53 MDT 2009
One-line Summary: Fix ncl regridding scripts so that NO missing values are allowed for aerosol and nitrogen deposition

Purpose of changes:

 Fix aer and n deposition dataset regridder. Get CN to work for SCM mode. New half
(2000), 10x15 (2000) and qtr (1850,2000) degree surf dataset. Fix interpinic lahey error.

Bugs fixed (include bugzilla ID):
                                1033 (SCM mode does NOT work with CN)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1031 (Can't run SMS_D.f09_g16.ICN8520)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
   1.9x2.5 new transient pftdyn dataset for 1850-2005 with new data from Jean-Francois
   10x15, half-degree, and qtr-degree 2000 surface datasets
   qtr-degree 1850 surface dataset

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M    models/lnd/clm/test/system/input_tests_master - Add tests: 
               fmesh-qtr-deg@1850, 1-degree transient
             

M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl ----- Set sim-year for pft data
M    models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Reorder dims, don't allow 
         missing values, correct Cyclic, and copy last latitude up
M    models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Reorder dims, don't allow 
         missing values, correct Cyclic, and copy last latitude up
M    models/lnd/clm/tools/interpinic/interpinic.F90 ---- Initialize dimids so will work with lahey

M    models/lnd/clm/bld/queryDefaultNamelist.pl --- Add -usrname argument
M    models/lnd/clm/bld/queryDefaultXML.pm -------- If clm_usr_name set use get_usr_file
          method.
M    models/lnd/clm/bld/listDefaultNamelist.pl ---- Automatically search both clm_inparm
        AND the datm_dshr_nml namelists, remove namelist option
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- New datasets:
        1.9x2.5 new transient pftdyn dataset for 1850-2005 with new data from Jean-Francois
        10x15, half-degree, and qtr-degree 2000 surface datasets
        qtr-degree 1850 surface dataset

M    models/lnd/clm/src/main/ndepFileMod.F90 --- Don't stop if single_column set.

Summary of testing: Limited

  bluefire:
  dublin/lf95 interactive testing:
  dublin/lf95:

CLM tag used for the baseline comparison tests if applicable: clm3_6_49

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_49
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Tue Aug 25 15:17:18 MDT 2009
One-line Summary: Fix ncl interpolation scripts, update externals, turn on CLM_CCSM_BLD for bluefire,jaguar, ESMF3 compliance

Purpose of changes:

Fix fndepdyn ncl interpolation scripts. Use old clm3_6_47 fndepdyn datasets (until updated in next tag). 
Update scripts, drv, and csm_share to latest. Turn on CLM_CCSM_BLD mode for bluefire, and jaguar. 
Add scm-mode tests to test lists. Update Makefile to fix pio ifort bug. Changes from Dani Coleman 
to clm_time_manager to make compatible with ESMF3. Fix lahey compiler problem for scm_mode.

Bugs fixed (include bugzilla ID):
                                  966 (Hybrid restart problem on bluefire) -- works with CCSM build
                                 1031 (Can't run SMS_D.f09_g16.ICN8520) -- partial -- using old datasets
                                 1029 (ifort compilation error in pio)
                                 1032 (Problem running SCM mode on Lahey)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1031 (Can't run SMS_D.f09_g16.ICN8520)
                                 1033 (SCM mode does NOT work with CN)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:  Local Makefile changed for ifort

	local Makefile changed for ifort changed so that -132 only added to fixed-form code.

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Self, bundy (clm_time_manager code)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, csm_share

   scripts   to scripts4_090806
   drv       to vocemis-drydep12_drvseq3_0_27
   csm_share to share3_090825

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/test/system/tests_pretag_bluefire_nompi ----- Add single-column tests
M      models/lnd/clm/test/system/tests_pretag_jaguar_nompi ------- Add single-column tests
M      models/lnd/clm/test/system/test_driver.sh ------------------ Update seqvers to beta21, set 
                                                           CLM_CCSMBLD to true for bluefire/jaguar, 
                                                           change path for cprnc on jaguar
M      models/lnd/clm/test/system/input_tests_master -------------- single-column tests are cold-starts
M      models/lnd/clm/test/system/tests_pretag_dublin_nompi ------- Add single-column tests
M      models/lnd/clm/test/system/tests_posttag_nompi_regression -- Add single-column tests
M      models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ---------- Remove assumption about order of dimensions
M      models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ------------ Remove assumption about order of dimensions
M      models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl -------- Remove assumption about order of dimensions
M      models/lnd/clm/bld/config_files/Makefile.in ---------------- For ifort only add -132 to FIXEDFLAGS
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml  Go back to old fndepdyn files from clm3_6_47
M      models/lnd/clm/src/main/clm_time_manager.F90 --------------- Label sub as "clm::" and change data to
                                                                    intent(inout) to comply with ESMF3
                                                                    (From Dani Bundy-Coleman)

Summary of testing:

  bluefire: All PASS except
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS except
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 arb_ic ........FAIL! rc= 5
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 arb_ic ........FAIL! rc= 5
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 arb_ic ....FAIL! rc= 6
027 blAK8 TBL.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -10 arb_ic ......FAIL! rc= 6
051 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire/CCSM testing: All PASS
PASS  ERS_D.f45_g35.I_2000.bluefire
PASS  PET.f45_g35.I_1850.bluefire.cpl
PASS  PET.f45_g35.I_1850.bluefire.atm
PASS  PET.f45_g35.I_1850.bluefire.lnd
PASS  PET.f45_g35.I_1850.bluefire.ice
PASS  PET.f45_g35.I_1850.bluefire.ocn
PASS  PET.f45_g35.I_1850.bluefire.glc
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire
PASS  ERH_D.f10_f10.I_1850_CN.bluefire
PASS  PET.f10_f10.ICN8520.bluefire.cpl
PASS  PET.f10_f10.ICN8520.bluefire.atm
PASS  PET.f10_f10.ICN8520.bluefire.lnd
PASS  PET.f10_f10.ICN8520.bluefire.ice
PASS  PET.f10_f10.ICN8520.bluefire.ocn
PASS  PET.f10_f10.ICN8520.bluefire.glc
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  lightning/ifort interactive testing: All PASS
  dublin/lf95 interactive testing: All PASS up to...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_48

Changes answers relative to baseline: No (bit-for-bit)

===============================================================
===============================================================
Tag name:  clm3_6_48
Originator(s):  erik (erik)
Date: Wed Aug 12 19:22:59 MDT 2009
One-line Summary: New aerosol/nitrogen deposition datasets, mksurfdata work, scm work, clm_usr_name option to build-namelist

Purpose of changes:

Add in 0.47x0.63, 0.9x1.25 finidat file for CN and 1850, and 0.47x0.63 surface dataset.
Add in datasets at f09, f10, f05, f02 for aerosol (excepting f02 and f05) and nitrogen
deposition from J-F. Work with mksurfdata so that 0.23x0.31 dataset will work (Forrest).
Update csm_share, and get scam working. Add scam tests in. Add clm_usr_name option for
personal datasets to build-namelist. Add a noOrganicSoilDataset use-case so it won't add
in forganic file. Work on using ccsm build files for stand-alone testing. Get testing
going on dublin.

Bugs fixed (include bugzilla ID): 
                                  813 (use CCSM build files in testing -- partial)
                                 1010 (error in mksurfdata for qtr degree)
                                 1014 (shr_scam checkSurface can NOT run an I case)
                                 1023 (SCM mode check for lnd_present)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1029 (ifort compilation error in pio)
                                 1031 (Can't run SMS_D.f09_g16.ICN8520)
                                 1032 (Problem running SCM mode on Lahey)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Get ccsm_bld option working

Describe any changes made to the namelist: Add -clm_usr_name option for user-datasets, 
       add noOrganicSoilDataset use case (leaves forganic file off)

   Add the clm_usr_name option to build-namelist, document how this is done in the 
   Quickstart.userdataset README file. In short...

   if -clm_usr_name is set to ${MYDATAID} then do the following...

       surfdata:    copy files into: 
             $MYCSMDATA/lnd/clm2/surfdata/surfdata_${MYDATAID}_simyr${SIM_YEAR}.nc
       fatmgrid:    copy files into:
             $MYCSMDATA/lnd/clm2/griddata/griddata_${MYDATAID}.nc
       fatmlndfrc:  copy files into:
             $MYCSMDATA/lnd/clm2/griddata/fracdata_${MYDATAID}_${MASK}.nc
       faerdep:     copy files into:
             $MYCSMDATA/lnd/clm2/snicardata/aerosoldep_monthly_${SIM_YEAR}_${MYDATAID}.nc

   Then set CLM_BLDNML_OPTS="-clm_usr_name $MYDATAID" in your env_conf.xml. You
   may have to set DIN_LOC_ROOT_CSMDATA in env_run.xml to $MYCSMDATA is this isn't
  the standard location as well (use scripts/link_dirtree $CSMDATA $MYCSMDATA to
  link standard datasets to your location.

List any changes to the defaults for the boundary datasets: New datasets
    New aerosol and nitrogen deposition datasets from Jean-Francois Lamarque
             New interpolated finidat:   for 0.9x1.25, and 0.47x0.63
             New fsurdat:                for 0.47x0.63
             New faerdep, 1849-2006:     for 0.9x1.25 strung together by David Bailey
             New faerdep, 1849-2006:     for 1.9x2.5, 10x15 (interpolated)
             New fndepdat, decadal avgs: for 1.9x2.5 (raw data from J-F)
             New fndepdyn, 1850-2006:    for 1.9x.25 strung together
             New fndepdyn, 1849-2006:    for 0.9x1.25, 0.47x0.63, 10x15 (interpolated)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, datm7

   scripts   to scripts4_090806
   csm_share to share3_090811
   datm7     to datm7_090812

List all files eliminated: None

List all files added and what they do:

  A  Quickstart.userdatasets ---------------------------- Documentation on using own datasets
  A  models/lnd/clm/test/system/nl_files/nl_ptsmode_ocn - Test SCM mode
  A  models/lnd/clm/test/system/nl_files/nl_ptsmode ----- Test SCM mode over ocean
  A  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml --- Template for
                                                          user defined input datasets
  A  models/lnd/clm/bld/namelist_files/use_cases/noOrganicSoilDataset.xml- Use case to
                                                          turn off organic soil dataset

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>> Add scm tests, new variable to turn on use of CCSM build
>>>>>>>>>>>>>>>> Turn off -test in nl_files, already in mknamelist
>>>>>>>>>>>>>>>> Update dublin build/run to what used by cam.
  M  models/lnd/clm/test/system/TCB.sh --------------- Test for CLM_CCSMBLD
  M  models/lnd/clm/test/system/README.testnames ----- Add K and L single point mode cases
  M  models/lnd/clm/test/system/test_driver.sh ------- Update dublin, add INTEL for dublin
                                                       reconcile jaguar module with CCSM build
                                                       also set PNETCDF dirs.
  M  models/lnd/clm/test/system/nl_files/clm_per ----- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_std ----- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_ndepdyn - Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_pftdyn -- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_per0 ---- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_urb1pt -- Remove -test
  M  models/lnd/clm/test/system/input_tests_master --- Add single point tests AK4/AK8,AL4
  M  models/lnd/clm/test/system/README --------------- Add note about CLM_CCSMBLD env var
  M  models/lnd/clm/test/system/CLM_runcmnd.sh ------- Update dublin
>>>>>>>>>>>>>>>> Changes from Forrest Hoffman so that 0.23x0.31 case will work
>>>>>>>>>>>>>>>> I had started this work, but didn't complete it. Forrest checked
>>>>>>>>>>>>>>>> the following changes in.
>>>>   1. Changed the FFLAGS for debug mode on AIX
>>>>   2. Added calls to areaave(), gridmap_clean(), and areaini() in mksoicol.F90 and mksoitex.F90
>>>>   3. Changed "stop" to "call abort()" in mksrfdat.F90
>>>>   4. Added roundoff error fixes for gridcells containing only special landunits not 
>>>>      totalling 100% twice in mksrfdat.F90
>>>>   5. Added error checking for after landunit adjustment to detect gridcells whose 
>>>>      components do not total 100% twice in mksrfdat.F90
  M  models/lnd/clm/tools/mksurfdata/mksoicol.F90 ---- Add regrid for mask
  M  models/lnd/clm/tools/mksurfdata/Makefile -------- On IBM optimized remove -C, non-opt remove -O0
  M  models/lnd/clm/tools/mksurfdata/mksoitex.F90 ---- Regrid mask
  M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Roundoff error fix and test
>>>>>>>>>>>>>>>> Handle sim_year_range for datasets, loosen the tolerance for area sum
>>>>>>>>>>>>>>>> Allow time variable to be one ndep files.
  M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Handle sim_year_range
  M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Handle sim_year_range, loosen 
           tolerance, and allow time variable
>>>>>>>>>>>>>>>> Get ccsm_bld option working, change ifort a bit, add clm_usr_name
>>>>>>>>>>>>>>>> option and noOrganicSoilDataset use case to build-namelist
>>>>>>>>>>>>>>>> New datasets
   Fix hybrid bug for dynpft case, update externals. Require get_clump_bounds to be called
   in threaded regions and get_proc_bounds to be called in non-threaded regions. Remove uneeded get_proc_bounds
   calls, and pass down begg stuff as needed. Make loop in initSurfAlb Open-MP. Begin adding
   testing for dublin, and add lightning_pgi testing. Add new pftdyn test datasets for 1x1_tropicAtl.
   Update testing to beta20, default for lightning is ifort, add lighting_pgi testing. Change hist varnames
   of 3D_Time_constants_vars* to Time_constant_3Dvars*. Remove use of LSMLAT/LSMLON cpp tokens, by default
   set lsmlat/lsmlon to 1.

Bugs fixed (include bugzilla ID): 1011 (PGI build problem in driver)
                                  1016 (Problem with PTS_MODE build)
                                  1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1010 (error in mksurfdata for qtr degree)
                                 1014 (shr_scam checkSurface can NOT run an I case)
                                 1023 (SCM mode check for lnd_present)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: pftdyn test datasets for 1x1_tropicAtl

Describe any substantial timing or memory changes: None

Code reviewed by: self,mvertens

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7, csm_share

scripts   to scripts4_090801 ---------------- Begin adding PTS_MODE settings, update clm testlists
drv       to vocemis-drydep12_drvseq3_0_27 -- Add PTS_MODE settings to template
datm7     to datm7_090729 ------------------- Add single_column support
csm_share to share3_090729 ------------------ Add dshr support for scmlat/scmlon in domain

List all files eliminated: None

List all files added and what they do:

  A   models/lnd/clm/test/system/tests_pretag_dublin ------- Add test list for dublin
  A   models/lnd/clm/test/system/tests_pretag_dublin_nompi - Add interactive test list for dublin

List all existing files that have been modified, and describe the changes:

  M  models/lnd/clm/test/system/test_driver.sh ------- Seq testing to beta20, begin adding dublin, default
                                                       for lightning is ifort, add lightning_pgi, 
  M   models/lnd/clm/test/system/input_tests_master -- Add openMP 4x5 test
  M   models/lnd/clm/test/system/CLM_runcmnd.sh ------ Add dublin remove bangkok

  M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Update pftdyn surfdata for 1000-1004
                                                                    tests for 1x1_tropicAtl

  M   models/lnd/clm/src/biogeochem/CNWoodProductsMod.F90 - Remove call to get_proc_bounds -- NOT needed
  M   models/lnd/clm/src/main/clm_varpar.F90 -------------- By default set lsmlat/lsmlon to 1
  M   models/lnd/clm/src/main/dynlandMod.F90 -------------- Remove get_proc_bounds pass begg stuff in
  M   models/lnd/clm/src/main/driver.F90 ------------------ Pass begg stuff down to pft_interp
  M   models/lnd/clm/src/main/initializeMod.F90 ----------- Pass begg stuff down to pft_interp
  M   models/lnd/clm/src/main/pftdynMod.F90 --------------- Pass begg stuff down, remove get_proc_bounds calls
  M   models/lnd/clm/src/main/histFileMod.F90 ------------- Change var names of 3D_Time_constants_vars* to
                                                            Time_constant_3Dvars* 
  M   models/lnd/clm/src/main/initSurfAlbMod.F90 ---------- Make loop OpenMP parallel
  M   models/lnd/clm/src/main/decompMod.F90 --------------- Make sure get_clumpbounds is called from threaded
                                                            regions and get_proc_bounds is NOT.

Summary of testing:

  bluefire: All PASS except
002 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
003 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 7
010 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 7
011 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 6
019 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 7
020 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 6
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
041 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 7
042 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 6
048 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 6
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS!
  bluefire/CCSM testing: All PASS!
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
PASS  ERS.f19_g16.I_1850-2000.bluefire 
PASS  ERB.f09_g16.I_1948_2004.bluefire 
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc 
  jaguar: All PASS!
  lightning/ifort interactive testing: All PASS!
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_46

Changes answers relative to baseline: No bit-for-bit (except dynpft which was irreproducible before)

===============================================================
===============================================================
Tag name:  clm3_6_46
Originator(s):  erik (erik)
Date: Wed Jul 22 15:50:43 MDT 2009
One-line Summary: Get more tests to work/document them, add use cases for 1850_control, 
       2000_control, and 20thC_transient, straighten out single-point grids, Listen to 
       LND_CDF64 env variable from template, remove CLM_ARB_IC.

Purpose of changes:

Work with build-namelist to make 20th-Century a use-case so that ndepdyn files will be
included if found, but can still work without them (20thC_transient, 2000_control, and
1850_control use cases). Fix more bugs and tests, report on testing status for each
machine. Add files needed for 1.9x2.5_tx1v1 grid and new 10x15 surface dataset. Reconcile
grids for single-point datasets so consistent (lon within 0-360 rather than -180-180).
Get new single-point datasets for aerosol and nitrogen-deposition. Work with
pftdyntest2raw.ncl so will work. Work with mksurfdata.pl script so will append needed
grid data on urban point datasets. Add in CLM1PT mode for datm7 and use datm7 streams
template for testing. Listen to LND_CDF64 env variable from template, remove CLM_ARB_IC.

Bugs fixed (include bugzilla ID): 1002 (remove CLM_ARB_IC)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 

     Add CLM1PT option to DATM_MODE in env_conf.xml

Describe any changes made to the namelist: 

     New use-cases for:
                2000_control
                1850_control
                20thC_transient

List any changes to the defaults for the boundary datasets: 
    1.9x2.5_tx1v1 datasets, new single-point/regional datasets, new 10x15 surface dataset

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm7, pio

scripts to scripts4_090720
datm7   to datm7_090721
pio     to pio51_prod

List all files eliminated:

D   models/lnd/clm/bld/namelist_files/streams.txt.readme ------- Use datm7 version
D   models/lnd/clm/bld/namelist_files/datm.streams.template.xml- Use datm7 version
D   models/lnd/clm/test/system/nl_files/clm_organic ------------ organic files included anyway

List all files added and what they do:

>>>>>>>>>>>> Add new use cases
A   models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml ---- 2000 control
A   models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml - 20th Century transient
A   models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml ---- 1850 control
A   models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml ---- 2000 control

>>>>>>>>>>>> Add regression tests list for without MPI
A   models/lnd/clm/test/system/tests_posttag_nompi_regression ------- no mpi tests

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>> Get more tests working, or at least closer to working
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> models/lnd/clm/test/system	      directory changes
M   TCB.sh -------------------------------- Put -mach arg here
M   tests_pretag_bluefire ----------------- Change some hybrid tests to MPI
M   config_files/ext_ccsm_seq_10x15_dh ---- Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_4x5_dh ------ Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_1.9x2.5_dh -- Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_64x128_s ---- Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_0.9x1.25_dh - Set cice decomp / remove silent mode
M   test_driver.sh ------------------------ Set threads/tasks, move -mach to TCB, 
                        set DIN_LOC_ROOT, change needed for latest jaguar build
M   tests_posttag_hybrid_regression ------- Remove bad tests, move pure-mpi, serial/open-mp out
M   tests_posttag_purempi_regression ------ Remove bad tests, move pure-mpi, serial/open-mp out
M   nl_files/nl_urb ----------------------- Remove urban fields already included
M   nl_files/nl_urb_br -------------------- Remove urban fields already included
M   input_tests_master -------------------- Changes so tests will work
M   TCBext_ccsmseq_cam.sh ----------------- Add main/cpl_mct to clm list of dirs

>>>>>>>>>>>>>>>>>> Update filenames, append grid/frac files to urban single-pt in script
M   models/lnd/clm/tools/mksurfdata/mksurfdata.regional ---- New griddata, fix filepath
M   models/lnd/clm/tools/mksurfdata/mksurfdata.singlept ---- New griddata, fix filepath
M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl ---------- Fix, append grid/frac data
                                                         to urban single-point datasets

>>>>>>>>>>>>>>>>>> Get the pftdyntest2raw script working (will update datasets later)
M   models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl - Fix so will work, add grazing on
M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ----- Add sim_yr to out filenames

>>>>>>>>>>>>>>>>>> Validate grid
M   models/lnd/clm/tools/mkgriddata/creategridMod.F90 - Check for valid grid values

M   models/lnd/clm/srm/main/pftdynMod.F90 - Shorten some long lines

>>>>>>>>>>>>>>>>>> Change to build: add use-cases, remove CLM_ARB_IC, listen to LND_CDF64
>>>>>>>>>>>>>>>>>> Add new 1.9x2.5_tx1v1 frac dataset, new datasets for single-point,
>>>>>>>>>>>>>>>>>> new 10x15 datasets, separate out sim_yr and sim_year_range
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> models/lnd/clm/bld		  directory changes
M   listDefaultNamelist.pl ----------------------- Add csmdata arg
M   build-namelist ------------------------------- Add -list_use_cases option
                   load uses cases before other defaults, add $ccsm_tools var,
                   separate sim_yr and sim_year_range, put case_desc for use-cases
M   clm.cpl7.template ---------------------------- Remove CLM_ARB_IC, use LND_CDF64
M   namelist_files/checkdatmfiles.ncl ------------ Add tx1v1 mask
M   namelist_files/namelist_definition.xml ------- Add tx1v1 mask, make sim_year integer
                    add sim_year_range, use_case_desc, and clm_demand
M   namelist_files/namelist_defaults_overall.xml - default sim_year_range is constant
                    and default clm_demand is null
M   namelist_files/namelist_defaults_datm.xml ---- Use datm7 streams template, 
                    and update domain files
M   namelist_files/use_cases/pergro.xml ---------- Add use_case_desc
M   namelist_files/use_cases/pergro0.xml --------- Add use_case_desc
M   namelist_files/namelist_defaults_clm.xml ----- Move co2_ppmv defaults to use_cases
        new surf/frac/aer/ndep/grid data: 5x5_amazon, 1x1_brazil, 1x1_urbanc_alpha, 
                                          1x1_mexicocityMEX, 1x1_vancouverCAN
       new frac data:        1.9x2.5_tx1v1
       new aerdep/ndep data: 1x1_camdenNJ, 1x1_tropicAtl, 1x1_asphaltjungleNJ
       new surfdata/pftdyn:  10x15
       (new finidat file for f09 CN, 1850 -- commented out -- so answers same as last tag)

Summary of testing:

  bluefire: All PASS except
019 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 7
020 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 6
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
027 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 8
028 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 5
029 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 5
030 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 4
033 brC61 TBR.sh _sc_dh clm_std^nl_urb_br 20021001:NONE:1800 1.9x2.5 gx1v6 -3+-3 cold ...........FAIL! rc= 6
041 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 7
042 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 6
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 4
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS except
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 7
009 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
013 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 7
017 blJ74 TBL.sh 4p_casasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ..FAIL! rc= 7
019 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
021 blL78 TBL.sh _sc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic .............FAIL! rc= 7
027 erL83 TER.sh _sc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ..........FAIL! rc= 7
028 brL83 TBR.sh _sc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic .....FAIL! rc= 6
029 blL83 TBL.sh _sc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 5
034 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 4
036 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 4
043 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire/CCSM testing: All PASS
PASS  ERS_D.f45_g35.I_2000.bluefire
PASS  PET.f45_g35.I_1850.bluefire.cpl
PASS  PET.f45_g35.I_1850.bluefire.atm
PASS  PET.f45_g35.I_1850.bluefire.lnd
PASS  PET.f45_g35.I_1850.bluefire.ice
PASS  PET.f45_g35.I_1850.bluefire.ocn
PASS  PET.f45_g35.I_1850.bluefire.glc
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire
PASS  ERH_D.f10_f10.I_1850_CN.bluefire
  lightning/ifort: All PASS except -- up to test 18
002 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
003 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
005 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
006 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
007 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
008 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
009 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
011 erJ42 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 10+38 cold ...........FAIL! rc= 7
012 brJ42 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 10x15 USGS 72+72 cold ........FAIL! rc= 6
015 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 7
016 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 6
  lightning/ifort interactive testing: up to test 004
004 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
  calgary/lf95: All PASS except...
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 7
015 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
019 blOC4 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 7
023 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 7
024 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
025 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
026 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
028 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
049 blL74 TBL.sh _sc_s clm_std^nl_urb 20020101:NONE:1800 1x1_brazil navy -10 arb_ic .............FAIL! rc= 7
052 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
053 smM94 TSMncl_tools.sh ndepregrid ............................................................FAIL! rc= 6
055 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
056 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze,gale,hail,gust/ifort: All PASS except...
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 7
009 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
011 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
019 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 48 cold .......FAIL! rc= 7
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_6_45

Changes answers relative to baseline: Bit-for-bit EXCEPT for (as datasets change)
       5x5_amazon, 1x1_brazil, 1x1_urbanc_alpha, 1x1_mexicocityMEX, 1x1_vancouverCAN
       1x1_camdenNJ, 1x1_tropicAtl, 1x1_asphaltjungleNJ, 10x15

===============================================================
===============================================================
Tag name:  clm3_6_45
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Fri Jul 10 14:00:27 MDT 2009
One-line Summary: Remove inconsistent finidat file in clm3_6_44

Purpose of changes: A few simple bug fixes from clm3_6_44, with minimul testing
       
       Remove finidat inconsistent with the surface datasets for f19_g16, bgc=cn, sim_yr=1850
       Fix typo in test list, and fix thread settings for bluefire tests
       Remove -ftz from CFLAGS for ifort for mkdatadomain
       Change csh run scripts so: use CCSM env_machopts settings, set defaults, fix so can run serial
       Update datm7 so that CPLHIST3HrWxHfHrSol mode has iradsw=-1 so mimics running with CAM

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Remove inconsistent
    finidat file for 0.9x1.25, gx1v6, BGC=cn, sim_yr=1850

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): datm7

  datm7 to datm7_090709

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/test/system/test_driver.sh ------------------- Fix threads settings for bluefire
M      models/lnd/clm/test/system/input_tests_master --------------- Fix typo
M      models/lnd/clm/tools/interpinic/runinit_ibm.csh ------------- Use CCSM env_machopts settings
M      models/lnd/clm/tools/mkdatadomain/Makefile ------------------ Remove -ftz from CFLAGS for ifort
M      models/lnd/clm/bld/run-ibm.csh ------------------------------ Use CCSM env_machopts settings, set defaults, 
                                                                     fix so can run serial
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove 0.9x1.25, BGC=cn, sim_year=1850, mask=gx1v6 
                                                                     finidat file as was inconsistent with new surface dataset

Summary of testing: Limited

CLM tag used for the baseline comparison tests if applicable: clm3_6_44

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_44
Originator(s):  erik (erik)
Date: Thu Jul  9 11:47:40 MDT 2009
One-line Summary: Fix C13 bug, update scripts, drv, datm. Add domain files for idmap
atm-ocn grids for datm. Remove SEQ_MCT, add new ESMF env vars to template. Work with
ndeplintInterp, fix SCAM

Purpose of changes:

Fix C13 nflds bug, update scripts, drv, datm. Add domain files for idmap atm-ocn grids
for datm. Remove SEQ_MCT, add new ESMF env vars to template. Work with ndeplintInterp to
enable using J-F's new Nitrogen deposition files for transient 20th Century simulations.
SCAM fixes from John Truesdale. Add indices for PFT types.

Bugs fixed (include bugzilla ID): 981 (ccsm domain files for atm=ocn grid)
                                  987 (remove SEQ_MCT)
                                  991 (C13 nfields cause model to blowup on jaguar)
                                  997 (interpolated finidat files cause fully coupled cases to fail)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Remove SEQ_MCT

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
   New surface datasets for 0.9x1.25 and 1.9x2.5, and new finidat for 1850 for 0.9x1.25
   10x15 2000 10x15 dataset set to the 1850 version so that testing will work.

Describe any substantial timing or memory changes: None

Code reviewed by: self, oleson (pftvarcon changes)
     SCAM changes from John Truesdale

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7,
     csm_share and pio

 scripts   to scripts4_090707b
 drv       to vocemis-drydep11_drvseq3_0_23
 datm7     to datm7_090708
 csm_share to share3_090706b
 pio       to pio50_prod

List all files eliminated:

 D  models/lnd/clm/test/system/tests_pretag_bangkok -- Rename to calgary

List all files added and what they do:

 A  models/lnd/clm/test/system/tests_pretag_calgary ----------- Rename from bangkok
 A  models/lnd/clm/test/system/tests_pretag_bluefire_nompi ---- serial/open-MP tests
 A  models/lnd/clm/test/system/tests_pretag_jaguar_nompi ------ serial/open-MP tests
 A  models/lnd/clm/test/system/tests_posttag_lightning_nompi -- serial/open-MP tests

List all existing files that have been modified, and describe the changes:

 M  Quickstart.GUIDE --- fix minor error in name of directory as scripts changed.

  >>>>>>>>>>>> Separate out non-mpi tests for bluefire, jaguar, and lightning
               Test list is different if run interactive or submitted to batch que.
               Serial, open-mp only tests are run interactive, MPI and hybrid tests
               are run when submitted to the batch que. This prevents waste of resources
               for serial and open-mp only tests.
               Remove bangkok, replace with calgary only. Default threads depends
               on if interative or not.
 M  models/lnd/clm/test/system/test_driver.sh -----------
 M  models/lnd/clm/test/system/tests_pretag_bluefire ----
 M  models/lnd/clm/test/system/tests_pretag_jaguar ------
 M  models/lnd/clm/test/system/tests_posttag_lightning --
 M  models/lnd/clm/test/system/README ------------------- Add note about CLM_SOFF

  >>>>>>>>>>>> 
 M  models/lnd/clm/tools/mksurfdata/Makefile ------------------- For ifort remove -ftz option to CFLAGS
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig ----- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.regional -------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn ---------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.singlept -------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.namelist -------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt -- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt ------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt ------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl -------------- New input PFT datasets from Peter L.

  >>>>>>>>>>>> Work on linear interpolation of Nitrogen deposition so that add in mid-decades
 M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ------- Check if interpolation should be cyclic
 M  models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl ----- Also loop over mid decades as well
 M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --------- Check if interpolation should be cyclic

  >>>>>>>>>>>> Fix from Sam so that don't have negative ice flow
 M  models/lnd/clm/tools/interpinic/interpinic.F90 --- Change from Sam so that fully coupled cases don't trap negative ice flow
 M  models/lnd/clm/tools/interpinic/Srcfiles --------- Don't repeat filenames so can build with lahey

  >>>>>>>>>>>> Change so that document that files should have longs between 0 and 360 rather than -180 to 180
 M  models/lnd/clm/tools/mkgriddata/mkgriddata.regional --- Use longs 0-360
 M  models/lnd/clm/tools/mkgriddata/mkgriddata.singlept --- Use longs 0-360
 M  models/lnd/clm/tools/mkgriddata/Makefile -------------- For ifort remove -ftz option to CFLAGS
 M  models/lnd/clm/tools/mkgriddata/README ---------------- Make note that regional/single-pt grid files should have longs: 0 <= longs <= 360

  >>>>>>>>>>>> Remove SEQ_MCT and handle COMP_INTERFACE from ccsm cpl7 scripts, new surface datasets
 M  models/lnd/clm/bld/configure ----------- Remove SEQ_MCT, handle cpl_esmf
 M  models/lnd/clm/bld/clm.cpl7.template --- Handle $COMP_INTERFACE 
 M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Allow mid-decadal
                                                 sim_years so can process ndepdyn files
 M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- New 0.9 finidat,
        0.9x1.25, and 1.9x2.5 surfdata, fndepdat files for mid-decadal sim_years.

  >>>>>>>>>>>> Add indices for PFTs. Fixes for SCAM. Break up long lines > 132chars
 M  models/lnd/clm/src/biogeochem/CASAMod.F90 -------------- noveg, nc3_nonarctic_grass
 M  models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 --- noveg, ncorn, nbrdlf_dcd_brl_shrub
 M  models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Add PFT indices
 M  models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Add PFT indices
 M  models/lnd/clm/src/main/organicFileMod.F90 ------------- SCAM fix (from jet)
 M  models/lnd/clm/src/main/ncdio.F90 ---------------------- Break up long lines
 M  models/lnd/clm/src/main/pftdynMod.F90 ------------------ Break up long lines, add 
                                                             noveg, nbrdlf_evr_shrub
 M  models/lnd/clm/src/main/clm_atmlnd.F90 ----------------- C13 bug fix for number of fields
                                                             (found by Jon Wolfe)
 M  models/lnd/clm/src/main/pftvarcon.F90 ------------------ Add PFT indices, make sure
                                                             pftnames from pftcon file is
                                                             as expected.
 M  models/lnd/clm/src/biogeophys/UrbanInputMod.F90 -------- SCAM fix (from jet)

Summary of testing:

  bluefire: All FAIL except...
008 smB91 TSMruncase.sh .........................................................................PASS
053 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................PASS
  bluefire/CCSM testing: All PASS
PASS  ERS_D.f45_g35.I_2000.bluefire
PASS  PET.f45_g35.I_1850.bluefire.cpl
PASS  PET.f45_g35.I_1850.bluefire.atm
PASS  PET.f45_g35.I_1850.bluefire.lnd
PASS  PET.f45_g35.I_1850.bluefire.ice
PASS  PET.f45_g35.I_1850.bluefire.ocn
PASS  PET.f45_g35.I_1850.bluefire.glc
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire.001802
PASS  ERH_D.f10_f10.I_1850_CN.bluefire

CLM tag used for the baseline comparison tests if applicable: clm3_6_43

Changes answers relative to baseline: No -- bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_43
Originator(s):  erik (erik)
Date: Wed Jun 10 11:41:57 MDT 2009
One-line Summary: Fix pftdyn bug, enable 1D primary hist files, fix time-const3D output, fix template bug, enable cpl_esmf/cpl_mct

Purpose of changes:

Add src/main/cpl_esmf,src/main/cpl_mct directories, change configure to build either way,
add -comp_intf option. Remove SEQ_ #ifdef's, simplify some of the logic associated with
the old options (cpl6 and program_off). Brian K -- fix nans, enable  openMP again. Allow
first history tape to be 1D (Sean Swenson). Fix template co2_ppmv error.  Remove SPMD 
#ifdef from RTM. Fix driver pftdyn bug. Fix bug on writing out 3D time-constant fields.

Bugs fixed (include bugzilla ID):
                                  929 (bug in co2ppmv value in template)
                                  969 (allow primary tapes to be 1D)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  991 (C13 nfields cause model to blowup on jaguar)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Add choice between ESMF/MCT compilation
     NOTE: ESMF option does NOT work as files do NOT exist yet!
     Add -comp_intf option to configure

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, swensosc (1D and history changes), 
                  kauff (reenable OpenMP, some vars spval instead of nan)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, pio

    scripts to scripts4_090605b
    drv     to vocemis-drydep08_drvseq3_0_18
    pio     back to pio45_prod (to eliminate compilation problem with pathscale)

List all files eliminated:

D   models/lnd/clm/src/main/lnd_comp_mct.F90 --- Move to cpl_mct

List all files added and what they do:

A   models/lnd/clm/src/main/cpl_mct ---- Directory for MCT interface
A   models/lnd/clm/src/main/cpl_esmf --- Directory for ESMF interface
A   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 - Moved from main directory

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add -comp_intf option, fix template bug, closing input namelist
M   models/lnd/clm/bld/configure ----------- Add -comp_intf option
M   models/lnd/clm/bld/config_files/config_definition.xml -- Add comp_interface
M   models/lnd/clm/bld/clm.cpl7.template --- Close input namelist with ending "/"

>>>>>>>>>>>>>> Remove SEQ_ CPP #if's, require some arguments 
               (needed to be optional for cpl6/offline), allow primary hist files 1D
               Fix so that 3D time-constant data does get written out.
M   models/lnd/clm/src/main/clm_comp.F90 --------- Make rstwr, nlend, rdate required
M   models/lnd/clm/src/main/driver.F90 ----------- Remove doalb if's, PFTDYNWBAL CPP
                                                   (for pftdyn bug). Require rstwr,
                                                   nlend, and rdate
M   models/lnd/clm/src/main/clmtypeInitMod.F90 --- Some vars init to spval (kauff)
                      certain cell & pft level variables are initialized to spval
                      instead of nan so eliminate the appearance of nans on restart files.
                      (not all cell & pfts were used and given non-nan values)
M   models/lnd/clm/src/main/histFileMod.F90 ------ Write out 3D time-constant vars,
                                                   fix so can write primary 1D files
                                                   (Sean Swenson)
M   models/lnd/clm/src/main/restFileMod.F90 ------ nlend required
M   models/lnd/clm/src/main/controlMod.F90 ------- Remove SEQ_ CPP #if's, allow 1D primary
                                                   ability to run threaded is re-enabled (kauff)
M   models/lnd/clm/src/main/do_close_dispose.F90 - Require rstwr, nlend
M   models/lnd/clm/src/riverroute/RtmMod.F90 ----- Remove SPMD #ifdef

>>>>>>>>>>>>>> Move testing to calgary from bangkok
M   models/lnd/clm/test/system/test_driver.sh ---- Add LD_LIBRARY_PATH for calgary/lf95

Summary of testing:

  bluefire: All PASS except (up to test 35)
007 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
008 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
009 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
012 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 5
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -1100 cold FAIL! rc= 8
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -100 cold FAIL! rc= 4
019 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 5
028 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 5
034 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 7

  bluefire/CCSM testing:
PASS  ERS.f45_g35.I_2000.bluefire
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
SFAIL ERH.f10_f10.I_1850_CN.bluefire.235943 <<< f10_f10 doesn't work for datm7 right now

TBL hybrid/openMP tests fail since previous version had OpenMP disabled.

  breeze/gale/hail/gust/ifort: All PASS up to test 12 (10x15, smL51 test)

CLM tag used for the baseline comparison tests if applicable: clm3_6_43

Changes answers relative to baseline: Only pftdyn mode

===============================================================
===============================================================
Tag name:  clm3_6_42
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Tue Jun  2 11:58:25 MDT 2009
One-line Summary: Bring CN Harvest branch (cnhrv02_clm3_6_41) to trunk

Purpose of changes:

     Add in Peter Thornton's code to read in harvesting variables on surface datasets 
     and apply harvesting to carbon and nitrogen pools.
     Add in surface datasets from clm3_6_40 that have harvesting fields on them for
       0.9x1.25, 1.9x2.5, and 10x15 (as well as aerdep, ndepdat, and ndepdyn datasets).
     Remove urban test list as urban on by default, and remove top level doc directory.
     Add C13 CPP token for C13 extension of CN add -c13 option to configure.
     Add C13/10x15@1850-2000 testing.
     Let sum of percent types match to 100 within small value rather than an exact match.
     Increase wasteheat limit from 40 to 100 W/m2.
     Change default masks to USGS for 4x5,T31,T42, and T85 resolutions so same as cice
     Update drv to latest version (drvseq3_0_17 -- on voc branch).
     Update ccsm comparision version used in test suite.

Bugs fixed (include bugzilla ID): 
                                  977 (bug writing out 3D time-const data)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:
     Add C13 #ifdef for CN
     Add -c13 option to configure

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    Make USGS mask default for 4x5,T31,T42, and T85
         surface  datasets with harvesting for: 0.9x1.25, 1.9x2.5, 10x15 (1850,2000)
         pftdyn   datasets with harvesting for: 0.9x1.25, 10x15 (1850-2005)
         faerdep  datasets for: 0.9x1.25, 10x15 (1850, 2000, 1850-2000)
         fndepdat datasets for: 0.9x1.25, 10x15 (1850,2000)
         fndepdyn datasets for: 0.9x1.25, 1.9x2.5, 10x15 (1850-2000)

Describe any substantial timing or memory changes: Minor for CN

Code reviewed by: thornton, erik

List any svn externals directories updated (csm_share, mct, etc.):
	Remove top level doc directory as out of date and won't be updated. Howto is in
        the scripts directory

List all files eliminated:

D      models/lnd/clm/test/system/tests_posttag_urban - Urban on by default so doesn't 
                                                        need it's own tests
>>>>>>>>>>>>>>>>>> Remove as can NOT easily recreate source from them and code
                   has changed since the creation of the scripts. Would take work
                   to get the two in sync and be able to use these scripts as source.
D      models/lnd/clm/src/main/gen_ncdio_global_subs.csh
D      models/lnd/clm/src/main/gen_ncdio_local_subs.csh
D      models/lnd/clm/src/main/gen_spmdgs_subs.csh

List all files added and what they do:

>>>>>>>>>>>>>>>>>> Add new configurations to test C13 config
A  +   models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
A  +   models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
A  +   models/lnd/clm/test/system/config_files/17p_cnc13sc_do
>>>>>>>>>>>>>>>>>> New module to handle wood harvesting
A  +   models/lnd/clm/src/biogeochem/CNWoodProductsMod.F90 Calculate loss fluxes from wood
                                                           products pools, and update 
                                                           product pool state variables

List all existing files that have been modified, and describe the changes:

M      Quickstart.GUIDE --- Update documentation
M      README ------------- Update documentation
>>>>>>>>>>>>>>>>>> Add C13 and 10x15@1850-2000 tests
M   models/lnd/clm/test/system/tests_pretag_bluefire --- Add 10x15@1850-2000 tests
M   models/lnd/clm/test/system/config_files/README ----- Add note on new C13 config
M   models/lnd/clm/test/system/tests_posttag_breeze ---- Add openmp C13 test
M   models/lnd/clm/test/system/README.testnames -------- Add R configuration for C13 config
M   models/lnd/clm/test/system/tests_posttag_hybrid_regression -- Add C45 and R51 tests
M   models/lnd/clm/test/system/tests_posttag_purempi_regression - Add C45 and R52 tests
M   models/lnd/clm/test/system/input_tests_master ------ Add C45 (10x15@1850-2000, pure-mpi) and 
                                                         R51-R53 (C13) tests
M   models/lnd/clm/test/system/test_driver.sh ---------- Update ccsm4 comparision version
                                                         to beta17
>>>>>>>>>>>>>>>>>> Add C13 configuration option, and new datasets
M   models/lnd/clm/bld/configure -------------------------------- Add -c13 option
M   models/lnd/clm/bld/config_files/config_definition.xml ------- Add c13 entry
M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - 
       Change default masks for 4x5,T31,T42,T85 to USGS so agree with cice defaults
               surface  datasets with harvesting for: 0.9x1.25, 1.9x2.5, 10x15 (1850,2000)
               pftdyn   datasets with harvesting for: 0.9x1.25, 10x15 (1850-2005)
               faerdep  datasets for: 0.9x1.25, 10x15 (1850, 2000, 1850-2000)
               fndepdat datasets for: 0.9x1.25, 10x15 (1850,2000)
               fndepdyn datasets for: 0.9x1.25, 1.9x2.5, 10x15 (1850-2000)
>>>>>>>>>>>>>>>>>> C13/DGVM #ifdefs, add harvest vars and calculations
M models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 ---- Add CStateUpdate2h method for 
                                                            harvest mortality fluxes
M models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 -- Add C13 cpp and add C13StateUpdate2h
                                                            method for harvesting
M models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 ---- Remove 10n and 100n variables
M models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 ----- Add in harvesting terms
M models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90 - Add C13 #ifdef's
M models/lnd/clm/src/biogeochem/CNSummaryMod.F90 ---------- Add harvesting fields
M models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 ---- Remove 10c, 100c variables, 
                                                            formatting changes
M models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 -- Add C13 #ifdef, remove 10c, 100c vars
M models/lnd/clm/src/biogeochem/CNrestMod.F90 ------------- Add C13 #ifdef
M models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 -- Add C13 #ifdef
M models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 ---- Add NStateUpdate2h Nitrogen 
                                                            harvesting method
M models/lnd/clm/src/biogeochem/C13SummaryMod.F90 --------- Add C13 #ifdef
M models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------- Add C13 #ifdef and harvesting variables
M models/lnd/clm/src/biogeochem/CNC13FluxMod.F90 ---------- Add C13 #ifdef and C13Flux2h harvest 
                                                            method, and CNC13HarvestPftToColumn 
                                                            private method
M models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 ----- Add harvesting method calls
                                                            filters by lbc,ubc
                                                            Add C13 #ifdef, add CNHarvest call if 
                                                            fpftdyn file is set.
M models/lnd/clm/src/biogeochem/CNSetValueMod.F90 --------- Add C13 #ifdef, remove 10c, 100c loss 
                                                            vars, add harvest vars
M models/lnd/clm/src/main/clm_varcon.F90 ------------------ Add C13 #ifdef 
                                                      Increase wasteheat limit to 100 W/m2
M models/lnd/clm/src/main/CNiniTimeVar.F90 ---------------- Add C13 #ifdef
                                                            begc, endc to methods
M models/lnd/clm/src/main/accFldsMod.F90 ------------------ Put frmf and other vars (t10, t_mo, 
                                                            ... agdd) in DGVM #ifdef
M models/lnd/clm/src/main/clmtypeInitMod.F90 -------------- Add C13 and DGVM #ifdef and new 
                                                            harvesting vars
M models/lnd/clm/src/main/pftdynMod.F90 ------------------- Add CNHarvest and CNHarvestPftToColumn 
                                                            as public methods, 
                                                            add pftdyn_getharvest private methods, 
                                                            check that land fractions sum to 100 
                                                            within 1e-15 rather than exactly 100, 
                                                            change pftdyn_get_data to pftdyn_getdata
                                                            Add C13 #ifdef, remove 10c, 100c loss 
                                                            calculation
M models/lnd/clm/src/main/iniTimeConst.F90 ---------------- Add DGVM #ifdef
M models/lnd/clm/src/main/clm_atmlnd.F90 ------------------ Add C13 #ifdef
M models/lnd/clm/src/main/lnd_comp_mct.F90 ---------------- Add C13 #ifdef
M models/lnd/clm/src/main/CNiniSpecial.F90 ---------------- Add C13 #ifdef
M models/lnd/clm/src/main/clmtype.F90 --------------------- Add DGVM, C13 #ifdef,
                                                            harvest vars
M models/lnd/clm/src/main/histFldsMod.F90 ----------------- Add C13 #ifdef, correct SEEDN,
          Add: WOOD_HARVESTC, PRODUCT_CLOSS, C13_PRODUCT_CLOSS, WOOD_HARVESTN, PRODUCT_NLOSS
          Change long_name: DWT_PROD10C_GAIN, DWT_PROD100C_GAIN, DWT_CLOSS, DWT_NLOSS
M models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 --- Add C13 #ifdef
M models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ------- Add C13 #ifdef

Summary of testing:

  bluefire: hybrid and open-mp tests FAIL, pftdyn 1000 tests fail, most TBL tests FAIL as answers change
001 smA74 TSM.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
002 erA74 TER.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic ..........PASS
003 brA74 TBR.sh _sc_ds clm_std^nl_urb_br 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .......PASS
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
005 smL74 TSM.sh _sc_s clm_std^nl_urb 20020101:NONE:1800 1x1_brazil navy -10 arb_ic .............PASS
015 smB91 TSMruncase.sh .........................................................................PASS
021 smF92 TSM.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 96 cold .............PASS
022 erF92 TER.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 cold ..........PASS
023 brF92 TBR.sh 17p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 cold .......PASS
029 smCA4 TSM.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........PASS
030 erCA4 TER.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......PASS
031 brCA4 TBR.sh _sc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...PASS
032 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........PASS
046 smCA8 TSM.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...PASS
047 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...PASS
048 smNB4 TSM.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic PASS
049 erNB4 TER.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 59+100 arb_icPASS
050 brNB4 TBR.sh _mexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arb_PASS
051 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic PASS
065 smL78 TSM.sh _sc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -366 arb_ic ............PASS
066 blL78 TBL.sh _sc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic .............PASS
PASS  ERS.f45_g35.I_2000.bluefire
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
SFAIL ERH.f10_f10.I_1850_CN.bluefire.014926 <<< f10_f10 doesn't work for datm7 right now
PASS  ERP.f19_g16.I_CN_1850-2000.bluefire
  bangkok/lf95: Up to test 6 as follows
001 smA74 TSM.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
002 erA74 TER.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic ..........PASS
003 brA74 TBR.sh _sc_ds clm_std^nl_urb_br 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .......PASS
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
005 smA92 TSM.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
  breeze/gale/hail/gust/ifort:
001 smA74 TSM.sh _sc_ds clm_std^nl_urb 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
002 erA74 TER.sh _sc_ds clm_std^nl_urb 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic ..........PASS
003 brA74 TBR.sh _sc_ds clm_std^nl_urb_br 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .......PASS
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ............SKIPPED*
005 smD94 TSM.sh _persc_ds clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................PASS
006 erD94 TER.sh _persc_ds clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 72+72 cold ...............PASS
007 blD94 TBL.sh _persc_ds clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................SKIPPED*
008 smCA4 TSM.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........PASS
009 blCA4 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........SKIPPED*
010 smCA8 TSM.sh _sc_ds clm_std^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...PASS
011 blCA8 TBL.sh _sc_ds clm_std^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...SKIPPED*
012 smL54 TSM.sh _sc_ds clm_std^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_41

Changes answers relative to baseline: Yes, urban wasteheat limit increased to 100 W/m2
                                      and CN changes due to harvesting

===============================================================
Tag name:  clm3_6_41
Originator(s): kauff,erik
Date: Fri May 29 14:15:38 MDT 2009
One-line Summary: shrub mods, abort if nthreads > 1 (temporary, wrt bugz #965)

Purpose of changes: fix shrub height, disable threading (due to inexact restart)

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):
   - update externals for scripts and pio.

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

   - abort if num threads > 1
   main/controlMod.F90

   - Change CNVegStructUpdateMod.F90 according to Keith Oleson for shrubs.
     * First change tsai_min to be multiplied by 0.5 instead of 0.65, and
     * second to lower the tapering for shrubs (types 9 and 11) to 10 with 200 for other woody plants.

   main/aerdepMod.F90 ./aerdepMod.F90
   main/clmtype.F90 ./clmtype.F90
   main/clmtypeInitMod.F90 ./clmtypeInitMod.F90
   main/decompInitMod.F90 ./decompInitMod.F90
   main/driver.F90 ./driver.F90
   main/filterMod.F90 ./filterMod.F90
   main/histFileMod.F90 ./histFileMod.F90
   main/histFldsMod.F90 ./histFldsMod.F90
   main/initializeMod.F90 ./initializeMod.F90
   main/pftdynMod.F90 ./pftdynMod.F90
   main/subgridRestMod.F90

   biogeochem/CNAnnualUpdateMod.F90 ./CNAnnualUpdateMod.F90
   biogeochem/CNBalanceCheckMod.F90 ./CNBalanceCheckMod.F90
   biogeochem/CNEcosystemDynMod.F90 ./CNEcosystemDynMod.F90
   biogeochem/CNVegStructUpdateMod.F90 ./CNVegStructUpdateMod.F90

   biogeophys//BalanceCheckMod.F90 ./BalanceCheckMod.F90
   biogeophys//SurfaceAlbedoMod.F90 ./SurfaceAlbedoMod.F90
   biogeophys//UrbanInputMod.F90

Summary of testing:

  bluefire:
     PASS  ERS.f45_g35.I_2000.bluefire
     PASS  ERS.f19_g16.I_1850.bluefire
     PASS  ERS.f19_g16.I_1850-2000.bluefire
     PASS  ERB.f09_g16.I_1948_2004.bluefire
     SFAIL ERH.f10_f10.I_1850_CN.bluefire.b16+pretag
     * code exact restarts when threaded but using only 1 thread
  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable:

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
Tag name:  clm3_6_40
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Thu May 28 15:17:11 MDT 2009
One-line Summary: Fix openMP bug, add fndepdyn ncl script, fix interpinic for urban, add mkharvest to mksurfdata, new spinups, turn CLAMP on for CASA or CN

Purpose of changes:

Fix hybrid/open-MP mode bug, and testing for hybrid/open-MP. Add ncl script to
time-interpolate between 1850 and 2000 for fndepdat dataset, for fndepdyn version. Fix
interpinic for urban and cndv (jet/oleson/slevis). Update aerdepregrid.ncl and
ndepregrid.ncl scripts. Add mkharvest fields to mksurfdata. Remove furbinp and just use
fsurdat (leave forganic, so can remove to turn off).  Begin to add an option to build
with ccsm makefiles, for test-suite. Remove archiving, branching and resub from last run
script in models/lnd/clm/bld. New spin-up files for 1850 and 2000 for 1.9x2.5 and 1850
for CN. Make sure CLAMP is turned on for either CASA or CN. Change testing years to
2002-2003 so same as for ccsm tests.

Bugs fixed (include bugzilla ID): 954 (hybrid problem)
                                  959 (test suite NOT testing hybrid)
                                  965 (hybrid problem for high-proc count)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  967 (PIO bounds problem on jaguar)
                                  974 (bug in pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Start adding option to build with ccsm Makefiles

    By default turn on CLAMP when either CN or CASA is enabled

Describe any changes made to the namelist: Remove furbinp (use fsurdat)

List any changes to the defaults for the boundary datasets: New spinup files

   clmi.IQmp17_1950-01-01_1.9x2.5_gx1v6_simyr1850_c090509.nc
   clmi.IQmp17_2000-01-01_1.9x2.5_gx1v6_simyr2000_c090509.nc
   clmi.BCN_0093-01-01_1.9x2.5_gx1v6_simyr1850_c090527.nc

Describe any substantial timing or memory changes: Faster because of a fix to a I/O
                                                   write bug in datm7

Code reviewed by: self, forrest, mvertens, oleson, jet (relevant portions from them)

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm7, csm_share

   scripts   to scripts4_090527
   datm7     to datm7_090518
   csm_share to share3_090512

List all files eliminated:

D  models/lnd/clm/bld/build-streams -- Remove phasing out old run scripts, another 
                               version exists in scripts/ccsm_utils/Tools/build_streams

List all files added and what they do:

>>>>>>>>>>>>>>>>>>>> Add harvest fields to surface datasets
A  models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 ------------- New module to handle harvest fields

>>>>>>>>>>>>>>>>>>>> New files for ccsm_bld option
A  models/lnd/clm/bld/config_files/Macros.yong_g95 -------------- Macro's file for my Darwin Mac-OSX laptop
A  models/lnd/clm/bld/config_files/Macros.breeze_intel ---------- Macro's file for intel on breeze.
A  models/lnd/clm/bld/config_files/TopCCSMBldMakefile.in -------- Top level makefile for a ccsm_bld

>>>>>>>>>>>>>>>>>>>> New scripts to regrid all aerosol/nitrogen deposition resolutions and create 
                     transient Nitrogen-Deposition
A  models/lnd/clm/tools/ncl_scripts/runDepositionRegrid.pl ------ Run regrid for many resolutions for 
                                                                  aerosol and nitrogen deposition
A  models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl ---------- Linearly interpolate nitrogen-deposition 
                                                                  between 1850 and 2000 to get
                                                                  transient nitrogen deposition.

>>>>>>>>>>>>>>>>>>>> New serial and open-MP tests
A  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
A  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
A  models/lnd/clm/test/system/config_files/17p_vodsrsc_ds

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>>>> Fix hybrid bug (959), some tweaks, change dates to 2002/2003 to correspond with 
                     data checked in
M  models/lnd/clm/test/system/tests-driver.sh -------------------- Add -mach option to configure, 
                                                                  able to set CLM_THREADS as input
M  models/lnd/clm/test/system/tests_pretag_bluefire -------------- Move f19_g16 test closer to 
                                                                   beginning of list
M  models/lnd/clm/test/system/config_files/17p_cnsc_dh ----------- Turn supln off
M  models/lnd/clm/test/system/config_files/17p_cnsc_dm ----------- Turn supln off
M  models/lnd/clm/test/system/config_files/17p_cnsc_do ----------- Turn supln off
M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh --- Turn supln on
M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm --- Turn supln on
M  models/lnd/clm/test/system/mknamelist ------------------------- Set number of threads by input CLM_THREADS
M  models/lnd/clm/test/system/input_tests_master ----------------- Change all start dates to 2002/2003 to 
                                                                   correspond with data checked in
M  models/lnd/clm/test/system/README ----------------------------- Document that can set CLM_THREADS
M  models/lnd/clm/test/system/TSM.sh ----------------------------- Set number of threads by input 
                                                                   CLM_THREADS / handle cold start

>>>>>>>>>>>>>>>>>>>> Add harvest fields
M  models/lnd/clm/tools/mksurfdata/ncdio.F90 --------------------- Add nf_get_att_text
M  models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ----------------- Write out harvest fields
M  models/lnd/clm/tools/mksurfdata/mkvarpar.F90 ------------------ Formatting change
M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ------------------ Call mkharvest_init, mkharvest, 
                                                                   and add harvest fields to file
M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt ---------- Point to new landuse files
M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt ----- Point to new landuse files
M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt ---------- Point to new landuse files
M  models/lnd/clm/tools/mksurfdata/Srcfiles ---------------------- Add mkharvestMod.F90 file to list

>>>>>>>>>>>>>>>>>>>> Fix interpinic for urban
M  models/lnd/clm/tools/interpinic/interpinic.F90 ---- Changes from Keith Oleson/John Truesdale to 
                                                       handle urban
M  models/lnd/clm/tools/interpinic/runinit_ibm.csh --- Tweak sim_years, maxpft, and start times

>>>>>>>>>>>>>>>>>>>> Fix regrid scripts for new sim_yr
M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl --- Add sim_yr, document better, add time coord. 
                                                         variable
M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ----- Add sim_yr, figure out file-type from it, 
                                                         document better, transient files use 
                                                         lowercase lat, lon instead of LAT, LON.

>>>>>>>>>>>>>>>>>>>> Fix hybrid bug (959), deprecate old scripts
M  models/lnd/clm/bld/configure ----------------- By default turn on CLAMP when either CN or CASA is enabled, 
                                                  start adding ccsm_bld option, and -mach option.
M  models/lnd/clm/bld/mkSrcfiles ---------------- Get it to match scripts version of same thing
M  models/lnd/clm/bld/mkDepends ----------------- Get it to match scripts version of same thing, 
                                                  remove Darwin kludge for assert.h (as has been renamed)
M  models/lnd/clm/bld/queryDefaultXML.pm -------- Handle return characters in values
M  models/lnd/clm/bld/config_files/Makefile.in -- Get rid of SGI, Nec-SX6, ES, Cray-X1 build options, 
                                                  tweak Linux build
M  models/lnd/clm/bld/listDefaultNamelist.pl ---- Add option to do all resolutions, correct prints 
M  models/lnd/clm/bld/build-namelist ------------ Add drv_in namelist "ccsm_pes" setting threads to 
                                                  OMP_NUM_THREADS value, remove furbinp file
M  models/lnd/clm/bld/create_newcase ------------ Document that this script is deprecated
M  models/lnd/clm/bld/run-ibm.csh --------------- Remove archiving, change defaults, 
                                                  add notes that script is deprecated
M  models/lnd/clm/bld/README -------------------- Remove files taken out
M  models/lnd/clm/bld/config_files/config_sys_defaults.xml ----- Add default mach settings
M  models/lnd/clm/bld/config_files/config_definition.xml ------- Add mach and ccsm_bld settings
M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Remove furbinp, add task thread layouts 
                                                                 for ccsm_pe namelist
M  models/lnd/clm/bld/namelist_files/datm.streams.template.xml - Make same as datm7 version 
                                                                 (except using %p instead of DIN_LOC_ROOT)
M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New finidat spinup files for 1.9x2.5, 
                                                                 1850, 2000 and 1850-CN

>>>>>>>>>>>>>>>>>>>> Changes from Forrest Hoffman to fix hybrid issues on jaguar (bug 954 and more)
M  models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 -- Add lbc,ubc
M  models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 -- Add lbc, ubc, lbp, ubp
M  models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 -- Explicitly dimension filters to "ubp-lbp+1" 
                                                          rather than ":"

>>>>>>>>>>>>>>>>>>>> Fix hybrid issues (bug 954), add #ifdefs to clmtype so can use CLAMP with CASA, 
                     remove CSD and USE_OMP junk
M  models/lnd/clm/src/main/driver.F90 ------------------- Remove CSD directives and USE_OMP.
                                                          Add more variables to private for OMP loops 
                                                          (forrest) (bug 954)
                                                          Pass array bounds to dynland_hwcontent 
                                                          (mvertens) (bug 954).
                                                          Pass array bounds needed by Forrest's 
                                                          biogeochem changes above.
M  models/lnd/clm/src/main/decompInitMod.F90 ------------ Make a line shorter (with continue lines)
M  models/lnd/clm/src/main/subgridRestMod.F90 ----------- Make a line shorter (with continue lines)
M  models/lnd/clm/src/main/aerdepMod.F90 ---------------- Remove generic save statement, add save for 
                                                          each data instantiation
M  models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- Add #ifdefs from casafire branch to limit 
                                                          clmtype size
M  models/lnd/clm/src/main/initializeMod.F90 ------------ Remove USE_OMP and CSD directives
M  models/lnd/clm/src/main/pftdynMod.F90 ---------------- #ifdef pftdyn_cnbal
M  models/lnd/clm/src/main/histFileMod.F90 -------------- Remove CSD directives
M  models/lnd/clm/src/main/controlMod.F90 --------------- Remove furbinp, remove UNICOSMP and SSP complexity
M  models/lnd/clm/src/main/filterMod.F90 ---------------- Remove CSD directives
M  models/lnd/clm/src/main/clmtype.F90 ------------------ Add #ifdefs from casafire branch to limit 
                                                          clmtype size
M  models/lnd/clm/src/main/histFldsMod.F90 -------------- Remove KO comments

>>>>>>>>>>>>>>>>>>>> Fix hybrid issues (bug 954 and 965), use fsurdat instead of furbinp file for urban input
M  models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ---- Pass in array bounds (mvertens) (bug 954)
M  models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ------ Use fsurdat instead of separate furbinp file
M  models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 --- Remove num_solar logic that caused an early exit 
                                                          (bug 965)

Summary of testing:

  bluefire: All PASS except
007 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
008 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
011 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 7
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -1100 cold FAIL! rc= 8
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -100 cold FAIL! rc= 4
017 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 7
018 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 6
022 erF92 TER.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 cold ..........FAIL! rc= 7
023 brF92 TBR.sh 17p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 cold .......FAIL! rc= 6
009 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
013 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
021 erC61 TER.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 10+38 cold ..............FAIL! rc= 7
022 brC61 TBR.sh _sc_dh clm_std^nl_urb_br 20021001:NONE:1800 1.9x2.5 gx1v6 -3+-3 cold ...........FAIL! rc= 6
025 erH51 TER.sh 17p_cnnsc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold ......FAIL! rc= 7
027 blH51 TBL.sh 17p_cnnsc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
029 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
030 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
031 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
032 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
036 erLD1 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:1800 2.65x3.33 USGS -5+-5 arb_ic ...........FAIL! rc= 7
007 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 6
  jaguar: All PASS except
005 smA91 TSM.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10 <<< bug 967
006 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smE92 TSM.sh 4p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 96 arb_ic ............FAIL! rc= 10 <<< bug 967
010 erE92 TER.sh 4p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 5
011 brE92 TBR.sh 4p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 5
013 smEH2 TSM.sh 4p_vodsrsc_dm clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 10 <<< bug 967
014 erEH2 TER.sh 4p_vodsrsc_dm clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 5
015 brEH2 TBR.sh 4p_vodsrsc_dm clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 5
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
021 smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 20020101:NONE:1800 4x5 gx3v5@2000 96 cold .............FAIL! rc= 8
022 erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 20020101:NONE:1800 4x5 gx3v5@2000 10+38 cold ..........FAIL! rc= 5
023 brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 20020101:NONE:1800 4x5 gx3v5@2000 72+72 cold ..........FAIL! rc= 5
025 smJ62 TSM.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10 <<< bug 967
026 erJ62 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
027 brJ62 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
034 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
035 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
036 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
  lightning/pathscale: All PASS except
009 smA91 TSM.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
010 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
011 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
012 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 4
017 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
018 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
019 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
020 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
021 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
023 erJ42 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 10+38 cold ...........FAIL! rc= 7
024 brJ42 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 10x15 USGS 72+72 cold ........FAIL! rc= 6
026 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
027 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
028 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
029 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 4
032 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
035 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
036 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
037 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 5
  bangkok/lf95:
024 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
025 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
026 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
052 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
055 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
056 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS up to the pftdyn test
016 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_39

Changes answers relative to baseline: No bit-for-bit (unless compare cases using the new vs old spin-up files)

===============================================================
===============================================================
Tag name:  clm3_6_39
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Thu May  7 14:18:08 MDT 2009
One-line Summary: Bug fix for script version and maxpatchpft back to numpft+1

Purpose of changes: Bug fixes for two issues, script version to set CLM_DEMAND="null" instead of none
                    And reset default maxpatch_pft=numpft+1 instead of 4 which crept in on clm3_6_38

Bugs fixed (include bugzilla ID): 943 (CLM_DEMAND="null")
                                  946 (default maxpatchpft)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Change default for maxpatch_pft back to numpft+1

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts

   scripts to scripts4_090506 (default CLM_DEMAND is null rather than none)

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/config_files/config_definition.xml ----- maxpft=numpft+1
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml - Allow sim_year=1000 for test datasets
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml Add co2_ppmv for test_yr=1000
M      models/lnd/clm/src/main/driver.F90 ------------------------ Don't write out message about dynamic pft every time-step
M      models/lnd/clm/src/main/lnd_comp_mct.F90 ------------------ Set iulog for non-masterproc processors
M      models/lnd/clm/test/system/input_tests_master ------------- Put year-range for pftdyn 10x15 tests

Summary of testing: Limited

CLM tag used for the baseline comparison tests if applicable: clm3_6_38

Changes answers relative to baseline: Default number of PFT's is numpft+1 instead of 4.

===============================================================
===============================================================
Tag name:  clm3_6_38
Originator(s):  erik (erik)
Date: Wed May  6 00:20:37 MDT 2009
One-line Summary: New fsurdat for other resolutions, bug-fixes, deep wetlands to bedrock, new spinups for 1.9x2.5 1850, 2000

Purpose of changes:

New surfdata for all resolutions, and new pftdyn test datasets (1x1 and 10x15).  Make sure
furbinp/forganic/fsurdata consistent. New 1850 and 2000 spin-up for 1.9x2.5. Add in field
to restart files needed for urban interpinic. Change deep wetlands to bedrock. Remove
some output for urban and aerdep. fcov changes from Sean. Bring in history change from
Dave (so only output static 3D fields on first h0 file). Bug fix for RTM bug from Keith
O.

Bugs fixed (include bugzilla ID): 941 (RTM output 6X too low)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  943 (CLM_DEMAND="null")
                                  946 (default maxpatchpft)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:

Describe any changes made to the namelist: Remove step2init, add irad from datm
                                           factorfn now null instead of unused.

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: None

Code reviewed by: swensosc, oleson, dlawren

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share,
drv, datm7, mct, pio

    scripts   to scripts4_090505c
    drv       to vocemis-drydep08_drvseq3_0_16
    datm7     to datm7_090505b
    csm_share to share3_090429
    pio       to pio40_prod

List all files eliminated: Remove old run scripts, pt-urban input data

D      models/lnd/clm/test/system/nl_files/clm_urb -- remove since urban is default
D      models/lnd/clm/tools/ncl_scripts/addgrid2spointurban.ncl -- only needed to create
                                                                   urban pt surface datasets
D      models/lnd/clm/tools/ncl_scripts/clmi_increasesoillayer.ncl - only needed to go
                                                 from 10 layer to 15 layer finidat files.
D      models/lnd/clm/bld/urban_input
D      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc
D      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc
D      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc
D      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc
D      models/lnd/clm/bld/urban_input/surfdata_1x1_tropicAtl_urb3den_simyr2000_c090320.nc
D      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr2000_c090320.nc
D      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc
D      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr1850_c090317.nc
D      models/lnd/clm/bld/run-pc.csh
D      models/lnd/clm/bld/run-lightning.csh

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>> configure defaults for everything on, update for new datm7
                 new sim_year for pftdyn test datasets. New fsurdat for all
                 resolutions, furbinp and forganic=fsurdat.
M      models/lnd/clm/bld/configure -------------------------------- document defaults
correctly
M      models/lnd/clm/bld/config_files/config_definition.xml ------- defaults for:
                  dust: on, maxpft:numpft+1, progsslt:on, rtm:on
M      models/lnd/clm/bld/listDefaultNamelist.pl ------------------- all -res all option
M      models/lnd/clm/bld/clm.cpl7.template ------------------------ use defaults for
                                   dust, progsslt, and rtm. Don't demand furbinp, or forganic
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Remove step2init,
change defaults for factorfn, and sim_year (for test ranges 1000-1002, and 1000-1004)
M      models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml  Factorfn=null, rm step2init
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New 1.9x2.5 finidat, 
                                 new fsurdat for all resolutions, 
M      models/lnd/clm/bld/build-namelist --------------------------- furbinp,forganic now
longer clm_demand
                     furbinp = fsurdat, forganic = fsurdat, fsurdat no longer need
                     furbinp and fpftdyn, finidat doesn't need furbinp, remove step2init
>>>>>>>>>>>>>>>>
M      models/lnd/clm/src/main/aerdepMod.F90 ---------------- log output only to masterproc
M      models/lnd/clm/src/main/iniTimeConst.F90 ------------- remove urban log output
M      models/lnd/clm/src/main/subgridRestMod.F90 ----------- add cols1d_ityp
M      models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- add fsat
M      models/lnd/clm/src/main/iniTimeConst.F90 ------------- make deep wetlands bedrock
M      models/lnd/clm/src/main/histFileMod.F90 -------------- only write out static fields 
                                                              to h0 tapes on nstep=0
M      models/lnd/clm/src/main/clmtype.F90 ------------------ add fcov and fsat
M      models/lnd/clm/src/main/histFldsMod.F90 -------------- add fsat to history files
M      models/lnd/clm/src/main/mkarbinitMod.F90 ------------- make wetlands bedrock
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 - make wetlands bedrock
M      models/lnd/clm/src/biogeophys/UrbanInitMod.F90 ------- add fcov/fsat
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------ add fcov/fsat
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 --- add fcov/fsat
M      models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 --- add fcov/fsat
M      models/lnd/clm/src/riverroute/RtmMod.F90 ------------- Fix RTM bug so accumulate 
                                                              during RTM intervals
>>>>>>>>>>>>>>>> Remove run-pc/run-lighning tests, remove CLMNCEP, update to beta15
                 lightning no parallel gmake, no clm_demand for furbinp, change clm_urb
                to clm_std, add sim_year for pftdyn tests, add serial vodsrsc tests
M      models/lnd/clm/test/system/tests_pretag_bangkok
M      models/lnd/clm/test/system/tests_posttag_lightning
M      models/lnd/clm/test/system/test_driver.sh --------- update to beta15, lightning gmake no parallel
M      models/lnd/clm/test/system/mknamelist ------------- remove CLMNCEP option
M      models/lnd/clm/test/system/TCSruncase.sh ---------- remove lightning, pc option
M      models/lnd/clm/test/system/nl_files/clm_per ------- no clm_demand on furbinp
M      models/lnd/clm/test/system/nl_files/clm_per0 ------ no clm_demand on furbinp
M      models/lnd/clm/test/system/nl_files/clm_urb1pt ---- no clm_demand on furbinp
M      models/lnd/clm/test/system/input_tests_master ----- change clm_urb to clm_std
                                      add sim_year for pftdyn tests, add serial vodsrsc
                                      tests
>>>>>>>>>>>>>>>> Change urban pt datasets from 1850 to 2000 sim_year.
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl

Summary of testing: limited testing on breeze, lightning, and bangkok

  bluefire: All PASS except TBL up to test 27

CLM tag used for the baseline comparison tests if applicable: clm3_6_37

Changes answers relative to baseline: Yes, RTM 6X higher, surface datasets different
                                      deep wetlands now bedrock

===============================================================
===============================================================
Tag name:  clm3_6_37
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Mon Apr 27 23:27:26 MDT 2009
One-line Summary: Update faerdep dataset for 1.9x2.5 to point to version cice is using for 1850 and 2000

Purpose of changes: Point to same version of faerdep datasets used by cice for 1.9x2.5 1850/2000
    This was needed for the ccsm4_0_beta15 tag.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/


Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    New faerdep datasets for 1.9x2.5 used by cice (only difference is time coord)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts to scripts4_090427b

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

Summary of testing: None, other than build-namelist for 1.9x2.5 sim_year=1850/2000

CLM tag used for the baseline comparison tests if applicable: clm3_6_36

Changes answers relative to baseline: Should be identical

===============================================================
===============================================================
Tag name:  clm3_6_36
Originator(s):  erik (erik)
Date: Mon Apr 27 14:10:13 MDT 2009
One-line Summary: Handle transient aersol, make maxpatchpft=numpft+1 default, new datasets for 1.9x2.5 and 0.9x1.25, change doalb

Purpose of changes:

Changes so can do aerosol transient time-series (1850-2000) (kauff). New surfdata
datasets for 1.9x2.5 and 0.9x1.25 (1850 and 2000). New 1850-2000 pftdyn dataset for
1.9x2.5. New aerosol and ndep for 1.9x2.5 (1850 and 2000). Change to doalb from Mariana.
Make maxpatchpft=numpft+1 the default and remove all finidat files

Bugs fixed (include bugzilla ID): 936 (create_test bug)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: maxpatchpft default is now numpft+1

Describe any changes made to the namelist: build-namelist now allows 1850-2000 for sim_year for transient datasets
    aerdep now chooses a transient dataset for this case as well

List any changes to the defaults for the boundary datasets:
    New aerosol deposition and nitrogen deposition datasets for 1.9x2.5 and transient
    New pftdyn dataset for 1.9x2.5 for 1850-2000
    New surfdata for 1.9x2.5 and 0.9x1.25

Describe any substantial timing or memory changes: None

Code reviewed by: self, kauff (aer transient), mvertens (doalb changes)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7, and pio
    scripts to scripts4_090424
    drv     to vocemis-drydep08_drvseq3_0_14
    datm7   to datm7_090406
    pio     to pio38_prod

List all files eliminated: None

List all files added and what they do: Add file for generic settings NOT used by a specific model component

A      models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>>>>>>>> Add cice decomp info, use xml input file for PE change
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_10x15_dh
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_4x5_dh
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_1.9x2.5_dh
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_0.9x1.25_dh
M      models/lnd/clm/test/system/TCT_ccsmseq.sh --- use xml file format for PE change
>>>>>>>>>>>>>>>>>>>>>>>> Base LANDMASK on SUM(PCT_PFT) rather than LANDFRAC_PFT
M      models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl
>>>>>>>>>>>>>>>>>>>>>>>> Add 1850-2000 simyr option
M      models/lnd/clm/bld/config_files/config_definition.xml ------ maxpatchpft default
is numpft+1
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml -- Add 1850-2000 to valid sim_year values
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove finidat files, 
                                              remove data in namelist_defaults_overall,
                                              new fsurdat,forganic,furbinp for 1.9x2.5 and 0.9x1.25
                                              1850-2000 PFT dataset for 1.9x2.5
                                              new aerdep and ndep datasets for 1.9x2.5 and 0.9x1.25, 
                                              and transient 1850-2000 aerdep datasets
M      models/lnd/clm/bld/build-namelist ----------- Be careful if datasets are picked
based on full sim_year (which could be 1850-2000) or the first year (1850 finidat,
fsurdat files)
M      models/lnd/clm/bld/listDefaultNamelist.pl --- Use list of defaults files
M      models/lnd/clm/bld/queryDefaultNamelist.pl -- Use list of defaults files, remove scpto option
M      models/lnd/clm/bld/queryDefaultXML.pm ------- Use list of defaults files
>>>>>>>>>>>>>>>>>>>>>>>> doalb changes from Mariana Vertenstein (branches/new_doalb)
>>>>>>>>>>>>>>>>>>>>>>>> remove caldayp1 use next_swcday sent from atm
M      models/lnd/clm/src/biogeochem/DGVMMod.F90 ---------- remove caldayp1, send nextsw_cday
M      models/lnd/clm/src/main/clm_comp.F90 --------------- don't calcualte caldayp1, calc declinp1 based on nextsw_cday
M      models/lnd/clm/src/main/driver.F90 ----------------- Pass nextsw_cday instead of caldayp1
M      models/lnd/clm/src/main/initSurfAlbMod.F90 --------- Don't pass calday and declin
M      models/lnd/clm/src/main/lnd_comp_mct.F90 ----------- Remove never_doAlb logic, pass nextsw_cday down
M      models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 - cosz based on nextsw_cday NOT caldayp1
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 --------- Do NOT pass calday, declin
>>>>>>>>>>>>>>>>>>>>>>>> aerdep changes from Brian Kauffman (cbgcdev05_clm3_6_35)
M      models/lnd/clm/src/main/aerdepMod.F90 -- Time-interpolation done each time-step (rather than just each day) method slightly different.
                                                Also allows transient file where uses first year 
                                               until reaches middle years, then after last year continues to use last year.

Summary of testing:

  bluefire: All PASS except TBL and... up to test 62
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
038 smCA4 TSM.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 10
039 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 5
040 brCA4 TBR.sh _sc_ds clm_urb^nl_urb_br 19981001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...FAIL! rc= 5
042 smCA8 TSM.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 10
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_6_35

Changes answers relative to baseline: Yes -- default for maxpatchpft is numpft+1 
                                             rather than 4
                                      And aersol time-interpolation is different
                                      method is different and also does interpolation
                                      for every time-step NOT held constant each day.

===============================================================
===============================================================
Tag name:  clm3_6_35
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Mon Apr 20 15:19:17 MDT 2009
One-line Summary: Fix major logic bug in mksurfdata

Purpose of changes: Fix major logic bug in mksurfdata (bug 934) which requires us to recreate any surface datasets
                    created with clm3_6_32. The bug zero'd out LAI for some PFT's and biased the LAI values
                    (LAI, SAI, veg-bot, veg-top).

 This is a note from dlawren
   "I have taken a look at the new surface files and they look correct to me.  LAI
   is defined everywhere.  I did a quick test using this surface dataset with a
   spunup file from Keith's prior 1850 simulation and it worked fine (no errors).
    I also confirmed that indeed the gridbox mean LAI is different by up to about
   +-0.5.  In most places the difference is below +-0.1."


Bugs fixed (include bugzilla ID): 934 (pftdyn logic bug)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Self (but new 1.9x2.5 surface dataset checked by dlawren and lawrence)

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: 

A      models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl --- Create raw pftdyn test datasets, so can create new ones.

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/tools/mksurfdata/mklaiMod.F90 ---------------- Fix pftdyn logic error.
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---------------- Move soil-text calc higher up, allow more space for filenames
M      models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig ------ Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.regional --------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn ----------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.singlept --------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist --------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl --------------- Get T62, 2x2.5 and qtr deg res's, only do 2000 for urban single-point
M      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt --- Allow larger size for filenames
M      models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt -------- Allow larger size for filenames
M      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt -------- Allow larger size for filenames

MM     models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ----------- Add svn keywords
MM     models/lnd/clm/tools/ncl_scripts/clmi_increasesoillayer.ncl - Add svn keywords
M      models/lnd/clm/tools/ncl_scripts/README --------------------- Update doc on files

Summary of testing: No testing except for mksurfdata on bluefire

001 sm774 TSMtools.sh mksurfdata tools__ds singlept .............................................PASS
002 sm754 TSMtools.sh mksurfdata tools__s globalirrig ...........................................PASS
003 sm756 TSMtools.sh mksurfdata tools__s pftdyn ................................................PASS

CLM tag used for the baseline comparison tests if applicable: clm3_6_34

Changes answers relative to baseline: no bit-for-bit (other than mksurfdata)

===============================================================
===============================================================
Tag name:  clm3_6_34
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Sun Apr 19 09:34:43 MDT 2009
One-line Summary: Fix bangkok urban bug

Purpose of changes: Fix urban bug found from bangkok testing (#927) and eliminate potential water balance error

Bugs fixed (include bugzilla ID): 927

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  934 (pftdyn logic bug)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: myself, Erik Kluzek, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 .... Change loop over all columns to filter_nourbanc
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 .... Change some net_solar fields from intent(out) to intent(inout).
              add soilalpha_u restriction on soil evaporation/transpiration selection for pervious road (this second
              change is bit for bit for all bluefire/bangkok testing, but will prevent small water balance errors in
              special situations (e.g., perpetual January simulations)

Summary of testing:

  bluefire: All PASS except:
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
072 blJ61 TBL.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 4
082 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
084 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
086 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
088 bl756 TBLtools.sh mksurfdata tools__s pftdyn ................................................FAIL! rc= 7
093 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
094 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
095 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
096 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
097 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95: All PASS except:
008 blA92 TBL.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
011 blD91 TBL.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 5
033 blH52 TBL.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
034 smJ92 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 cold ...............FAIL! rc= 10
035 erJ92 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 cold ............FAIL! rc= 5
036 brJ92 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 cold .........FAIL! rc= 5
037 blJ92 TBL.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 cold ...............FAIL! rc= 4
041 blL51 TBL.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
048 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
049 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
052 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
053 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_33

Changes answers relative to baseline: No, bit for bit

===============================================================
===============================================================
Tag name:  clm3_6_33
Originator(s):  erik (erik)
Date: Thu Apr 16 14:45:23 MDT 2009
One-line Summary: Bring in dynpft changes from cbgc branch

Purpose of changes: New method for dealing with dynamic land-use changes

   morph routine casa() in casa_ecosystemDyn(), so casa is more similar to CN & DGVM,
   and prepares casa code for adding additional carbon flux functionality.
   Larger plan is to duplicate these and other mods from casafire branch on this branch.
   Add new method for conserving heat & water wrt dynamic land use.
   Conserves heat & water for any change in the land-unit, column, or pft arrangment. 
   when pftdyn is activated, "normalize" sum of new pft weights in a column
   to be the same as the sum of the old pft weights
   otherwise BalanceCheck will generate water/heat balance errors.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  927 (problem with urban on bangkok/lahey)
                                  934 (pftdyn logic bug)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by:
  B. Kauffman, D. Lawrence, G. Bonan, K. Oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

  D    biogeochem/CASASummary.F90 ................ code relocated inside CASAMod.F90

List all files added and what they do:

  A    main/dynlandMod.F90 ............... new routine is here

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>> models/lnd/clm/src
  M    biogeochem/CASAMod.F90 .......... Add in CASASummary.F90, add casa_recosystemDyn subroutine
  M    main/pftdynMod.F90 .............. when pftdyn is active, "normalize" pft weights in a column
  M    biogeophys/BalanceCheckMod.F90 .. improved imbalance write statement
  M    main/driver.F90 ................. CASAsummary, CASAPhenology now called in 
                                         casa_ecocsystemDyn()
  M    main/initSurfAlbMod.F90 ......... casa() renamed casa_ecocsystemDyn()
  M    main/driver.F90         ......... call new routine here
  M    main/clmtype.F90        ......... define new fields
  M    main/clmtypeInitMod.F90 ......... init   new fields
  M    main/histFldsMod.F90    ......... put new fields on hist file
  M    main/clm_atmlnd.F90     ......... heat  imbalance is applied here 
                                         (to latent heat flux)
  M    riverroute/RtmMod.F90   ......... water imbalance is applied here (to runoff)

Summary of testing:

  bluefire: All PASS except pftdyn TBL tests and ...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
093 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
094 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
095 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
096 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
097 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  jaguar: All PASS except
005 smA91 TSM.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA91 TER.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA91 TBR.sh _sc_dh clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smE92 TSM.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ............FAIL! rc= 10
010 erE92 TER.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 5
011 brE92 TBR.sh 4p_vodsrsc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 5
013 smEH2 TSM.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 10
014 erEH2 TER.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 5
015 brEH2 TBR.sh 4p_vodsrsc_dm clm_urb^nl_urb_br 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 5
021 smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 96 cold .............FAIL! rc= 10
022 erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 10+38 cold ..........FAIL! rc= 5
023 brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 72+72 cold ..........FAIL! rc= 5
025 smJ62 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
026 erJ62 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
027 brJ62 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
034 smLI2 TSM.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
035 erLI2 TER.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
036 brLI2 TBR.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
038 erP65 TSM_ccsmseq.sh ERS f19_g15 I ..........................................................FAIL! rc= 4
039 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  lightning/pathscale: All PASS except pftdyn TBL tests and ...
011 erA91 TER.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
012 brA91 TBR.sh _sc_dh clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
018 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
019 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
020 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
022 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
023 smJ42 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 10x15 USGS 96 cold ..............FAIL! rc= 10
024 erJ42 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 10x15 USGS 10+38 cold ...........FAIL! rc= 5
025 brJ42 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 10x15 USGS 72+72 cold ........FAIL! rc= 5
027 smL51 TSM.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
028 erL51 TER.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
029 brL51 TBR.sh _sc_dh clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
036 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
037 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
038 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
  bangkok/lf95: All PASS except pftdyn TBL tests and ...
005 smA92 TSM.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA92 TER.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA92 TBR.sh _sc_dm clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smD91 TSM.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 10
010 erD91 TER.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 5
030 smH52 TSM.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 96 cold .........FAIL! rc= 10
031 erH52 TER.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 10+38 cold ......FAIL! rc= 5
032 brH52 TBR.sh 17p_cnnsc_dm clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS@2000 72+72 cold ...FAIL! rc= 5
034 smJ92 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 cold ...............FAIL! rc= 10
035 erJ92 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 cold ............FAIL! rc= 5
036 brJ92 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 cold .........FAIL! rc= 5
038 smL51 TSM.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
039 erL51 TER.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
040 brL51 TBR.sh _sc_dh clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
048 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
049 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
052 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
053 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS

CLM tag used for the baseline comparison tests if applicable: clm3_6_33

Changes answers relative to baseline: Only for pftdyn mode

===============================================================
================================================================================
Tag name:  clm3_6_32
Originator(s):  dlawren, erik, jet
Date: Fri Apr 10 14:38:52 MDT 2009
One-line Summary: Add irrigation area to mksrfdata, fix high-res and pftdyn problems

Purpose of changes:  Add irrigation area to mksrfdat tool, for irrigated area copy PFT=15 LAI and heights
	into PFT=16, PFT=15 is unirrigated crop, PFT=16 is irrigated crop
   fix pftdyn mode for mksurfdata (erik), bug fixes to mksurfdata from John Truesdale
   script changes to make gx1v6 default.

Bugs fixed (include bugzilla ID): 919 (pftdyn mode in mksurfdata)
                                  821 (problems running mksurfdata at high-res)
                                  357 (codes replicated in tools)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  927 (problem with urban on bangkok/lahey)
                                  934 (pftdyn logic bug)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Building with PIO is on by default

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: gx1v6 for and 0.47 res
   fix 5x5_amazon surface dataset.

Describe any substantial timing or memory changes: None

Code reviewed by: self, jet, dlawren

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7,
csm_share, esmf_wrf_timemgr

  scripts   to scripts4_090406
  drv       to vocemis-drydep08_drvseq3_0_13
  datm7     to datm7_090403
  csm_share to share3_090407
  timemgr   to esmf_wrf_timemgr_090402

List all files eliminated: Remove text urban input files, globalurban mksurf namelist --
as urban is default.

D      models/lnd/clm/bld/urban_input/metropolis_fluxes.txt
D      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.txt
D      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.txt
D      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.txt
D      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.txt
D      models/lnd/clm/tools/mksurfdata/mksurfdata.globalurban 

List all files added and what they do:

A      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt . List of dynamic PFT files from 1850 to 2005
A      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt ...... Dynamic PFT file for 1850
A      models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt ...... Dynamic PFT file for 2000
A      models/lnd/clm/tools/mksurfdata/mkirrig.F90 ............... calculates irrigated area from irrigated area on input dataset
A      models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig .... namelist file pointing to irrigated area source file
A      models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml datm namelist info
A      models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml  drv namelist info

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Add firrig option, fix bugs, fix pftdyn mode
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90 .............. Add mksrf_firrig
M      models/lnd/clm/tools/mksurfdata/mklaiMod.F90 .............. Copy LAI in PFT=15 into PFT=16 if mksrf_irrig /= ''
                                                        use standard averaging for pftdyn
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ............. Add mksrf_firrig
M      models/lnd/clm/tools/mksurfdata/README
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90 .............. Add pct_irr to surface dataset if mksrf_irrig /= ''
M      models/lnd/clm/tools/mksurfdata/Srcfiles
M      models/lnd/clm/tools/mksurfdata/mkpftMod.F90 .............. Adjust PCT_PFT for non-irrigated (PFT=15) and irrigted (PFT=16) crops
M      models/lnd/clm/tools/mksurfdata/mkglcmec.F90 .............. Check for divide by zero (JT)
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90 .............. Initialize files to blank
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ............. Only output data needed for pftdyn files
M      models/lnd/clm/tools/mksurfdata/mkorganic.F90 ............. Allocate bug-fix (JT)
M      models/lnd/clm/tools/mksurfdata/mkurban.F90 ............... bug-fix (JT)
M      models/lnd/clm/tools/mksurfdata/areaMod.F90 ............... bug-fix (JT) 
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90 .............. add mkirrig, changes for pftdyn
M      models/lnd/clm/tools/mksurfdata/Srcfiles .................. add mkirrig.F90
M      models/lnd/clm/tools/mksurfdata/mkpftMod.F90 .............. if firrig => irrig/non-irrig crops
>>>>>>>>>>>>>>> Always create files using the transient input raw datasets
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist
M      models/lnd/clm/tools/mksurfdata/mksurfdata.regional 
M      models/lnd/clm/tools/mksurfdata/mksurfdata.singlept
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist
>>>>>>>>>>>>>>> Add needed fields (mask, LANDMASK) to urban datasets
M      models/lnd/clm/tools/ncl_scripts/addgrid2spointurban.ncl
>>>>>>>>>>>>>>> Turn pio on, work with defaults
M      models/lnd/clm/bld/configure
M      models/lnd/clm/bld/config_files/config_definition.xml
M      models/lnd/clm/bld/run-ibm.csh
M      models/lnd/clm/bld/clm.cpl7.template
M      models/lnd/clm/bld/build-namelist
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
>>>>>>>>>>>>>>> Add mask,PCT_URBAN and LANDMASK to urban point input files
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc ..... Add mask
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc ....... Add mask
M      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc ..... Add mask
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc .... Add mask
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc .... Changes from Keith, add mask
>>>>>>>>>>>>>>> 
M      models/lnd/clm/test/system/tests_pretag_bluefire - add pftdyn test
M      models/lnd/clm/test/system/test_driver.sh -------- use beta14
M      models/lnd/clm/test/system/input_tests_master ---- fix TBR tests, 
M      models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh - remove eshr
M      models/lnd/clm/test/system/TSM.sh ---------------- fix 
M      models/lnd/clm/test/system/tests_pretag_bangkok -- put some serial tests first
M      models/lnd/clm/test/system/CLM_runcmnd.sh -------- remove bluesky
>>>>>>>>>>>>>>> Always use T_REF2M NOT t_ref2m
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90

Summary of testing:

  bluefire: All PASS except
004 blA74 TBL.sh _sc_ds clm_urb^nl_urb 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 5
009 blA91 TBL.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
012 blD91 TBL.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 7
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 cold ........FAIL! rc= 5
019 blE91 TBL.sh 4p_vodsrsc_dh clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 5
024 blF92 TBL.sh 17p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 5
028 blF93 TBL.sh 17p_vodsrsc_do clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 5
032 blEH1 TBL.sh 4p_vodsrsc_dh clm_urb^nl_urb 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 5
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
041 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
043 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
047 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 7
051 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v6 48 cold .................FAIL! rc= 7
055 blH51 TBL.sh 17p_cnnsc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
062 blL78 TBL.sh _sc_s clm_urb^nl_urb 19971231:NONE:1800 1x1_brazil navy -10 arb_ic .............FAIL! rc= 5
065 smL83 TSM.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 10
066 erL83 TER.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ..........FAIL! rc= 5
067 brL83 TBR.sh _sc_do clm_urb^nl_urb_br 19980115:NONE:3600 5x5_amazon navy -10+-10 arb_ic .....FAIL! rc= 5
068 blL83 TBL.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 4
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
072 blJ61 TBL.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 4
073 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 10
077 blJ74 TBL.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ..FAIL! rc= 5
084 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
086 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
088 bl756 TBLtools.sh mksurfdata tools__s pftdyn ................................................FAIL! rc= 7
093 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
094 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
095 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
096 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
097 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
    jaguar: ALL FAIL except
029 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....PASS
    breeze/pathscale: All PASS
    bangkok/lahey: All PASS except
005 smA92 TSM.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA92 TER.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA92 TBR.sh _sc_dm clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smD91 TSM.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 10
010 erD91 TER.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 5
014 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 7
030 smH52 TSM.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 96 cold .........FAIL! rc= 10
031 erH52 TER.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 10+38 cold ......FAIL! rc= 5
032 brH52 TBR.sh 17p_cnnsc_dm clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS@2000 72+72 cold ...FAIL! rc= 5
034 smJ92 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 cold ...............FAIL! rc= 10
035 erJ92 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 cold ............FAIL! rc= 5
036 brJ92 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 cold .........FAIL! rc= 5
038 smL51 TSM.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
039 erL51 TER.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
040 brL51 TBR.sh _sc_dh clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
052 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
053 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_6_30

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_31
Originator(s):  erik (erik)
Date: Wed Apr  1 00:58:15 MDT 2009
One-line Summary: New surface datasets for 1850,2000, support for 0.9x1.25_gx1v6, urban always on. New pft-physiology file. Update scripts so remove some CLM_ env_conf vars. Fix CN for urban/pftdyn.

Purpose of changes:

New surface datasets for 1850,2000. sim_year can be 1850 or 2000
(1870 no longer supported), support for 0.9x1.25_gx1v6. Demand furbinp (urban always on),
wasteheat='ON_WASTEHEAT' by default. Change cpl7 template so can either do a cold start
or require a finidat file (cold or startup). New pft-physiology file for CN used by 
everything. Update scripts so remove some CLM_ env_conf vars: CLM_BGC, CLM_DYNNDEP, 
CLM_DYNPFT, CLM_CO2_TYPE, remove CLMNCEP from scripts/datm (keeping CLM_QIAN mode). 
Change final CN loop to go over soil filter -- so CN,CASA,DGVM can work with urban. 
Remove traffic_flux array as it's subscript was out of bounds on breeze.  lnd_comp_mct
changed so that check for spval allows for rounding of spval.

Bugs fixed (include bugzilla ID): 904 (I cases start in 2003 rather than 1948)
                                  897 (string comparision in scripts)
                                  357 (remove duplicated files in tools)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  919 (problems in mksurfdata for pftdyn mode)
                                  920 (glacier_mec problems in mksurfdata)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Add -pio option to configure 
   Will set the BUILDPIO CPP token as well as adding pio source to Filepath.

Describe any changes made to the namelist: Add pio_inparm namelist when -pio 
   was set in configure

List any changes to the defaults for the boundary datasets:
   New 1850 and 2000 surface datasets with urban enabled for most resolutions
   Also new 1850 and 2000 finidat files for 1.9x2.5 resolution (other finidat files removed)

Describe any substantial timing or memory changes: None

Code reviewed by: Peter Thornton, Keith Oleson, Forrest Hoffman

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, csm_share, mct, pio

   scripts4_090325
   datm7_090325
   vocemis-drydep11_share3_090112
   CT2_6_0_090308
  pio28_prod

List all files eliminated:

>>>>>>>>>>>>>> Remove DGVM namelist tests.
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_h
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_m
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_o
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_s
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_dh
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_dm
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_do

>>>>>>>>>>>>>> Remove script that creates ASCII global data for urban.
D      models/lnd/clm/tools/ncl_scripts/generate_ascii_avg_urbanparam_file_p7.ncl

>>>>>>>>>>>>>> Remove modules replicated in mkgriddata by mksurfdata modules
>>>>>>>>>>>>>> use the versions in mksurfdata.
D      models/lnd/clm/tools/mkgriddata/ncdio.F90
D      models/lnd/clm/tools/mkgriddata/domainMod.F90
D      models/lnd/clm/tools/mkgriddata/areaMod.F90

List all files added and what they do:

>>>>>>>>>>>>>> Add point datasets that now have urban information in them.
A      models/lnd/clm/bld/urban_input/surfdata_1x1_tropicAtl_urb3den_simyr2000_c090320.nc
A      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr2000_c090320.nc
A      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr1850_c090317.nc

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Make most tests with urban, remove dgvm tests
M      models/lnd/clm/test/system/tests_pretag_bluefire
M      models/lnd/clm/test/system/config_files/README
M      models/lnd/clm/test/system/tests_pretag_jaguar
M      models/lnd/clm/test/system/tests_pretag_bangkok
M      models/lnd/clm/test/system/test_driver.sh
M      models/lnd/clm/test/system/tests_posttag_hybrid_regression
M      models/lnd/clm/test/system/tests_posttag_purempi_regression
M      models/lnd/clm/test/system/nl_files/clm_per
M      models/lnd/clm/test/system/nl_files/clm_per0
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/test/system/tests_posttag_lightning

>>>>>>>>>>>>>> Add all_urban mode for single-point mode
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90
M      models/lnd/clm/tools/mksurfdata/ncdio.F90
M      models/lnd/clm/tools/mksurfdata/mkglacier.F90
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90
M      models/lnd/clm/tools/mksurfdata/mklanwat.F90
M      models/lnd/clm/tools/mksurfdata/mkurban.F90
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl
M      models/lnd/clm/tools/mksurfdata/mkpftMod.F90

>>>>>>>>>>>>>> Add pio option to configure, and if set add pio_inparm namelist
>>>>>>>>>>>>>> Datasets to 1850/2000 and most with urban.
M      models/lnd/clm/bld/configure ------------- Add pio option
M      models/lnd/clm/bld/config_files/config_definition.xml - Add pio to config_cache.xml
M      models/lnd/clm/bld/clm.cpl7.template ----- require furbinp, remove CLM_ env vars
M      models/lnd/clm/bld/build-namelist -------- make sure sim_year sent in, change
                                                  some names etc.
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Add pio_inparm
M      models/lnd/clm/bld/namelist_files/datm.streams.template.xml -- Remove CLM_NCEP
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- urban datasets
              for most resolutions, datasets for 1850 and 2000, remove most finidat

>>>>>>>>>>>>>> Add data from grid files as well as LANDMASK and PCT_URBAN.
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc
M      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc

>>>>>>>>>>>>>> Changes from Forrest H./Peter T. to fix some CN problems (single-point, pftdyn)
M      models/lnd/clm/src/biogeochem/CNSetValueMod.F90
M      models/lnd/clm/src/main/driver.F90
M      models/lnd/clm/src/main/pftdynMod.F90
M      models/lnd/clm/src/main/lnd_comp_mct.F90 --------- Change from Mark Flanner
                                                          to fix roundoff issues for aerosols.
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 ------- Remove traffic_flux as subscript 
                                                          bounds was being exceeded on breeze.

Summary of testing:

  bluefire: All PASS except TBL and...
023 brF92 TBR.sh 17p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 72+72 cold ..........FAIL! rc= 13
027 brF93 TBR.sh 17p_vodsrsc_do clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 72+72 cold ..........FAIL! rc= 13
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
065 smL83 TSM.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 10
066 erL83 TER.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ..........FAIL! rc= 5
067 brL83 TBR.sh _sc_do clm_urb^nl_urb_br 19980115:NONE:3600 5x5_amazon navy -10+-10 arb_ic .....FAIL! rc= 5
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
076 brJ74 TBR.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic .FAIL! rc= 13
  jaguar: All PASS except TBL and...
005 smA91 TSM.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA91 TER.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA91 TBR.sh _sc_dh clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smE92 TSM.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ............FAIL! rc= 10
010 erE92 TER.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 5
011 brE92 TBR.sh 4p_vodsrsc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 5
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic ................FAIL! rc= 5
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
025 smJ62 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
026 erJ62 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
027 brJ62 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
029 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5 48 startup ....FAIL! rc= 10
030 smJ74 TSM.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic .FAIL! rc= 10
031 erJ74 TER.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
032 brJ74 TBR.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic .FAIL! rc= 5
034 smLI2 TSM.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
035 erLI2 TER.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
036 brLI2 TBR.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
039 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 7
  bangkok/lf95: All PASS except TBL
  breeze/gale/hail/gust/ifort: All PASS

TBL tests are different since most tests are now with urban.

Most of the fails are due to missing files.

CLM tag used for the baseline comparison tests if applicable: clm3_6_30

Changes answers relative to baseline: Yes for CN -- new pft-physiology file

===============================================================
===============================================================
Tag name:  clm3_6_30
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Thu Mar 19 20:44:33 MDT 2009
One-line Summary: Fix urban roof/wall layers

Purpose of changes: Fix urban roof/wall layers

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Me

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/main/iniTimeConst.F90 ---- divide roof/wall thickness by nlevurb instead of nlevsoi

Summary of testing:

  bluefire: All urban testing passed except TBL
  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_29

Changes answers relative to baseline: Urban only

===============================================================
===============================================================
Tag name:  clm3_6_29
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Thu Mar 19 07:16:05 MDT 2009
One-line Summary: CN SAI, CN testing fix, rad step size fix

Purpose of changes:  Add SAI decay for CN mode.
                     Fix CN for tests SmI58, smH51, erH51, brH51
                     Add new get_rad_step_size function used by SAI decay function.  This is the "simple fix"
                     and yields correct radiation time step size for all time steps except one for the I and F
                     cases.  The "complete fix" involves changes to other component models and will be available soon.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: K. Oleson, G. Bonan, F. Hoffman, M. Vertenstein, J. Truesdale

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeochem/CNrestMod.F90 --- add seven CN fields deleted previously for restart
M      models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 ---- add SAI decay function (calls get_rad_step_size)
M      models/lnd/clm/src/main/clm_time_manager.F90 ---- changes to fix get_rad_step_size function
M      models/lnd/clm/src/main/lnd_comp_mct.F90 ---- changes to fix get_rad_step_size function

Summary of testing:

  bluefire: All PASS except:
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -1100 cold .......FAIL! rc= 10
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 cold ........FAIL! rc= 4
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
055 blH51 TBL.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 48 cold ................FAIL! rc= 7
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6

smH74 and blH74 failures are being investigated.
blH51 fails because it fails in clm3_6_28 (fixed in this commit).
Other failures are known.

  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_28

Changes answers relative to baseline:  CN mode only due to SAI decay factor

===============================================================
===============================================================
Tag name:  clm3_6_28
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Tue Mar 17 07:03:12 MDT 2009
One-line Summary: Fix permission denied error when reading surface dataset

Purpose of changes: Change nf_open statement in UrbanInputMod.F90

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Erik K.

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ---- don't use getavu for nf_open

Summary of testing:

  bluefire: All PASS except for:
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -1100 cold .......FAIL! rc= 10
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 cold ........FAIL! rc= 4
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
051 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 48 cold .................FAIL! rc= 5
053 erH51 TER.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 10+38 cold .............FAIL! rc= 7
054 brH51 TBR.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 72+72 cold .............FAIL! rc= 6
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6

sm74, blH74, smI58 are known failures related to CN and are being investigated.
blC61 fails because clm3_6_27 fails (fixed in this tag).
Other failures are known.

  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_27

Changes answers relative to baseline: bfb

===============================================================
===============================================================
Tag name:  clm3_6_27
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date: Mon Mar 16 10:52:05 MDT 2009
One-line Summary: Urban model changes and FGR12 fix

Purpose of changes:  Fix large urban saturation excess runoff.
                     Limit urban dew formation.
                     Change FGR12 diagnostic.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Not tested

Code reviewed by: K. Oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 ---- change eflx_fgr12 diagnostic
M      models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- limit urban dew formation and calculate
              pervious road qred over nlevsoi, not nlevurb
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ---- prevent large saturation excess due to 
              ponded ice

Summary of testing:

  bluefire: All PASS tests_pretag_bluefire except TBL and :
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -1100 cold .......FAIL! rc= 10
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
048 smC61 TSM.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 -6 cold .................FAIL! rc= 10
049 erC61 TER.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 10+38 cold ..............FAIL! rc= 5
050 brC61 TBR.sh _sc_dh clm_urb^nl_urb_br 19981001:NONE:1800 1.9x2.5 gx1v5 -3+-3 cold ...........FAIL! rc= 5
053 erH51 TER.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 10+38 cold .............FAIL! rc= 7
054 brH51 TBR.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 72+72 cold .............FAIL! rc= 6
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc=5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6

smH74 and smI58 are CN-related tests that did not fail in clm3_6_25, but fail in clm3_6_26 and in this tag and 
thus should be investigated further.
smC61, erC61, brC61 fail because of permission denied when reading surface dataset. This appears to be a test
suite problem only.

  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_26

Changes answers relative to baseline: Urban answers change because of runoff fix.
                                      Standard mode answers only change in FGR12 diagnostic.

===============================================================
===============================================================
Tag name: clm3_6_26
Originator(s): Peter Thornton
Date: 3/14/09
One-line Summary: CN time step and restart file changes

Purpose of changes: shorten CN restart file. Requires moving CLM to physical model timestep.

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: nonee

Describe any substantial timing or memory changes: CLM restart file reduced in size by ~factor of 3.

Code reviewed by: Forrest Hoffman

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do:


List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNFireMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNMRespMod.F90 - change q10
M      models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 - remove reference to retransn
M      models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNDecompMod.F90 - change q10
M      models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNrestMod.F90 - eliminate many CN variables
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNAllocationMod.F90 - change time step, and cleanup some variable names
M      models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNSetValueMod.F90 - cleanup variable names
M      models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - change time step
M      models/lnd/clm/src/main/CNiniTimeVar.F90 - cleanup variable names
M      models/lnd/clm/src/main/driver.F90 - change time step
M      models/lnd/clm/src/main/clmtypeInitMod.F90 - cleanup variable names
M      models/lnd/clm/src/main/pftdynMod.F90 - change time step
M      models/lnd/clm/src/main/clm_time_manager.F90 - change time step
M      models/lnd/clm/src/main/clmtype.F90 - cleanup variable names
M      models/lnd/clm/src/main/histFldsMod.F90 - cleanup variable names

Summary of testing:

  bluefire:
  jaguar:
 Ran the CLM test suite, with the following results:
smA74 TSM.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................PASS
erA74 TER.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................PASS
brA74 TBR.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................PASS
blA74 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................SKIPPED*
smA91 TSM.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ..........................PASS
erA91 TER.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 7 (passes with 512 tasks)
brA91 TBR.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 6 (passes with 512 tasks)
blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ..........................SKIPPED*
smE92 TSM.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ...................PASS
erE92 TER.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic ................PASS
brE92 TBR.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ................PASS
blE92 TBL.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 48 arb_ic ...................SKIPPED*
smEH2 TSM.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 48 arb_ic .......PASS
erEH2 TER.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 10+38 arb_ic ....PASS
brEH2 TBR.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 24+24 arb_ic ....PASS
blEH2 TBL.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 48 arb_ic .......SKIPPED*
smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic ................FAIL! rc= 5
brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................SKIPPED*
smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 96 cold .............PASS
erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 10+38 cold ..........PASS
brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 72+72 cold ..........PASS
blH92 TBL.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 48 cold .............SKIPPED*
smJ62 TSM.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 96 startup ...............PASS
erJ62 TER.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 10+38 startup ............PASS
brJ62 TBR.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 72+72 startup ............PASS
blJ62 TBL.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 48 startup ...............SKIPPED* 
smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5 48 startup ....FAIL! rc= 10
smJ74 TSM.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic ........PASS
erJ74 TER.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic ......PASS
brJ74 TBR.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic ........PASS
blJ74 TBL.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic .........SKIPPED*
smK92 TSM.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ...................PASS
erK92 TER.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic ................PASS
brK92 TBR.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ................PASS
blK92 TBL.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 48 arb_ic ...................SKIPPED*
smLI2 TSM.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
erLI2 TER.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
brLI2 TBR.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
blLI2 TBL.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................SKIPPED*
erP65 TSM_ccsmseq.sh ERS f19_g15 I ..........................................................PASS
erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................PASS  kraken:

Note: the tests that FAIL here are the same that FAIL on jaguar with clm3_6_25.

  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable:

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
    q10 changes are climate changing. Time step changes are larger than roundoff, similar climate.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm3_6_25
Originator(s):  dlawren (Lawrence David 1384 CGD), erik (Kluzek Erik), tcraig (Craig Tony)
Date: Fri Mar 13 15:11:01 MDT 2009
One-line Summary: Daylength control on Vcmax, 1%Lake,wetland,glacier in mksrfdat, remove ELEVATION in surface data file

Purpose of changes: Include changes from Peter Thornton to include daylength control 
on vcmax in photosynthesis scheme; Set minimum lake, wetland, and glacier area to 1% 
to be more consistent with urban and to represent more lakes and wetlands; remove 
temporary unused ELEVATION field from surface dataset

Bugs fixed (include bugzilla ID): 877 (CN restart problem)
                                  911 (high PE count problem)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference) 
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New global urban datasets 10x15 and 1.9x2.5 resolutions

Describe any substantial timing or memory changes: None

Code reviewed by: David Lawrence (code), Erik Kluzek (testing and build), Tony Craig (DecompInitMod.F90)

List any svn externals directories updated (csm_share, mct, etc.): scripts, mct, datm

  scripts to scripts4_090310
  datm7   to datm7_090229
  mct     to MCT2_6_0_090308

List all files eliminated: None

List all files added and what they do:

A  models/lnd/clm/test/system/config_files/tools__s ..... Optimized serial mode for tools

List all existing files that have been modified, and describe the changes:

M  models/lnd/clm/tools/mksurfdata/mkglcmec.F90 ..... correct bug in error check
M  models/lnd/clm/tools/mksurfdata/mkglacier.F90 .... reduce min glacier frac from 5 to 1%
M  models/lnd/clm/tools/mksurfdata/mkfileMod.F90 .... remove ELEVATION field
M  models/lnd/clm/tools/mksurfdata/mklanwat.F90 ..... reduce min lake,wetland frac from 5 to 1%
M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ..... remove ELEVATION field
M  models/lnd/clm/tools/mksurfdata/README ........... add documentation about being slow unless use OPT=TRUE in gmake
M  models/lnd/clm/src/main/decompInitMod.F90 ........ Changes from Tony Craig to fix for high PE counts
M  models/lnd/clm/src/main/clm_comp.F90 ............. daylength control on vcmax changes
M  models/lnd/clm/src/main/driver.F90 ............... daylength control on vcmax changes
M  models/lnd/clm/src/main/clmtypeInitMod.F90 ....... daylength control on vcmax changes
M  models/lnd/clm/src/main/iniTimeConst.F90 ......... daylength control on vcmax changes
M  models/lnd/clm/src/main/clmtype.F90 .............. daylength control on vcmax changes
M  models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90  daylength control on vcmax changes

M  models/lnd/clm/test/system/test_driver.sh ........ update to beta10, fix some issues on jaguar
M  models/lnd/clm/test/system/input_tests_master .... do most mksurfdata testing optimized
                                                      change CN tests to cold-starts, change 1890 to 1870

M  models/lnd/clm/bld/build-namelist ................ pass sim_year and maxpft in when determining default for finidat
M  models/lnd/clm/bld/clm.cpl7.template ............. add in ignore logic like cam
M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml . update input files

Summary of testing:

  bluefire: All PASS except TBL and...
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
052 smH51 TSM.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@1890 96 cold ................FAIL! rc= 8
053 erH51 TER.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 cold .............FAIL! rc= 5
054 brH51 TBR.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 cold .............FAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  jaguar: Limited testing...
  lightning/pathscale: All PASS except TBL and...
002 smCA4 TSM.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 10
003 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 5
004 brCA4 TBR.sh _sc_ds clm_urb^nl_urb_br 19981001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...FAIL! rc= 5
006 smOC4 TSM.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
007 erOC4 TER.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_icFAIL! rc= 5
008 brOC4 TBR.sh _vansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arb_iFAIL! rc= 5
011 erA91 TER.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 7
012 brA91 TBR.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 6
019 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 7
020 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 6
024 erJ42 TER.sh 4p_casasc_dm clm_std 19981230:NONE:1800 10x15 USGS 10+38 startup ...............FAIL! rc= 7
025 brJ42 TBR.sh 4p_casasc_dm clm_std 19981230:NONE:1800 10x15 USGS 72+72 startup ...............FAIL! rc= 6
027 smK51 TSM.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
028 erK51 TER.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
029 brK51 TBR.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 72+72 arb_ic ...............FAIL! rc= 5
032 erL51 TER.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ......................FAIL! rc= 7
033 brL51 TBR.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ......................FAIL! rc= 6
040 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
041 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
042 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 5
  breeze/gale/hail/gust/ifort: All PASS except TBL

CLM tag used for the baseline comparison tests if applicable: clm3_6_24

Changes answers relative to baseline: Yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: similar climate

  Dave Lawrence ran a short simulation to show that answers do NOT change significantly

===============================================================
===============================================================
Tag name:  clm3_6_24
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Mon Mar  9 21:01:47 MDT 2009
One-line Summary: Fix urban testing and some history field changes

Purpose of changes:  Convert urban ascii files to netcdf to get urban testing to work.
                     Add rh_ref2m calculation for urban and change urban/rural humidity from specific to relative in
                         history files.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference) 
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  877 (CN restart problem)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: In namelist_defaults_clm.xml:
                                           Change *.txt urban files to *.nc 
                                           Change aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090119.nc to
                                                  aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090114.nc
                                           Change path for surfdata_0096x0144_090223_v2.nc from
                                                  lnd/clm2/surfdata/ to lnd/clm2/urbdata

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Not tested

Code reviewed by: K. Oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: A      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/test/system/nl_files/nl_urb ---- Remove TSNOW from hist_fincl1, remove Q2M, Q2M_R, Q2M_U and 
              add RH2M, RH2M_R, RH2M_U to hist_fincl2
M      models/lnd/clm/test/system/nl_files/nl_urb_br ---  Remove TSNOW from hist_fincl1
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ---- Change *.txt urban files to *.nc 
              Change aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090119.nc to
              aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090114.nc
              Change path for surfdata_0096x0144_090223_v2.nc from
              lnd/clm2/surfdata/ to lnd/clm2/urbdata
M      models/lnd/clm/src/main/clmtypeInitMod.F90 ---- delete q_ref2m_r, q_ref2m_u, and add rh_ref2m_r, rh_ref2m_u
M      models/lnd/clm/src/main/clmtype.F90 ---- delete q_ref2m_r, q_ref2m_u, and add rh_ref2m_r, rh_ref2m_u
M      models/lnd/clm/src/main/histFldsMod.F90 ---- delete Q2M_U, Q2M_R, and add RH2M_U, RH2M_R
M      models/lnd/clm/src/biogeophys/UrbanInitMod.F90 ---- delete q_ref2m_u and add rh_ref2m_u
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 ---- delete q_ref2m_u and add calculation for rh_ref2m_u
M      models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 ---- delete q_ref2m_r and add rh_ref2m_r
M      models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ---- delete q_ref2m_r and add rh_ref2m_r

Summary of testing:

  bluefire: All PASS except:
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
037 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
041 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
043 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
047 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
051 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 48 cold .................FAIL! rc= 5
052 smH51 TSM.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 96 arb_ic ..........FAIL! rc= 1
053 erH51 TER.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic .......FAIL! rc= 1
054 brH51 TBR.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic .......FAIL! rc= 1
055 blH51 TBL.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 48 arb_ic ..........FAIL! rc= 1
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
090 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
091 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
092 erP61 TSM_ccsmseq.sh ERS f19_g1            701 (svn keyword)
                                  698 (cprnc bug gives false difference)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

    Known bugs that will NOT be resolved: 546(interpinic for DGVM),
                                          652 (threads different answers with older PGI versions)

Hydrology changes (Guo-Yue Niu water table below soil column, fff=7, 
Qing micropore eqs (hksat and sucsat) and Qing microporosity 
-Simulation clm3_5niu5).

Snow cover fraction (Niu and Yang); snow burial fraction for short vegetation 
(Wang and Zeng); thermal and hydraulic organic soil (Lawrence); 
snow compaction fix (Lawrence); snow T profile during layer splitting 
fix (Lawrence); new FGR12 diagnostic.

Ground emissivity now weighted combination (using fsno) of snow and soil 
emissivity, sparse dense aerodynamic parameters from X. Zeng parameterization, 
Liu (2004) saturated hydraulic conductivity and matric potential,
change saturation excess mechanism to only go to next to lowest layer, change 
forcing height to min. of 40m.

Lower volumetric soil water content to remove drainage spikes from some points
with high sand content. Change volumetric soil water content from 0.4 to 0.3.

Incorporate hydrologically inactive deep soil (15 layers, 11-15
hyrdologically inactive) and add mksoilcarb capability.
Change deep soil (layers 11-15) to dry rock type rather than wet sand
to reduce spinup time and for greater realism.

Improved representation of snow-radiation interaction, including snow aging, 
darkening from black carbon and dust, and vertically-resolved solar heating.

Remove code pertaining to 40m minimum forcing height. Forcing height is now
whatever the atmospheric model provides plus z0+d of each pft.  For offline
simulations this will be 30m+z0+d.

saturation excess back to CLM3.5 parameterization.  Sakaguchi litter resistance
Remove Qing Liu soil micropore functions and return to CLM3.5 formulations, 
change decay factor for drainage to 2.5. remove Niu water table below soil 
column formulation, frozen fraction of soil expression normalized per Zeng,
rsubmax=9.9 for drainage calculation, decay factor=0.5 for surface runoff 
calculation, Zeng/Decker Richards equation mods, modified one-step solution 
for soil moisture and qcharge for compatibility with Zeng/Decker Richards 
mods per Swenson.

Change input datm7 forcing so that Precip is  over 6 hour interval, 
times are corrected for Temp, Pres, Humid, and Wind data and linear 
interpolation is used, and solar data is scaled by the cos(sol-zen angle).

Set litter LAI = 0.5 and incorporate Swenson organic/mineral soil hk 
percolation theory

CASA changes from Forrest Hoffman:

   These changes add SOILPSI to the CASA'
   configuration, correct units on C-LAMP carbon pool type fluxes, and reclassify
   microbial pools as soil type pools.  I believe this includes all modifications
   between bgcmip04_clm3_expa_60 and bgcmip08_clm3_expa_72.

Summary of CN and Btran changes from Sam Levis:

- CanopyFluxes modification in the calculation of btran so that it equals 0 in soil layers with temperature <=-2 C.
- CN mods recommended by Peter Thornton and the BGCWG during the bgc development phase of the last few months.

Grassland AND CROP optical properties changes from Keith Oleson:

New pft physiology file was created:

pft-physiology.c081002

Description of changes to physiology file:

New leaf and stem optical properties (VIS and NIR reflectance and transmittance)
were derived for grasslands and crops (pfts 12-16) from full optical range 
spectra of measured optical properties (Asner et al. (RSE 1998). 

New properties are:

                          Leaf              Stem
                   VIS         NIR       VIS     NIR
Reflectance        0.11        0.35      0.31    0.53
Transmittance      0.05        0.34      0.12    0.25


Describe any changes made to build system: 

   Add SNICAR_FRC and CARBON_AERO ifdef tokens

   DEFINE option SNICAR_FRC: enables second radiative transfer calculation of pure snow for radiative forcing estimation

   in configure use options -carbon_aero and -snicar_frc

Describe any changes made to the namelist:  Add fsnowoptics, fsnowaging, faerdep

Added namelist variables fsnowoptics, fsnowaging, and faerdep, which point to files containing, respectively, snow/aerosol optical properties, snow aging parameters, and global aerosol deposition file. THESE FILES ARE REQUIRED.

List any changes to the defaults for the boundary datasets:

   finidat files developed, all new fsurdat files, new pft-physiology,
   files for T62, new organic files, new files for SNICAR (fsnowoptics, 
   fsnowaging, faerdep), fix some inconsistencies with fraction files, 
   get topo files setup correctly, get all files for 4x5 and 2x2.5 resolution

Describe any substantial timing or memory changes: Yes
     20% slower because of SNICAR and slower because of deep soil

Code reviewed by: Keith Oleson, Mark Flanner, Dave Lawrence, 
                  Peter Thornton, Sam Levis, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): scripts, 
                    drv, datm7, socn, sice, sglc, csm_share, timing, pio, cprnc

+scripts                       scripts4_090112
+models/drv/seq_mct            drvseq3_0_04
+models/atm/datm7              datm7_090107
+models/ocn/socn               stubs1_1_01/socn
+models/ice/sice               stubs1_1_01/sice
+models/glc/sglc               stubs1_1_01/sglc
+models/csm_share              share3_090112
+models/utils/timing           timing_081028
+models/utils/pio              pio28_prod/pio
+models/lnd/clm/tools/cprnc    cprnc_081022

List all files eliminated:

D      models/lnd/clm/test/system/tests_pretag_bluevista - remove
D      models/lnd/clm/bld/scpDefaultNamelist.pl ---------- replace with listDefaultNamelist.pl
D      models/lnd/clm/bld/run-frost.csh ------------------ remove as can use cpl7
D      models/lnd/clm/tools/interpinic/clmi_1999-01-02_10x15_c070330.nc -- new file

List all files added and what they do:

A  +   models/lnd/clm/test/system/nl_files/clm_organic ------------ test organic
A  +   models/lnd/clm/tools/mksurfdata/mkorganic.F90 -------------- add organic to surfdat
A  +   models/lnd/clm/tools/mksurfdata/mksurfdata.pl -------------- create all fsurdat files
A  +   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ---------- interpolate aerosol deposition
A  +   models/lnd/clm/tools/ncl_scripts/clmi_increasesoillayer.ncl  interpolate old clmi files to 15 soil levels
A  +   models/lnd/clm/tools/interpinic/clmi.IQ.1953-01-01_10x15_USGS_simyr2000_c081202.nc
                                                   ---------------- new 15 layer file to test interpolation
A  +   models/lnd/clm/tools/interpinic/runinit_ibm.csh ------------ create all finidat files
A  +   models/lnd/clm/bld/listDefaultNamelist.pl ------------------ list inputdata files needed
A  +   models/lnd/clm/src/main/organicFileMod.F90 ----------------- organic soil
A  +   models/lnd/clm/src/main/aerdepMod.F90 ---------------------- read in aerosol deposition
A  +   models/lnd/clm/src/biogeophys/SNICARMod.F90 ---------------- SNICAR model
A  +   Quickstart.GUIDE ------------------------------------------- Quickstart to cpl7 scripts

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>>>>>>>>> Add compile_only option, fix smp/spmd, change most
>>>>>>>>>>>>>>>>>>>>>>>>> tests to 4x5 resolution, update ccsm version, 
>>>>>>>>>>>>>>>>>>>>>>>>> remove bluevista, change to clm_qian inputdata
>>>>>>>>>>>>>>>>>>>>>>>>> add cold start type

M      models/lnd/clm/test/system/TCB.sh
M      models/lnd/clm/test/system/config_files/4p_vodsrsc_dm
M      models/lnd/clm/test/system/config_files/4p_vodsrsc_do
M      models/lnd/clm/test/system/config_files/scam_ds ----- fix defaults for scam
M      models/lnd/clm/test/system/config_files/17p_cnnsc_o
M      models/lnd/clm/test/system/config_files/4p_casasc_dm
M      models/lnd/clm/test/system/config_files/10p_dgvmsc_o
M      models/lnd/clm/test/system/config_files/4p_casasc_do
M      models/lnd/clm/test/system/config_files/4p_casasc_o
M      models/lnd/clm/test/system/config_files/17p_vodsrsc_o
M      models/lnd/clm/test/system/config_files/17p_cnnsc_dm
M      models/lnd/clm/test/system/config_files/17p_cnnsc_do
M      models/lnd/clm/test/system/config_files/10p_dgvmsc_dm
M      models/lnd/clm/test/system/config_files/10p_dgvmsc_do
M      models/lnd/clm/test/system/config_files/17p_vodsrsc_dm
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
M      models/lnd/clm/test/system/config_files/17p_vodsrsc_do
M      models/lnd/clm/test/system/config_files/4p_vodsrsc_o
M      models/lnd/clm/test/system/TSMncl_tools.sh
M      models/lnd/clm/test/system/CLM_compare.sh
M      models/lnd/clm/test/system/TBL.sh
M      models/lnd/clm/test/system/TSM_ccsmseq.sh
M      models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
M      models/lnd/clm/test/system/tests_pretag_jaguar
M      models/lnd/clm/test/system/tests_posttag_kraken
M      models/lnd/clm/test/system/tests_pretag_bluefire
M      models/lnd/clm/test/system/README.testnames
M      models/lnd/clm/test/system/tests_posttag_breeze
M      models/lnd/clm/test/system/tests_pretag_bangkok
M      models/lnd/clm/test/system/TBR.sh
M      models/lnd/clm/test/system/TCBtools.sh
M      models/lnd/clm/test/system/TER.sh
M      models/lnd/clm/test/system/test_driver.sh
M      models/lnd/clm/test/system/tests_posttag_purempi_regression
M      models/lnd/clm/test/system/mknamelist
M      models/lnd/clm/test/system/tests_posttag_hybrid_regression
M      models/lnd/clm/test/system/TCT_ccsmseq.sh
M      models/lnd/clm/test/system/TCSruncase.sh
M      models/lnd/clm/test/system/TSMpergro.sh
M      models/lnd/clm/test/system/nl_files/clm_per
M      models/lnd/clm/test/system/nl_files/clm_urb
M      models/lnd/clm/test/system/nl_files/clm_std
M      models/lnd/clm/test/system/nl_files/clm_ndepdyn
M      models/lnd/clm/test/system/nl_files/clm_pftdyn
M      models/lnd/clm/test/system/nl_files/clm_per0
M      models/lnd/clm/test/system/TSMcnspinup.sh
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/test/system/TSMtools.sh
M      models/lnd/clm/test/system/TSMruncase.sh
M      models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh
M      models/lnd/clm/test/system/TSCext_ccsmseq_scam.sh
M      models/lnd/clm/test/system/tests_posttag_lightning
M      models/lnd/clm/test/system/CLM_runcmnd.sh
M      models/lnd/clm/test/system/TBLtools.sh
M      models/lnd/clm/test/system/TSM.sh

>>>>>>>>>>>>>>>>>>>>>>>>> Add organic add option to output as double precision
>>>>>>>>>>>>>>>>>>>>>>>>> be more careful with averging add error checking
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90
M      models/lnd/clm/tools/mksurfdata/mksurfdata.globalurban
M      models/lnd/clm/tools/mksurfdata/mksurfdata.regional
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90
M      models/lnd/clm/tools/mksurfdata/Makefile ----------- -Kieee for pgi
M      models/lnd/clm/tools/mksurfdata/mksurfdata.singlept
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90
M      models/lnd/clm/tools/mksurfdata/Srcfiles
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist

>>>>>>>>>>>>>>>>>>>>>>>>> 15 levels for urban
MM     models/lnd/clm/tools/ncl_scripts/generate_ascii_avg_urbanparam_file_p7.ncl
M      models/lnd/clm/tools/ncl_scripts/README

>>>>>>>>>>>>>>>>>>>>>>>>> Change for 15 levels and new variables/dims on dataset
M      models/lnd/clm/tools/interpinic/interpinic.F90
M      models/lnd/clm/tools/interpinic/interpinic.runoptions
M      models/lnd/clm/tools/interpinic/Srcfiles
M      models/lnd/clm/tools/interpinic/Filepath
M      models/lnd/clm/tools/interpinic/Makefile

>>>>>>>>>>>>>>>>>>>>>>>>> 10x15 resolution, start to resolve domain checking bug
M      models/lnd/clm/tools/mkgriddata/mkgriddata.namelist
M      models/lnd/clm/tools/mkgriddata/mkgriddata.F90
M      models/lnd/clm/tools/mkgriddata/domainMod.F90
M      models/lnd/clm/tools/mkgriddata/creategridMod.F90
M      models/lnd/clm/tools/mkgriddata/Makefile

>>>>>>>>>>>>>>>>>>>>>>>>> Get grid data from grid files rather than frac files
M      models/lnd/clm/tools/mkdatadomain/mkdatadomain.namelist
M      models/lnd/clm/tools/mkdatadomain/addglobal.F90
M      models/lnd/clm/tools/mkdatadomain/create_domain.F90
M      models/lnd/clm/tools/mkdatadomain/Makefile

>>>>>>>>>>>>>>>>>>>>>>>>> minor changes to build, new datasets for build-namelist
M      models/lnd/clm/bld/configure --- add -snicar_frc and -carbon_aero, add sglc, remove timing for cpl7
M      models/lnd/clm/bld/queryDefaultNamelist.pl --- minor change
M      models/lnd/clm/bld/config_files/Makefile.in -- add HAVE_GETTIMEOFDAY for new timing, more consistent with cpl7 build
M      models/lnd/clm/bld/config_files/config_definition.xml -- add snicar_frc and carbon_aero
M      models/lnd/clm/bld/clm.cpl7.template -- simplify update for new scripts
M      models/lnd/clm/bld/README ------------- update info.
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml ----- add new namelist items remove irad
M      models/lnd/clm/bld/namelist_files/datm.streams.template.xml --- new Qian datasets
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- new defaults
M      models/lnd/clm/bld/build-namelist

>>>>>>>>>>>>>>>>>>>>>>>>> change default resolution to 4x5 remove irad
M      models/lnd/clm/bld/run-pc.csh
M      models/lnd/clm/bld/run-ibm.csh
M      models/lnd/clm/bld/run-lightning.csh

>>>>>>>>>>>>>>>>>>>>>>>>> New 15 layer urban single point datasets
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.txt
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.txt
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.txt
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.txt

>>>>>>>>>>>>>>>>>>>>>>>>> Code changes documented above
M      models/lnd/clm/src/biogeochem/CASASummaryMod.F90
M      models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90
M      models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90
M      models/lnd/clm/src/biogeochem/DGVMEcosystemDynMod.F90
M      models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90
M      models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90
M      models/lnd/clm/src/biogeochem/CNFireMod.F90
M      models/lnd/clm/src/biogeochem/CNMRespMod.F90
M      models/lnd/clm/src/biogeochem/CASAMod.F90
M      models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90
M      models/lnd/clm/src/biogeochem/CNSummaryMod.F90
M      models/lnd/clm/src/biogeochem/DUSTMod.F90
M      models/lnd/clm/src/biogeochem/CNPhenologyMod.F90
M      models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90
M      models/lnd/clm/src/biogeochem/CNDecompMod.F90
M      models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90
M      models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90
M      models/lnd/clm/src/biogeochem/DGVMMod.F90
M      models/lnd/clm/src/biogeochem/CNrestMod.F90
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90
M      models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90
M      models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90
M      models/lnd/clm/src/biogeochem/C13SummaryMod.F90
M      models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90
M      models/lnd/clm/src/biogeochem/CNAllocationMod.F90
M      models/lnd/clm/src/biogeochem/CNC13FluxMod.F90
M      models/lnd/clm/src/biogeochem/CNSetValueMod.F90
M      models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90
M      models/lnd/clm/src/main/inicFileMod.F90
M      models/lnd/clm/src/main/clm_varcon.F90
M      models/lnd/clm/src/main/clm_varpar.F90
M      models/lnd/clm/src/main/CNiniTimeVar.F90
M      models/lnd/clm/src/main/clm_comp.F90
M      models/lnd/clm/src/main/driver.F90
M      models/lnd/clm/src/main/ncdio.F90
M      models/lnd/clm/src/main/fileutils.F90
M      models/lnd/clm/src/main/clmtypeInitMod.F90
M      models/lnd/clm/src/main/pftdynMod.F90
M      models/lnd/clm/src/main/iniTimeConst.F90
M      models/lnd/clm/src/main/histFileMod.F90
M      models/lnd/clm/src/main/clm_atmlnd.F90
M      models/lnd/clm/src/main/restFileMod.F90
M      models/lnd/clm/src/main/controlMod.F90
M      models/lnd/clm/src/main/initSurfAlbMod.F90
M      models/lnd/clm/src/main/clm_time_manager.F90
M      models/lnd/clm/src/main/filterMod.F90
M      models/lnd/clm/src/main/clm_varctl.F90
M      models/lnd/clm/src/main/lnd_comp_mct.F90
M      models/lnd/clm/src/main/CASAiniTimeVarMod.F90
M      models/lnd/clm/src/main/areaMod.F90
M      models/lnd/clm/src/main/clmtype.F90
M      models/lnd/clm/src/main/histFldsMod.F90
M      models/lnd/clm/src/main/mkarbinitMod.F90
M      models/lnd/clm/src/riverroute/RtmMod.F90
M      models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90
M      models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
M      models/lnd/clm/src/biogeophys/UrbanInputMod.F90
M      models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
M      models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90
M      models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90
M      models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90
M      models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90
M      models/lnd/clm/src/biogeophys/Hydrology1Mod.F90
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90
M      models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90
M      models/lnd/clm/src/biogeophys/UrbanMod.F90
M      models/lnd/clm/src/biogeophys/DriverInitMod.F90
M      models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
M      models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90

>>>>>>>>>>>>>>>>>>>>>>>>> update documentation
M      README -------------- update information
M      KnownBugs ----------- add info on new known bugs

Summary of testing:

  bluefire: All PASS except TBL and ...

031 smF96 TSM.sh 17p_vodsrsc_m clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ...................FAIL! rc= 10
036 smF96 TSM.sh 17p_vodsrsc_m clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ...................FAIL! rc= 2
013 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
015 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
019 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
020 smC61 TSM.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 -6 arb_ic ...............FAIL! rc= 10
021 erC61 TER.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 10+38 arb_ic ............FAIL! rc= 5
022 brC61 TBR.sh _sc_dh clm_urb^nl_urb_br 19981001:NONE:1800 1.9x2.5 gx1v5 -3+-3 arb_ic .........FAIL! rc= 5
023 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 48 arb_ic ...............FAIL! rc= 4
024 smH91 TSM.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 96 startup ..........FAIL! rc= 10
025 erH91 TER.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 10+38 startup .......FAIL! rc= 5
026 brH91 TBR.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 72+72 startup .......FAIL! rc= 5
027 blH91 TBL.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 48 startup ..........FAIL! rc= 4
029 erH52 TER.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic ...........FAIL! rc= 13
030 brH52 TBR.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic ...........FAIL! rc= 11
031 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 48 arb_ic ..............FAIL! rc= 7

  lightning/pathscale: all PASS except TBL and ...

009 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
013 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
017 blOC4 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
019 erA91 TER.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 7
020 brA91 TBR.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 6
021 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ..........................FAIL! rc= 5
027 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 7
028 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 6
029 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 5
031 smH52 TSM.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 96 arb_ic ..............FAIL! rc= 10
032 erH52 TER.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic ...........FAIL! rc= 5
033 brH52 TBR.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic ...........FAIL! rc= 5
034 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 48 arb_ic ..............FAIL! rc= 4
036 erK51 TER.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 7
037 brK51 TBR.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 72+72 arb_ic ...............FAIL! rc= 6
001 smL51 TSM.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 96 arb_ic .........................FAIL! rc= 10
002 erL51 TER.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ......................FAIL! rc= 5
003 brL51 TBR.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ......................FAIL! rc= 5
004 blL51 TBL.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 48 arb_ic .........................FAIL! rc= 4
005 sm674 TSMtools.sh mkgriddata tools__ds singlept .............................................FAIL! rc= 6
006 sm774 TSMtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
007 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 4
010 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
011 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
012 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804Q ...................................................FAIL! rc= 4

  jaguar: ALL PASS except TBL and ....

001 smA74 TSM.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 10
002 erA74 TER.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
003 brA74 TBR.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
013 smE32 TSM.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 64x128^360x720 USGS 48 arb_ic .........FAIL! rc= 10
014 erE32 TER.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 64x128^360x720 USGS 10+38 arb_ic ......FAIL! rc= 5
015 brE32 TBR.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 64x128^360x720 USGS 24+24 arb_ic ......FAIL! rc= 5
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic ................FAIL! rc= 5
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
021 smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 96 startup ..........FAIL! rc= 10
022 erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 10+38 startup .......FAIL! rc= 5
023 brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 72+72 startup .......FAIL! rc= 5
029 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5 48 startup ....FAIL! rc= 10
030 smJ74 TSM.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic ........FAIL! rc= 10
031 erJ74 TER.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic ......FAIL! rc= 5
032 brJ74 TBR.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic ........FAIL! rc= 5
038 smL62 TSM.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 10
039 erL62 TER.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -5+-5 startup ...................FAIL! rc= 5
040 brL62 TBR.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10+-10 startup .................FAIL! rc= 5

  breeze/gale/hail/gust/ifort: All PASS except TBL and...

  bangkok: All PASS except TBL and..

005 smA74 TSM.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 10
006 erA74 TER.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
007 brA74 TBR.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
009 smD91 TSM.sh _persc_dh clm_per 19981231:NONE:1200 4x5 gx3v5 144 startup .....................FAIL! rc= 10
010 erD91 TER.sh _persc_dh clm_per 19981231:NONE:1200 4x5 gx3v5 72+72 startup ...................FAIL! rc= 5
013 smCA4 TSM.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 10
014 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 5
015 brCA4 TBR.sh _sc_ds clm_urb^nl_urb_br 19981001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...FAIL! rc= 5
017 smOC4 TSM.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
018 erOC4 TER.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_icFAIL! rc= 5
019 brOC4 TBR.sh _vansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arb_iFAIL! rc= 5
021 smNB4 TSM.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 10
022 erNB4 TER.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 59+100 arb_icFAIL! rc= 5
023 brNB4 TBR.sh _mexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arb_FAIL! rc= 5
025 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
026 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
027 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
029 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
030 smH52 TSM.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 96 arb_ic ..............FAIL! rc= 10
031 erH52 TER.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic ...........FAIL! rc= 5
032 brH52 TBR.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic ...........FAIL! rc= 5
038 smK51 TSM.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
039 erK51 TER.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
040 brK51 TBR.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 72+72 arb_ic ...............FAIL! rc= 5
042 smL51 TSM.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 96 arb_ic .........................FAIL! rc= 10
043 erL51 TER.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ......................FAIL! rc= 5
044 brL51 TBR.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ......................FAIL! rc= 5
046 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 19980115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
047 smL74 TSM.sh _sc_s clm_std 19980101:NONE:1800 1x1_brazil navy -10 arb_ic ....................FAIL! rc= 10
048 erL74 TER.sh _sc_s clm_std 19980101:NONE:1800 1x1_brazil navy -5+-5 arb_ic ..................FAIL! rc= 5
049 brL74 TBR.sh _sc_s clm_std 19980101:NONE:1800 1x1_brazil navy -10+-10 arb_ic ................FAIL! rc= 5
051 sm654 TSMtools.sh mkgriddata tools__ds namelist .............................................FAIL! rc= 6
052 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
053 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
057 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
Changes answers relative to baseline: Yes! Changes climate

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (new climate)
   - configuration (CPP ifdefs): All
   - build-namelist command (or complete namelist):

   MSS location of control simulations used to validate new climate: 

      Grass optical properties: /OLESON/csm/clm36sci16_clm3_6_11shklit0_5sfc_goa

      ccsm4_0_beta05:   /CCSM/csm/b40.018
   
   URL for LMWG diagnostics output used to validate new climate: 

ccsm4_0_beta05 (with clm36sci27_clm3_6_14)

http://www.cgd.ucar.edu/cdp/mai/ccsmweb/b40.018-b40.017/setsIndex.html

http://www.cgd.ucar.edu/tss/clm/diagnostics/clm4.0_dev/clm36sci16_clm3_6_11shklit0_5sfc_goa-clm36sci16_clm3_6_11shklit0_5sfca/setsIndex.html

===============================================================
===============================================================
Tag name:  clm3_6_14
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Oct 10 11:32:57 MDT 2008
One-line Summary: Fix some global urban issues, fix pftdyn, really get compile-only option working in testing

Purpose of changes: Fix column and pft averaging for urban (crtical for coupling to cam) (from Keith)
                    Fix Qanth (was wasteheat previously) (from Keith)
                    Fix so that pftdyn works (fix from Sam)
                    Really get the compile-only option working in test-suite 
                       (so that doesn't re-compile, but does re-run, when sent again)

Bugs fixed (include bugzilla ID): 826 (pftdyn)

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 830 (missing C-LAMP mods)
                                  680 (t0 precip diff for seq-ccsm), 789 (pt sims slower than offline)
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  833 (bug with cam in ccsm4_0_alpha37), 722 (threading slow)
                                  832 (problem with cice bn in ccsm4_0_alpha37)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, oleson, slevis (Sam provided pftdyn fix, and Keith provided urban fixes)

List any svn externals directories updated (csm_share, mct, etc.): scripts and drv

  scripts to scripts4_081009
  drv     to drvseq2_0_33

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Change so that pftdyn will work, do urban averaging, and fix Qanth
   M   models/lnd/clm/src/main/clm_atmlnd.F90 -------------- Make averaging take into account urban (critical for global urban modeling)
   M   models/lnd/clm/src/main/histFldsMod.F90 ------------- Add urban scaling, fix Qanth
   M   models/lnd/clm/src/main/filterMod.F90 --------------- Change urban filter to include pftwgt>0
   M   models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 -- Change filter_vegsol to include pftwgt>0
>>>>>>>>>>> Fix so that compile-only option leaves compiled program there, doesn't recompile, but does rerun
   M   models/lnd/clm/test/system/TCB.sh
   M   models/lnd/clm/test/system/TSMncl_tools.sh
   M   models/lnd/clm/test/system/TBL.sh
   M   models/lnd/clm/test/system/TSM_ccsmseq.sh
   M   models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
   M   models/lnd/clm/test/system/TBR.sh
   M   models/lnd/clm/test/system/TCBtools.sh
   M   models/lnd/clm/test/system/test_driver.sh
   M   models/lnd/clm/test/system/TER.sh
   M   models/lnd/clm/test/system/TCT_ccsmseq.sh
   M   models/lnd/clm/test/system/TSMpergro.sh
   M   models/lnd/clm/test/system/TSMcnspinup.sh
   M   models/lnd/clm/test/system/TSMtools.sh
   M   models/lnd/clm/test/system/TSMruncase.sh
   M   models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh
   M   models/lnd/clm/test/system/CLM_runcmnd.sh
   M   models/lnd/clm/test/system/TSM.sh

Summary of testing:

  bluefire: All PASS except
071 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  jaguar: All PASS
  bangkok/lf95: All PASS except
028 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 5
054 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 6
055 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS

pftdyn TBL test fails, because pftdyn did not work in previous tag. 
cam and scam tests fail because of bugs 832 and 833 in ccsm4_0_alpha37

CLM tag used for the baseline comparison tests if applicable: clm3_6_13

Changes answers relative to baseline: No -- bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_13
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Wed Oct  1 13:33:36 MDT 2008
One-line Summary: Update to new version of cpl7 scripts and build, update externals for versions needed for clm36sci branch, add new CASA tests

Purpose of changes:  Update to new version of cpl7 scripts and build. 
                     Update externals for versions needed on clm36sci branch.
                     Add new CASA tests.
                     Add $CLM_ACCOUNT as option to test_driver.sh
                     Add single point capability to cpl7 scripts.
                     Add CLM_DEMAND, CLM_BLD_NL_OPTIONS as options to cpl7 scripts.
                     Some code changes from Keith Oleson to fix a CASA startup problem.

Code changes from Keith Oleson

1. Volumetric soil water check in BiogeophysRestMod changed so that it accounts for ponded ice/water
that may be present in surface layer. If volumetric soil water is above saturation, h2osoi_liq
and h2osoi_ice are reduced according to their proportion of total water/ice.  Both h2osoi_liq
and h2osoi_ice are limited to be no lower than watmin (currently 0.01_r8 mm).  All this done for
soil points only.

2. In SoilHydrologyMod, variable su changed to:

    su        = max(0._r8,(s1-fcov(c)) / max(0.01_r8,1._r8-fcov(c))

to account for the fact that fcov could be one and hence divide by zero could have occurred.
Also, the factor "1._r8" multiplying fcov in the numerator was removed.

3. watmin made a global parameter available from clm_varcon

Bugs fixed (include bugzilla ID): 805 (too much output in build-streams), 801 (G95 in csm_Share),
                                  786 (dshr_map bug), 834 (CASA startup bug), 

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  826 (pftdyn), 833 (bug with cam in ccsm4_0_alpha37)
                                  832 (problem with cice bn in ccsm4_0_alpha37)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: Update to new ccsm4_0_alpha37 scripts

	New options in cpl7 scripts: CLM_DEMAND, CLM_BLD_NL_OPTIONS

              CLM_DEMAND: List of output variables to require be set in namelist
                          For example, set to "furbinp" to use urban grid.
              CLM_BLD_NL_OPTIONS: List of options to pass to clm build-namelist.

        New grid in cpl7 scripts: pt1_pt1 (also set CLM_PT1_NAME) for single point sims

        Add ability to set "none" in clm build-namelist -clm_dmand option.

Quickstart to new cpl7 scripts...

     New cpl7 namelists now do two things for you.
         - Add a ton of error checking at each step -- so it won't let you do something you  aren't allowed to
         - Only show you the variables that you could actually set in your case.

     To accomplish this we use XML files rather than cshell env files. But, the
     operation sequence is similar with options only changed slightly.

         cd scripts
         ./create_newcase -help      # get help on how to run create_newcase
         ./create_newcase -case testI -mach bluefire -res f19_g15 -compset I    # create new "I" case for bluefire at 1.9x2.5_gx1v5 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         ./xmlchange -help           # Get help on editor for XML files 
         ./xmlchange <options> env_conf.xml env_mach_pes  # Edit configure files if needed
         configure -case             # create scripts
         ./xmlchange <options> env_build.xml              # Edit build files if needed
         testI.build                 # build model and create namelists
         ./xmlchange <options> env_run.xml                # Edit run files if needed
         bsub < testI.run            # submit script  
                                     # (NOTE: edit env_run.xml to set RESUBMIT to number of times to automatically resubmit)

     Note that the -skip_rundb option to create_newcase no longer needs the argument of "NONE".
     Syntax of create_tests changed to only one form.

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik, oleson and dlawren (source code changes)

List any svn externals directories updated (csm_share, mct, etc.): drv, csm_share, datm7, and scripts

  csm_share, datm7 and scripts include changes required for the clm36sci branch.

     scripts   to scripts4_080930
     drv       to drvseq2_0_32
     datm7     to datm7_080926
     csm_share to share3_080929

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Add $CLM_ACCOUNT env var, change tests around, update to ccsm4_0_alpha37
          add some more CASA tests.
M  models/lnd/clm/test/system/README
M  models/lnd/clm/test/system/tests_pretag_bluefire
M  models/lnd/clm/test/system/tests_pretag_jaguar
M  models/lnd/clm/test/system/tests_posttag_kraken
M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
M  models/lnd/clm/test/system/tests_posttag_purempi_regression
M  models/lnd/clm/test/system/test_driver.sh ------------------ Add $CLM_ACCOUNT env var
                                                                update to ccsm4_0_alpha37
M  models/lnd/clm/test/system/input_tests_master -------------- Add CASA 1.9x2.5 tests
M  models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh ----------- Separate call to cice bn
M  models/lnd/clm/test/system/TCT_ccsmseq.sh
M  models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh ----------- Need to set threads/tasks
M  models/lnd/clm/test/system/TSM.sh -------------------------- Remove old namelist name

>>>>>>>>>>>>>> Update for new scripts
M  models/lnd/clm/bld/clm.cpl7.template ----------------------- Straighten out clm_demand
                               Add new env vars. Remove prestaging.
M  models/lnd/clm/bld/namelist_files/namelist_definition.xml -- Update to alpha37
M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml- Add file for clm36sci branch
M  models/lnd/clm/bld/build-namelist -------------------------- Allow clm_demand to include none.

>>>>>>>>>>>>>> These are Keith's changes to fix bug 834. They do make it possible for
               answers to change, but in most cases they don't. It allows code to
               startup correctly for situations it might fail in, and sets a mininum
               value in SoilHydrologyMod to guard against divide by zero. This would
               change answers when amount of ice -- fcov > 0.99 -- which would be rare.
M  models/lnd/clm/src/main/clm_varcon.F90
M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90
M  models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90

Summary of testing:

  bluefire: All PASS except
042 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
043 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
044 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
045 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
P
046 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
079 blL61 TBL.sh _sc_h clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7
083 blL62 TBL.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7
107 brJ74 TBR.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic ........FAIL! rc= 11
127 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  kraken: All PASS except all TER and TBR tests fail, because of a script problem and ends early
  lightning/pathscale: All PASS except
022 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
023 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
024 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
025 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
026 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
050 erP11 TSM_ccsmseq.sh ERS T31_g35 ICN4804 ....................................................FAIL! rc= 5
  bangkok/lf95: All PASS except
025 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
026 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
027 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
028 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
029 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
054 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 6
055 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS

pftdyn tests fail because of previous problem (bug 826). ext_ccsmseq_ tests fail 
because of problem with ccsm4_0_alpha37 (bug 833).

CLM tag used for the baseline comparison tests if applicable: clm3_6_12

Changes answers relative to baseline: Only for some cases, see tests 079 and 083 on
bluefire above

===============================================================
===============================================================
Tag name:  clm3_6_12
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Sun Sep 21 10:04:22 MDT 2008
One-line Summary: Fix restarts for urban, add capability to do global urban experiments, add new forcing height changes, remove cpl6

Purpose of changes: Fix restarts for urban model as well as adding capability to do global urban experiments.
                    It also adds the new forcing height changes into the trunk.
                    And we remove all the cpl6 #ifdef's, source codes, and associated scripts and script options.
                    Also fix some memory leaks found in MCT.
                    Add testing for kraken.
                    Fix branch tests so they change the start_ymd.
                    Add some more tests for CASA.
                    Set minimum urban percentage to use from 5% to 1%.
                    Completely remove COUP_CAM #ifdef as NOT needed anymore.

Bugs fixed (include bugzilla ID):  Fix urban model restarts, remove cpl6 (755), MCT memory leak (825)

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  805 (too much output in build-streams), 826 (pftdyn)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: Add nofire option to configure, remove cpl6 option

Describe any changes made to the namelist: Add new urban oriented output history variables:

   _U, and _R (Urban and Rural) for:
        QRUNOFF, TREFMXAV, TREFMNAV, TSA, SoilAlpha, TG, Q2M, TREFAV
   URBAN_AC, and URBAN_HEAT, Qanth, SWup, LWup, QTau, HWR, Wind, Qair
   and  ZBOT_PFT for forcing height

   Change build-namelist so that to use a dataset with urban points on it you 
   need to use "-clm_demand furbinp". This way it will not only select the appropriate
   furbinp dataset -- but it will select the correct surface dataset that includes
   urban data on it.  Such as for 10x15 and 1.9x2.5 surface datasets where there is
   now an urban version as well as the standard version.
  

List any changes to the defaults for the boundary datasets: Add urbanc point dataset, 
     and 1.9x2.5 and 10x15 urban datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self (some changes by Keith Oleson)

List any svn externals directories updated (csm_share, mct, etc.): drv, datm7, mct

  drv   to drvseq3_0_26
  datm7 to datm7_080907
  mct   to MCT2_5_1_080522

List all files eliminated: Remove cpl6 files

R      models/lnd/clm/test/system/TCText_ccsmcon.sh
R      models/lnd/clm/test/system/TSMext_ccsmcon.sh
R      models/lnd/clm/bld/clm.cpl6.template
R      models/lnd/clm/src/main/program_csm.F90
R      models/lnd/clm/src/main/clm_csmMod.F90

List all files added and what they do:

A      models/lnd/clm/test/system/config_files/4p_casasc_ds ----- Add serial test for CASA
A      models/lnd/clm/test/system/nl_files/clm_urb -------------- For standard urban tests.
A      models/lnd/clm/test/system/nl_files/nl_urb_br ------------ Urban namelist for branch tests.
A      models/lnd/clm/test/system/tests_posttag_kraken ---------- Add tests for kraken
A      models/lnd/clm/tools/ncl_scripts/generate_ascii_avg_fv1_9x2_5_urbanparam_file_p7.ncl -- script to create furbinp dataset
A      models/lnd/clm/tools/mksurfdata/mksurfdata.globalurban --- Example namelist to make a global urban surface dataset
A      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.txt --- Add urban intercomparison test case

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Remove cpl6 option, add nofire, make urban point datasets consistent with global Feddema datasets
M      models/lnd/clm/bld/configure -------------------------------- Remove cpl6 option, add nofire option
M      models/lnd/clm/bld/queryDefaultNamelist.pl ------------------ Add -filenameonly option
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.txt
M      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.txt
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.txt
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.txt
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.txt
M      models/lnd/clm/bld/config_files/config_definition.xml
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml
M      models/lnd/clm/bld/namelist_files/datm.streams.template.xml
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
M      models/lnd/clm/bld/build-namelist --------------------------- Have urban surface datasets dependent on furbinp

M      models/lnd/clm/test/system/README.testnames
M      models/lnd/clm/test/system/tests_posttag_urban
M      models/lnd/clm/test/system/tests_pretag_jaguar
M      models/lnd/clm/test/system/tests_pretag_bluefire
M      models/lnd/clm/test/system/tests_posttag_purempi_regression
M      models/lnd/clm/test/system/tests_posttag_hybrid_regression
M      models/lnd/clm/test/system/tests_pretag_bluevista
M      models/lnd/clm/test/system/tests_posttag_lightning
M      models/lnd/clm/test/system/nl_files/clm_urb1pt
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/test/system/README
M      models/lnd/clm/test/system/CLM_runcmnd.sh
M      models/lnd/clm/test/system/TBR.sh ---------------------- Change so start_ymd of branch runs is initial-length after original start-date
M      models/lnd/clm/test/system/test_driver.sh -------------- Reduce from premium to regular, add kraken
M      models/lnd/clm/test/system/mknamelist ------------------ Set hist_* values for second file
M      models/lnd/clm/test/system/nl_files/nl_crcrop ---------- Set hist_dens for second file
M      models/lnd/clm/test/system/nl_files/nl_urb ------------- Set hist_dens for second file, add more fields to list
M      models/lnd/clm/test/system/nl_files/nl_std ------------- Set hist_dens for second file
M      models/lnd/clm/test/system/nl_files/nl_lfiles ---------- Set hist_dens for second file
M      models/lnd/clm/test/system/input_tests_master ---------- Change TBR tests, add more CASA tests

M      models/lnd/clm/tools/mksurfdata/mkurban.F90 ------------ Change threshold to ignore urban from 5% to 1%

M      models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 -- For DUST fix forcing height appropriately
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Don't set pointers if no urban points

>>>>>>>>>>>>>>>> Remove COUP_CSM #ifdefs

M      models/lnd/clm/src/main/driver.F90 --------- Also make sure urban calls have urban points
M      models/lnd/clm/src/main/accFldsMod.F90
M      models/lnd/clm/src/main/clmtypeInitMod.F90
M      models/lnd/clm/src/main/initializeMod.F90
M      models/lnd/clm/src/main/iniTimeConst.F90
M      models/lnd/clm/src/main/histFileMod.F90
M      models/lnd/clm/src/main/restFileMod.F90
M      models/lnd/clm/src/main/controlMod.F90
M      models/lnd/clm/src/main/initSurfAlbMod.F90
M      models/lnd/clm/src/main/clm_time_manager.F90
M      models/lnd/clm/src/main/clm_varctl.F90
M      models/lnd/clm/src/main/subgridAveMod.F90
M      models/lnd/clm/src/main/initGridCellsMod.F90
M      models/lnd/clm/src/main/spmdMod.F90
M      models/lnd/clm/src/main/surfrdMod.F90 ------------- Also remove COUP_CAM #ifdef
M      models/lnd/clm/src/main/do_close_dispose.F90
M      models/lnd/clm/src/main/clmtype.F90 --------------- Also forcing height changes
M      models/lnd/clm/src/main/histFldsMod.F90
M      models/lnd/clm/src/main/mkarbinitMod.F90
M      models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
M      models/lnd/clm/src/biogeophys/UrbanInputMod.F90
M      models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ------ Also forcing height changes
M      models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90
M      models/lnd/clm/src/biogeophys/UrbanInitMod.F90
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90
M      models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 ------ Also forcing height changes
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --------- Fix restarts for urban
M      models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90
M      models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
M      models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90

Summary of testing:

  bluefire: All PASS except TBL and
042 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
043 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
044 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
046 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
  jaguar: All PASS except TBL and
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
  kraken: All PASS except TBL and TER and TBR (this may be a setup problem) and
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
  lightning/pathscale: All PASS except TBL and
  bangkok/lf95: All PASS except TBL and
025 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
026 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
027 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
029 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
  kraken: All PASS except TBL and
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...........
.......FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic .........
.......FAIL! rc= 13
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic .........
.......FAIL! rc= 5
  breeze/gale/hail/gust/ifort: All PASS

   pftdyn tests fail on all platforms -- due to a previous problem that was not 
detected because of a bug in the test.
   TER and TBR tests fail on kraken -- this may be a setup problem. Possibily a problem
with newcprnc? I'm not sure but since it passes elsewhere, I don't think it's a problem
in the code.

CLM tag used for the baseline comparison tests if applicable: clm3_6_11

Changes answers relative to baseline: Forcing height changes cause answers to change

===============================================================
===============================================================
Tag name:  clm3_6_11
Originator(s):  dlawren (Lawrence David 1384 CGD)
Date: Tue Aug 26 21:53:22 MDT 2008
One-line Summary: Ice stream for snow capped regions

Purpose of changes: Split liquid and ice runoff streams in snow capped situations

Bugs fixed (include bugzilla ID):  None

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  805 (too much output in build-streams)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Update version of pft-physiology file used

Describe any substantial timing or memory changes: None

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.): scripts and csm_share

   scripts    to scripts4_080731
   csm_share  to share3_080801

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- Use the same pft-phisiology file for every option
M      models/lnd/clm/src/main/clmtypeInitMod.F90
M      models/lnd/clm/src/main/pft2colMod.F90
M      models/lnd/clm/src/main/clmtype.F90
M      models/lnd/clm/src/main/histFldsMod.F90
M      models/lnd/clm/src/main/models/lnd/clm/src/main/clm_time_manager.F90 -- Hack for fake Gregorian calendar
M      models/lnd/clm/src/riverroute/RtmMod.F90 --------------- two runoff sreams, liq and ice (qflx_snwcp_ice)
M      models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- dew snwcp
M      models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 -------- snow and rain split for snwcp
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ----- liq snwcp 
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 -------- qrgwl minus snwcp_ice
M      models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ----- lake snwcp
M      models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 - initialize snwcp fields to zero for lakes
M      models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ------ revised balance check
      >>>>>>>>>> Get scam test working
M      models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
M      models/lnd/clm/test/system/nl_files/scam
M      models/lnd/clm/test/system/TSCext_ccsmseq_scam.sh
M      models/lnd/clm/test/system/config_files/scam_ds
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
M      models/lnd/clm/test/system/nl_files/scam
M      models/lnd/clm/test/system/nl_files/scam_prep

Summary of testing:

  bluefire: All PASS except TBL tests
  lightning/pathscale: All PASS except TBL tests
  bangkok/lf95: All PASS except TBL tests
  breeze/gale/hail/gust/ifort: All PASS

  Didn't test on jaguar -- since it was down.

CLM tag used for the baseline comparison tests if applicable: clm3_6_10

Changes answers relative to baseline: Yes -- pft-physiology file, RTM changes

===============================================================
===============================================================
Tag name:  clm3_6_10
Originator(s):  tcraig
Date: Fri Aug 15 09:05:50 MDT 2008
One-line Summary: extend rtm tracer, ascale for tri-grids, AIX O3 to O2

Purpose of changes: extend rtm to handle multiple tracers.  added
  second tracer to rtm associated with frozen water.  first tracer
  is now liquid water.  both are passed to cpl7 now via the roff and
  ioff fields.

  add ascale field to land model in support of model running on it's
  own grid.  ascale is a field provided by the coupler to the land model 
  via the driver "domain" datatype.  it is needed to correct fluxes
  in the land model for conservation.  it is being applied to the
  land to rtm fluxes and will need to be fully validated in a ccsm4
  tri-grid configuration which is still under development.

  change AIX optimization from -O3 to -O2 at request of LMWG.  not
  needed for these changes in particular.  see bug #812.

Bugs fixed (include bugzilla ID): 812

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  805 (too much output in build-streams)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system:
  change AIX -O3 to -O2 at request of LMWG, incorporated
  into tag for convenience.

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes:  
  added extra rtm tracer, should have no noticable impact on timing
  or memory.

Code reviewed by: tcraig

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M      bld/config_files/Makefile.in
M      src/main/clmtypeInitMod.F90
M      src/main/pft2colMod.F90
M      src/main/clm_atmlnd.F90
M      src/main/clm_csmMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/domainMod.F90
M      src/main/clmtype.F90
M      src/main/histFldsMod.F90
M      src/riverroute/RtmMod.F90
M      src/riverroute/RunoffMod.F90
M      src/biogeophys/Biogeophysics2Mod.F90
M      src/biogeophys/Hydrology1Mod.F90
M      src/biogeophys/SoilHydrologyMod.F90

- change AIX -O3 to -O2
- add ascale implementation.  add asca field to domain datatype, set
  for atm and lnd domains.  default is 1.0.  received from coupler
  in first run call.  reset in lnd only if atm and lnd domain are same.
- split qflx_snowcap term into qflx_snowcap_rain and qflx_snowcap_snow.
  snowcap_rain term is same implementation as old snowcap term.
  snowcap_snow is set to zero now.  potential future mods are noted
  and commented out, search for tcx_snowcap_new in src code.
- implement multiple tracers extensibility in rtm.  add frozen
  runoff tracer in addition to liquid runoff tracer.
- set roff and ioff runoff terms in lnd_comp_mct to send back to coupler
- update rtm restart file, support backward compatability by setting
  runoff tracers to zero if the new fields are not on the restart file.
- update history file for new rtm tracers.  requires individual fields
  to be copied from tracer arrays to single field arrays for history
  interface.  
	
Summary of testing:

  bluefire: all PASS except
     073 blL61 TBL.sh _sc_h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup
     077 blL62 TBL.sh _sc_m clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup
     085 blL74 TBL.sh _sc_s clm_std 19980101:6-HOURLY:1800 1x1_brazil navy -10 arb_ic
     087 blL78 TBL.sh _sc_s clm_std 19971231:NONE:1800 1x1_brazil navy -10 arb_ic
       the above 4 bl cases FAIL due to -O3 to -O2 optimzation change
     113 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3
       sm984 fails due to inconsistent driver in test
  jaguar: all PASS except
     038 erP65 TSM_ccsmseq.sh ERS f19_g13 I
     039 erP15 TSM_ccsmseq.sh ERS T31_g35 ICN
     040 erP66 TSM_ccsmseq.sh ERH f19_g13 I
     041 erP16 TSM_ccsmseq.sh ERH T31_g35 ICN
     042 erP67 TSM_ccsmseq.sh ERB f19_g13 I
     043 erP17 TSM_ccsmseq.sh ERB T31_g35 ICN
       erP* tests fail due to script error
  bangkok/lf95: all PASS except
     046 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48
     047 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3
       sm952 and sm984 fail due to inconsistent driver in test
  breeze/gale/hail/gust/ifort: all PASS

  bluefire cam pretag: all PASS except previously documented failures
  bluefire ccsm4 pretag: all PASS except previously documented failures
    compare with alpha33 FAILS since rtm not bit-for-bit in some tests.

CLM tag used for the baseline comparison tests if applicable: clm3_6_09

Changes answers relative to baseline: 
  change of AIX -O3 to -O2 changes some results by what ap.........FAIL! rc= 7
061 smK17 TSM.sh 10p_dgvmsc_h clm_std 19981231:NONE:1800 48x96 gx3v5 -213 arb_ic ................FAIL! rc= 10
065 blK71 TBL.sh 10p_dgvmsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 5
088 smL83 TSM.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10 arb_ic ..................FAIL! rc= 10
089 erL83 TER.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -5+-5 arb_ic ................FAIL! rc= 5
090 brL83 TBR.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10+-10 arb_ic ..............FAIL! rc= 6
091 blL83 TBL.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10 arb_ic ..................FAIL! rc= 4
095 bl711 TBLtools.sh mksurfdata tools__ds namelist .............................................FAIL! rc= 7
097 bl771 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
  lightning/pathscale:
------>>>>>>> Bug 694
011 er111 TER.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
012 br111 TBR.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ..............FAIL! rc= 11
025 smE13 TSM.sh 4p_vodsrsc_do clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 10
026 erE13 TER.sh 4p_vodsrsc_do clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ............FAIL! rc= 5
027 brE13 TBR.sh 4p_vodsrsc_do clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ............FAIL! rc= 5
029 smE16 TSM.sh 4p_vodsrsc_o clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ................FAIL! rc= 10
  lightning/ifort:
004 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
008 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
------>>>>>>> Bug 694
010 sm111 TSM.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 10
011 er111 TER.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 5
012 br111 TBR.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ..............FAIL! rc= 5
013 bl111 TBL.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 4
014 sm114 TSM.sh 4p_vodsr_h clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 10
016 erE11 TER.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ............FAIL! rc= 13
017 brE11 TBR.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ............FAIL! rc= 11
018 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
  tempest:
009 smB11 TSMruncase.sh .........................................................................FAIL! rc= 4
------>>>>>>> Bug 694
011 er111 TER.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
012 br111 TBR.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ..............FAIL! rc= 11
036 erE31 TER.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 10+38 arb_ic ....FAIL! rc= 7
037 brE31 TBR.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 24+24 arb_ic ....FAIL! rc= 6
045 smH01 TSM.sh 17p_cnnsc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5@2000 48 startup FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_5_19

Changes answers relative to baseline: Bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_5_19
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Thu Mar  6 14:52:17 MST 2008
One-line Summary: Change directory structure to mimic CCSM, fix so no NaNS on BGC interpinic output, new half degree CN clmi dataset

Purpose of changes: move cdir1_clm3_5_18 to trunk.  Get directory structure to look like CCSM.

    models ------------------------------ Model source code for each component
    models/lnd 
    models/lnd/clm ---------------------- CLM source code, build-scripts, tools, and testing
    models/lnd/clm/test/system ---------- CLM test scripts
    models/lnd/clm/tools ---------------- CLM tools
    models/lnd/clm/tools/mksurfdata
    models/lnd/clm/tools/ncl_scripts
    models/lnd/clm/tools/interpinic
    models/lnd/clm/tools/mkgriddata
    models/lnd/clm/tools/mkdatadomain
    models/lnd/clm/tools/cprnc
    models/lnd/clm/bld ------------------ CLM build scripts
    models/lnd/clm/bld/run-ibm.csh ------    sample CLM run script for the IBM
    models/lnd/clm/bld/urban_input
    models/lnd/clm/bld/usr.src
    models/lnd/clm/bld/perl5lib
    models/lnd/clm/doc ------------------ CLM documentation
    models/lnd/clm/doc/UsersGuide
    models/lnd/clm/doc/CodeReference
    models/lnd/clm/doc/Dev
    models/lnd/clm/src ------------------ CLM specific source code directories
    models/lnd/clm/src/biogeochem
    models/lnd/clm/src/main
    models/lnd/clm/src/riverroute
    models/lnd/clm/src/biogeophys
    models/ocn/socn --------------------- stub ocean model
    models/ice
    models/ice/sice --------------------- stub sea-ice model
    models/atm
    models/atm/datm7 -------------------- data atmosphere model
    models/atm/datm7/bld
    models/utils ------------------------ Utiltiies
    models/utils/esmf_wrf_timemgr -------    ESMF WRF time-manager API
    models/utils/timing -----------------    timing utiltities
    models/utils/mct --------------------    Model Coupling Toolkit
    models/utils/pio --------------------    Parallel I/O
    models/drv -------------------------- Sequential CCSM source code
    models/drv/seq_mct
    models/drv/seq_mct/driver
    models/csm_share -------------------- CCSM share code (shared between CCSM component models)
    scripts ----------------------------- CCSM build, run and testing scripts
    scripts/README ----------------------    ReadMe file on CCSM scripts
    doc --------------------------------- CCSM documentation (currently out of date)

    Changes so that interpinic doesn't output NaNS on AIX compiler for CN configuration.

    QUICKSTART: using the new CPL7 scripts:

         cd scripts
         ./create_newcase            # get help on how to run create_newcase
         ./create_newcase -case testI -mach blueice -res f19_g15 -compset I    # create new "I" case for blueice at 1.9x2.5_gx1v5 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         configure -mach blueice     # create scripts
         testI.build                 # build model and create namelists
         bsub < testI.run            # submit script  
                                     # (NOTE: edit env_run to set RESUBMIT to number of times to automatically resubmit)

Bugs fixed (include bugzilla ID): 681 (archiving/resub), 696 (save datm7 files) , 707 (xlf90 bug with CAM)

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 680 (t0 precip diff for seq-ccsm), 
                                  694 (restarts for offline) , 697 (version etc.), 698 (cprnc bug), 701 (svn keyword), 
                                  708, (xlf bug on bluevista)
    http://bugs.cgd.ucar.edu/

    New bugs found: 708 -- bug with new xlf90 compiler on bluevista for CASA
                    710 -- Some variables are NaNS on clm.i output from CN configuration

    Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                          652 (threads different answers with older PGI versions)

Describe any changes made to build system: Changed to work with new directory structure
   (also works with any wildcard in clm "models/lnd/clm*" directory name)

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Update half degree CN clmi file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): drv (also add in CCSM doc and scripts directories as externals)
    doc_060127, seqmct45_scripts_080108, drvseq2_0_10

List all files eliminated: Files moved around extensively

List all files added and what they do: Files moved around extensively

List all existing files that have been modified, and describe the changes: Files moved around extensively

   models/lnd/clm/bld/DefaultCLM_INPARM_Namelist.xml --- change CN half degree clmi file 
   models/lnd/clm/bld/clm.cpl6.template ---------------- change assumed paths (use wildcard for models/lnd/clm*)
   models/lnd/clm/bld/clm.cpl7.template ---------------- change assumed paths (use wildcard for models/lnd/clm*)
   models/lnd/clm/bld/configure ------------------------ get to work in new directory structure
   models/lnd/clm/bld/run-ibm.csh ---------------------- fix archiving, and resubmit
   models/lnd/clm/bld/run-lightning.csh ---------------- fix archiving, and resubmit
   models/lnd/clm/bld/run-pc.csh ----------------------- fix archiving, and resubmit
   models/lnd/clm/src/main/clm_time_manager.F90 -------- make save statements explicit
   models/lnd/clm/tools/*/Makefile --------------------- change so CLM_ROOT is top of directory structure with 
                                                         models/lnd/clm* assumed below
   models/lnd/clm/tools/interpinic/interpinic.F90 ------ get numrad dimsize, on AIX check for NaNS and convert to spval,
                                                         if weights == 0 set values to spval
   models/lnd/clm/test/system/test_driver.sh ----------- new directory structure, update to ccsm3_9_beta03 and ccsm4_0_alpha25
   models/lnd/clm/test/system/TBL.sh ------------------- new directory structure
   models/lnd/clm/test/system/TBLtools.sh -------------- new directory structure
   models/lnd/clm/test/system/TSMncl_tools.sh ---------- new directory structure
   models/lnd/clm/test/system/TBR.sh ------------------- new directory structure
   models/lnd/clm/test/system/TER.sh ------------------- new directory structure
   models/lnd/clm/test/system/TSM.sh ------------------- new directory structure
   models/lnd/clm/test/system/TSMpergro.sh ------------- new directory structure
   models/lnd/clm/test/system/TSMtools.sh -------------- new directory structure
   models/lnd/clm/test/system/TSMcnspinup.sh ----------- new directory structure
   models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh ---- new directory structure
   models/lnd/clm/test/system/TCBtools.sh -------------- new directory structure
   models/lnd/clm/test/system/TCText_ccsmcon.sh -------- new directory structure, add blueice

Summary of testing:

  bluevista: All PASS except
052 smJ11 TSM.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 4
053 erJ11 TER.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 10+38 arb_ic ...............FAIL! rc= 5
054 brJ11 TBR.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 24+24 arb_ic ...............FAIL! rc= 5
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
      CAM tests: All PASS except:
060 sm711 TSM.sh h5x8adm adia 9s ..................................FAIL! rc= 6
  blueice: 
     CPL7 test_scripts: ERS.f19_g15.I.blueice, ERB.f19_g15.I.blueice, ERS.f45_g35.I.blueice 
FAIL  ERB.f19_g15.I.blueice
     CPL6 test_scripts: PASS ERT_OS.f19_g15.I.blueice PASS  ERH_OS.T31_g35.ICN.blueice
  jaguarcnl: All PASS
  lightning: All PASS except
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
  bangkok/lf95: All PASS except
18 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  tempest: All PASS

CLM tag used for the baseline comparison tests if applicable: ccsm4_alpha25 with clm3_5_18 in place of default clm

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_5_18
Originator(s):  erik (Erik Kluzek)
Date: Thu Feb 21 22:57:39 MST 2008
One-line Summary: Update to latest seq-ccsm4.alpha tag

Purpose of changes: Get clm trunk to work with latest ccsm4.alpha24 tag

Bugs fixed (include bugzilla ID): 678 (get clm to work with latest cpl7)

Known bugs (include bugzilla ID): 251, 512, 546, 652, 672, 675, 676, 680, 
        681, 694, 696, 697, 698, 701, 702, 707, 708
    http://bugs.cgd.ucar.edu/

  New bugs: 697-- username,version,hostname NOT in seq-driver namelists
            707-- bug on new xlf90 compiler on bluevista for running with CAM
            708-- bug on new xlf90 compiler on bluevista for running with CASA

Describe any changes made to build system: minor change in configure script
  name of mode ext_cam changed to ext_ccsm_seq in configure script

Describe any changes made to the namelist: Sequential driver namelists change

ccsm_inparm namelist changes to seq_infodata_inparm 
   (remove restart_override, username, version, hostname)
timemgr_inparm namelist changes to seq_timemgr_inparm
   (remove restart_overrideTMG, stop_final_ymd [use stop_ymd instead] )

List any changes to the defaults for the boundary datasets: 
    Add 2.65x3.33 datasets, newer 1x1_brazil domain file

Describe any substantial timing or memory changes: None

Code reviewed by: mvertens (original version on seq branch)

List any svn externals directories updated (csm_share, mct, etc.): 

drv, datm7, sice, socn, csm_share_, and mct

src/drv	      drvseq2_0_07
src/datm7     drva_datm7_070824_tags/drva07_datm7_071129
src/sice      stubs1_0_7
src/socn      stubs1_0_7
src/csm_share drva_share3_070903_tags/loga25_share3_071107
src/utils/mct seqa_MCT2 _3_0_070524_tags/seqa07_MCT2_4_2_071026

List all files eliminated: None

List all files added and what they do:

A  +   bld/ExtSeqCCSMDrvInNamelistsDescriptions.xml -- for moving drv_in namelist items
A  +   bld/clm.cpl7.template ------------------------- for running with cpl7

List all existing files that have been modified, and describe the changes:

------------- Get external CAM tests working, and with changes to seq-ccsm
M      test/system/TSMext_ccsmseq_cam.sh
M      test/system/test_driver.sh
M      test/system/tests_posttag_hybrid_regression
M      test/system/tests_posttag_purempi_regression
M      test/system/nl_files/scam
M      test/system/nl_files/scam_prep
M      test/system/nl_files/ext_ccsm_seq_cam
M      test/system/TSM.sh

------------- Now need clm_varpar.F90 in tools
M      tools/mksurfdata/Srcfiles
M      tools/mkgriddata/Srcfiles

------------- Add ext_ccsm_seq, add 2.65x3.33 datasets, change for new seq-ccsm namelists
              switch 1x1_brazil domain file
M      bld/configure
M      bld/DefaultCLM_INPARM_Namelist.xml
M      bld/run-ibm.csh
M      bld/clm_inparm.pm
M      bld/DefaultTIMEMGR_INPARM_Namelist.xml
M      bld/sample.seqccsm.namelists
M      bld/run-pc.csh
M      bld/timemgr_inparm.pm
M      bld/DefaultCCSM_INPARM_Namelist.xml
M      bld/drv_in.pm
M      bld/run-lightning.csh
M      bld/mkSrcfiles
M      bld/SeqCCSM_namelist.pm
M      bld/ccsm_inparm.pm
M      bld/SeqCCSMDrvInNamelistsDescriptions.xml
M      bld/DefaultDATM_DSHR_NML_Namelist.xml

------------- Don't allow seq_ccsm datatypes to go below lnd_comp_mct, fix scam
M      src/main/clm_comp.F90 ------------- Remove SyncClock, CCSMInit
M      src/main/driver.F90 --------------- Remove SyncClock, CCSMInit
M      src/main/decompInitMod.F90 -------- Use endrun rather than shr_sys_abort
M      src/main/ncdio.F90 ---------------- fixes for scam
M      src/main/atmdrvMod.F90 ------------ remove unneeded printing
M      src/main/clmtypeInitMod.F90 ------- explicit use only's
M      src/main/initializeMod.F90 -------- remove CCSMInit and EClock
M      src/main/controlMod.F90 ----------- move initialization to timemgr/clm_varctl 
                                           set methods
M      src/main/clm_time_manager.F90 ----- Make namelist input private, add set method
M      src/main/clm_varctl.F90 ----------- Add set and initialization methods
M      src/main/clm_varorb.F90 ----------- Remove values not needed
M      src/main/lnd_comp_mct.F90 --------- Update to new structures/logic
                                           On time-step 0 also advance to time-step 1
M      src/main/program_off.F90 ---------- Move orbital info/dtime to this level
M      src/main/spmdMod.F90 -------------- Change print format
M      src/biogeophys/UrbanInputMod.F90 -- Initialize filename

Summary of testing:

  bluevista:
004 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
008 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
011 blD91 TBL.sh _persc_ds clm_per 19981231:YEARLY:1200 4x5 gx3v5 144 arb_ic ....................FAIL! rc= 5
014 blG71 TBL.sh 17p_sc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic .........FAIL! rc= 5
016 blH71 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ......FAIL! rc= 5
021 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
026 blF27 TBL.sh 17p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ..............FAIL! rc= 5 
031 blE31 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic
.......FAIL! rc= 5 
034 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
036 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
040 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 5
046 blH11 TBL.sh 17p_cnnsc_dh clm_std 19980101:MONTHLY:1800 48x96 gx3v5@1890 48 arb_ic ..........FAIL! rc= 5
050 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:MONTHLY:1800 10x15 USGS@1890 48 arb_ic ...........FAIL! rc= 5
052 smJ11 TSM.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 4 <<<< bug 708
053 erJ11 TER.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 10+38 arb_ic ...............FAIL! rc= 5 <<<< bug 708
054 brJ11 TBR.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 24+24 arb_ic ...............FAIL! rc= 5 <<<< bug 708
055 blJ11 TBL.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 4
059 blK11 TBL.sh 10p_dgvmsc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 5
064 blK71 TBL.sh 10p_dgvmsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 5
068 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5
072 blL63 TBL.sh _sc_h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup ..................FAIL! rc= 5
076 bl563 TBL.sh _h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 5
080 blL52 TBL.sh _sc_ds clm_std 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ......................FAIL! rc= 5
084 blL73 TBL.sh _sc_s clm_std 19980101:6_HOURLY:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 5
089 blL83 TBL.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10 arb_ic ..................FAIL! rc= 5
101 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4 <<<<< bug 707
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4 <<<<<< bug 707
  CAM tests all PASS except
060 sm711 TSM.sh h5x8adm adia 9s ..................................FAIL! rc= 6
062 sc001 TSC.sh e64bfbiop scm_prep scm64bfbiop scm_b4b_o1 7s .....FAIL! rc= 5

First was a Build-namelist error, next was core-dump.

  tempest:
004 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
007 blD91 TBL.sh _persc_ds clm_per 19981231:YEARLY:1200 4x5 gx3v5 144 arb_ic ....................FAIL! rc= 5
010 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
014 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
016 blG71 TBL.sh 17p_sc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic .........FAIL! rc= 5
018 blH71 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ......FAIL! rc= 5
  lightning/pathscale:
004 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
008 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
011 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
013 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
015 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
017 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<< bug 694
026 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 5
031 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:MONTHLY:1800 10x15 USGS@1890 48 arb_ic ...........FAIL! rc= 5
035 blK51 TBL.sh 10p_dgvmsc_dm clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
039 blL51 TBL.sh _sc_dh clm_std 19980115:MONTHLY:1800 10x15 USGS 48 arb_ic ......................FAIL! rc= 5
043 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5
047 blL73 TBL.sh _sc_s clm_std 19980101:6_HOURLY:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 5
  jaguarcnl:
008 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 7
012 blE12 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7
016 blE32 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 7
020 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 7
024 blH12 TBL.sh 17p_cnnsc_dm clm_std 19980101:MONTHLY:1800 48x96 gx3v5@1890 48 arb_ic ..........FAIL! rc= 7
028 blJ12 TBL.sh 4p_casasc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 7
  bangkok/lf95:
004 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 7
008 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 7
011 blD91 TBL.sh _persc_ds clm_per 19981231:YEARLY:1200 4x5 gx3v5 144 arb_ic ....................FAIL! rc= 7
014 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
016 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 7
018 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<<<< 694
025 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 7
030 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:MONTHLY:1800 10x15 USGS@1890 48 arb_ic ...........FAIL! rc= 7
034 blJ12 TBL.sh 4p_casasc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 7
038 blK51 TBL.sh 10p_dgvmsc_dm clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 7
042 blL51 TBL.sh _sc_dh clm_std 19980115:MONTHLY:1800 10x15 USGS 48 arb_ic ......................FAIL! rc= 7
047 blL73 TBL.sh _sc_s clm_std 19980101:6_HOURLY:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 7
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

TBL _sc tests fail because of addition of area-corrected fluxes and addition of running
  time-step 1 when time-step 0 is done on initialization.
er111/112 tests fail due to previous bug 694
sm921/982 test fail on bluevista due to new bug 707 on (compiler bug on bluevista)

CLM tag used for the baseline comparison tests if applicable: clm3_5_17

Changes answers relative to baseline: Yes -- greater than roundoff

  Summarize any changes to answers, i.e.,
    - what code configurations: Any mode with sequential-CCSM
    - what platforms/compilers: ALL
    - nature of change: larger than roundoff

Fluxes in driver are corrected by ratio's of area's from different components.
Also at time-step 0 you also run time-step 1 -- rather than just time-step 0.

===============================================================
===============================================================
Tag name:  clm3_5_17
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Wed Feb  6 10:10:17 MST 2008
One-line Summary: Merge Tony Craig's FMI branch fmi12_clm3_5_16 to the clm trunk

Purpose of changes: Reducing the debug level in some initialization routines, fixing a few diagnostics, 
        updating timers, improve the write_diagnostic performance, update of rtm init to improve scaling and performance.

Bugs fixed (include bugzilla ID): 597

Known bugs (include bugzilla ID): 251, 512, 546, 652, 672, 675, 676, 680, 681, 694, 696, 698, 701, 702
    http://bugs.cgd.ucar.edu/

    New bugs found: datm7 restart files NOT being archived (696), cprnc found to have problems (698),
    version autoinsertion in tools (701), test_driver times out on jaguar (702)

Describe any changes made to build system: Add BUILDPIO CPP variable

Describe any changes made to the namelist: Add new namelist variables dealing with PIO (see below)

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik,tcraig

List any svn externals directories updated (csm_share, mct, etc.): pio to pio11_prod

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      doc/UpDateChangeLog.pl ----------------- Tweak update of date to work correctly for both files
M      bld/run-frost.csh ---------------------- Tony gets working, add PIO build as commented out, turn querys off, put files
                                                in explicitly, tests new ncd_ options
M      src/biogeochem/STATICEcosysDynMod.F90 -- Add timers
M      src/main/clm_comp.F90 ------------------ Add timers
M      src/main/driver.F90 -------------------- Add timers, add barrier for diagnostics write, change send/recv into reduce (leave option for old code)
M      src/main/decompInitMod.F90 ------------- Reduce debug level for initialization
M      src/main/initializeMod.F90 ------------- Add timers
M      src/main/histFileMod.F90 --------------- PIO option
M      src/main/ncdio.F90 --------------------- Work for PIO, new options
M      src/main/gen_ncdio_global_subs.csh ----- Work for PIO, new options
M      src/main/gen_ncdio_local_subs.csh ------ Work for PIO, new options
M      src/main/controlMod.F90 ---------------- Add new namelist items

History experimental options (mostly for PIO which isn't fully implemented yet)

     o hist_pioflag           = logical true if want to turn on hist with pio                    [.FALSE., .TRUE.]
     o ncd_lowmem2d           = logical true if want to turn on low memory 2d writes in clm hist [.TRUE., .FALSE.]
     o ncd_pio_def            = logical true if want default pio use setting                     [.FALSE., .TRUE.]
     o ncd_pio_UseRearranger  = logical true if want to use MCT as Rearranger                    [.TRUE., .FALSE.]
     o ncd_pio_UseBoxRearr    = logical true if want to use box as Rearranger                    [.FALSE., .TRUE.]
     o ncd_pio_SerialCDF      = logical true if want to write with pio serial netcdf mode        [.FALSE., .TRUE.]
     o ncd_pio_IODOF_rootonly = logical true if want to write history in pio from root only      [.FALSE., .TRUE.]
     o ncd_pio_DebugLevel     = integer pio debug level                                          ( default 2)
     o ncd_pio_num_iotasks    = integer number of iotasks to use for PIO                         (default all PEs)

M      src/main/clm_varctl.F90 ----------------- New ncd and PIO history options
M      src/main/program_off.F90 ---------------- Add mpi barrier
M      src/main/areaMod.F90 -------------------- Improve performance/robustness
M      src/main/clm_mct_mod.F90 ---------------- Use pelocs
M      src/riverroute/RtmMod.F90 --------------- Add timers, update of rtm init to improve scaling and performance
M      test/system/test_driver.sh -------------- Fix for new account names on jaguar/phoenix

Summary of testing:

  bluevista: All PASS except
021 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7
026 blF27 TBL.sh 17p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ..............FAIL! rc= 7
031 blE31 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 7
101 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  jaguarcnl: All PASS except
012 blE12 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7
016 blE32 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 7
  bangkok/lf95: All PASS except
018 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
020 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7
051 sm951 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dm ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  lightning/pathscale: All PASS except
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
021 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7
  tempest:  All PASS except
010 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7

er112, bl112, sm921, sm951, sm982 tests failed previously
other bl tests fail because of the changes in RTM

CLM tag used for the baseline comparison tests if applicable: clm3_5_16

Changes answers relative to baseline: Only RTM

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: RTM
    - what platforms/compilers: All
    - nature of change: Roundoff change

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? Only fields with RTM show differences and only to roundoff level

 RMS DVOLRDT_ 8.8031E-22
 RMS DVOLRDT_ 3.4573E-23
 RMS QCHANR   3.6282E-16
 RMS QCHOCNR  5.4893E-17

The above is on bluevista after running for a day (other fields show RMS difference of zero)

===============================================================
===============================================================
Tag name:  clm3_5_16
Originator(s):  erik (Erik Kluzek)
Date: Mon Jan 28 15:00:53 MST 2008
One-line Summary: Get point version of Urban code onto trunk (urban code can not restart)

Purpose of changes: Move urban branch onto trunk. Fix bug so hv files are saved. Add
   high resolution datasets from Art Mirin.

   Urban code was started by Gordon Bonan, and taken up by Mariana Vertenstein and Keith Oleson.
   This represents work that has been ongoing for several years. Revision dates go back to
   before 2003.

   Some papers on the work are available from:

   Oleson et.-al. Journal of Applied Meteorology and Climatology, in-Press as of Jan/2008

   http://www.cgd.ucar.edu/tss/staff/oleson/publications/JAMC1597_rev_jul27_2007.pdf
   http://www.cgd.ucar.edu/tss/staff/oleson/publications/JAMC1598_rev_jul27_2007.pdf

Bugs fixed (include bugzilla ID): 644 (save hv files)

Known bugs (include bugzilla ID): 251, 512, 546, 652, 672, 675, 676, 680, 681, 694
    http://bugs.cgd.ucar.edu/

    New bug found from clm3_5_15 (694) -- restarts are NOT bit-for-bit on lightning and bangkok/lf95 for offline

Describe any changes made to build system: None

Describe any changes made to the namelist: Added furbinp -- for urban datasets

List any changes to the defaults for the boundary datasets: Added more urban datasets.
      Add 0.23x0.31 datasets from Art Mirin.

Describe any substantial timing or memory changes: Approx 1% slower, memory should be very close

Code reviewed by: oleson

List any svn externals directories updated (csm_share, mct, etc.): bld/archiving
    bld/archiving to scripts_080108

List all files eliminated: None

List all files added and what they do:

------ Urban point input datasets (ASCII)
A bld/urban_input/asphaltjungle_fluxes.txt
A bld/urban_input/metropolis_fluxes.txt
A bld/urban_input/mexicocityMEX_fluxes.txt
A bld/urban_input/vancouverCAN_fluxes.txt
----- Main urban source codes
A src/biogeophys/UrbanInitMod.F90
A src/biogeophys/UrbanInputMod.F90
A src/biogeophys/UrbanMod.F90
----- Add testing for urban code
A test/system/tests_posttag_urban ------ List of urban point tests
A test/system/nl_files/clm_urb1pt ------ Namelist options for CLM1PT datasets
A test/system/nl_files/nl_urb ---------- Urban namelist
A test/system/config_files/_mexsc_ds --- Mexicocity, MEX
A test/system/config_files/_vansc_ds --- Vancouver, CAN
----- Add tool to convert Urban point datasets to sequential-CCSM mode for datm7
A tools/ncl_scripts/convertUrbanOffline2Seq.ncl

List all existing files that have been modified, and describe the changes:

-------- Add in urban datasets to build-namelist
M bld/configure ---------------------------- Move subroutine definition to before first reference
M bld/datm_dshr_in.pm
M bld/clm_inparm.pm
M bld/datm.streams.template.xml ------------ Add in CLM1PT datasets for Urban
M bld/DefaultTIMEMGR_INPARM_Namelist.xml
M bld/DefaultSettings.xml
M bld/DefaultDATM_DSHR_NML_Namelist.xml
M bld/DefaultCLM_INPARM_Namelist.xml
M bld/timemgr_inparm.pm
M bld/run-pc.pm ---------------------------- Remove extra line, set mode in configure, add note about step=coupling step
M bld/run-ibm.pm --------------------------- Add note about step=coupling step
M bld/run-lightning.pm --------------------- Add note about step=coupling step
-------- source code changes to add in urban code
-------- mostly adding urban and non-urban filters
M src/biogeochem/DGVMMod.F90 --------------- Add urban filters
M src/main/atmdrvMod.F90 ------------------- Add RH and rainf, zero out solar if coszen<0, Urban pt CPPs 
M src/main/clm_varcon.F90 ------------------ Add PI, RGAS, SECSPDAY, urban PFT types, urban ponding depth
M src/main/clm_varpar.F90 ------------------ Add maxpatch_urb for 5 PFT's
M src/main/clm_atmlnd.F90 ------------------ Fill RH and rainf
M src/main/clmtype.F90 --------------------- Add urban state data
M src/main/clmtypeInitMod.F90 -------------- Initialize urban state data
M src/main/controlMod.F90 ------------------ Add furbinp namelist item for urban input data
M src/main/driver.F90 ---------------------- Pass urban filters, call urban modules
M src/main/filterMod.F90 ------------------- Add urban filters
M src/main/histFileMod.F90 ----------------- Add scale types needed for urban which needs to calculate area-averages based on urban input
M src/main/histFldsMod.F90 ----------------- Add new output fields: 

        BUILDHEAT     heat flux from urban building interior to walls and roof            W/m^2  active
        LWdown        atmospheric longwave radiation                                      W/m^2
        PSurf         surface pressure                                                    Pa
        Qh            sensible heat                                                       W/m^2
        Qle           total evaporation                                                   W/m^2
        Qstor         storage heat flux (includes snowmelt)                               W/m^2
        RH            atmospheric relative humidity                                       %
        Rainf         atmospheric rain                                                    mm/s
        Rnet          net radiation                                                       W/m^2
        SWdown        atmospheric incident solar radiation                                W/m^2
        TBUILD        internal urban building temperature                                 K      active
        TRAFFICFLUX   sensible heat flux from urban traffic                               W/m^2  active
        Tair          atmospheric air temperature                                         K
        WASTEHEAT     sensible heat flux from heating/cooling sources of urban waste heat W/m^2  active

(Fields not mentioned above as active are set to inactive unless asked for. They are "ALMA" variables needed for
 an urban model intercomparision project.)

M src/main/iniTimeConst.F90 ---------------- Initialize urban data
M src/main/initGridCellsMod.F90 ------------ Add initialization of urban landunits
M src/main/initSurfAlbMod.F90 -------------- Call urban albedo calc
M src/main/initializeMod.F90 --------------- Urban initialization
M src/main/lnd_comp_mct.F90 ---------------- Add saturation vapor calc to compute RH
M src/main/mkarbinitMod.F90 ---------------- Initialize urban state
M src/main/pftvarcon.F90 ------------------- Fix typo
M src/main/program_off.F90 ----------------- Pass declination angle from orbit to atmdrv (so solar can be nullified for coszen<0)
M src/main/subgridAveMod.F90 --------------- Setup grid info for urban
M src/main/subgridMod.F90 ------------------ Set urban landunit
M src/main/surfrdMod.F90 ------------------- Initialize urban weights -- remove old code that aborted if urban fraction>0
M src/biogeophys/BalanceCheckMod.F90 ------- Incoming rain does NOT include sun or shade wall, some checks only non-urban
M src/biogeophys/Biogeophysics1Mod.F90 ----- Take into account type of urban column
M src/biogeophys/Biogeophysics2Mod.F90 ----- Take into account type of urban column
M src/biogeophys/FrictionVelocityMod.F90 --- Change index and filters
M src/biogeophys/Hydrology1Mod.F90 --------- Take into account no water flow through urban buildings and impervious road
M src/biogeophys/Hydrology2Mod.F90 --------- Send urban filters down, and no water flow in certain urban column types
M src/biogeophys/SnowHydrologyMod.F90 ------ Urban similar to bare-soil landunit
M src/biogeophys/SoilHydrologyMod.F90 ------ Determine ponding limits for urban roof and impervious road, no runoff for sun/shade wall
M src/biogeophys/SoilTemperatureMod.F90 ---- Take into account that urban columns interact
M src/biogeophys/SurfaceAlbedoMod.F90 ------ Filter urban columns appropriately
M src/biogeophys/SurfaceRadiationMod.F90 --- Filter urban columns out
---------- Make MPI and OpenMP settings explicit in configuration files
M test/system/config_files/17p_vodsr_dm
M test/system/config_files/17p_vodsr_do
M test/system/config_files/4p_casa_m
M test/system/config_files/4p_casa_o
M test/system/config_files/17p_vodsr_m
M test/system/config_files/17p_vodsr_o
M test/system/config_files/4p_vodsr_dm
M test/system/config_files/17p_cnn_m
M test/system/config_files/4p_vodsr_do
M test/system/config_files/17p_cnn_o
M test/system/config_files/17p_cnn_dm
M test/system/config_files/17p_cnn_do
M test/system/config_files/10p_dgvm_m
M test/system/config_files/4p_casa_dm
M test/system/config_files/10p_dgvm_o
M test/system/config_files/4p_casa_do
M test/system/config_files/10p_dgvm_dm
M test/system/config_files/README
M test/system/config_files/10p_dgvm_do
M test/system/config_files/4p_vodsr_m
M test/system/config_files/4p_vodsr_o
---------- Add urban tests to testing system
M test/system/input_tests_master
M test/system/README.testnames
M test/system/mknamelist
M test/system/test_driver.sh
M test/system/tests_posttag_bangkok
M test/system/tests_posttag_blueice
M test/system/tests_posttag_lightning
M test/system/tests_posttag_hybrid_regression
M test/system/tests_posttag_purempi_regression
M test/system/tests_pretag_bangkok
M test/system/tests_pretag_bluevista
---------- Put options on separate lines, explicitly set source
M test/system/nl_files/clm_pftdyn
M test/system/nl_files/clm_per
M test/system/nl_files/clm_per0
M test/system/nl_files/clm_std
---------- Add note about need of other directories to build
M tools/ncl_scripts/README ---------------------- Also add note about new script
M tools/mksurfdata/README
M tools/ncl_scripts/README
M tools/interpinic/README
M tools/mkgriddata/README
M tools/mkdatadomain/README


Summary of testing:

  bluevista: All PASS except
034 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
036 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
076 bl563 TBL.sh _h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7
101 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  tempest:   ALL PASS
  jaguarcnl: All PASS except TBL tests which fail because of a problem with the previous version on jaguar.
004 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 4
008 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
012 blE12 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
016 blE32 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 5
020 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 5
024 blH12 TBL.sh 17p_cnnsc_dm clm_std 19980101:MONTHLY:1800 48x96 gx3v5@1890 48 arb_ic ..........FAIL! rc= 5
028 blJ12 TBL.sh 4p_casasc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 5
032 blK12 TBL.sh 10p_dgvmsc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 5
  bangkok/lf95: All PASS except
014 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
016 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
018 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<<
020 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7
051 sm951 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dm ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

  lightning/pathf90: All PASS except
011 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
013 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
015 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
017 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<<
021 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7


Urban TBL point tests do NOT pass because previous model version didn't have urban enabled.
cam standalone tests require the ccsm4_alpha series version of clm.
<<<<< Tests are the 694 bug found in clm3_5_15.


CLM tag used for the baseline comparison tests if applicable: clm3_5_15

Changes answers relative to baseline: None  bit-for-bit
   (except albedo's will be different when running in offline mode see below)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All mode=offline
    - what platforms/compilers: All
    - nature of change: Solar now set to zero when coszen<0, which influences
        some non-common instances near twilight when the dataset shows solar>0
        but coszen<0. It doesn't change the model results -- because everything is
        reflected anyway, but it will change how albedo is averaged over those periods.

===============================================================
===============================================================
Tag name:  clm3_5_15
Originator(s):  erik (Erik Kluzek)
Date: Fri Dec 21 20:33:01 MST 2007
One-line Summary: Fix interpinic for half degree grid, add in large-file support, allow configure to work with ccsm directory structure

Purpose of changes:

Change configure so it will work with the ccsm4_alpha directory structure (especially for
the test suite). Add in large-file support for main code as well as tools (mksurfdata). 
Add in tests for create_croplandunit and large-file support. Get interpinic to work for 
half degree, and optimize and verify it's use of Open-MP. Add tool to interpolate
Nitrogen deposition files (ndepregrid.ncl). Update run scripts with suggestions from Sam
(and fix a couple of minor bugs).

interpinic problem: Previous version may have incorrectly found nearest points for PFT data.
  Data would have been valid -- but possibly NOT from the nearest point.
  There was also a potential Open-MP problem where answers could change depending on the 
  number of threads used. The new version corrects both of these problems. The new version
  should be used to interpolate critical datasets.

Bugs fixed (include bugzilla ID): 656 (interpinic), 660 (large-file), 674 (diff -q in run script), 679 (testing task/thread change)

Known bugs (include bugzilla ID): 251, 512, 546, 652, 664, 672, 675, 676
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Remove mpi include/lib for jaguarcnl
 (as already included with the ftn command)

  Make ccsm_seq	-- the default way to run.

Describe any changes made to the namelist: Add outnc_large_files option

 outnc_large_files --- TRUE => use NetCDF 64-bit large file format for output files
                       (history and restart files)

 The NetCDF 64-bit large file format became available in NetCDF3.6.0 and allows larger dimensions as well as allowing
 output files > 2 GBytes. For more info. on Large File Support (LFS) for NetCDF see...

	http://www.unidata.ucar.edu/software/netcdf/docs/faq.html#lfs

 Since, file offsets are stored with 64-bit words rather than 32-bit words -- file sizes may change slightly with LFS.

List any changes to the defaults for the boundary datasets:

	Added in new clmi files:

+<finidat RESOLUTION="0.47x0.63"  mask="gx1v5" BGC="cn" ic_ymd="19800101"
+ic_tod="0">lnd/clm2/initdata/clmi.BCN.1980-01-01-00000.071207.nc
+<finidat RESOLUTION="1.9x2.5"   mask="gx1v5" BGC="none" ic_ymd=     "101" ic_tod="0">lnd/clm2/initdata/clmi.F_0000-01-01_1.9x2.5_gx1v5_c071203.nc
+<finidat RESOLUTION="1.9x2.5"   mask="gx1v5" BGC="none" ic_ymd=     "901" ic_tod="0">lnd/clm2/initdata/clmi.F_0000-09-01_1.9x2.5_gx1v5_c071203.nc

	Added in ndep files at half degree

+<fndepdat RESOLUTION="0.47x0.63" BGC="cn" sim_year="2100" >lnd/clm2/ndepdata/ndep_clm_2100_0.47x0.63_c071213.nc</fndepdat>
+<fndepdat RESOLUTION="0.47x0.63" BGC="cn" sim_year="2000" >lnd/clm2/ndepdata/ndep_clm_2000_0.47x0.63_c071213.nc</fndepdat>
+<fndepdat RESOLUTION="0.47x0.63" BGC="cn" sim_year="1890" >lnd/clm2/ndepdata/ndep_clm_1890_0.47x0.63_c071213.nc</fndepdat>
+<fndepdyn RESOLUTION="0.47x0.63" BGC="cn" >lnd/clm2/ndepdata/fndep_clm_1890-2100_0.47x0.63_c071213.nc</fndepdyn>

        Add documentation and delete extra variables from T42 base ndep datasets

+<fndepdat RESOLUTION="64x128"    BGC="cn" sim_year="2100" >lnd/clm2/ndepdata/ndep_clm_2100_64x128_c071221.nc</fndepdat>
+<fndepdat RESOLUTION="64x128"    BGC="cn" sim_year="2000" >lnd/clm2/ndepdata/ndep_clm_2000_64x128_c071221.nc</fndepdat>
+<fndepdat RESOLUTION="64x128"    BGC="cn" sim_year="1890" >lnd/clm2/ndepdata/ndep_clm_1890_64x128_c071221.nc</fndepdat>

	Added in urban testing dataset

+<fsurdat RESOLUTION="1x1_camdenNJ"  >lnd/clm2/surfdata/surfdata_1x1pt_camdenNJ_navy_070824.nc</fsurdat>
+<fatmgrid RESOLUTION="1x1_camdenNJ"  >lnd/clm2/griddata/griddata_1x1pt_camdenNJ_navy_070824.nc</fatmgrid>
+<fatmlndfrc RESOLUTION="1x1_camdenNJ"  mask="navy">lnd/clm2/griddata/fracdata_1x1pt_camdenNJ_navy_070824.nc


Describe any substantial timing or memory changes: None

Code reviewed by:  slevis (interpinic, run-ibm.csh), 
                   thornton (ndepregrid.ncl, outnc_large_files option)

List any svn externals directories updated (csm_share, mct, etc.):
  perl5lib to perl5lib_071204 which includes new Decomp module.

List all files eliminated: None

List all files added and what they do:

Add files for testing different tool configurations and ncl scripts, and for testing of 
create_crop_landunit, large_file support, and an urbin test. Also change offline configuration
files so they have offline explicitly set as the mode.

A  +   test/system/config_files/tools__ds
A  +   test/system/config_files/tools__o
A  +   test/system/TSMncl_tools.sh
A  +   test/system/nl_files/nl_crcrop
A  +   test/system/nl_files/nl_std
A  +   test/system/nl_files/nl_lfiles

Add ncl script to regrid Nitrogen deposition files

A  +   tools/ncl_scripts
A  +   tools/ncl_scripts/README
A  +   tools/ncl_scripts/ndepregrid.ncl
A  +   tools/mkgriddata/mkgriddata.ccsm_dom  ------ add sample script for using CCSM domain files

List all existing files that have been modified, and describe the changes:


	Testing system updates...

M      test/system/config_files/*  <-- offline configure files -- explicitly set offline mode
M      test/system/config_files/README
M      test/system/tests_posttag_spot1
M      test/system/tests_pretag_jaguar
M      test/system/README.testnames
M      test/system/tests_pretag_bangkok
M      test/system/TCBtools.sh
M      test/system/test_driver.sh
M      test/system/mknamelist
M      test/system/tests_posttag_hybrid_regression
M      test/system/tests_posttag_purempi_regression
M      test/system/tests_pretag_tempest
M      test/system/tests_pretag_bluevista
M      test/system/tests_posttag_blueice
M      test/system/input_tests_master
M      test/system/README
M      test/system/TSMtools.sh
M      test/system/TCBext_ccsmseq_cam.sh
M      test/system/tests_posttag_lightning
M      test/system/TBLtools.sh
M      test/system/TSM.sh

	Update tools makefile and change svn keyword strings

M      tools/mksurfdata/mkvarctl.F90
M      tools/mksurfdata/README
M      tools/mksurfdata/mkfileMod.F90
M      tools/mksurfdata/mksrfdat.F90
M      tools/mksurfdata/Makefile
M      tools/interpinic/interpinic.F90
M      tools/interpinic/Srcfiles
M      tools/interpinic/Makefile
M      tools/mkgriddata/creategridMod.F90
M      tools/mkgriddata/Makefile
M      tools/mkdatadomain/Makefile
M      tools/README

M      bld/configure ---------------------- changes to work with ccsm4.alpha directory structure, and jaguarcnl
M      bld/DefaultCLM_INPARM_Namelist.xml - Add new datasets
M      bld/Makefile.in -------------------- changes needed for jaguarcnl and Darwin
M      bld/scpDefaultNamelist.pl ---------- extend to work with ndep files
       Make changes to run scripts -- move section of things to change to top
       Remove stuff not used. Add more documentation. Add suggestions from Sam Levis.
M      bld/run-ibm.csh -------------------- remove -q option to diff 
M      bld/run-lightning.csh -------------- add bit about comparing rpointer files to see if advancing from run-ibm.csh
M      bld/run-pc.csh --------------------- add bit about comparing rpointer files to see if advancing from run-ibm.csh

	Add large-file support

M      src/biogeochem/CASAMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/main/ncdio.F90
M      src/main/restFileMod.F90
M      src/main/controlMod.F90
M      src/main/clm_varctl.F90

Summary of testing:

  tempest: All PASS
  bluevista: All PASS, except
033 smEA1 TSM.sh _sc_ds clm_std 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic .................FAIL! rc= 10 --> Urban not active yet
034 blEA1 TBL.sh _sc_ds clm_std 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic .................FAIL! rc= 4 ---> Urban not active yet
066 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5 ---> New test
070 blL63 TBL.sh _sc_h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup ..................FAIL! rc= 7 ---> New clmi file
074 bl563 TBL.sh _h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7 ---> New clmi file
092 bl711 TBLtools.sh mksurfdata tools__ds namelist .............................................FAIL! rc= 4 ---> Test changed
094 bl771 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 4 ---> Test changed
099 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4
100 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  jaguarcnl: ALL PASS, except TBL tests because previous code didn't run on jaguar with recent changes
  lightning: ALL PASS, except
035 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5 ---> New test
042 bl771 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 5 ---> New test
  bangkok/lf95: All PASS, except
047 sm951 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dm ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
048 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

  CAM tests fail because of incomptabilities of csm_share code.

CLM tag used for the baseline comparison tests if applicable: clm3_5_14

Changes answers relative to baseline: None -- bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_5_14
Originator(s):  erik (Erik Kluzek)
Date: Thu Nov 29 12:18:47 MST 2007
One-line Summary: Use build-streams, and archiving, multiple bug-fixes

Purpose of changes: Move bstrms5_clm3_5_13 to trunk

Remove long-term archiving from clm code. Use Mat's long-term and short-term archiving 
scripts like cam. Short term script runs at the end of your run script -- then the 
long-term archiving script is submitted to the batch que at the end. Update to newer 
version of csm_share that doesn't have any mss_ options. Tune usage of build-namelist. 
Make streams file on the fly. Remove references to get_env and $HEADUrl$. Fix interpinic 
for CASA and RTM (from Sam). Change testing from being done in offline mode to 
seq_ccsm mode. Make default in run scripts to run seq_ccsm mode. Add option to run scripts
to resubmit itself until reaches a given model date.

Add in HCSOI and HCSOISNO from Dave Lawrence. Add PERGRO test to test suite. Simple PERGRO
fix from Jerry Olson. Use branch of driver code for seq-ccsm and removing archiving. Add 
in lnd_comp_mct changes from ccsm4.alpha series.

Bugs fixed (include bugzilla ID): 449 (create_crop), 548 (rm getenv), 579 (cam config),
Changes answers relative to baseline: None

	To verify bit-for-bit ran standard offline test case (bl111) on: tempest, bluevista, bangkok
	(pass on bangkok, and bluevista -- but failed on tempest)

===============================================================
===============================================================
Tag name:  clm3_5_13
Originator(s):  erik (Erik Kluzek)
Date:  Fri Nov 16 10:17:38 MST 2007
One-line Summary: Update xml file with file needed for ccsm3_5_beta18

Describe any changes made to build system: Add models/utils/perl5lib to path for perl tools

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New 0.47x0.63 fraction
  dataset compatible with CCSM datasets

Describe any substantial timing or memory changes: None

List any svn externals directories updated (csm_share, mct, etc.): None

List all subroutines eliminated: None

List all subroutines added and what they do:

A      bld/scpDefaultNamelist.pl -- Script to help copy files in xml database.

List all existing files that have been modified, and describe the changes:

M      bld/configure --- add models/util to path
M      bld/DefaultCLM_INPARM_Namelist.xml -- add new file
M      bld/queryDefaultNamelist.pl --- add models/util to path
M      bld/build-namelist --- add models/util to path

Summary of testing: None

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm3_5_12
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Thu Nov  8 13:49:25 MST 2007
One-line Summary: Tag with new files needed for ccsm3_5_beta17

Purpose of changes: Add new files needed for new resolutions being adding in ccsm3_5_beta17

Bugs fixed (include bugzilla ID): None

Describe any changes made to build system: Small changes to configure from bstrms branch

Describe any changes made to the namelist: Add new files to Default*.xml files

List any changes to the defaults for the boundary datasets: New resolutions added

Describe any substantial timing or memory changes: None

List any svn externals directories updated (csm_share, mct, etc.): None

List all existing files that have been modified, and describe the changes:

Move files over from the bstrms3_clm3_5_11 branch with the new resolutions needed.

M      bld/configure
M      bld/DefaultCLM_INPARM_Namelist.xml
M      bld/DefaultDATM_NML_Namelist.xml
M      bld/DefaultSettings.xml
M      bld/DefaultTIMEMGR_INPARM_Namelist.xml
M      bld/DefaultPROF_INPARM_Namelist.xml
M      bld/queryDefaultNamelist.pl
M      bld/DefaultCCSM_INPARM_Namelist.xml
M      bld/build-namelist
M      bld/DefaultDATM_DSHR_NML_Namelist.xml

Summary of testing: None

Changes answers relative to baseline: None
	
===============================================================
===============================================================
Tag name:  clm3_5_11
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Sep 28 12:03:30 MDT 2007
Date:One-line Summary: Update datasets in the DefaultCLM file for 0.23x0.31, 0.47x0.63, 0.9x1.25 and add fndepdyn file for 1.9x2.5

Purpose of changes: Needed for CCSM 20th Century simulation needed for ccsm3_5_beta13

Bugs fixed (include bugzilla ID): 585, 589, 593, 611

	Add T42_gx1v5, 0.9x1.25_gx1v5 support.
        also look in scripts/ccsm_utils/Tools for perl5lib.
	abort if set -cycle_begyr or cycle_nyrs on namelist rather than on build-namelist command-line.

Known bugs (include bugzilla ID): 251, 449, 512, 546, 608, 618, 622, 624

	New nasty bugs found:

618 	You can't add new fields using: hist_fincl*.
622	CLM blindly continues even if needed fields are missing from surface dataset.

Describe any changes made to build system: None

Describe any changes made to the namelist: Just add more files to XML database

List any changes to the defaults for the boundary datasets: Add new files for: 
              0.23x0.31, 0.47x0.63, 0.9x1.25, (64x128 with mask=gx1v5) and add fndepdyn file for 1.9x2.5

Describe any substantial timing or memory changes: None

Code reviewed by: None

List any svn externals directories updated (csm_share, mct, etc.): csm_share updated to trunk_tags/share3_070927

	This is the version needed in ccsm3_5_beta13 tag (previous version causes problems building on tempest)

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

M      bld/DefaultCLM_INPARM_Namelist.xml ---- Add new datasets.
M      bld/clm_inparm.pm --------------------- Abort if try to define cycle_nyr and cycle_begyr on namelist 
                                               rather than with command line options.
M      bld/queryDefaultNamelist.pl ----------- Add ability to use perl5lib from under ccsm_utils/scripts/Tools.
M      bld/build-namelist -------------------- Add ability to use perl5lib from under ccsm_utils/scripts/Tools.

         ------------------------- Remove test blZ11 (can't do the comparision), and update cam tag comparing to.
M      test/system/tests_pretag_bangkok
M      test/system/test_driver.sh
M      test/system/tests_posttag_purempi_regression
M      test/system/tests_posttag_hybrid_regression
M      test/system/tests_pretag_bluevista
M      test/system/tests_posttag_lightning

Summary of testing: None

Changes answers relative to baseline: No clm source code changed

===============================================================
===============================================================
Tag name:  clm3_5_10
Originator(s):  jet
Date: Tue Sep 18 12:00:23 MDT 2007
Date:One-line Summary: Fixed scam bugs when reading initial land dataset 
	and moved scam_setlatlon functionality to shr_scam_mod in 
	csm_shr repos.  Merged in Mariana's changes to add new boundary
	dataset file to help scam determine land/ocn/ice fractions.

Purpose of changes: Fix scam bugs and refactor code to allow scam to easily
        determine land/ocean/ice fractions.

Bugs fixed (include bugzilla ID):  612, 480

Known bugs (include bugzilla ID): 251, 449, 512, 546, 608, 618, 622

Describe any changes made to build system: Change configure to include new focndomain file.

Describe any changes made to the namelist: focndomain file added to ocn_in

List any changes to the defaults for the boundary datasets: Mariana created
	a new focndomain boundary dataset (at the standard resolutions) which 
	describe the grid fraction of land/ocn/ice

Describe any substantial timing or memory changes: None

Code reviewed by: self, mariana

List any svn externals directories updated (csm_share, mct, etc.):

	clm3_5_10
	branches/scm_drvseq1_0_43
        branches/csm_share3_070824_scm

List all subroutines eliminated: scam_setlatlonidx.F90

List all subroutines added and what they do: moved scm functionality
	from scam_setlatlonidx.F90 into a csm_share module that can 
	now be used by all surface models.

List all existing files that have been modified, and describe the changes:
M      test/system/test_driver.sh  - use latest cam in testing
M      test/system/nl_files/scam   - fixed scam bug
M      test/system/nl_files/scam_prep  - fixed scam bug
M      test/system/nl_files/ext_ccsm_seq_cam  - use latest cam in testing
M      SVN_EXTERNAL_DIRECTORIES - point to needed external dirs
M      src/biogeochem/STATICEcosysDynMod.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/ncdio.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/initializeMod.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/iniTimeConst.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/restFileMod.F90 - use new shr code instead of scam_setlatlonidx.F90
D      src/main/scam_setlatlonidx.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/clm_varctl.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/surfrdMod.F90 - use new shr code instead of scam_setlatlonidx.F90
Summary of testing:

  bluevista: Everything but ccsm tests pass ( due to requirment on external
	directories)

  bangkok/lf95: all passed except ccsm - expected due to requirment on external
	directories
  tempest  all passed except 034 br531 (failed previous to this commit)

  CLM tag used for the baseline comparison tests if applicable: clm3_5_09

Changes answers relative to baseline: None

===============================================================
===============================================================
Tag name:  clm3_5_09
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Aug 31 13:58:46 MDT 2007
Date:One-line Summary: Change configure to NOT have csm_share code for ccsm_con option, and add in 1x1.25 file, and update datm7 and csm_share

Purpose of changes: Fix for ccsm3_5_beta12 tag

Bugs fixed (include bugzilla ID):  581, 583

Known bugs (include bugzilla ID): 251, 449, 512, 546, 608,found with a suggested fix by Inez Fung

Bugs fixed (include bugzilla ID): 389 (partial), 442, 443, 445, 450

Describe any changes made to build system: Fix build for jaguar and phoenix

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: nanr, slevis, dlawren, oleson, and bonan reviewed the mklai changes

List any svn externals directories updated (csm_share, mct, etc.): None

List all subroutines eliminated: None

List all subroutines added and what they do: Documentation files

A  +   doc/README.DGVM
A  +   doc/KnownBugs

List all existing files that have been modified, and describe the changes:

---------------------> Improve testing
M      test/system/nl_files/t31_cnall
M      test/system/nl_files/singlept_dgvm_long
M      test/system/nl_files/1.9x2.5
M      test/system/nl_files/t31_dgvm
M      test/system/nl_files/singlept
M      test/system/nl_files/10x15_cnall
M      test/system/nl_files/10x15_dgvm
M      test/system/nl_files/t31_casa
M      test/system/nl_files/regional
M      test/system/nl_files/10x15_pftdyn
M      test/system/nl_files/t31_dgvm_long
M      test/system/nl_files/t42half
M      test/system/nl_files/t31
M      test/system/nl_files/10x15
M      test/system/tests_posttag_robin
M      test/system/input_tests_master
M      test/system/tests_pretag_jaguar
M      test/system/tests_posttag_phoenix
M      test/system/test_driver.sh
M      test/system/TSCscam.sh

---------------------> Change calculation of LAI,SAI,Canopy-top/bottom so weighted by %-PFT
M      tools/mksurfdata/mkfmax.F90
M      tools/mksurfdata/mklaiMod.F90
M      tools/mksurfdata/mkglacier.F90
M      tools/mksurfdata/mkurban.F90
M      tools/mksurfdata/mksoitex.F90
M      tools/mksurfdata/areaMod.F90
M      tools/mksurfdata/mksrfdat.F90
M      tools/mksurfdata/Srcfiles
M      tools/mksurfdata/mksoicol.F90
M      tools/mksurfdata/mkpftMod.F90

---------------------> Use new default files at T42, add and correct documentation
M      bld/run-pc.csh
M      bld/run-lightning.csh
M      bld/Makefile.in
M      bld/run-ibm.csh
M      bld/config_clm_defaults.xml
M      bld/system_defaults.xml
M      bld/run-frost.csh

---------------------> Remove uneeded shr_sys_flush, put #ifndef UNICOSMP around shr_sys_flush(6), correct MCT vector calls
                       needed for phoenix/robin build.

M      src/biogeochem/CNCStateUpdate2Mod.F90
M      src/biogeochem/CNGapMortalityMod.F90
M      src/biogeochem/CNC13StateUpdate2Mod.F90
M      src/biogeochem/CNFireMod.F90
M      src/biogeochem/CASAMod.F90 -------------------> Fix CASA by uncommenting lines according to Inez Fung
M      src/biogeochem/CNPrecisionControlMod.F90
M      src/biogeochem/DUSTMod.F90 -------------------> Changes from Natalie M. and Francis Vitt for CAM/CLM3.5 Aerosols
M      src/biogeochem/CNPhenologyMod.F90
M      src/biogeochem/CNCStateUpdate1Mod.F90
M      src/biogeochem/CNDecompMod.F90
M      src/biogeochem/CNCStateUpdate3Mod.F90
M      src/biogeochem/CNC13StateUpdate1Mod.F90
M      src/biogeochem/CNC13StateUpdate3Mod.F90
M      src/biogeochem/CNAllocationMod.F90
M      src/biogeochem/CNC13FluxMod.F90
M      src/biogeochem/CNEcosystemDynMod.F90
M      src/biogeochem/CNVegStructUpdateMod.F90
M      src/main/inicFileMod.F90
M      src/main/abortutils.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90 -----------------------> Changes from Keith O. to fix TKFRZ change
M      src/main/initializeMod.F90
M      src/main/clmtypeInitMod.F90
M      src/main/histFileMod.F90
M      src/main/clm_csmMod.F90
M      src/main/controlMod.F90 ----------------------> Fix #ifdef's so extra namelist items only on for COUP_CSM or OFFLINE
M      src/main/initSurfAlbMod.F90
M      src/main/clm_time_manager.F90
M      src/main/initGridCellsMod.F90
M      src/main/program_off.F90
M      src/main/surfrdMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/clm_mct_mod.F90
M      src/riverroute/RtmMod.F90
M      src/biogeophys/SurfaceRadiationMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90
M      src/biogeophys/Hydrology2Mod.F90
M      src/biogeophys/CanopyFluxesMod.F90

Summary of testing:

  bluevista: All PASS except
004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................FAIL! rc=
009 bl127 TBL.sh 17p_vodsr_dh t31 48 ..............................FAIL! rc=
014 bl131 TBL.sh 4p_vodsr_dh t42half 48 ...........................FAIL! rc=
019 bl141 TBL.sh 17p__dh 10x15_pftdyn 48 ..........................FAIL! rc=
024 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................FAIL! rc=
028 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................FAIL! rc=
032 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................FAIL! rc=
037 bl471 TBL.sh 10p_dgvm_s singlept_dgvm_long -730 ...............FAIL! rc=
041 bl563 TBL.sh _h 1.9x2.5 -10 ...................................FAIL! rc=
045 bl552 TBL.sh _ds 10x15 24 .....................................FAIL! rc=
049 bl573 TBL.sh _s singlept -10 ..................................FAIL! rc=
053 bl583 TBL.sh _dh regional -10 .................................FAIL! rc=
057 bl711 TBLtools.sh mksurfdata namelist .........................FAIL! rc=
059 bl771 TBLtools.sh mksurfdata singlept .........................FAIL! rc=
062 sm061 TSMconccsm.sh ERS f19_g13 ...............................FAIL! rc= 7
  lightning: All PASS except
004 bl112 TBL.sh 4p_vodsr_dm t31 48 ...............................FAIL! rc=
009 bl142 TBL.sh 17p__dm 10x15_pftdyn 48 ..........................FAIL! rc=
014 bl252 TBL.sh 17p_cnn_dm 10x15_cnall 48 ........................FAIL! rc=
018 bl451 TBL.sh 10p_dgvm_dm 10x15_dgvm 48 ........................FAIL! rc=
019 sm551 TSM.sh _dh 10x15 48 .....................................FAIL! rc= 8
020 er551 TER.sh _dh 10x15 10+38 ..................................FAIL! rc= 5
021 br551 TBR.sh _dh 10x15 24+24 ..................................FAIL! rc= 5
022 bl551 TBL.sh _dh 10x15 48 .....................................FAIL! rc=
026 bl573 TBL.sh _s singlept -10 ..................................FAIL! rc=
029 bl771 TBLtools.sh mksurfdata singlept .........................FAIL! rc=
  bangkok/lf95:
004 bl112 TBL.sh 4p_vodsr_dm t31 48 ...............................FAIL! rc=
009 bl142 TBL.sh 17p__dm 10x15_pftdyn 48 ..........................FAIL! rc=
014 bl252 TBL.sh 17p_cnn_dm 10x15_cnall 48 ........................FAIL! rc=
018 bl312 TBL.sh 4p_casa_dm t31_casa 48 ...........................FAIL! rc=
022 bl451 TBL.sh 10p_dgvm_dm 10x15_dgvm 48 ........................FAIL! rc=
026 bl551 TBL.sh _dh 10x15 48 .....................................FAIL! rc=
030 bl573 TBL.sh _s singlept -10 ..................................FAIL! rc=
033 sm982 TSCscam.sh seqccsm_64x128_s scam_prep scam_ds scam 7 ....FAIL! rc= 4
  robin: All compile tests pass

CLM tag used for the baseline comparison tests if applicable: clm3_expa_98

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: new LAI, TKFRZ change is roundoff different, Dust and CASA changes are significant

===============================================================
===============================================================
Tag name:  clm3_expa_98
Originator(s):  erik (KLUZEK ERIK 1326 CGD)
Date:  Wed Apr 18 09:51:53 MDT 2007
One-line Summary: Move externals to top, make SOM4 the default, rename setidx file, use new datafiles, 
    remove NUMLONS read, tweak testing, remove shell_cmd, remove read of old surfdata file

Purpose of changes: Some simple cleanup preparing for CLM3.5 release

Bugs fixed (include bugzilla ID): 440, 441

Describe any changes made to build system: None

Describe any changes made to the namelist: Use new datasets

List any changes to the defaults for the boundary datasets: Use new NCEP forcing datasets,
  and new Nitrogen deposition datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

	Directories are the same -- but SVN externals themselves moved to top level

List all subroutines eliminated:

D      test/system/tests_pretag_blueice > Rename to posttag filename
D      bld/empty -----------------------> Rename to usr.src
D      src/main/setlatlonidx.F90 -------> Rename to scam_setlatlonidx.F90 filename
D      src/main/system_cmd.c
D      src/main/cfort.h
D      src/SVN_EXTERNAL_DIRECTORIES ----> Move to top layer

List all subroutines added and what they do:

  -------------------> Files renamed from above
A  +   test/system/tests_posttag_blueice
A  +   bld/usr.src
A  +   SVN_EXTERNAL_DIRECTORIES
A  +   src/main/scam_setlatlonidx.F90

  -------------------> New files
A      test/system/config_files/10p_dgvm_s -------> New DGVM test
A  +   test/system/tests_posttag_blueice ---------> Rename
A      test/system/tests_posttag_robin -----------> Add tests for robin/phoenix
A      test/system/tests_posttag_phoenix
A      test/system/nl_files/singlept_dgvm_long ---> Add new singlept DGVM test
  -------------------> Add new documentation README files
A      tools/README
A      bld/README
A      Copyright ----> CCSM Copyright file
A      README

List all existing files that have been modified, and describe the changes:

  -------------------> Tweak testing -- use new datasets, increase diversity of testing
M      test/system/tests_pretag_bluevista
M      test/system/nl_files/t31_cnall
M      test/system/nl_files/1.9x2.5
M      test/system/nl_files/t31_dgvm
M      test/system/nl_files/singlept
M      test/system/nl_files/10x15_cnall
M      test/system/nl_files/10x15_dgvm
M      test/system/nl_files/t31_casa
M      test/system/nl_files/regional
M      test/system/nl_files/10x15_pftdyn
M      test/system/nl_files/t31_dgvm_long
M      test/system/nl_files/t42half
M      test/system/nl_files/t31
M      test/system/nl_files/10x15
M      test/system/input_tests_master
M      test/system/test_driver.sh
   ---------------------> Remove system_cmd.c from list of source files needed to compile
M      tools/mksurfdata/Srcfiles
M      tools/interpinic/interpinic.F90 <--- fix interpinic compile on bluevista
M      tools/mkgriddata/Srcfiles
   ---------------------> Use new datasets, make sure works
M      bld/run-pc.csh
M      bld/configure ---- Remove SOM4 CPP declaration
M      bld/run-lightning.csh
M      bld/run-ibm.csh
M      bld/run-frost.csh
   ---------------------> Make SOM4 the default remove other option, remove read of NUMLON
   ---------------------> Remove read of old surfdata sets, remove shell_cmd
M      src/biogeochem/CNDecompMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/main/ncdio.F90
M      src/main/fileutils.F90 -----> Remove shell_cmd as unused now.
M      src/main/iniTimeConst.F90
M      src/main/clm_varsur.F90
M      src/main/surfrdMod.F90

Summary of testing:

  bluevista:    All PASS, except
062 sm061 TSMconccsm.sh ERS f19_g13 ...............................FAIL! rc= 7
  bangkok/lf95: All PASS
  tempest:      All PASS, except
033 sm982 TSCscam.sh seqccsm_64x128_s scam_prep scam_ds scam 7 ....FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_expa_97

===============================================================
===============================================================
Tag name:  clm3_expa_97
Originator(s):  erik (KLUZEK ERIK 1326 CGD)
Date:  Wed Apr 11 12:18:32 MDT 2007
One-line Summary: Remove SPMD, update to clm proc tag, update timing, improve testing

Purpose of changes:
     Remove SPMD #ifdefs -- use mpi-serial code
     Remove COUP_CAM #ifdefs for SEQ_MCT || SEQ_ESMF
     Remove LOCAL_DEBUG CPP #ifdefs
     Update to prof05_clm3_expa_92 tag (timing changes, SCAM fixes)
     Update timing library to latest
     Fix bugs
     Improve test suite
     Change scripts so will rebuild each time (only configure first time if config file DNE)
     Change tool Makefile to be consistent and have USER_ overload options.
     Add script to update ChangeLog

Bugs fixed (include bugzilla ID):  337, 361, 389(partial), 407, 408, 417, 428
     337 -- SPMD
     361 -- IRIX
     389 -- Testing
     407 -- Single gridcell
     408 -- mksurfdata,mkgriddata compiling
     417 -- write last file to mss correctly
     428 -- pdt-dyn mode now restarts correctly

Describe any changes made to build system: Remove HIDE_MPI, remove 
     stuff left over from CAM Makefile, put FORTRAN name definition in configure
     remove LOCAL_DEBUG CPP #ifdefs

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: mvertens, oleson, thornton (all just briefly)

List any svn externals directories updated (csm_share, mct, etc.):
        Update csm_share to share3_070321
        Update timing    to timing_070328

List all subroutines eliminated:

D      bld/run-sgi.csh --------------------> Remove SGI run script
D      test/system/tests_pretag_bluesky ---> Remove since bluesky is gone
D      tools/mksurfdata/mksrfdat.namelist -> Change name to mksurfdata.namelist

   -------> Rename interpinic files to *.F90

D      tools/interpinic/fmain.f90
D      tools/interpinic/wrap_nf.f90
D      tools/interpinic/shr_kind_mod.f90
D      tools/interpinic/interpinic.f90
D      tools/interpinic/addglobal.f90

   --------> Remove file no longer needed by SCAM or for SPMD mode
D      src/main/getnetcdfdata.F90
D      src/main/mpiinc.F90


List all subroutines added and what they do:

------- Add concurrent and sequential CCSM tests, add more resolutions, improve tools tests
A      test/system/TSMconccsm.sh   ----------- Concurrent CCSM test
--------------------> New configurations to test
A      test/system/config_files/scam_ds
A      test/system/config_files/_h
A      test/system/config_files/_dh
A      test/system/config_files/_m
A      test/system/config_files/_o
A      test/system/config_files/_dm
A      test/system/config_files/_do
A      test/system/config_files/_s
A      test/system/config_files/_ds
A      test/system/config_files/seqccsm_4x5_dh
A      test/system/config_files/seqccsm_64x128_s
A      test/system/config_files/seqccsm_10x15_dm
A      test/system/config_files/17p__m
A      test/system/config_files/17p__o
A      test/system/config_files/17p__dh
A      test/system/config_files/17p__dm
A      test/system/config_files/17p__do
A      test/system/config_files/17p__h
A      test/system/TSMseqccsm.sh ------------- Sequential CCSM test
--------------------> New namelists and resolutions to test
A      test/system/nl_files/scam
A      test/system/nl_files/1.9x2.5
A      test/system/nl_files/singlept
A      test/system/nl_files/10x15_cnall
A      test/system/nl_files/10x15_dgvm
A      test/system/nl_files/seqccsm
A      test/system/nl_files/regional
A      test/system/nl_files/scam_prep
A      test/system/nl_files/10x15
A      test/system/README
A      test/system/TCBseqccsm.sh --------> Sequential CCSM configure/build
A      test/system/TSCscam.sh -----------> Sequential CCSM SCAM mode configure/build
A      test/system/TCTconccsm.sh --------> CCSM create-test
A      test/system/TBLtools.sh ----------> Compare tools to baseline version

----------- add singlept and regional tests
A      tools/mksurfdata/mksurfdata.singlept
A      tools/mksurfdata/mksurfdata.regional
A  +   tools/mksurfdata/mksurfdata.namelist

----------- Get improved code from Sam Levis (change names to *.F90)

A      tools/interpinic/interpinic.runoptions
A  +   tools/interpinic/fmain.F90
A      tools/interpinic/clmi_1999-01-02_10x15_c070330.nc <---- Test file
A  +   tools/interpinic/wrap_nf.F90
A      tools/interpinic/Filepath
A  +   tools/interpinic/interpinic.F90
A  +   tools/interpinic/addglobal.F90
A      tools/interpinic/Srcfiles
----------- add singlept and regional tests
A      tools/mkgriddata/mkgriddata.singlept
A      tools/mkgriddata/mkgriddata.regional

----------- Help to update ChangeLog
A      doc/UpDateChangeLog.pl

----------- New code needed for SCAM mode
A  +   src/main/setlatlonidx.F90


List all existing files that have been modified, and describe the changes:

----------- Improve test system (tweak tests, add new tests to various machines)
M      test/system/tests_pretag_bluevista
M      test/system/nl_files/t31_cnall
M      test/system/nl_files/t31_dgvm
M      test/system/nl_files/t31_casa
M      test/system/nl_files/10x15_pftdyn
M      test/system/nl_files/t31_dgvm_long
M      test/system/nl_files/t42half
M      test/system/nl_files/t31
M      test/system/CLM_runcmnd.sh ------- Use mpirun instead of mpiexec on bangkok/calgary
M      test/system/tests_pretag_blueice
M      test/system/input_tests_master
M      test/system/tests_pretag_jaguar
M      test/system/TSMtools.sh
M      test/system/tests_pretag_bangkok
M      test/system/TCBtools.sh
M      test/system/test_driver.sh
M      test/system/tests_pretag_tempest
M      test/system/tests_posttag_lightning

----------- Get tools to build
M      tools/mksurfdata/mklaiMod.F90
M      tools/mksurfdata/mkfileMod.F90
M      tools/mksurfdata/creategridMod.F90
M      tools/mksurfdata/Srcfiles
M      tools/mksurfdata/Makefile ------ Make makefile consistent and add USER_ options
M      tools/interpinic/Makefile ------ Make makefile consistent and add USER_ options
M      tools/mkgriddata/mkgriddata.F90
M      tools/mkgriddata/creategridMod.F90
M      tools/mkgriddata/Srcfiles
M      tools/mkgriddata/Makefile ------ Make makefile consistent and add USER_ options

----------- Improvements to run scripts and build system
     Change scripts so will rebuild each time (only configure first time if config file DNE), remove left over
     features from CAM Makefile.
M      bld/run-pc.csh
M      bld/configure
M      bld/run-lightning.csh
M      bld/Makefile.in
M      bld/run-ibm.csh
M      bld/run-frost.csh

----------- Source code changes, removing SPMD #ifdef, LOCAL_DEBUG, get SCAM mode working with new CAM, change
            to work with new timing library, fix code bugs above.  Remove COUP_CAM #ifdefs for SEQ_MCT || SEQ_ESMF
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/CNPhenologyMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/biogeochem/CNAllocationMod.F90
M      src/biogeochem/CNVegStructUpdateMod.F90
M      src/main/spmdGathScatMod.F90
M      src/main/abortutils.F90
M      src/main/clm_comp.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90
M      src/main/fileutils.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/program_csm.F90
M      src/main/restFileMod.F90
M      src/main/clm_csmMod.F90
M      src/main/controlMod.F90
M      src/main/ndepFileMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/program_off.F90
M      src/main/pftvarcon.F90
M      src/main/spmdMod.F90
M      src/main/surfrdMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/iobinary.F90
M      src/main/do_close_dispose.F90
M      src/riverroute/RtmMod.F90
M      src/biogeophys/Hydrology2Mod.F90
M      src/biogeophys/BiogeophysRestMod.F90

Summary of testing:

  tempest: ALL PASS
  bluevista:
019 bl141 TBL.sh 17p_vodsr_dh 10x15_pftdyn 48 .....................FAIL! rc= 7
022 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................FAIL! rc= 6
059 sm061 TSMconccsm.sh ERS f19_g13 ...............................FAIL! rc= 5
  bangkok/lf95:
033 sm982 TSCscam.sh seqccsm_64x128_s scam_prep scam_ds scam 7 ....FAIL! rc= 4

TBL test fails because of restart trouble with pftdyn.
Concurrent CCSM test fails because of a problem with ccsm3_5_beta01 for datm7.
bangkok scam test fails as is says that scm_crm_mode is not initialized in
CAM code.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_96
 (had to add in new tests, and set SOM4)

Changes Answers: No

===============================================================

===============================================================
Tag name: clm3_expa_96
Originator(s): tcraig
Date: Mon Mar 12 16:41:58 MDT 2007
One-line Summary: fixed finemesh, pftdyn modes, add new tests

Purpose of changes: restore finemesh and pftdyn modes, improve
	test coverage

Bugs fixed (include bugzilla ID): 389 (partial)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: reduced memory use in pftdyn

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.): none

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

        M      test/system/tests_pretag_bluevista
	A  +   test/system/nl_files/10x15_pftdyn
	A  +   test/system/nl_files/t31_dgvm_long
	A  +   test/system/nl_files/t42half
	M      test/system/input_tests_master
	M      test/system/tests_pretag_blueice
	M      test/system/tests_pretag_jaguar
	M      test/system/tests_pretag_bangkok
	M      test/system/test_driver.sh
	M      test/system/tests_posttag_lightning
	M      src/main/subgridMod.F90
	M      src/main/initializeMod.F90
	M      src/main/pftdynMod.F90
	M      src/main/clm_varsur.F90
	M      src/main/ndepFileMod.F90
	M      src/main/subgridAveMod.F90
	M      src/main/initGridCellsMod.F90
	M      src/main/lnd_comp_mct.F90
	M      src/main/program_off.F90
	M      src/main/surfrdMod.F90
	M      src/main/domainMod.F90
	M      src/main/decompMod.F90
	M      src/main/areaMod.F90

- rename lvegxy,lwtxy to vegxy, wtxy
- implement general setgatm, get finemesh working again
- refactor pftdynMod for low memory implementation, validate pfydyn mode
- modify ndep and pftdyn from x = x1*wt1 + x2*wt2 to x = x2 + wt1*(x1-x2)
  as suggested by k.lindsay, improves roundoff performance
- clean up some old code
- add new tests configurations (10x15_pftdyn, t31_dgvm_long, t42half), 
- update pretag lists, add new tests
		
Summary of testing: 

  bluevista:
	     all clm tests pass except bl for new cases including new tests 
	     all cam tests pass except bl (due to clm changes in expa_94/95)
	     ccsm passes ERS.f45_g35.B.bluevista16 (answers change due to expa_94/95)
  bangkok/lf95: 
	     all clm tests pass including new tests in list
	     all cam tests pass except bl (due to clm changes in expa_94/95)
  tempest:
	     all cam tests pass except bl (due to clm changes in expa_94/95)
  lightning: 
	     ccsm passes ERS.f45_g35.B2.lightning (answers change due to expa_94/95)

CLM tag used for the baseline comparison tests if applicable:
	clm3_expa_95, cam3_4_03, ccsm3_1_beta45

IF tag changes answers relative to baseline comparison the
following should be filled in:
	answers are bfb with clm3_expa_95 in clm.  cam and ccsm could not
	be tested for bfb due to lagging clm version in latest cam and ccsm tags

  Summarize any changes to answers, i.e.,
    - what code configurations: 
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
Tag name: clm3_expa_95
Originator(s): nanr, Keith Oleson, Peter Thornton
Date: Thu Mar  8 17:06:06 MST 2007
One-line Summary: Adding N limitation for CLM standalone w/o CN.

Purpose of changes: Improve estimation of photosynthesis in CLM when it
is run without CN active.  These changes impose a N limitation as a fcn of
PFT [0-1].

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: testing suites: fpftcon = pft-physiology.c070207

List any changes to the defaults for the boundary datasets: 
	fptfcon = pft-physiology.c070207
		  pft-physiology.c070207.readme

Describe any substantial timing or memory changes: none expected

Code reviewed by: Keith Oleson, Peter Thornton, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.):  none
  
List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

bv1103en.ucar.edu-/fis/cgd/tss/nanr/clm/clm3_trunk % !svn
svn status | grep 'M '
M      test/system/nl_files/t31_cnall	! change pft-physiology.c070207
M      test/system/nl_files/t31_dgvm	! change pft-physiology.c070207
M      test/system/nl_files/t31		! change pft-physiology.c070207
M      test/system/nl_files/t31_casa	! change pft-physiology.c070207
M      bld/run-pc.csh			! change pft-physiology.c070207
M      bld/run-sgi.csh			! change pft-physiology.c070207
M      bld/run-lightning.csh		! change pft-physiology.c070207
M      bld/run-ibm.csh			! change pft-physiology.c070207
M      bld/run-frost.csh		! change pft-physiology.c070207
M      src/main/clmtypeInitMod.F90		! initialize new N limitation factor (fnitr)
M      src/main/iniTimeConst.F90		! initialize new N limitation factor (fnitr)
M      src/main/pftvarcon.F90			! read in new var (fnitr)
M      src/main/clmtype.F90			! initialize new N limitation factor (fnitr)
M      src/biogeophys/CanopyFluxesMod.F90	! apply new N limitation factor (fnitr)

Summary of testing:  

  bluevista:
	001 sm111 TSM.sh 4p_vodsr_dh t31 48 ...............................PASS
	002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................PASS
	003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................PASS
	004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................SKIPPED*
	005 sm114 TSM.sh 4p_vodsr_h t31 48 ................................PASS
	006 sm121 TSM.sh 17p_vodsr_dh t31 48 ..............................PASS
	007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................PASS
	008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................PASS
	009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................SKIPPED*
	010 sm124 TSM.sh 17p_vodsr_h t31 48 ...............................PASS
	011 sm211 TSM.sh 17p_cnn_dh t31_cnall 48 ..........................PASS
	012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................PASS
	013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................PASS
	014 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................SKIPPED*
	015 sm311 TSM.sh 4p_casa_dh t31_casa 48 ...........................PASS
	016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................PASS
	017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................PASS
	018 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................SKIPPED*
	019 sm411 TSM.sh 10p_dgvm_dh t31_dgvm 48 ..........................PASS
	020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................PASS
	021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................PASS
	022 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................SKIPPED*
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:	  CN inactive
    - what platforms/compilers:	  all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	new climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

  MSS location of control simulations used to validate new climate:

	/OLESON/csm/hydp2_off_communn_hk39
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/tss/clm/diagnostics/lmwg_hydro/hydp2_off_communn_hk39aa-hydp2_off_communn_hk38aa/setsIndex.html


	
===============================================================
===============================================================
Tag name: clm3_expa_94
Originator(s): nanr, Keith Oleson, Peter Thornton
Date: 	Thu Mar  8 14:22:36 MST 2007
One-line Summary:  BTRAN modification

Purpose of changes:  Change BTRAN calculation to improve prognostic
	LAI estimation in high latitudes.

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Keith Oleson, Peter Thornton, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.): nanr

List all subroutines eliminated: nanr

List all subroutines added and what they do: nanr

List all existing files that have been modified, and describe the changes:
M      src/biogeophys/CanopyFluxesMod.F90

Changing calculation of rootr to allow non-zero rootr (and btran) in partially frozen layers.

Summary of testing:

  bluevista:

	001 sm111 TSM.sh 4p_vodsr_dh t31 48 ...............................PASS
	002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................PASS
	003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................PASS
	004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................SKIPPED*
	005 sm114 TSM.sh 4p_vodsr_h t31 48 ................................PASS
	006 sm121 TSM.sh 17p_vodsr_dh t31 48 ..............................PASS
	007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................PASS
	008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................PASS
	009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................SKIPPED*
	010 sm124 TSM.sh 17p_vodsr_h t31 48 ...............................PASS
	011 sm211 TSM.sh 17p_cnn_dh t31_cnall 48 ..........................PASS
	012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................PASS
	013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................PASS
	014 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................SKIPPED*
	015 sm311 TSM.sh 4p_casa_dh t31_casa 48 ...........................PASS
	016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................PASS
	017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................PASS
	018 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................SKIPPED*
	019 sm411 TSM.sh 10p_dgvm_dh t31_dgvm 48 ..........................PASS
	020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................PASS
	021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................PASS
	022 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................SKIPPED*

  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: none

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

	-larger than roundoff.  Climate changes unknown.
	-Improves prognostic LAI estimation in high latitudes.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository): clm3_expa_89
   - platform/compilers:  bluevista
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
	/OLESON/csm/hydp2_off_communn_hk38
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/tss/clm/diagnostics/lmwg_hydro/hydp2_off_communn_hk38aa-hydp2_off_communn_expa89aa/setsIndex.html

	
===============================================================

===============================================================
Tag name: clm3_expa_93		! NOTE: Tag incremented to correct mistaken tag number in documentation. (nanr)
Originator(s): tcraig
Date: Tue Feb 27 16:53:41 MST 2007	
One-line Summary: merge fmf branch to trunk (low memory mods)

Purpose of changes: reduce memory and improve memory scaling

Bugs fixed (include bugzilla ID):

Describe any changes made to build system: began adding support
  for frost in Makefile and added a run-frost.csh (not yet
  fully validated)

Describe any changes made to the namelist: added new optional namelist
  input, nsegspc (number of segments per clump for new decomp.  default
  is 20, 1 will produce poor loadbalance, infinity yields too many
  segments per pe but good load balance.  performance asymptotes for
  several configurations at about 5-10 segments/pe, use 20 as default.)

List any changes to the defaults for the boundary datasets: NONE

Describe any substantial timing or memory changes: significant reduction
  in memory use and improved memory scaling.

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.): update
  to mct external, MCT2_3_0_070206

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:

- implement new 1d decomp based on ngsegspc rather than balancing pfts,
  ngsegspc is the number of segments per clump.  the 1d gridcells will
  be divided into clumps and segments per clump so there will be
  a total number of segments, clumps*nsegspc, each of about equal number
  of gridcells, that will be distributed round-robin to pes.  pfts are
  derived later and will hopefully end up being nearly as well load
  balanced as the previous method without having to precompute pfts
  and requiring much less memory.  see above for more info on the namelist 
  input and default.
- reorganize initialization, split decomp_init into three phases,
  atm (coarse), lnd (finemesh), and glcp (subgrid).
- add new datatype, latlon to hold some global grid info
- now all domain info is local (although initialization still needs
  to be modified)
- remove some dead code
- add new timers (bug #302)
- split gatm out of domain type
- create simple setgatm_UNITY routine, finemesh capability now disabled,
  must fix setgatm in future version
- move wtxy, vegxy, and pctspec to clm_varsur, allocate as local arrays
  now (begg:endg) and modify surfrd to handle local data only both for
  I/O and initialization.
- implement gather/scatter routines in spmdGathScatMod that use gsmaps.
- update MCT and share
- port to frost
- get rid of some of the global decomps use in code, still more to do
- memory cleanup in STATICEcosysDynMod
- implement new ncdio methods for reading to local gridcell data using gsmaps
- clean up atmdrv, use newer low mem datatypes, reduce memory
- clean up rtm, use newer low mem datatypes, reduce memory
- remove history "lat/lon" fields

M      test/system/test_driver.sh
M      tools/mkgriddata/mkgriddata.F90
M      bld/configure
M      bld/Makefile.in
A  +   bld/run-frost.csh
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/main/spmdGathScatMod.F90
M      src/main/abortutils.F90
M      src/main/clm_comp.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90
M      src/main/subgridMod.F90
M      src/main/initializeMod.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/program_csm.F90
M      src/main/clm_atmlnd.F90
M      src/main/clm_varsur.F90
M      src/main/clm_csmMod.F90
M      src/main/restFileMod.F90
M      src/main/controlMod.F90
M      src/main/clm_varctl.F90
M      src/main/ndepFileMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/program_off.F90
M      src/main/surfrdMod.F90
M      src/main/domainMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/clm_mct_mod.F90
M      src/SVN_EXTERNAL_DIRECTORIES
M      src/riverroute/RtmMod.F90
	
Summary of testing:

  bluevista: all pass except
    004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................FAIL! rc= 7
    009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................FAIL! rc= 7
  bangkok/lf95: all pass except
    004 bl112 TBL.sh 4p_vodsr_dm t31 48 ...............................FAIL! rc= 7
    009 bl122 TBL.sh 17p_vodsr_dm t31 48 ..............................FAIL! rc= 7
  Due to roundoff change in rtm, only rtm fields affected, otherwise bfb

  Also tested version in CCSM vs ccsm3_1_beta45
    ERS.f45_g35.B.bluevista16
    ERS.f45_g35.B2.lightning
    Both PASS and bfb versus beta45 except for rtm roundoff difference and
      associated error growth through ocean coupling

  Also tested mods merged to clm3_expa_91 with cam3_4_00, all
    CAM tests pass on bangkok, bluevista, and tempest including scam.
  Tested on bangkok with cam3_4_01 and updated to clm3_expa_92, all
    CAM tests pass on bangkok.  bluevista and tempest not tested
    due to time constraints and earlier adequate testing with 
    clm3_expa_91 and cam3_4_00.
	
CLM tag used for the baseline comparison tests if applicable: clm3_expa_89

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: anything with RTM on
    - what platforms/compilers: all 
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
        roundoff change in RTM due to roundoff change in cell area calculation

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?  tested in multiple systems, review growth of diffs in 
     stand-alone clm, only rtm fields affected, diffs remain roundoff for
     48 timesteps, no coupling to other fields or error growth in system.

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================


===============================================================
Tag name: clm3_expa_92
Originator(s): erik,mvertens,mvr
Date: Mon Feb 26 15:59:16 MST 2007
One-line Summary: When running with Sequential CCSM -- use date for albedo calculation

Purpose of changes: To work with cam3_4_01

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: erik,mvr,mvertens

List any svn externals directories updated (csm_share, mct, etc.): none

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      src/main/clm_comp.F90
M      src/main/lnd_comp_mct.F90

Have sequential CCSM give CLM the date of the next radiation calculation so that
it can calculate albedo's for that specific time-step. This is needed to work with
cam3_4_01.

Summary of testing:

  bluevista: Pass
  bangkok/lf95: Pass

CLM tag used for the baseline comparison tests if applicable: clm3_expa_91

===============================================================
===============================================================
Tag name: clm3_expa_91
Originator(s): erik
Date: Wed Feb 21 13:19:51 MST 2007
One-line Summary: Fix SCAM mode, add more machines for test_driver, have tools use csm_share, 
	make clmtype private (except for data exporting), fix several bugs

Purpose of changes: Fix SCAM mode so can make a new CAM tag.

Bugs fixed (include bugzilla ID): 252, 310, 370, 377, 385 (partial -- 302, 357, 389)

Describe any changes made to build system: Remove -DNO_R16 from Makefile

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: MSS writes are now synchronous instead of
	asynchronous

Code reviewed by: slevis

List any externals updated: Update to csm_share3_070220

List all subroutines eliminated:

Remove makdep -- as MkDepends replaces it
Remove cprlndnc -- as newcprnc replaces it

D      tools/makdep
D      tools/makdep/main.c
D      tools/makdep/Makefile
D      tools/makdep/README
D      tools/cprlndnc
D      tools/cprlndnc/cprtps.F
D      tools/cprlndnc/lenchr.F
D      tools/cprlndnc/precision.F
D      tools/cprlndnc/printstats.F
D      tools/cprlndnc/wrap_nf.F
D      tools/cprlndnc/stats.F
D      tools/cprlndnc/ismax.F
D      tools/cprlndnc/initstats.F
D      tools/cprlndnc/nldat.F
D      tools/cprlndnc/cpr.F
D      tools/cprlndnc/prhddiff.F
D      tools/cprlndnc/header.F
D      tools/cprlndnc/Makefile
D      doc/BranchLog
D      doc/ChangeSum

Delete files that tools use that are copied from main src directories (so we don't have
to maintain separate copies of code)

D      Deleting       tools/mkgriddata/fileutils.F90
D      Deleting       tools/mkgriddata/nanMod.F90
D      Deleting       tools/mkgriddata/shr_const_mod.F90
D      Deleting       tools/mkgriddata/shr_kind_mod.F90
D      Deleting       tools/mkgriddata/shr_sys_mod.F90
D      Deleting       tools/mksurfdata/fileutils.F90
D      Deleting       tools/mksurfdata/nanMod.F90
D      Deleting       tools/mksurfdata/shr_const_mod.F90
D      Deleting       tools/mksurfdata/shr_kind_mod.F90
D      Deleting       tools/mksurfdata/shr_sys_mod.F90
D      Deleting       tools/mksurfdata/shr_timer_mod.F90

List all subroutines added and what they do:

A      test/system/TSMtools.sh -- for testing of the tools (not tested yet)
A      test/system/TCBtools.sh -- for build testing of the tools (not tested yet)
A      test/system/tests_pretag_blueice -- for running on blueice (does work)
A      test/system/tests_pretag_jaguar -- for running on jaguar (doesn't work yet)
A      test/system/tests_posttag_lightning -- for running on lightning (doesn't work yet)

Files added so that tools build uses copies of files in main directories rather than separate copies

A      tools/mkgriddata/Filepath
A      tools/mkgriddata/Srcfiles
A      tools/mkgriddata/misc.h
A      tools/mkgriddata/preproc.h
A      tools/mksurfdata/Filepath
A      tools/mksurfdata/Srcfiles
A      tools/mksurfdata/misc.h
A      tools/mksurfdata/preproc.h

List all existing files that have been modified, and describe the changes:

Add check for soil energy balance:

M      src/biogeophys/BalanceCheckMod.F90

Bigint bug fix (don't copy over static fields with bigint values when copying a domain)

M      src/main/domainMod.F90

SCAM fixes (read datasets differently for SCAM)

M      src/main/surfrdMod.F90
M      src/main/ndepFileMod.F90
M      src/main/iniTimeConst.F90

Change so that tools use main copies of code rather than own particular copy:

M      tools/mkgriddata/Makefile
M      tools/mkgriddata/mkgriddata.namelist
M      tools/mksurfdata/Makefile
M      tools/mksurfdata/domainMod.F90

Make MSS write's synchronous instead of asynchronous: Required for LSF queing systems

M      src/main/fileutils.F90

Landmask bug fix: (landmask now output globally with no missing or fill values)

M      src/main/histFileMod.F90
M      src/main/initializeMod.F90
M      src/main/ncdio.F90

Timers

M      src/main/program_csm.F90
M      src/main/driver.F90

Make clmtype private -- so only exports it's data not data it uses.

M      src/biogeochem/CNGapMortalityMod.F90
M      src/biogeochem/VOCEmissionMod.F90
M      src/biogeochem/CNrestMod.F90
M      src/biogeochem/CNC13FluxMod.F90
M      src/biogeochem/CNSetValueMod.F90
M      src/main/atmdrvMod.F90
M      src/main/clmtypeInitMod.F90
M      src/main/pftdynMod.F90
M      src/main/restFileMod.F90
M      src/main/clmtype.F90
M      src/biogeophys/SnowHydrologyMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90
M      src/biogeophys/BiogeophysRestMod.F90
M      src/biogeophys/DriverInitMod.F90

Miscellaneous:

M      bld/Makefile.in  --- Remove NO_R16 CPP token, some changes to start work on jaguar
M      test/system/test_driver.sh -- add more machines
M      test/system/CLM_runcmnd.sh -- add more machines

Summary of testing:

  bluevista: 	All PASS -- except TBL tests because of csm_share shr_const_mod TKFRZ change
  bangkok/lf95: All PASS -- except TBL tests because of csm_share shr_const_mod TKFRZ change
  blueice: 	All PASS -- except TBL tests because of csm_share shr_const_mod TKFRZ change

CLM tag used for the baseline comparison tests if applicable: clm3_expa_90

  Summarize any changes to answers: larger than roundoff (all config/all machines)

  (No simulations were performed as CCSM scientists deemed the change to be
   insignificant)

===============================================================
===============================================================
Tag name:  clm3_expa_90
Originator(s):  nanr
Date:  Tue Feb  6 13:17:55 MST 2007
One-line Summary:  Changed creategridMod.F90 to read variables from 10min USGS file.

Purpose of changes:  
Added htopo and landfract to retrieve landfrac and topography for processing USGS-gtopo30_10min_c050419.nc

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by:  nanr

List all subroutines eliminated:  none

List all subroutines added and what they do:  none

List all existing files that have been modified, and describe the changes:

M      creategridMod.F90

   Added lines to creategridMod.F90 to read variables from USGS-gtopo30-10min_c050419.nc 

    ier = nf_inq_varid (ncid, 'landfract', varid)
    if (ier == NF_NOERR) then
       if (landfracset) write(6,*) trim(subname),' WARNING, overwriting frac'
       landfracset = .true.
       write(6,*) trim(subname),' read landfract'
       call check_ret(nf_inq_varid (ncid, 'landfract', varid), subname)
       call check_ret(nf_get_var_double (ncid, varid, domain%frac), subname)
    endif

    ier = nf_inq_varid (ncid, 'htopo', varid)
    if (ier == NF_NOERR) then
       if (toposet) write(6,*) trim(subname),' WARNING, overwriting topo'
       toposet = .true.
       write(6,*) trim(subname),' read htopo'
       call check_ret(nf_inq_varid (ncid, 'htopo', varid), subname)
       call check_ret(nf_get_var_double (ncid, varid, domain%topo), subname)
    endif


Summary of testing:  none. Affects tools/mkgriddata only.

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate: 
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name: clm3_expa_89
Originator(s): erik,oleson
Date: Feb/02/2007
One-line Summary: 

Purpose of changes: Use new water table rise calculation in SoilHydrology

Bugs fixed (include bugzilla ID): 345, 353

Describe any changes made to build system: None (although added Darwin to mksrfdat build Makefile)

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Keith Oleson

List all subroutines eliminated: None

Remove bld/offline directory tree

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

M      bld/Makefile.in ---- Add -DFORTRANUNDERSCORE so can compile mpi-serial on IRIX

Change run scripts so that spmd and smp settings work for both on AND off

M      bld/run-pc.csh ----------------------- Also add LD_LIBRARY_PATH setting
M      bld/run-sgi.csh
M      bld/run-lightning.csh

M      src/main/spmdMod.F90 ------------------ Remove #ifdef around #include <mpif.h> so will
	run serial (this is a partial fix to bug 337. The longer term fix is to remove all
	#ifdef SPMD as we can use the mpi-serial code to make the serial and SPMD code the same.

M      src/biogeophys/SoilHydrologyMod.F90 --- New drainage formulation from Keith Oleson

Summary of testing:

  bluesky: -- All but comparision to previous version
  tempest: -- All but comparison to previous version and the following restart tests
	(These tests fail on previous versions as well -- documented as bug 361)
002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................FAIL! rc= 11
003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................FAIL! rc= 11
005 sm116 TSM.sh 4p_vodsr_o t31 48 ................................FAIL! rc= 4
007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................FAIL! rc= 11
008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................FAIL! rc= 11
012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................FAIL! rc= 11
013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................FAIL! rc= 11
016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................FAIL! rc= 11
017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................FAIL! rc= 11
020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................FAIL! rc= 11
021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................FAIL! rc= 11
	(We are going to remove tempest as a standard test for CLM)

  bangkok/lf95: -- All but comparision to previous version

CLM tag used for the baseline comparison tests if applicable: none

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (similar climate)

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers: Cray-XT3/jaguar
   - configuration (CPP ifdefs): default
   - build-namelist command (or complete namelist):
   - MSS location of output: /CCSM/csm/b31.020ws/lnd/hist

   URL for LMWG diagnostics output used to validate new climate: Not yet prepared
	
===============================================================
===============================================================
Tag name: clm3_expa_88
Originator(s): nanr
Date: Thu Jan 11 12:31:51 MST 2007
One-line Summary:  Minor formatting change in tools.
		   Correctons to ChangLog
		

Purpose of changes: 
1.	Update formatted write in tools/ mkgriddata.F90 and tools/mksrfdat.F90 
	to accomodate 4 digit lat/lons.
2.	Add note to ChangeLog to explain commit by nanr (10/27) that was not tagged.
3.	correct Changelog for tag clm3_expa_80.  The changes listed below never happened.
	surfFileMod.F90 was actually removed from the trunk in a previous tag (clm3_expa_66)
	and renamed surfrdMod.F90.  So this modification probably reflects the status of the branch 
	Keith Oleson was working on.
		M      src/main/surfFileMod.F90

		Removed statements contained within CN ifdef (OK'd by P. Thornton) that:

		! the following test prevents the assignment of temperate deciduous
                  		! vegetation types in the tropics
                  		! 1. broadleaf deciduous temperate tree -> broadleaf deciduous tropical tree
                  		! 2. broadleaf deciduous temperate shrub -> broadleaf deciduous tropical tree
                  		! this reassignment from shrub to tree is necessary because there is currently no
                  		! tropical deciduous broadleaf shrub type defined.


Bugs fixed (include bugzilla ID):  none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: nanr

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      tools/mksurfdata/mksrfdat.F90
M      tools/mkgriddata/mkgriddata.F90
	
   Changed formatting strings to accomodate 4 char lat/lons.
	OLD:  write (resol,'(i3.3,"x",i3.3)') lsmlat,lsmlon
	NEW:  write (resol,'(i4.4,"x",i4.4)') lsmlat,lsmlon

Summary of testing:  none.  Changes only to tools and ChangeLog

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: none

IF tag changes answers relative to baseline comparison the
following should be filled in: none

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate: NA
   
   URL for LMWG diagnostics output used to validate new climate: NA
	
===============================================================
===============================================================
Tag name: clm3_expa_87
Originator(s): tcraig, jet
Date: Wed Dec 27 05:03:01 GMT 2006
One-line Summary: merge fme branch, merge refactor_scam branch

Purpose of changes: bug fixes, reduce memory usage, improve memory scaling,
	add mct package, update scam

Bugs fixed (include bugzilla ID): 
	#133 adomain,ldomain compare
	#290 time bounds problem in history file
	#291 fix rtm history bug on bangkok
	#301 modify decomp info in i/o
	#321 merge refactor_scam branch

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: memory reduce, amount TBD

Code reviewed by: tcraig

List all subroutines eliminated: many routines in areaMod removed
	rename seq_mct_mod.F90 to clm_mct_mod.F90
	add getnetcdfdata.F90

List all subroutines added and what they do: added MCT package and interpolation
	routines that use MCT mapping datatypes

List all existing files that have been modified, and describe the changes:

         test/system/TBL.sh
	 test/system/TBR.sh
	 test/system/test_driver.sh
	 test/system/TER.sh
	 bld/offline/mkSrcfiles
	 bld/offline/tests/CLM_namelist.pm
	 bld/offline/tests/compare.csh
	 bld/offline/tests/config_machine_specs.csh
	 bld/offline/tests/CLM_lab.pm
	 bld/offline/tests/CLM_test.pm
	 bld/offline/tests/CLM.pm
	 bld/offline/tests/test-model.pl
	 bld/offline/tests/model_specs.csh
	 bld/offline/tests/CLM_run.pm
	 bld/offline/tests/test_batch.csh
	 bld/offline/tests/Makefile
	 bld/offline/tests/configure.csh
         bld/offline/tests/lab_default.pm
	 bld/offline/mkDepends
	 bld/offline/jobscript.csh
	 bld/offline/Makefile
         src/biogeochem/STATICEcosysDynMod.F90
         src/SVN_EXTERNAL_DIRECTORIES
	 src/main/inicFileMod.F90
	 src/main/driver.F90
	 src/main/ncdio.F90
	 src/main/atmdrvMod.F90
	 src/main/initializeMod.F90
	 src/main/iniTimeConst.F90
	 src/main/histFileMod.F90
	 src/main/clm_atmlnd.F90
	 src/main/clm_csmMod.F90
	 src/main/restFileMod.F90
	 src/main/controlMod.F90
	 src/main/clm_varctl.F90
	 src/main/getnetcdfdata.F90
	 src/main/lnd_comp_mct.F90
	 src/main/program_off.F90
	 src/main/spmdMod.F90
	 src/main/surfrdMod.F90
	 src/main/domainMod.F90
	 src/main/decompMod.F90
	 src/main/areaMod.F90
	 src/main/iobinary.F90
	 src/main/clmtype.F90
	 src/main/clm_mct_mod.F90
	 src/riverroute/RtmMod.F90
	 src/riverroute/RunoffMod.F90

  fix minor bug in TBL, TBR, TER reporting non bfb errors
  include mods from john truesdale for refactor_scam branch
  add MCT package to utils and SVN_EXTERNALS
  add mpicom to smpdMod.F90 default for mct
  add map_setmapAR to areaMod.F90
  refactor clm mapping datatypes and subroutines in general
  remove 9 of 15 global arrays from decomp type
  add MCT datatypes and mapping to atmdrv and rtm
	
Summary of testing:
  fme05_clm3_expa_78 vs clm3_expa_78, cam3_3_40, ccsm3_1_beta40
  (mods on top of clm3_expa_78)
    bluesky:   all clm pass except BL fail due to changes in atmdrv mapping
	       all cam pass
    tempest:   all cam pass
    bangkok:   all clm pass except BL fail due to changes in atmdrv mapping
    lightning: ccsm ERS.f45_g35.B2 bfb with ccsm3_1_beta40
    bluevista: ccsm ERS.f45_g35.B2 bfb with ccsm3_1_beta40
	       cam finemesh test is bfb

  fme06_clm3_expa_79 vs clm3_expa_79, cam3_3_44, ccsm3_1_beta40
  (merge in scam_refactor02_clm3_expa_79)
    bluesky:   all clm pass except BL fail due to changes in atmdrv mapping
	       clm *211 test fail (due to failures in clm3_expa_79)
	       all cam pass
    tempest:   all cam pass
    bangkok:   all cam pass
    lightning: ccsm ERS.f45_g35.B2 bfb with ccsm3_1_beta40
    bluevista: ccsm ERS.f45_g35.B2 bfb with ccsm3_1_beta40
	       cam finemesh test is bfb

  clm3_expa_87 == fme07_clm3_expa_86 vs clm3_expa_86, ccsm3_1_hydro01
  (merge in clm3_expa_86, cam testing not possible)
    bluesky:   all clm pass except BL fail due to changes in atmdrv mapping
    bangkok:   all clm pass except BL fail due to changes in atmdrv mapping
    bluevista: ccsm ERS.f19_g14.B2 bfb with ccsm3_1_beta40

CLM tag used for the baseline comparison tests if applicable: clm3_expa_86

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): roundoff

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?
	roundoff differences introduced in rtm and atmdrv due to change in
	  interpolation order of operations.  verified this carefully during
	  development with print statements.
	also, with BL tests, history fields are typically different in only the 15th digit 
	  after several timesteps
	verified bfb in ccsm vs ccsm3_1_hydro01 tag (includes clm3_expa_86)
	all cam tests pass with fme mods bfb including BL

===============================================================
===============================================================
Tag name: clm3_expa_86
Originator(s): nanr
Date: Thu Dec  7 10:22:11 MST 2006
One-line Summary:  Correct FMAX calculation.

Purpose of changes:  Correction for iniTimeConst.F90, which incorrectly divides fmax by 100.
	fmax is already stored as unitless [0-1].

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by:  myself, Keith Oleson

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      iniTimeConst.F9
   OLD:  wtfact(c) = gti(i,j)/100.
   NEW:  wtfact(c) = gti(i,j)

Summary of testing:

  bluesky:
	001 sm111 TSM.sh 4p_vodsr_dh t31 48 ...............................PASS
	002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................PASS
	003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................FAIL! rc= 11
	004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................SKIPPED*
	005 sm114 TSM.sh 4p_vodsr_h t31 48 ................................PASS
	006 sm121 TSM.sh 17p_vodsr_dh t31 48 ..............................PASS
	007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................PASS
	008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................FAIL! rc= 11
	009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................SKIPPED*
	010 sm124 TSM.sh 17p_vodsr_h t31 48 ...............................PASS
	011 sm211 TSM.sh 17p_cnn_dh t31_cnall 48 ..........................PASS
	012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................PASS
	013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................FAIL! rc= 11
	014 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................SKIPPED*
	015 sm311 TSM.sh 4p_casa_dh t31_casa 48 ...........................PASS
	016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................PASS
	017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................FAIL! rc= 11
	018 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................SKIPPED*
	019 sm411 TSM.sh 10p_dgvm_dh t31_dgvm 48 ..........................PASS
	020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................PASS
	021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................FAIL! rc= 11
	022 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................SKIPPED*

   Note, the branch tests failed only in the differences to the time_bounds variable
   upon branching - all other variables stayed the same. This has been reported as
   bug #290.

  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:	All
    - what platforms/compilers:	All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	small changes in climate which are now more realistic.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:  
   
   URL for LMWG diagnostics output used to validate new climate:  
	
===============================================================
===============================================================
Tag name:  clm3_expa_85
Originator(s): nanr
Date: Fri Dec  1 11:46:26 MST 2006
One-line Summary: change in topsoil evaporation.

Purpose of changes:  Change in topsoil evaporation sums the contributions of qflx_evap_soi over
all pft, regardless of sign of the pft

Bugs fixed (include bugzilla ID): 264

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Peter Thornton

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe theList any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: mvertens, erik (briefly)

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:
   M   src/main/clm_comp.F90
         - passed SyncClock as optional argument to clm_init1 and call initialize2 
   M   src/main/initializeMod.F90
         - obtained initialization information from SyncClock if passed in as argument,
           rather than using namelist input. For restart runs, stop date obtained from
           SyncClock if passed in as argument, rather than from namelist input.
         - removed COUP_CAM as CPP if-def
   M   src/main/restFileMod.F90
         - renamed routine that reads in time manager restart information to timemgr_restart_io
   M   src/main/controlMod.F90
         - now use clm_time_manager in all CLM modes (including COUP_CAM)
         - removed call to CAM radiation_get routine
         - ***Note that this assumes that CAM and CLM radiation frequency are identical ***
         - ***Should put this into the CAM build-namelist generation routine - filed as a bug report ***
         - need to put in such a check in the future
         - dtime obtained now from CLM namelist, not CAM time manager
   M   src/main/clm_time_manager.F90
         - put in new optional arguments into timemgr_init and timemgr_restart to use SyncClock values if 
           they are passed in to initialize clock
   M   src/main/lnd_comp_mct.F90
         - passed SyncClock in as argument into clm_init1

Summary of testing:

    bluesky: 
    - ran test_batch.csh and verified that all tests passed successfully
	   when compared to clm3_expa_69
    - ran cam3_3_27 using clm3_expa_70 code changes and verified that 
      all tests passed successfully when compared to cam3_3_27
    - ran ESR.T31_g35.B.bluesky using ccsm3_1_beta36 and the clm3_expa_70 code base
      and verified that results were bfb when compared to ccsm3_1_beta36

Summarize any changes to answers: Results are bfb
	
===============================================================
===============================================================
Tag name: clm3_expa_69
Originator(s): erik, jedwards, jeff
Date: Thu Aug 17 09:54:23 MDT 2006
One-line Summary: Fix perpetual bug and update csm_share

Purpose of changes: Fix bugs in perpetual mode and restat_option="end" when
	running with CAM.

Bugs fixed (include bugzilla ID): 107, 185

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: self

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M bld/offline/tests/CLM_lab.pm
    Put test output for all platforms under "clmtest" directory
M bld/offline/tests/test_batch.csh
    Update version comparing to, abort if error status is not ok.
M src/SVN_EXTERNAL_DIRECTORIES
    Update csm_share to share3_060814
M src/main/ncdio.F90
    Change from Jim Edwards to eliminate use of wrap_nf module (from cam3_3_19 commit)
M src/main/controlMod.F90
    Change from Jeff Lee to make use statement for "shr_inputInfo_mod" all lower-case.
    This is important for the CCSM dependency generator on some platforms.

Summary of testing:

  bluesky: all tests pass
  tempest: T31 debug-mode, spmd=False test fails
  bangkok/lf95: all tests pass

CLM tag used for the baseline comparison tests if applicable: clm3_expa_65, and
                                                              clm3_expa_67 (bangkok)

  Summarize any changes to answers: bit-for-bit

Move branch tag over to trunk from: fixtgrbug2_clm3_expa_68

===============================================================
===============================================================
Tag name: clm3_expa_68
Originator(s): mvertens
Date: Wed Aug  9 16:43:04 MDT 2006
One-line Summary: replaced time_manager.F90 with clm_time_manager.F90

Purpose of changes: To eliminate name space conflicts in the 
	single executable CCSM mplementation. 

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none 

Code reviewed by: erik, mvertens

Externals changed:  

List all subroutines eliminated:

List all subroutines added and what they do: 
	
List all existing files that have been modified, and describe the changes:

- time_manager.F90 has been moved to clm_time_manager.F90
  to eliminate name space conflicts in the single executable CCSM 
  implementation. For stand-alone CAM, clm_time_manager.F90 simply
  uses the cam time_manager.F90 code.	 
- program_csm.F90 has also been modified to put in changes needed	
  for the single executable ccsm implementation.	
	
        M      src/biogeochem/CNCStateUpdate2Mod.F90
	M      src/biogeochem/CASAPhenologyMod.F90
	M      src/biogeochem/CNC13StateUpdate2Mod.F90
	M      src/biogeochem/CNNStateUpdate1Mod.F90
	M      src/biogeochem/DGVMEcosystemDynMod.F90
	M      src/biogeochem/CNBalanceCheckMod.F90
	M      src/biogeochem/CNNStateUpdate3Mod.F90
	M      src/biogeochem/CNFireMod.F90
	M      src/biogeochem/CNMRespMod.F90
	M      src/biogeochem/CASAMod.F90
	M      src/biogeochem/CNPhenologyMod.F90
	M      src/biogeochem/CNCStateUpdate1Mod.F90
	M      src/biogeochem/CNDecompMod.F90
	M      src/biogeochem/STATICEcosysDynMod.F90
	M      src/biogeochem/CNCStateUpdate3Mod.F90
	M      src/biogeochem/CNC13StateUpdate1Mod.F90
	M      src/biogeochem/DGVMMod.F90
	M      src/biogeochem/CNC13StateUpdate3Mod.F90
	M      src/biogeochem/CNAnnualUpdateMod.F90
	M      src/biogeochem/CNNStateUpdate2Mod.F90
	M      src/biogeochem/CNNDynamicsMod.F90
	M      src/biogeochem/CNAllocationMod.F90
	M      src/biogeochem/CNC13FluxMod.F90
	D      src/main/time_manager.F90
	M      src/main/accumulMod.F90
	M      src/main/clm_comp.F90
	M      src/main/driver.F90
	M      src/main/atmdrvMod.F90
	M      src/main/subgridRestMod.F90
	M      src/main/accFldsMod.F90
	M      src/main/initializeMod.F90
	M      src/main/pftdynMod.F90
	M      src/main/iniTimeConst.F90
	M      src/main/histFileMod.F90
	M      src/main/program_csm.F90
	M      src/main/do_restwrite.F90
	M      src/main/clm_csmMod.F90
	M      src/main/restFileMod.F90
	M      src/main/controlMod.F90
	M      src/main/initSurfAlbMod.F90
	A  +   src/main/clm_time_manager.F90
	M      src/main/ndepFileMod.F90
	M      src/main/lnd_comp_mct.F90
	M      src/main/program_off.F90
	M      src/main/do_close_dispose.F90
	M      src/riverroute/RtmMod.F90
	M      src/biogeophys/BalanceCheckMod.F90
	M      src/biogeophys/SurfaceRadiationMod.F90
	M      src/biogeophys/SoilTemperatureMod.F90
	M      src/biogeophys/SnowHydrologyMod.F90
	M      src/biogeophys/Biogeophysics2Mod.F90
	M      src/biogeophys/SurfaceAlbedoMod.F90
	M      src/biogeophys/Hydrology1Mod.F90
	M      src/biogeophys/Hydrology2Mod.F90
	M      src/biogeophys/BiogeophysicsLakeMod.F90
	M      src/biogeophys/SoilHydrologyMod.F90
	M      src/biogeophys/HydrologyLakeMod.F90
	M      src/biogeophys/CanopyFluxesMod.F90
		
Summary of testing: 
        - ran test-model.pl on bluesky and verified that all tests
	  passed successfully when compared to clm3_expa_67
	- ran cam3_3_17 test model suite with clm3_expa_68 code used
	  for clm and verified that all tests passed successfully when 
	  compared to cam3_3_17
	- ran ERS.T31_g35.I.bluesky using ccsm3_1_beta35 and the clm3_expa_68
	  clm code based and verified that results were bfb when compared to
	  ccsm3_1_beta35
	
CLM tag used for the baseline comparison tests if applicable: 

Summarize any changes to answers: results are bfb

===============================================================
Tag name: clm3_expa_67
Originator(s): tcraig
Date: Thu Jul 27 12:50:37 MDT 2006
One-line Summary: Fix tiny bug in controlMod.F90 for lighting compiling 

Purpose of changes: compiler failure associated with inconsistent
	module name related to shr_input vs shr_Input.

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: 

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: 

Code reviewed by: jeff, mvertens

Externals changed:  

List all subroutines eliminated:

List all subroutines added and what they do: 
	
List all existing files that have been modified, and describe the changes:

src/main/controlMod.F90
-     use shr_InputInfo_mod, only : shr_inputInfo_initType,       &
+     use shr_inputinfo_mod, only : shr_inputInfo_initType,       &
		
Summary of testing: NONE

CLM tag used for the baseline comparison tests if applicable: 

Summarize any changes to answers: should be bit-for-bit

===============================================================
Tag name: clm3_expa_66
Originator(s): tcraig
Date: Tue Jul 25 17:29:37 MDT 2006
One-line Summary: Add topographic downscaling, refactor mid-level infrastructure

Purpose of changes: Add topographic downscaling, improve memory use and scaling,
	step towards supporting nested grids.  Merge fmc12_clm3_expa_64 to trunk.

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: 

Describe any changes made to the namelist: Add two new optional namelist to
	read atm and lnd topography, fatmtop, flndtop

List any changes to the defaults for the boundary datasets: Updated the
	mkgriddata tool to produce an optional topographic dataset.
	Several topo datasets added to inputdata/lnd/clm2/griddata/.
	These datasets have not been added to any scripts as they
	are optional at this point and the scripts don't support 
	downscaling yet "out of the box".

Describe any substantial timing or memory changes: Memory scaling much improved.
	still too many global arrays in domain and decomp.  these will be removed
	in future revisions.

Code reviewed by: 

Externals changed:  

List all subroutines eliminated:
D      src/main/surfFileMod.F90
D      src/main/initSubgridMod.F90
	

List all subroutines added and what they do: 
A  +   src/main/subgridMod.F90
  - code cleanup and merge of deleted subroutines
A  +   src/main/surfrdMod.F90
  - added to isolate routines and eliminate circular use issues
	
List all existing files that have been modified, and describe the changes:
M      tools/mkgriddata/mkvarctl.F90
M      tools/mkgriddata/domainMod.F90
M      tools/mkgriddata/mkgriddata.F90
M      tools/mkgriddata/areaMod.F90
M      tools/mkgriddata/creategridMod.F90
M      tools/mkgriddata/mkvarsur.F90
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/main/clm_varpar.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90
M      src/main/subgridRestMod.F90
M      src/main/initializeMod.F90
M      src/main/clmtypeInitMod.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/clm_atmlnd.F90
M      src/main/clm_varsur.F90
M      src/main/clm_csmMod.F90
M      src/main/controlMod.F90
M      src/main/filterMod.F90
M      src/main/clm_varctl.F90
M      src/main/ndepFileMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/domainMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/clmtype.F90
M      src/riverroute/RtmMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90

Merge fmc12_clm3_expa_64 to trunk:
- update mkgrid to add topographic data file generation
- comment out print statement in lnd_comp_mct
- change use of shr_kind_mod in SurfaceAlbedoMod for compiler
  problem on pgi (MVR)
- change clm so memory now dynamically allocated.  LSMLON and LSMLAT
  in preproc.h no longer used except for with SCAM.  MAXPATCH still
  used but could be changed into a namelist input.
- add support for reading topographic datasets and using them
  for downscaling between clm atm and land grids.
- reorganize code to eliminate circular use logic
- rewrite decompInit to improve memory use and scaling
- remove obsolete routines in decompMod.F90
- rename datatype procs to procinfo, now contains only local data
- modify clmtype so all data is local gdc, no more global arrays in
  clmtype!
- update map_type for efficient memory use.  like mct with 1d arrays
  consisting of src, dst, S (COL, ROW, S).  update the internal clm
  atm/lnd mappings to use new datatype.  lnd/rtm and driver/atm
  mapping still using gridmap_type.  this will be updated in future
  versions.
- convert domain from 2d global to 1d global arrays.  add glo 
  decomp which is global 1d indexing like ij to 1d or gsn 
  uncompressed.
- convert wtxy, vegxy, pctspec from 2d to 1d arrays.  migrate many other arrays 
  from 2d global (i,j) to 1d global.  this is for nesting and to eventually
  cut down on number of index mappings in decomp_type
- reorganize order of initialization calls to start thinking about nesting
- add gatm array to domain datatype
- clean up dead code.
- rename initSubgridMod to subgridMod
- move map_indexes to subgridMod, rename get_subgrid_indexees
- rearrange a few subroutines to improve filename hierarchy and use logic
- delete get_sn routines, no longer needed
- update indexing in clm_atmlnd, remove hardwire indexes
- rewrite i/o as needed for 1d global arrays, not 2d
- delete gatherWeightsDGVM from DGVMMod.F90, no longer needed
- rename surfFileMod to surfrdMod.F90
- reduce size of subgrid_type and redefine gcelldc and gcellsn


Summary of testing:

  bluesky: 	clm test passes, cam pretag passes except ccsm
  tempest: 	cam pretag passes
  bangkok/lf95: cam pretag passes except bl153, bl353, bl553 due to code
	changes and resulting binary produced by compiler optimizations.
	also scam fails.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_65, cam3_3_16

  Summarize any changes to answers: NONE bit-for-bit

===============================================================
===============================================================
Tag name: clm3_expa_65
Originator(s): Erik Kluzek
Date: Mon Jul 10 13:52:20 MDT 2006
One-line Summary: Use share clocks and inputinfo object at driver level

Purpose of changes: Use new version of esmf_wrf and csm_share as next step
  in sequential CCSM development.

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: Add ability to use Darwin, add eshr to
Filepath

Describe any changes made to the namelist: Instead of directing namelist from stdin
  explicitly open namelist filename.  Change namelist name from clmexp to clm_inparm.

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Mariana Vertenstein, Tony Craig, Forrest Hoffman

Externals changed:  csm_share        to share3_060710
		    esmf_wrf_timemgr to esmf_wrf_timemgr_060616

List all subroutines eliminated: None

List all subroutines added and what they do: control_setNL (controlMod.F90) sets the
  namelist filename.

List all existing files that have been modified, and describe the changes:

tools/newcprnc/Makefile
bld/offline/tests/CLM_namelist.pm
bld/offline/tests/CLM_lab.pm
bld/offline/tests/CLM.pm
bld/offline/tests/model_specs.csh
bld/offline/tests/configure.csh
bld/offline/tests/config_machine_specs.csh
bld/offline/tests/CLM_run.pm
bld/offline/tests/test_batch.csh
bld/offline/tests/Makefile
bld/offline/jobscript.csh

    Add eshr to Filepath, add Darwin as a valid platform, don't redirect unit 5 for
namelist. Set MODEL_DATDIR explicitly. Use lnd.stdin as default namelist name.
Add "-g" to Makefile. Change clm namelist from clmexp to clm_inparm. Get test_batch.csh
to work both on bangkok for Linux/Lahey and tempest for SGI. Write out Rootdir file
when configuring build directory.

src/main/time_manager.F90 -- Use dayOfYear_r8 for calc_calday.
src/main/clm_comp.F90 ------ Pass CCSMInit in.
src/main/fileutils.F90 ----- Small changes to how using shr_file_mod.
src/main/initializeMod.F90 - Pass clock in.
src/main/program_csm.F90 --- Change where ESMF_Initialize is done.
src/main/controlMod.F90 ---- Add method to set namelist name, pass clock in and use it.
src/main/clm_varctl.F90 ---- Get rid of cam_ variables.
src/main/lnd_comp_mct.F90 -- Pass in clock and CCSMInit object.

Summary of testing:

  bluesky: 	test-batch.csh -- PASS and CAM and CAM CCSM tests pass.
  tempest: 	test-batch.csh -- PASS and CAM tests pass.
  bangkok/lf95: test-batch.csh -- PASS and CAM tests pass.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_64

  Summarize any changes to answers: NONE bit-for-bit

===============================================================
===============================================================
Tag name: clm3_expa_64
Originator(s): Dani Bundy Coleman <bundy@ucar.edu>
Date: Thu Jun 29 14:44:07 MDT 2006
One-line Summary: dust modifications from Natalie Mahowald

Purpose of changes: update dust code 

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Mariana Vertenstein <mvertens@ucar.edu>

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      src/biogeochem/DUSTMod.F90
       OLD     dmt_vma = 2.524e-6_r8 ! [m] Mass median diameter analytic       She84 p.75 Table1
       NEW     dmt_vma = 3.500e-6_r8 ! [m] Mass median diameter analytic 

M      src/main/clm_atmlnd.F90
       add land-to-atmosphere communication of fv,ram1 & dust fluxes
       (only active if defined DUST or PROGSEASALT )
M      src/main/lnd_comp_mct.F90
       add land-to-atmosphere communication of fv,ram1 & dust fluxes
       (only active if defined DUST or PROGSEASALT )

Summary of testing:

  bluesky: tested with cam, bfb when DUST and PROGSEASALT not defined
  tempest:
  bangkok/lf95:  tested with cam, bfb when DUST and PROGSEASALT not defined

CLM tag used for the baseline comparison tests if applicable: clm3_expa_63

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name: clm3_expa_63
Originator(s): Mariana Vertenstein
Date: Fri May 12 16:08:03 MDT 2006  
One-line Summary: introduced mct domains in COUP_CAM mode

Purpose of changes: To introduce generalized mct domains
in COUP_CAM mode for the purposes of generating a sequential 
ccsm 

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none
 
Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Tony Craig

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:
  lnd_comp_mct.f90 
     removed lnd_CheckGrid_mct routine and replaced it with lnd_domain_mct
     each processor sends it local domain information stored in an MCT
     GeneralGrid data structure back to the top level application driver. 
     A global gather is done for the GeneralGrid and domain comparison is
     performed on the master processor.     

Summary of testing:

  bluesky: only cam test suite was run successfully
  tempest: only cam test suite was run successfully
  bangkok/lf95: only cam test suite was run successfully

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name: clm3_expa_62
Originator(s): erik, tcraig
Date: Wed May 10 00:06:39 MDT 2006
One-line Summary: merge shrgetput08_clm3_expa_61, fix finemesh bugs

Purpose of changes: changes required for sequential ccsm.  validate
	finemesh is running properly.

Bugs fixed (include bugzilla ID):
	a couple finemesh bugs, not documented.

Describe any changes made to build system: modified makefile slightly
	to set HIDE_MPI when SPMD is FALSE, remove HIDE_SHR_MSG

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: erik, tcraig

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:
Makefile:
 - remove HIDE_SHR_MSG, not needed anymore
 - add HIDE_MPI if SPMD is FALSE
SVN_EXTERNALS:
 - change csm_share version from share3_051205 to share3_060428
 - change emsf_wrf_timemgr version from esmf_wrf_timemgr_051212 to esmf_wrf_timemgr_060501
fileutils.F90:
 - uses shr_file_mod.F90 routines
 - use shr_file_mod syntax for archive_dir (using mss: prefix)
initializeMod.F90:
 - add pnamer_bin get
program_csm.F90:
 - add ESMF_Initialize call
clm_atmlnd.F90:
 - fix bug in call to grid_maparray for finemesh mapping, only affects finemesh runs.
controlMod.F90:
 - use shr_file_mod syntax for archive_dir (using mss: prefix)
lnd_comp_mct.F90:
 - change call to get_proc_bounds to get_proc_bounds_atm (bug for finemesh runs).
program_off.F90:
 - add calls to ESMF_Initialize and ESMF_Finalize
 
	
Summary of testing:
  bluesky: cam full suite bfb
	   clm full suite not bfb (TS is bfb for 2 days, history file not bfb
	      after ~1.5 days probably due to new esmf time manager, likely roundoff)
  tempest: cam full suite bfb, ccsm build test
  bangkok/lf95: cam full suite bfb
  bluevista : ccsm TER.01a.1.9x2.5_gx1v3.B.bluevista bfb
	      cam finemesh T42half.clim0 test, bfb for 42 timesteps vs cam3_2_49
  lightning : ccsm TER.01a.4x5_gx3v5.B.bluevista bfb

CLM tag used for the baseline comparison tests if applicable: 
  clm3_expa_61, cam3_3_4, ccsm3_1_beta27

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: clm standalone only
    - what platforms/compilers: only bluesky tested
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	assume roundoff.  it's bfb for at least a day.  in cam and ccsm mode they
	are bfb.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?  guess

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================

===============================================================
Tag name: clm3_expa_61
Originator(s): T Craig
Date: Thu Apr 27 01:10:40 MDT 2006
One-line Summary: merge cammct05_clm3_expa_58 onto main trunk,
  modify surface dataset input

Purpose of changes: merge branch

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: myself, developed my MV

List all subroutines eliminated:
  clm_camMod.F90 - interface to cam
  MCT_atmlnd_cpl.F90 - mct migrated to sequential driver
  MCT_lnd_comp.F90 - mct migrated to sequential driver

List all subroutines added and what they do:
  lnd_comp_mct.F90 - interface to sequential driver using mct coupling
	
List all existing files that have been modified, and describe the changes:
  clm_comp.F90 - separate init method into init1, init2
  initializeMod.F90 - separate initialize into initialize1 and 2
  program_csm.F90 - add call to clm_init0
  clm_atmlnd.F90 - PWorley's changes to improve phoenix performance,
    packed arrays in clm_mapa2l and clm_mapl2a interpolation.
  program_off.F90 - add call to clm_init0
  areaMod.F90 - PWorley's changes to improve phoenix performance,
    interpolate packed arrays in gridmap_maparray
  Hydrology2Mod.F90 - remove use of iam

  mksurfdata, several files changed to convert
    mksrf_fgrid_global/regional to mksrf_fgrid and mksrf_gridtype
	
Summary of testing:

  bluesky: clm full suite bfb, cam full suite bfb
  bluevista: ccsm bfb TER.01a.T31_gx3v5.B.bluevista, TER.01a.4x5_gx3v5.B.bluevista
  tempest: cam full suite bfb
  bangkok/lf95: cam full suite bfb

  mksrf tested on bluevista, 7 cases, bfb
	
CLM tag used for the baseline comparison tests if applicable:
  clm3_expa_60, cam3_3_2, ccsm3_1_beta25

changes are bit-for-bit
	
===============================================================

	
===============================================================
Tag name: clm3_expa_60
Originator(s): Forrest Hoffman
Date: Fri Apr 14 11:03:34 EDT 2006
One-line Summary: Rearranged physiology fields, changed CO2 constants, fixed Bug #43

Purpose of changes: Make radiation-related physiology fields standard, prepare code for C-LAMP experiments, and make test-model run on Cray X1E (phoenix)

Bugs fixed (include bugzilla ID): Bug #43

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Myself

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

nfwrappers.f90:
Changed intent for ncid from intent(in) to intent(out) since it must be
returned to the calling routines.  This fixed Bug #43 which was discovered
on the Cray X1E (phoenix).

ChangeLog:
Added this log entry.

clm_varcon.F90:
Changed co2_ppmv_const to 283.1878_r8 for both CASA' and CN in preparation
for Experiment 1 of the C-LAMP.

histFldsMod.F90
Moved LAISUN, LAISHA, TLAI, TSAI, SLASUN, and SLASHA out of the CN-only
section of the code so that they appear on the regular CLM output files
since the two-leaf radiation code is now standard.  In addition, TLAI and
TSAI were removed from the DGVM-only section of the code since these
output fields are now standard.

Summary of testing:

  cheetah:
Ran test-model for T31, T31cn, T31cnall, T31casa, and T31dgvm with
baseline clm3_expa_59.  T31 and T31dgvm passed all tests.  The others
passed tests 01-05, but not the 06_control test because of the change
in co2_ppmv_const.

  phoenix:
Ran test-model for T31, T31cn, T31cnall, T31casa, and T31dgvm with
baseline clm3_expa_59.  T31 and T31dgvm passed all tests.  The others
passed tests 01-05, but not the 06_control test because of the change
in co2_ppmv_const.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_59

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: co2_ppmv_const modification changes answers
    - what platforms/compilers: IBM (cheetah) and Cray X1E (phoenix)
    - nature of change (roundoff; larger than roundoff/same climate; new climate): larger than roundoff because of changes in carbon pools

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? cprnc

   * There is no validated climate in these model configurations. *

===============================================================
===============================================================
Tag name: clm3_expa_59
Originator(s): Tony Craig
Date: Wed Apr  5 18:03:23 MDT 2006
One-line Summary: add fatmlndfrc capability

Purpose of changes:  Support new datasets, other minor improvements,
  update mkgrid and mksurf tools for new dataset generation.

Bugs fixed (include bugzilla ID):

Describe any changes made to build system: jobscript.csh modified for
  new surface datasets, change baseline resolution to T31.

Describe any changes made to the namelist: added optional fatmlndfrc
  namelist input for landfrac file on atm grid.

List any changes to the defaults for the boundary datasets:  all new
  grid, frac, and surf datasets generated, located in 
  /fs/cgd/csm/inputdata/lnd/clm2/[griddata,surfdata]

Describe any substantial timing or memory changes: None

Code reviewed by: myself

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

tools/mksurfdata/mkrfdat.F90 - change default output filenames
tools/mksurfdata/mklaiMod.F90 - removed masking since there is no mask anymore
tools/mksurfdata/mkfileMod.F90 - removed read of LANDMASK and LANDFRAC
tools/mksurfdata/creategridMod.F90 - removed write of LANDMASK and LANDFRAC
tools/mksurfdata/Makefile - fix clean bug
tools/mkgriddata/mkgriddata.F90 - add generation of ffracdat file
   force area calculation for ccsm domain files due to noise in scrip areas
   change default output filenames
tools/mkgriddata/mkvarctl.F90 - add support for area recomputation
tools/mkgriddata/mkfileMod.F90 - removed, merged into creategridMod.F90
tools/mkgriddata/areaMod.F90 - add flush(6)
tools/mkgriddata/creategridMod.F90 - add mkfile subroutine
   fix bug in setting of corner points
   handle wrap-around points better with corner points
   add ability to adjust units of area (not automatic)
   add checks for area
   add ability write eigher grid or frac file in write_domain
bld/offline/tests/test_batch.csh - change default version from 53 to 58
   turn on dgvm testing by default
bld/offline/jobscript.csh - change to share queue on bluesky
   run mixed mpi/openmp by default, 2x2
   change default resolution to T31 (was T42)
   update to use new surface datasets
   change default, turn on DUST, RTM, VOC, turn off CN, SUPLN, SUNSHA, STOMATA2
   add unlimit unlimited for AIX
   fix redirection to compile_log.clm output file
src/main/initializeMod.F90 - add fatmlndfrc stuff
   add computation of ldomain%frac and ldomain%mask
src/main/controlMod.F90 - add fatmlndfrc stuff
src/main/clm_varctl.F90 - add fatmlndfrc stuff
src/main/driver.F90 - remove redundant definition of caldayp1
src/main/clmtypeInitMod.F90 - remove landfrac variable for clm3 gridcell_type
src/main/histFileMod.F90 - add indxupsc, jndxupsc indices for upscaling
src/main/program_csm.F90 - move shr_msg_stdio to after MPI_INIT, change
   call so it only redirects log file for masterproc.  this will clean
   up the log file significantly but may lead to error messages ending
   up in stdout.
src/main/surfFileMod.F90 - add fatmlndfrc stuff
src/main/initGridCellsMod.F90 - remove landfrac variable for clm3 gridcell_type
src/main/domainMod.F90 - reorder domain data slightly (nothing changed)
src/main/areaMod.F90 - change default of i_ovr and j_ovr from bigint to -1,
   allows for cleaner writing of indxupsc and jndxupsc in history file.
   change gridmap_setmapsFM to use _a and _l notation instead of _i and _o
src/main/clmtype.F90 - remove landfrac from clm3 gridcell_type

	
Summary of testing:

  Baseline versions, clm3_expa_58, cam3_2_56, ccsm3_1_beta24

  bluesky: clm full suite passes, cam full suite passes
  tempest: cam full suite passes 
  bangkok/lf95: cam full suite passes
  bluevista: ccsm TER.01a B passes for several resolutions, new datasets
     in scripts
	
CLM tag used for the baseline comparison tests if applicable: clm3_expa_58

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Code changes are bfb, but answers may change when using new surface datasets

  Summarize any changes to answers, i.e.,
    - what code configurations: CCSM answers will change with new datasets as
      default datasets are changing.  clm default test is bfb at T31 with new datasets,
      cam will be bfb as current default datasets are not being updated.
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================


===============================================================
Tag name: clm3_expa_58
Originator(s): Forrest Hoffman
Date: Thu Mar  9 17:04:27 EST 2006
One-line Summary: Updates for the Cray X1E and a forcing height error check.

Purpose of changes: Improvements on the Cray X1E and avoiding arithmetic exceptions when the forcing height is below the canopy height.

Bugs fixed (include bugzilla ID): Bug #36

Describe any changes made to build system: jobscript.csh modified for Cray X1E

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: myself and (for forcing height check code) Mariana Vertenstein

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

   jobscript.csh - Modified for Cray X1E and cross-compiler
   inicFileMod.F90 - Added compiler directives for vectorization
   driver.F90 - Commented out CSDs to avoid model hangs caused by write
      statements in science routines within the associated loops
   controlMod.F90 - Changed default clump_pproc to 1 for the Cray (since CSDs
      are not used in driver.F90
   histFldsMod.F90 - Changed type2d='levlak' for the TLAKE field
   CanopyFluxesMod.F90 - Inserted code to check if the forcing height
      is below the canopy height for any pft.  Model will now abort when this
      occurs instead of taking the log() of a negative number.  See Bug #36

Summary of testing:

  bluesky: test-model ran as follows
01_debug_run_SPMD: T31 ran
02_debug_run_nonSPMD: T31 ran
03_start: T31 ran
04_restart: T31 ran
05_norestart_compare_to_restart: T31 ran
06_control: T31 ran
01_debug_run_SPMD: T31cn ran
02_debug_run_nonSPMD: T31cn ran
03_start: T31cn ran
04_restart: T31cn ran
05_norestart_compare_to_restart: T31cn ran
06_control: T31cn ran
01_debug_run_SPMD: T31cnall ran
02_debug_run_nonSPMD: T31cnall ran
03_start: T31cnall ran
04_restart: T31cnall ran
05_norestart_compare_to_restart: T31cnall ran
06_control: T31cnall ran
01_debug_run_SPMD: T31casa ran
02_debug_run_nonSPMD: T31casa ran
03_start: T31casa ran
04_restart: T31casa ran
05_norestart_compare_to_restart: T31casa ran
06_control: T31casa ran
  cheetah:
01_debug_run_SPMD: T31cnall ran
02_debug_run_nonSPMD: T31cnall ran
03_start: T31cnall ran
04_restart: T31cnall ran
05_norestart_compare_to_restart: T31cnall ran
06_control: T31cnall ran
01_debug_run_SPMD: T31 ran
02_debug_run_nonSPMD: T31 ran
03_start: T31 ran
04_restart: T31 ran
05_norestart_compare_to_restart: T31 ran
06_control: T31 ran
01_debug_run_SPMD: T31cn ran
02_debug_run_nonSPMD: T31cn ran
03_start: T31cn ran
04_restart: T31cn ran
05_norestart_compare_to_restart: T31cn ran
06_control: T31cn ran
01_debug_run_SPMD: T31casa ran
02_debug_run_nonSPMD: T31casa ran
03_start: T31casa ran
04_restart: T31casa ran
05_norestart_compare_to_restart: T31casa ran
06_control: T31casa ran
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: clm3_expa_57

===============================================================
Tag name: clm3_expa_57
Originator(s): Peter Thornton
Date: 31 Jan 2006
One-line Summary: Mods to allow switching between 3 and 4 soil
 organic matter pools

Purpose of changes: New science.

Bugs fixed (include bugzilla ID): bugs in pftdynMod.F90 and ndepfileMod.F90

Describe any changes made to build system:

Describe any changes made to the namelist: Added SOM4 as new CPP directive

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: none

Code reviewed by: myself

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:
main/clmtype.F90: added soil4c (and 13C equiv.), soil4n states and associated
    flux variables. Also added long name commenting for many previously defined
    variables.
main/clmtypeInitMod.F90: added initialization for new variables
main/CNiniTimeVar.F90: initialize new state variables.
main/histFldsMod.F90: added new variables, and also added long names for 
    many previously defined variables.
main/pftdynMod.F90: bug fix in mpi_bcast, change MPI_REAL8 to MPI_INTEGER.
main/ndepFileMod.F90: bug fix for mpi_bcast, change MPI_REAL8 to MPI_INTEGER.
biogeochem/CNSetValueMod.F90: add code for new state and flux variables.
biogeochem/CNDecompMod.F90: add code to allow either 3 or 4 SOM pools. Default
    behavior is 3 pools, 4-pool behavior triggered by SOM4 CPP directive.
biogeochem/CNCStateUpdate1Mod.F90: handling for new variables.
biogeochem/CNNStateUpdate1Mod.F90: handling for new variables.
biogeochem/CNSummaryMod.F90: handling for new variables.
biogeochem/CNBalanceCheckMod.F90: handling for new variables
biogeochem/CNPrecisionControlMod.F90: handling for new variables
biogeochem/CNC13FluxMod.F90: handling for isotope version of new variables
biogeochem/C13StateUpdate1Mod.F90: handling for new variables
biogeochem/C13SummaryMod.F90: handling for new variables
biogeochem/CNrestMod.F90: handling for new variables, and modify EXIT_SPINUP
    controls
    
Summary of testing:

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: in 3-pool mode 
(SOM4 not set), results are bfb with clm3_expa_55.  in 4-pool mode, changes
answers, as expected.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
bfb under 3-pools is demonstrated at:
http:/www.cgd.ucar.edu/tss/clm/diagnostics/clm3cn/c13/ccsm3_bgc31_I_5a-ccsm3_bgc31_I_2b/setsIndex.html
	
===============================================================
Tag name: clm3_expa_56
Originator(s): Tony Craig
Date: 31 Jan 2006
One-line Summary: Final changes for finemesh implementation.

Purpose of changes: Integrate final changes for finemesh implementation.  These
changes are 100% backward compatable and bfb, but also support use of a finemesh grid.  finemesh implementation has been test in clm and cam.

Bugs fixed (include bugzilla ID):

Describe any changes made to build system: Update Makefile so Depends are regenerated if any code is changed.

Describe any changes made to the namelist: Added one new optional namelist, fatmgrid.  This is a dataset for the coarse grid in clm.  The format is the same as the surface dataset but only needs to include grid variables.

List any changes to the defaults for the boundary datasets:  Generated some new datasets with filled wetland and higher resolution.  Not required and not yet added to default suite of datasets.

Describe any substantial timing or memory changes:

Code reviewed by:

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:

tools/mksurfdata:
  mksrfdat.F90,areaMod.F90,creategridMod.F90
bld/offline/Makefile
doc/ChangeLog
 src/main:
clm_comp.F90,driver.F90,clm_camMod.F90,atmdrvMod.F90,clmtypeInitMod.F90,initializeMod.F90,histFileMod.F90,program_csm.F90,clm_atmlnd.F90,clm_csmMod.F90,surfFileMod.F90,controlMod.F90,clm_varctl.F90,initGridCellsMod.F90,MCT_lnd_comp.F90,program_off.F90,domainMod.F90,decompMod.F90,areaMod.F90,clmtype.F90
src/biogeophys/SurfaceAlbedoMod.F90

Code changes:
add pftm to domain datatype and history file
modify program_off and program_cs to use clm_init[1,2], clm_run[1,2]
modify coupling to handle coarse <-> finemesh for standlaone, cam, and
  ccsm.
modify Makefile so depends file is reset whenever there is a code change
add normalized area to history files
add lat_a, lon_a, latdeg_a, londeg_a to clm3 datatype for atm lats/lons.  
  required in SurfaceAlbedo computation where the the zenith angle has
  to be based on the atm (coarse) grid, not the fine clm grid.
merge with clm3_expa_53_brnchT_cam01 tag
	
Summary of testing:

  bluesky: clm full suite bfb, cam full suite bfb, ccsm bfb
  tempest: cam full suite bfb
  bangkok/lf95: cam full suite bfb

CLM tag used for the baseline comparison tests if applicable: clm3_expa_55

IF tag changes answers relative to baseline comparison the
following should be filled in: bfb

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? bfb

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
Tag name: clm3_expa_55
Originator(s): Peter Thornton
Date: 24 Jan 2006
One-line Summary: Fixes for 13C isotope code, migration from cvs

Purpose of changes:

Bugs fixed (include bugzilla ID):

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by: myself

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:
Files modified:
1. CNFireMod.F90
Added initialization of variable mep.

2. CNrestMod.F90
Added EXIT_SPINUP controls on column-level 13C pools

3. C13SummaryMod.F90
Added current and excess maintenance respiration terms to summary MR variable.

4. CNC13FluxMod.F90
Added new routines to calculate 13C fluxes. Litter to column, non-mortality fluxes
at the column level, pft-level gap mortality fluxes, pft and column level fire mortality fluxes,

5. CNEcosystemDynMod.F90
Added calls for C13Flux2, C13Flux3, C13StateUpdate2, and C13StateUpdate3.

6. clm_varcon.F90
Added parameters to define a fixed pre_industrial del13C (set to -6 permil)

Summary of testing:

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: clm3_expa_40

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

Changes answers for CN only, and then only for the isotope prognostics.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
http://www.cgd.ucar.edu/tss/clm/diagnostics/clm3cn/c13/ccsm3_bgc31_I_2a-ccsm3_bgc26_I_1d/setsIndex.html
===============================================================
Tag name: clm3_expa_54
Originator(s): Tony Craig
Date: 17 Jan 2006
One-line Summary: Update infrastructure in support of finemesh, migration from cvs

Purpose of changes: bfb infrastructure changes committed, partial step towards finemesh implementation

Bugs fixed (include bugzilla ID): None

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Some memory added for extra coarse grid, atmosphere domain, as well as changes to interpolation datatypes and code.  Redundant memory deleted from some datasets.

Code reviewed by: Mariana Vertenstein

List all subroutines eliminated: 

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:

src/main:
initGridIndexMod.F90,lnd2atmMod.F90,CNiniTimeVar.F90,abortutils.F90,clm_comp.F90,driver.F90,clm_camMod.F90,atmdrvMod.F90,subgridRestMod.F90,accFldsMod.F90,clmtypeInitMod.F90,initializeMod.F90,pftdynMod.F90,iniTimeConst.F90,histFileMod.F90,program_csm.F90,clm_atmlnd.F90,clm_varsur.F90,clm_csmMod.F90,restFileMod.F90,surfFileMod.F90,controlMod.F90,initSurfAlbMod.F90,initSubgridMod.F90,clm_varctl.F90,ndepFileMod.F90,initGridCellsMod.F90,MCT_lnd_comp.F90,program_off.F90,domainMod.F90,decompMod.F90,areaMod.F90,clmtype.F90,histFldsMod.F90

src/riverroute:
RtmMod.F90

src/biogeochem:
CASAMod.F90,DUSTMod.F90,CNPhenologyMod.F90,STATICEcosysDynMod.F90,DGVMMod.F90,CNrestMod.F90,VOCEmissionMod.F90,CNNDynamicsMod.F90,CNVegStructUpdateMod.F90

src/biogeophys:
BalanceCheckMod.F90,SurfaceRadiationMod.F90,SoilTemperatureMod.F90,Biogeophysics1Mod.F90,Biogeophysics2Mod.F90,FrictionVelocityMod.F90,Hydrology1Mod.F90,Hydrology2Mod.F90,BiogeophysicsLakeMod.F90,HydrologyLakeMod.F90,BareGroundFluxesMod.F90,CanopyFluxesMod.F90

bld/offline/tests:
CLM_lab.pm,test_batch.csh
	
tools/mksurfdata:
mkdynpftMod.F90,mkgridMod.F90,shr_timer_mod.F90,mklaiMod.F90,mkglacier.F90,mkurban.F90,fileutils.F90,mksoitex.F90,mkfileMod.F90,domainMod.F90,areaMod.F90,creategridMod.F90,mkvarsur.F90,mksrfdat.F90,nanMod.F90,mklanwat.F90,mksoicol.F90,Makefile,mkpftMod.F90

tools/mkgriddata:
mkvarctl.F90,fileutils.F90,mkgriddata.F90,mkfileMod.F90,domainMod.F90,areaMod.F90,creategridMod.F90,mkvarsur.F90,nanMod.F90,Makefile

Code changes:
Merge atm2lnd_state_type, atm2lnd_flux_type.  Same for lnd2atm state/flux.
  Related changes in clm3 and elsewhere in code.
Add domainMod.F90 and domain_type.  Migrate grid data into domain type.
  Instantiate adomain(atm/coarse), ldomain(lnd/finemesh), rdomain(rtm),
  ddomain(atmdrv external data) in model.
Add lats, latn, lonw, lone 2d arrays and associated code changes.
Cleanup areaMod.F90; merging subroutines, removing redundant code, eliminate
  *_point routines.
Remove numlon
Add decomp_type for gcelldc and gcellsn.  Remove redundant data in other
  arrays related to addressing physical space and logical space.
Clean up interface in set_landunit subroutines.  Remove redundant code.
Clean up procs and clumps datatypes, removing redundant data.
Migrate clm3 topology data to pointers from copies
Add gridmap_type for interpolation and associated code and routines to
  support the type.
Add clm_atmlnd.F90 file for upscale/downscale code.  Add clm_mapa2l
  and clm_mapl2a to carry out mapping associated with upscale/downscale.
Add gridmap_setmapsFM for generation of weights for downscale/upscale
  routines.
forc_ndep should not be in atm2lnd_type.
Reuse code as much as possible throughout.
Update mksurfdata, mkgriddata.  Speed code up, bfb, new fields added,
  new input options for files.  Fill with wetland, add PFTDATA_MASK
  field for real/fake land.
Update code to clm3_expa_53
Rename latixy and longxy to latc and lonc.
Remove fullgrid attribute.

Summary of testing:

  bluesky: full clm test, full cam test
  tempest: full cam test
  bangkok/lf95: full cam test

CLM tag used for the baseline comparison tests if applicable: clm3_expa_53

IF tag changes answers relative to baseline comparison the
following should be filled in:  bfb

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? bfb

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
	
Tag name: clm3_expa_53
Originator(s): Mariana Vertenstein
Date: Fri Dec.16 2005
One-line Summary: Put in MCT communication for cam-clm coupling

Purpose of changes: removed lp_coupling communication and put in
MCT communication interfaces

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none
	
Describe any changes made to the namelist: none

List any changes to the defaults for the input datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Mariana Vertenstein, Rob Jacob
	
List all subroutines eliminated: none

List all subroutines added and what they do: 
  main/MCT_atmlnd_cpl.F90  
     clm/cam MCT coupling interface - will be moved out of clm code in
     near future	
  main/MCT_lnd_comp.F90
     clm MCT wrapper layer
  main/clm_comp.F90
     module containing wrapper routines that separate clm into chunks of
     code that contain no communication (e.g. clm_run1, clm_run2 has no
     communicaiton). This is needed to satisfy requirement for implementing
     multiple coupling interfaces (e.g. concurrent/MCT, sequential/MCT,
     sequential/ESMF) within ccsm.	
  main/clm_varorb.F90	
     module for orbital parameters 
    (this will be added to program_off.F90 and program_csm.F90)
	
List all existing files that have been modified, and describe the changes:
    clm_camMod.F90 - all coupling still exists here

Summary of testing:
	
  bluesky:
  test-model.pl -res T31      
  test-model.pl -res T31cn    
  test-model.pl -res T31cnall 
  test-model.pl -res T31casa  
  test-model.pl -res T31dgvm  
	
  tempest: No testing

  bangkok/lf95: No testing

CLM tag used for the baseline comparison tests if applicable: clm3_expa_48
  results were bfb with clm3_expa48	
	
IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
	
Tag name: clm3_expa_52
Originator(s): Mariana Vertenstein
Date: Tues Dec.12 2005
One-line Summary: Put in scam fix needed in CAM mode

Purpose of changes: clean up svn clm structure

Bugs fixed (include bugzilla ID):

Describe any changes made to build system:
None
	
Describe any changes made to the namelist:
None

List any changes to the defaults for the input datasets:
None

Describe any substantial timing or memory changes:
None

Code reviewed by:
Mariana Vertenstein
	
List all subroutines eliminated:
None

List all subroutines added and what they do:
None

List all existing files that have been modified, and describe the changes:
clm_camMod.F90 (this change was put into cam3_2_41)

Summary of testing:
No testing done

CLM tag used for the baseline comparison tests if applicable:
NA
	
IF tag changes answers relative to baseline comparison the
following should be filled in:

Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate): 

If bitwise differences were observed, how did you show they were no worse
than roundoff?

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
 - source tag (all code used must be in the repository):
 - platform/compilers:
 - configuration (CPP ifdefs):
 - build-namelist command (or complete namelist):
 - MSS location of output:

MSS location of control simulations used to validate new climate:

URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
	
Tag name:  clm3_expa_51
Originator(s): mvr
Date: Tues Dec.12 2005
One-line Summary: removed src/utils dir

Purpose of changes: should've been done with external setup in prev tag

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the input datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: mvr, mvertens

List all subroutines eliminated: 
D      src/utils

List all subroutines added and what they do: 
none

List all existing files that have been modified, and describe the changes:
none
	
Summary of testing:

bluesky: none
tempest: none
bangkok/lf95: none

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate):

If bitwise differences were observed, how did you show they were no worse
than roundoff? b4b

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
 - source tag (all code used must be in the repository):
 - platform/compilers:
 - configuration (CPP ifdefs):
 - build-namelist command (or complete namelist):
 - MSS location of output:

MSS location of control simulations used to validate new climate:

URL for LMWG diagnostics output used to validate new climate:

===============================================================
Tag name: clm3_expa_50
Originator(s): Mariana Vertenstein
Date: Tues Dec.12 2005
One-line Summary: Updated external definitions for utils

Purpose of changes: clean up svn clm structure

Bugs fixed (include bugzilla ID):

Describe any changes made to build system:
None
	
Describe any changes made to the namelist:
None

List any changes to the defaults for the input datasets:
None

Describe any substantial timing or memory changes:
None

Code reviewed by:
NA
	
List all subroutines eliminated:
None

List all subroutines added and what they do:
None

List all existing files that have been modified, and describe the changes:
None

Summary of testing:
No testing done

CLM tag used for the baseline comparison tests if applicable:
NA
	
IF tag changes answers relative to baseline comparison the
following should be filled in:

Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate): 

If bitwise differences were observed, how did you show they were no worse
than roundoff?

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
 - source tag (all code used must be in the repository):
 - platform/compilers:
 - configuration (CPP ifdefs):
 - build-namelist command (or complete namelist):
 - MSS location of output:

MSS location of control simulations used to validate new climate:

URL for LMWG diagnostics output used to validate new climate:

===============================================================
	
Tag name: clm3_expa_49
Originator(s): Mariana Vertenstein
Date: Mon Dec 12 2005
One-line Summary: Updated clm with changes put into cam3_2_38

Purpose of changes:
Cray-X1E OpenMP/CSD compatibility modifications.
	
Bugs fixed (include bugzilla ID): 
None

Describe any changes made to build system:
None	
	
Describe any changes made to the namelist:
None	
	
List any changes to the defaults for the input datasets:
None	
	
Describe any substantial timing or memory changes:
None	
	
Code reviewed by:
Mariana Vertenstein	
	
List all subroutines eliminated:
None
	
List all subroutines added and what they do:
None
	
List all existing files that have been modified, and describe the changes:
- Allowed coexistence of OpenMP and CSD's on Cray-X1E provided they do not operate
  on same loop index
- Removed nested OpenMP capability
	
src/main: 
   areaMod.F90
   driver.F90
   histFileMod.F90
   atmdrvMod.F90
	
src/riverroute: 
   RtmMod.F90
	
tools/mksurfdata
   mkdynpftMod.F90 
   mklaiMod.F90 
   mkpftMod.F90 
   mksoitex.F90
   mkglacier.F90
   mklanwat.F90
   mksoicol.F90
   mkurban.F90
	
Summary of testing:

bluesky:
test-model.pl -res T31      
test-model.pl -res T31cn    
test-model.pl -res T31cnall 
test-model.pl -res T31casa  
test-model.pl -res T31dgvm  
	
tempest: No testing

bangkok/lf95: No testing

CLM tag used for the baseline comparison tests if applicable:
clm3_expa_48 (results were bfb)	
	
IF tag changes answers relative to baseline comparison the
following should be filled in:
	
Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	
If bitwise differences were observed, how did you show they were no worse
than roundoff?

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
  - source tag (all code used must be in the repository):
  - platform/compilers:
  - configuration (CPP ifdefs):
  - build-namelist command (or complete namelist):
  - MSS location of output:
	
MSS location of control simulations used to validate new climate:
	
URL for LMWG diagnostics output used to validate new climate:
	
===============================================================

clm3_expa_48
Originator: forrest (Forrest Hoffman)
Date: Fri Dec  2 06:50:57 MST 2005
Model: CLM
Version: CLM3.expa.48
One-line Summary: Added bug fix for reading TpoolC in CASA, split long line in DGVM, and modified Makefiles for Cray X1E
Requires change in build system: yes
Modified Makefile for the Cray X1E and the newcprnc build
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM (cheetah)
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: no (bit-for-bit)
Name of tests cases on NCAR Mass-Store: (For changes that change answers)
Changes made:

1. Fixed TpoolC initialization not to overwrite pools if they were read from
   initial dataset.
2. Split a long line in DGVMEstablishmentMod.F90
3. Updated Makefile for Cray X1E
4. Updated test system for use on Cray X1E and changed netCDF path for ORNL IBM
5. Replaced cprnc.f90 with cprnc.F90 in newcprnc and modified its Makefile to
   use CPP for this file.  NOTE: This was tested only on the IBM and Cray X1E,
   and may require minor Makefile modifications for other platforms.

Ran the following tests on IBM (cheetah):
./test-model.pl -res T31      -c $HOME/CCSM/clm3_expa_47
./test-model.pl -res T31cn    -c $HOME/CCSM/clm3_expa_47
./test-model.pl -res T31cnall -c $HOME/CCSM/clm3_expa_47
./test-model.pl -res T31casa  -c $HOME/CCSM/clm3_expa_47

===============================================================

clm3_expa_47
Originator: mvertens ( Mariana Vertenstein)
Date: Fri Nov 25 10:26:47 MST 2005
Model: CLM
Version: CLM3.expa.47
One-line Summary: updated to wrf esmf time manager interfaces
Requires change in build system: yes
Makefile is modified	
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: myself
Changes answers: no (bit-for-bit) 
Changes made:
1) Update offline clm to new wrf esmf time manager interfaces.
   This change has already been made in the cam code base.
   This change also implies that the ESMF prototye time manager code
   is no longer needed. The new time manager interfaces are identical
   to the latest ESMF library. 	   
2) Testing done:
   Verified that the following tests passed and were also bfb 
   with clm3_expa_46.
   ./test-model.pl -res T31      
   ./test-model.pl -res T31cn    
   ./test-model.pl -res T31cnall 
   ./test-model.pl -res T31casa  
   Note - CCSM testing with this code base must still be done.	
===============================================================
	
===============================================================

clm3_expa_46
Originator: mvertens ( Mariana Vertenstein)
Date: Fri Nov 11 12:50:40 MST 2005
Model: CLM
Version: CLM3.expa.46
One-line Summary: put in change to csoilc and change in CanopyFluxesMod.F90
Requires change in build system: no
Tested to wood.F90 so that RSSHA, RSSUN are now time averaged fields
      and TSNOW, SNOWLIQ and SNOWICE are now instantaneous fields.
 
   o) Modified inicFileMod.F90 so that T_REF2M was added. 

   o) Modified initSubGridMod so that npfts_per_lunit = numpft+1 if allocate_all_vegpfts
      is true.

   o) Modified mlai.F90, mkpft.F90 and mksrfdatMod.F90 so that only new surface data format
      is created.

6) Testing Done:

   incorporated allocate_all_pfts=.true. as default in test-model.pl

   linux (lf95) (anchorage)
      ran test-model.pl               successfully (CN on , full alloc on )
      ran test-model.pl -res T42cnoff successfully (CN off, full alloc on )
      ran test-model.noalloc.pl       successfully (CN on , full alloc off)

      Comparing the diagnostic output from for alloc-on and alloc-off for CN on,
      the output was the same for first 5 time steps and then started diverging. 
      A climate simulation needs to be done to verify that the roundoff level 
      differences results in the same climate.

   ibm-sp (blackforest)
      ran test-model.noalloc.pl and test-model.pl (CN is on)
         diagnostic output was the same for the first 3 timesteps and then started diverging
      ran test-model.noalloc.pl -res T42cnoff and test-model.pl -res T42CNoff (CN is off)
         diagnostic output was the same for the first 8 timesteps and then started diverging
      ran test-model.noalloc.pl -res T42cnoff compared with clm3_expa_12
         verified that only roundoff differences appeared in the history file fields accept
         for RSSHA, RSSUN, TSNOW, SNOWLIQ, SNOWICE (see above)
      ran test-model.hist1d.pl 
      ran test-model.noalloc.hist1d.pl compared with clm3_expa_12 
	 1d history file output was identical except for TSNOW, SNOWLIQ and SNOWICE 
	
   sgi-irix64 (tempest)
      ran test-model.noalloc.pl and test-model.pl (CN is on)
         diagnostic output was the same for the first 3 timesteps and then started diverging
      ran test-model.pl -res T42cnoff (CN is off)
      ran test-model.noalloc.pl -res DGVM 

   ***Note*** testing must still be done for COUP_CSM and COUP_CAM model
   ***Note*** more testing needs to be done with DGVM to validate answers 
   ***Note*** did not test generation of surface datasets, this must also be done
	
===============================================================
===============================================================

clm3_expa_12
Originator: thornton ( Peter Thornton)
Date: Mon Oct 18 13:03:57 MDT 2004
Model: CLM
Version: CLM3.expa.12
One-line Summary: Moved surface albedo call to end of driver loop.
Requires change in build system: no
(one-line description of changes: Makefile, include files, directories, etc.)
(Detailed description below)
Tested to work coupled with CCSM: yes
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: Yes
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: Mariana Vertenstein, Peter Thornton
Changes answers: Yes (new-physics)
Name of tests cases on NCAR Mass-Store: (For changes that change answers)
ccsm3_K_sa1, ccsm3_K_sa2, ccsm3_K_cnsa1, ccsm3_K_cnsa2
Changes made:

Merged loop1 and loop2 in clm driver. Now surface albedo is called at the
end of the loop, and csm_send is called after the loop. This change is the
first step in getting all updates to prognostic variables moved to the end
of the timestep, in preparation for water and carbon isotope code.

===============================================================
===============================================================

clm3_expa_11
Originator: forrest (Forrest Hoffman)
Date: Mon Sep 20 11:49:36 MDT 2004
Model: CLM
Version: CLM3.expa.11
One-line Summary: Added experimental CASA' carbon cycle model to CLM.  Renamed *_transfer* variables in CN code to *_xfer* and modified history field names to match.
Requires change in build system: no
Tested to work coupled with CCSM: no
Tested to work with CAM: yes
Machines tested: IBM (cheetah and blackforest), x86 Linux (anchorage), Cray X1 (phoenix)
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself, Jasmin John
Changes answers: no (bit-for-bit)
Changes made:

Added the CASA' carbon cycle model to the CLM code.  CASA' can be used by
compiling with the CASA and SUNSHA cpp variables set.  It can not be used
with either DGVM or CN enabled.

Renamed all *_transfer* variable in the CN code to *_xfer* and modified
history field names consistently, so *_TRANSFER* fields became *_XFER* fields.

Ran test-model on cheetah, blackforest, anchorage, and phoenix.

===============================================================
===============================================================
	
clm3_expa_10
Originator: mvertens ( Mariana Vertenstein)
Date: Wed Aug 25 11:10:34 MDT 2004
Model: CLM
Version: CLM3.expa.10
One-line Summary: put in new subgrid initialization interface
Requires change in build system: no (unless a new crop landunit is desired)
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: no (bit-for-bit) (except for roundoff on 2d history files)
Changes made:
1) Removed cpp variable NOCOMPETE from code.
2) Added namelist variable create_crop_landunit.  
   This permits the user to decide if a separate crop landunit is to
   be created with the new surface dataset format (where all pfts appear).
   By default create_crop_andunit is set to .false.
   Removed logic that tied the use of new surface dataset format to the presence
   of a separate crop landunit.
   modified files:
     main/controlMod.F90
     main/surfFileMod.F90
     min/clm_varctl.F90.
3) Unified interface to create gridcells and landunits.
   modified files:
     main/Attic/decompMod.F90
     main/histFileMod.F90
     main/inicFileMod.F90
     main/Attic/initGridCellsMod.F90
   added files:
     main/initGridIndexMod.F90
     main/initSubgridMod.F90
   - all logic to create new landunits now goes in module initSubGridMod.F90.
   - If a new landunit (landunit_xxx) is to be created
      o subroutine get_gcell_info should be modified to contain logic for landunit_xxx
      o a new subroutine set_landunit_xxx should be added to the module
      o a new call to set_landunit_xxx should be added in subroutine initGridCells in 
        module subroutine initGridCellsMod.F90

       call set_landunit_veg_compete( &
            ltype=xxx, wtxy=wtxy, vegxy=vegxy, &
            i=i      , j=j      , gi=gi      , li=li      , ci=ci      , pi=pi, &
            i_sn=i_sn, j_sn=j_sn, gi_sn=gi_sn, li_sn=li_sn, ci_sn=ci_sn, pi_sn=pi_sn, &
            nump=nump, numc=numc, numl=numl, &
            land1d_sn_gi=land1d_sn_gi, cols1d_sn_li=cols1d_sn_li, cols1d_sn_gi=cols1d_sn_gi, &
            pfts1d_sn_ci=pfts1d_sn_ci, pfts1d_sn_li=pfts1d_sn_li, pfts1d_sn_gi=pfts1d_sn_gi)

       note - the only thing that is unique about this call is the setting of ltype.
4) Testing done
   a) ran test-model.pl (with CN on) and verified that code is bfb with clm3_expa_9.
      Note, however, that the 2d history output will have roundoff differences with 
      respect to clm3_expa_9 due to the new calculation of the weights in initSubGridMod.F90.
      Also verified that the initial datasets created with clm3_exap_10 were bfb with clm3_expa_9.
   b) verified that clm3_expa_10 is bfb with clm3_expa_9 when create_crop_landunit=.true..
      and a new format surface dataset is used 
      (fsurdat = '/fs/cgd/csm/inputdata/lnd/clm2/srfdata/csm/surface-data.128x064_atm.gx1v3_ocn.allpfts_c040426.nc).
===============================================================
===============================================================

clm3_expa_9
Originator: thornton ( Peter Thornton)
Date: Sat Aug 14 01:09:21 MDT 2004
Model: CLM
Version: CLM3.expa.9
One-line Summary: Added constraint preventing zero height in CNVegStructUpdateMod.F90
Requires change in build system: no
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: myself
Changes answers: Yes (new-physics)
Name of tests cases on NCAR Mass-Store: (For changes that change answers)
Changes made:
Fixed a bug in CNVegStructUpdateMod.F90 that caused divide-by-zero in
FrictionVelocity when htop -> 0.0, causing z0m -> 0.0. Added constraint so that
htop is always greater than 0. Bug only appeared in fire simulation when deadstemc
was forced very low by fire.
===============================================================
===============================================================

clm3_expa_8
Originator: mvertens ( Mariana Vertenstein)
Date: Thu Aug 12 15:35:51 MDT 2004
Model: CLM
Version: CLM3.expa.8
One-line Summary: merged in changes from clm3_deva_10 to clm3_deva_21 except for removal of DUST code
Requires change in build system: no
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: no (bit-for-bit)
Changes made:
1) Brought clm_exp branch up to date with clm3_deva_21
   (branch was created starting from clm3_deva_10)
2) Testing done:
   Ran test-model.pl at T42 on IBM and verified that it was 
   bfb with clm3_expa_7
===============================================================
===============================================================

clm3_expa_7
Originator: thornton ( Peter Thornton)
Date: Wed Aug  4 13:29:18 MDT 2004
Model: CLM
Version: CLM3.expa.7
One-line Summary: Added fire to CN code, other minor mods
Requires change in build system: no
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: myself
Changes answers: Yes (new-physics)
Changes made:
1. Added Thonicke fire algorithm, working mainly from 2001 paper. Modifications
   to that algorithm made to represent fire occurrence on every timestep, instead of
   as an annual process. Set cpp variable NOFIRE in job script to eliminate the 
   effects of fire algorithm (results bit-for-bit with previous code).
2. Modified CNPrecisionControlMod.F90 to truncate C and N state variables when they
   go below a specified threshold value.  Tracking these modifications in new
   truncation state variables, which accumulate the net changes over a run.
3. Moved CN state update calls and summary call into CNEcosysdyn, from driver.
   (bit-for-bit)
===============================================================
===============================================================

clm3_expa_6
Originator: thornton ( Peter Thornton)
Date: Fri Jul 16 13:17:43 MDT 2004
Model: CLM
Version: CLM3.expa.6
One-line Summary: Added initial file capability for CN code
Requires change in build system: no
(one-line description of changes: Makefile, include files, directories, etc.)
(Detailed description below)
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: yes (some bug fixes)
Changes made:

1. Added all required fields on initial file for CN start from spunup values
2. (bug fix) Added pepv%tampsum_npp and pepv%annsum_npp to CNSetPepv()
3. (bug fix) Added pepv%prev_leafc_to_litter and pepv%prev_frootc_to_litter
   to CNiniTimeVar().
4. Added totlitn, totsomn, totecosysn, totcoln to column loop of
   CNiniTimeVar(). Added dispvegn, storvegn, totvegn, totpftn to 
   pft loop of CNiniTimeVar().
5. set all c and n state and flux variables to 0.0 on special landunits, instead of spval.  
6. (bug fix) Added missing (p) to frac_veg_nosno in CNiniSpecial().
7. Modified treatment of AGNPP and BGNPP so that they correspond better to
   likely measurements of above and belowground NPP, in CSummary().
8. modified setting for noveg pft rootfr from spval to 0.0

===============================================================
===============================================================

clm3_expa_5
Originator: thornton ( Peter Thornton)
Date: Thu Jul  1 15:37:19 MDT 2004
Model: CLM
Version: CLM3.expa.5
One-line Summary: added two files that were omitted from clm3_expa_4 tag
Requires change in build system: no
(one-line description of changes: Makefile, include files, directories, etc.)
(Detailed description below)
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM, SGI, Compaq
Tested that restarts are bit-for-bit: no
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: myself
Changes answers: no (bit-for-bit) 
Changes made:
added two files (CNNdynamicsMod.F90 and ndepFileMof.F90) that
were omitted from the clm3_expa_4 tag

===============================================================
===============================================================

clm3_expa_4
Originator: thornton ( Peter Thornton)
Date: Tue Jun 29 09:30:18 MDT 2004
Model: CLM
Version: CLM3.expa.4
One-line Summary: Added NDep input, NFix, NLeaching, NSummary
Requires change in build system: no
Modifications to finish the N cycle
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: Yes 
Changes made:
1. Added routine to read a new surface dataset for N deposition (optional)
2. Added routine to estimate biological N fixation as a function of annual NPP
3. Added N leaching routine, function of mineral N concentration and drainage flow
4. Added new N cycle summary variables as standard history file outputs (with CN on)
5. Turned on bulk denitrification (previously implemented, but constant set to 0)
6. Fixed problem with current datasets where temperate deciduous forest was being assigned
   in the tropics - the phenology algorithm for temperate deciduous doesn't work in this case
   because of daylength constraints.  These pfts are now set on initialization to seasonal
   deciduous types.  Solves high-LAI problem in tropics.
7. Fixed bug in calculation of diagnostic total carbon (previously excluded coarse woody debris).
8. Added coarse woody debris decomposition fluxes (previously turned off).
===============================================================
===============================================================

clm3_expa_3
Originator: thornton ( Peter Thornton)
Date: Thu May 27 15:01:39 MDT 2004
Model: CLM
Version: CLM3.expa.3
One-line Summary: Merged Thornton's CN code onto clm_exp branch
Requires change in build system: no
(one-line description of changes: Makefile, include files, directories, etc.)
(Detailed description below)
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM, SGI, Compaq
Tested that restarts are bit-for-bit: no
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: myself
Changes answers: no (bit-for-bit)
Changes made:
Merged Thornton's CN code from branch clm2_deva_41_brnch_cn onto the new
clm_exp branch.  Tested that the results are BFB for 1-day run against 
clm3_expa_2 with all CN options turned off, and tested that results are
BFB for 1-day run against the final tag on the original CN branch
(clm3_expa_2_brnchT_cn3_9) with all CN options turned on.

===============================================================
===============================================================

clm3_expa_2
Originator: mvertens ( Mariana Vertenstein)
Date: Fri Apr 30 10:21:42 MDT 2004
Model: CLM
Version: CLM3.expa.2
One-line Summary: removed cpl/ code directory from csm_share/ 
Requires change in build system: no
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: none
Tested that restarts are bit-for-bit: no
Tested that different domain decompositions match bit-for-bit: no
Code reviewed by: myself
Changes answers: no (bit-for-bit) 
Name of tests cases on NCAR Mass-Store: (For changes that change answers)
Changes made:
Removed cpl/ code directory from csm_share/ - this is never needed
	
===============================================================
===============================================================

clm3_expa_1
Originator: erik ( Erik Kluzek)
Date: Wed Apr 28 14:33:52 MDT 2004
Model: CLM
Version: CLM3.expa.1
One-line Summary: Start of clm_exp experimental development branch -- same as clm3_deva_10
Requires change in build system: no
Tested to work coupled with CCSM: no
Tested to work with CAM: no
Machines tested: IBM, SGI, Linux
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: no (bit-for-bit)
Changes made:

This is the start of the clm_exp experimental development 
branch. This version is the same as clm3_deva_10 which was checked
into clm_dev by Mariana Vertenstein on April 27th, 2004.
===============================================================
===============================================================
===============================================================





















