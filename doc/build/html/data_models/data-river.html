

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9. Data River (DROF) &#8212; CIME 5.3.0_alpha17 documentation</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.3.0_alpha17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Data Wave (DWAV)" href="data-wave.html" />
    <link rel="prev" title="8. Data Ocean (DOCN)" href="data-ocean.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="data-wave.html" title="10. Data Wave (DWAV)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="data-ocean.html" title="8. Data Ocean (DOCN)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.3.0_alpha17 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">CIME Data Models</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">9. Data River (DROF)</a><ul>
<li><a class="reference internal" href="#xml-variables">9.1. xml variables</a></li>
<li><a class="reference internal" href="#datamode-values">9.2. datamode values</a></li>
<li><a class="reference internal" href="#namelists">9.3. Namelists</a></li>
<li><a class="reference internal" href="#drof-mode-datamode-and-streams">9.4. DROF_MODE, datamode and streams</a></li>
<li><a class="reference internal" href="#streams-independent-of-drof-mode-value">9.5. Streams independent of DROF_MODE value</a></li>
<li><a class="reference internal" href="#drof-field-names">9.6. DROF Field names</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="data-ocean.html"
                        title="previous chapter">8. Data Ocean (DOCN)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="data-wave.html"
                        title="next chapter">10. Data Wave (DWAV)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/data_models/data-river.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-river-drof">
<span id="data-river"></span><h1>9. Data River (DROF)<a class="headerlink" href="#data-river-drof" title="Permalink to this headline">¶</a></h1>
<p>The data river model (DROF) provides river runoff data primarily to be used by the prognostic ocean component.
This data can either be observational (climatological or interannual river data) or data from a previous model run that is output to coupler history files and then read back in by DROF.</p>
<div class="section" id="xml-variables">
<span id="drof-xml-vars"></span><h2>9.1. xml variables<a class="headerlink" href="#xml-variables" title="Permalink to this headline">¶</a></h2>
<p>The following are xml variables that CIME supports for DROF.
These variables are defined in <code class="docutils literal"><span class="pre">$CIMEROOT/src/components/data_comps/drof/cime_config/config_component.xml</span></code>.
These variables will appear in <code class="docutils literal"><span class="pre">env_run.xml</span></code> and are used by the DROF <code class="docutils literal"><span class="pre">cime_config/buildnml</span></code> script to generate the DROF namelist file <code class="docutils literal"><span class="pre">drof_in</span></code> and the required associated stream files for the case.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These xml variables are used by the the drof&#8217;s <strong>cime_config/buildnml</strong> script in conjunction with drof&#8217;s <strong>cime_config/namelist_definition_drof.xml</strong> file to generate the namelist file <code class="docutils literal"><span class="pre">drof_in</span></code>.</p>
</div>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">&#8220;DROF xml variables&#8221;</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">xml variable</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DROF_MODE</td>
<td>Data mode</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Valid values are: NULL,CPLHIST,DIATREN_ANN_RX1,DIATREN_IAF_RX1</td>
</tr>
<tr class="row-even"><td>DROF_CPLHIST_CASE</td>
<td>Coupler history data mode case name</td>
</tr>
<tr class="row-odd"><td>DROF_CPLHIST_DIR</td>
<td>Coupler history data mode directory containing coupler history data</td>
</tr>
<tr class="row-even"><td>DROF_CPLHIST_YR_ALIGN</td>
<td>Coupler history data model simulation year corresponding to data starting year</td>
</tr>
<tr class="row-odd"><td>DROF_CPLHIST_YR_START</td>
<td>Coupler history data model starting year to loop data over</td>
</tr>
<tr class="row-even"><td>DROF_CPLHIST_YR_END</td>
<td>Coupler history data model ending year to loop data over</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="datamode-values">
<span id="drof-datamodes"></span><h2>9.2. datamode values<a class="headerlink" href="#datamode-values" title="Permalink to this headline">¶</a></h2>
<p>The xml variable <code class="docutils literal"><span class="pre">DROF_MODE</span></code> sets the streams that are associated with DROF and also sets the namelist variable <code class="docutils literal"><span class="pre">datamode</span></code> that specifies what additional operations need to be done by DROF on the streams before returning to the driver.
One of the variables in <code class="docutils literal"><span class="pre">shr_strdata_nml</span></code> is <code class="docutils literal"><span class="pre">datamode</span></code>, whose value is a character string.  Each data model has a unique set of <code class="docutils literal"><span class="pre">datamode</span></code> values that it supports.
The valid values for <code class="docutils literal"><span class="pre">datamode</span></code> are set in the file <code class="docutils literal"><span class="pre">namelist_definition_drof.xml</span></code> using the xml variable <code class="docutils literal"><span class="pre">DROF_MODE</span></code> in the <code class="docutils literal"><span class="pre">config_component.xml</span></code> file for DROF.
CIME will generate a value <code class="docutils literal"><span class="pre">datamode</span></code> that is compset dependent.</p>
<p>The following are the supported DROF datamode values and their relationship to the <code class="docutils literal"><span class="pre">DROF_MODE</span></code> xml variable value.</p>
<table border="1" class="colwidths-given docutils" id="id2">
<caption><span class="caption-text">&#8220;Valid values for datamode namelist variable&#8221;</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">datamode variable</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NULL</td>
<td>Turns off the data model as a provider of data to the coupler.  The rof_present flag will be set to false and the coupler will assume no exchange of data to or from the data model.</td>
</tr>
<tr class="row-odd"><td>COPYALL</td>
<td>Copies all fields directly from the input data streams Any required fields not found on an input stream will be set to zero.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="namelists">
<h2>9.3. Namelists<a class="headerlink" href="#namelists" title="Permalink to this headline">¶</a></h2>
<p>The data river runoff model (DROF) provides data river input to prognostic components such as the ocean.</p>
<p>The namelist file for DROF is <code class="docutils literal"><span class="pre">drof_in</span></code>.</p>
<p>As is the case for all data models, DROF namelists can be separated into two groups, stream-independent and stream-dependent.
The stream dependent group is <a class="reference internal" href="input-streams.html#input-streams"><span class="std std-ref">shr_strdata_nml</span></a>.
The stream-independent group is <code class="docutils literal"><span class="pre">drof_nml</span></code> and the DROF stream-independent namelist variables are:</p>
<table border="1" class="docutils" id="drof-stream-independent-namelists">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>decomp</td>
<td><p class="first">decomposition strategy (1d, root)</p>
<p class="last">1d =&gt; vector decomposition, root =&gt; run on master task</p>
</td>
</tr>
<tr class="row-even"><td>restfilm</td>
<td>master restart filename</td>
</tr>
<tr class="row-odd"><td>restfils</td>
<td>stream restart filename</td>
</tr>
<tr class="row-even"><td>force_prognostic_true</td>
<td>TRUE =&gt; force prognostic behavior</td>
</tr>
</tbody>
</table>
<p>To change the namelist settings in <code class="docutils literal"><span class="pre">drof_in</span></code>, edit the file <code class="docutils literal"><span class="pre">user_nl_drof</span></code> in your case directory.</p>
</div>
<div class="section" id="drof-mode-datamode-and-streams">
<h2>9.4. DROF_MODE, datamode and streams<a class="headerlink" href="#drof-mode-datamode-and-streams" title="Permalink to this headline">¶</a></h2>
<p>The following tabe describes the valid values of <code class="docutils literal"><span class="pre">DROF_MODE</span></code>, and how it relates to the associated input streams and the <code class="docutils literal"><span class="pre">datamode</span></code> namelist variable.</p>
<table border="1" class="colwidths-given docutils" id="id3">
<caption><span class="caption-text">&#8220;Relationship between DROF_MODE, datamode and streams&#8221;</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DROF_MODE</th>
<th class="head">description-streams-datamode</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NULL</td>
<td>null mode</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>streams: none</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>datamode: NULL</td>
</tr>
<tr class="row-odd"><td>DIATREN_ANN_RX1</td>
<td>Reads in annual forcing river data used for CORE2 forcing runs.</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>streams: rof.diatren_ann_rx1</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>datamode: COPYALL</td>
</tr>
<tr class="row-even"><td>DIATREN_IAF_RX1</td>
<td>Reads in intra-annual forcing river data used for CORE2 forcing runs.</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>streams: rof.diatren_iaf_rx1</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>datamode: COPYALL</td>
</tr>
<tr class="row-odd"><td>CPLHIST</td>
<td>Reads in data from coupler history files generated by a previous run.</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>streams: rof.cplhist</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>datamode: COPYALL</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="streams-independent-of-drof-mode-value">
<span id="drof-mode-independent-streams"></span><h2>9.5. Streams independent of DROF_MODE value<a class="headerlink" href="#streams-independent-of-drof-mode-value" title="Permalink to this headline">¶</a></h2>
<p>There are no datamode independent streams for DROF.</p>
</div>
<div class="section" id="drof-field-names">
<span id="drof-fields"></span><h2>9.6. DROF Field names<a class="headerlink" href="#drof-field-names" title="Permalink to this headline">¶</a></h2>
<p>DROF defines a set of pre-defined internal field names as well as mappings for how those field names map to the fields sent to the coupler.
In general, the stream input file should translate the stream input variable names into the <code class="docutils literal"><span class="pre">drof_fld</span></code> names for use within the data rofosphere model.</p>
<table border="1" class="colwidths-given docutils" id="id4">
<caption><span class="caption-text">&#8220;DROF internal field names&#8221;</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">drof_fld (avifld)</th>
<th class="head">driver_fld (avofld)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>roff</td>
<td>Forr_rofl</td>
</tr>
<tr class="row-odd"><td>ioff</td>
<td>Forr_rofi</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="data-wave.html" title="10. Data Wave (DWAV)"
             >next</a> |</li>
        <li class="right" >
          <a href="data-ocean.html" title="8. Data Ocean (DOCN)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.3.0_alpha17 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >CIME Data Models</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Mariana Vertenstein, Rob Jacob, Jim Edwards, Jim Foucar, Alice Bertini, Bill Sacks.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>